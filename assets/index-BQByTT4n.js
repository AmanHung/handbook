(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var l0={exports:{}},cc={},c0={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=Symbol.for("react.element"),C1=Symbol.for("react.portal"),P1=Symbol.for("react.fragment"),R1=Symbol.for("react.strict_mode"),j1=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),O1=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),L1=Symbol.for("react.memo"),F1=Symbol.for("react.lazy"),vm=Symbol.iterator;function U1(t){return t===null||typeof t!="object"?null:(t=vm&&t[vm]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d0=Object.assign,h0={};function mi(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}mi.prototype.isReactComponent={};mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f0(){}f0.prototype=mi.prototype;function bh(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}var Eh=bh.prototype=new f0;Eh.constructor=bh;d0(Eh,mi.prototype);Eh.isPureReactComponent=!0;var _m=Array.isArray,p0=Object.prototype.hasOwnProperty,Th={current:null},m0={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)p0.call(e,r)&&!m0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ho,type:t,key:i,ref:o,props:s,_owner:Th.current}}function z1(t,e){return{$$typeof:Ho,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ho}function $1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xm=/\/+/g;function vu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$1(""+t.key):e.toString(36)}function Ga(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ho:case C1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+vu(o,0):r,_m(s)?(n="",t!=null&&(n=t.replace(xm,"$&/")+"/"),Ga(s,e,n,"",function(h){return h})):s!=null&&(Ih(s)&&(s=z1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",_m(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+vu(i,c);o+=Ga(i,e,n,u,s)}else if(u=U1(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+vu(i,c++),o+=Ga(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ba(t,e,n){if(t==null)return t;var r=[],s=0;return Ga(t,r,"","",function(i){return e.call(n,i,s++)}),r}function B1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Ka={transition:null},q1={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Ka,ReactCurrentOwner:Th};function y0(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ba,forEach:function(t,e,n){ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ba(t,function(){e++}),e},toArray:function(t){return ba(t,function(e){return e})||[]},only:function(t){if(!Ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=mi;he.Fragment=P1;he.Profiler=j1;he.PureComponent=bh;he.StrictMode=R1;he.Suspense=M1;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q1;he.act=y0;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Th.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)p0.call(e,u)&&!m0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Ho,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:V1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:D1,_context:t},t.Consumer=t};he.createElement=g0;he.createFactory=function(t){var e=g0.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:O1,render:t}};he.isValidElement=Ih;he.lazy=function(t){return{$$typeof:F1,_payload:{_status:-1,_result:t},_init:B1}};he.memo=function(t,e){return{$$typeof:L1,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Ka.transition;Ka.transition={};try{t()}finally{Ka.transition=e}};he.unstable_act=y0;he.useCallback=function(t,e){return wt.current.useCallback(t,e)};he.useContext=function(t){return wt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};he.useEffect=function(t,e){return wt.current.useEffect(t,e)};he.useId=function(){return wt.current.useId()};he.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return wt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};he.useRef=function(t){return wt.current.useRef(t)};he.useState=function(t){return wt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return wt.current.useTransition()};he.version="18.3.1";c0.exports=he;var z=c0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=z,W1=Symbol.for("react.element"),G1=Symbol.for("react.fragment"),K1=Object.prototype.hasOwnProperty,Q1=H1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X1={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)K1.call(e,r)&&!X1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:W1,type:t,key:i,ref:o,props:s,_owner:Q1.current}}cc.Fragment=G1;cc.jsx=v0;cc.jsxs=v0;l0.exports=cc;var l=l0.exports,_0={exports:{}},Lt={},x0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,J){var D=M.length;M.push(J);e:for(;0<D;){var K=D-1>>>1,X=M[K];if(0<s(X,J))M[K]=J,M[D]=X,D=K;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var J=M[0],D=M.pop();if(D!==J){M[0]=D;e:for(var K=0,X=M.length,re=X>>>1;K<re;){var ue=2*(K+1)-1,ee=M[ue],Ce=ue+1,W=M[Ce];if(0>s(ee,D))Ce<X&&0>s(W,ee)?(M[K]=W,M[Ce]=D,K=Ce):(M[K]=ee,M[ue]=D,K=ue);else if(Ce<X&&0>s(W,D))M[K]=W,M[Ce]=D,K=Ce;else break e}}return J}function s(M,J){var D=M.sortIndex-J.sortIndex;return D!==0?D:M.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,m=null,g=3,T=!1,S=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(M){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=M)r(h),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(h)}}function j(M){if(N=!1,I(M),!S)if(n(u)!==null)S=!0,G(U);else{var J=n(h);J!==null&&te(j,J.startTime-M)}}function U(M,J){S=!1,N&&(N=!1,x(y),y=-1),T=!0;var D=g;try{for(I(J),m=n(u);m!==null&&(!(m.expirationTime>J)||M&&!A());){var K=m.callback;if(typeof K=="function"){m.callback=null,g=m.priorityLevel;var X=K(m.expirationTime<=J);J=t.unstable_now(),typeof X=="function"?m.callback=X:m===n(u)&&r(u),I(J)}else r(u);m=n(u)}if(m!==null)var re=!0;else{var ue=n(h);ue!==null&&te(j,ue.startTime-J),re=!1}return re}finally{m=null,g=D,T=!1}}var $=!1,b=null,y=-1,w=5,E=-1;function A(){return!(t.unstable_now()-E<w)}function P(){if(b!==null){var M=t.unstable_now();E=M;var J=!0;try{J=b(!0,M)}finally{J?k():($=!1,b=null)}}else $=!1}var k;if(typeof _=="function")k=function(){_(P)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,V=q.port2;q.port1.onmessage=P,k=function(){V.postMessage(null)}}else k=function(){C(P,0)};function G(M){b=M,$||($=!0,k())}function te(M,J){y=C(function(){M(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){S||T||(S=!0,G(U))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var D=g;g=J;try{return M()}finally{g=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,J){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var D=g;g=M;try{return J()}finally{g=D}},t.unstable_scheduleCallback=function(M,J,D){var K=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?K+D:K):D=K,M){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=D+X,M={id:p++,callback:J,priorityLevel:M,startTime:D,expirationTime:X,sortIndex:-1},D>K?(M.sortIndex=D,e(h,M),n(u)===null&&M===n(h)&&(N?(x(y),y=-1):N=!0,te(j,D-K))):(M.sortIndex=X,e(u,M),S||T||(S=!0,G(U))),M},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(M){var J=g;return function(){var D=g;g=J;try{return M.apply(this,arguments)}finally{g=D}}}})(w0);x0.exports=w0;var Y1=x0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1=z,Mt=Y1;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b0=new Set,_o={};function hs(t,e){Js(t,e),Js(t+"Capture",e)}function Js(t,e){for(_o[t]=e,t=0;t<e.length;t++)b0.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rd=Object.prototype.hasOwnProperty,Z1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wm={},bm={};function eb(t){return rd.call(bm,t)?!0:rd.call(wm,t)?!1:Z1.test(t)?bm[t]=!0:(wm[t]=!0,!1)}function tb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nb(t,e,n,r){if(e===null||typeof e>"u"||tb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var kh=/[\-:]([a-z])/g;function Nh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kh,Nh);rt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kh,Nh);rt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kh,Nh);rt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sh(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nb(e,n,s,r)&&(n=null),r||s===null?eb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qn=J1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ea=Symbol.for("react.element"),Ss=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Ah=Symbol.for("react.strict_mode"),sd=Symbol.for("react.profiler"),E0=Symbol.for("react.provider"),T0=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),id=Symbol.for("react.suspense"),od=Symbol.for("react.suspense_list"),Ph=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),I0=Symbol.for("react.offscreen"),Em=Symbol.iterator;function Ui(t){return t===null||typeof t!="object"?null:(t=Em&&t[Em]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,_u;function Ki(t){if(_u===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_u=e&&e[1]||""}return`
`+_u+t}var xu=!1;function wu(t,e){if(!t||xu)return"";xu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{xu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ki(t):""}function rb(t){switch(t.tag){case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 2:case 15:return t=wu(t.type,!1),t;case 11:return t=wu(t.type.render,!1),t;case 1:return t=wu(t.type,!0),t;default:return""}}function ad(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Ss:return"Portal";case sd:return"Profiler";case Ah:return"StrictMode";case id:return"Suspense";case od:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T0:return(t.displayName||"Context")+".Consumer";case E0:return(t._context.displayName||"Context")+".Provider";case Ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ph:return e=t.displayName||null,e!==null?e:ad(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return ad(t(e))}catch{}}return null}function sb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ad(e);case 8:return e===Ah?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function k0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ib(t){var e=k0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ta(t){t._valueTracker||(t._valueTracker=ib(t))}function N0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=k0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ld(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S0(t,e){e=e.checked,e!=null&&Sh(t,"checked",e,!1)}function cd(t,e){S0(t,e);var n=br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ud(t,e.type,n):e.hasOwnProperty("defaultValue")&&ud(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Im(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ud(t,e,n){(e!=="number"||gl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qi=Array.isArray;function $s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function km(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Qi(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function A0(t,e){var n=br(e.value),r=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function C0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?C0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ia,P0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ia=Ia||document.createElement("div"),Ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var no={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ob=["Webkit","ms","Moz","O"];Object.keys(no).forEach(function(t){ob.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),no[e]=no[t]})});function R0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||no.hasOwnProperty(t)&&no[t]?(""+e).trim():e+"px"}function j0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=R0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ab=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fd(t,e){if(e){if(ab[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function pd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gd=null,Bs=null,qs=null;function Sm(t){if(t=Ko(t)){if(typeof gd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=pc(e),gd(t.stateNode,t.type,e))}}function D0(t){Bs?qs?qs.push(t):qs=[t]:Bs=t}function V0(){if(Bs){var t=Bs,e=qs;if(qs=Bs=null,Sm(t),e)for(t=0;t<e.length;t++)Sm(e[t])}}function O0(t,e){return t(e)}function M0(){}var bu=!1;function L0(t,e,n){if(bu)return t(e,n);bu=!0;try{return O0(t,e,n)}finally{bu=!1,(Bs!==null||qs!==null)&&(M0(),V0())}}function wo(t,e){var n=t.stateNode;if(n===null)return null;var r=pc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var yd=!1;if(jn)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){yd=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{yd=!1}function lb(t,e,n,r,s,i,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var ro=!1,yl=null,vl=!1,vd=null,cb={onError:function(t){ro=!0,yl=t}};function ub(t,e,n,r,s,i,o,c,u){ro=!1,yl=null,lb.apply(cb,arguments)}function db(t,e,n,r,s,i,o,c,u){if(ub.apply(this,arguments),ro){if(ro){var h=yl;ro=!1,yl=null}else throw Error(B(198));vl||(vl=!0,vd=h)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Am(t){if(fs(t)!==t)throw Error(B(188))}function hb(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Am(s),t;if(i===r)return Am(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function U0(t){return t=hb(t),t!==null?z0(t):null}function z0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z0(t);if(e!==null)return e;t=t.sibling}return null}var $0=Mt.unstable_scheduleCallback,Cm=Mt.unstable_cancelCallback,fb=Mt.unstable_shouldYield,pb=Mt.unstable_requestPaint,Fe=Mt.unstable_now,mb=Mt.unstable_getCurrentPriorityLevel,jh=Mt.unstable_ImmediatePriority,B0=Mt.unstable_UserBlockingPriority,_l=Mt.unstable_NormalPriority,gb=Mt.unstable_LowPriority,q0=Mt.unstable_IdlePriority,uc=null,hn=null;function yb(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(uc,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:xb,vb=Math.log,_b=Math.LN2;function xb(t){return t>>>=0,t===0?32:31-(vb(t)/_b|0)|0}var ka=64,Na=4194304;function Xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Xi(c):(i&=o,i!==0&&(r=Xi(i)))}else o=n&~s,o!==0?r=Xi(o):i!==0&&(r=Xi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function wb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=wb(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function _d(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H0(){var t=ka;return ka<<=1,!(ka&4194240)&&(ka=64),t}function Eu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function Eb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Dh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function W0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G0,Vh,K0,Q0,X0,xd=!1,Sa=[],cr=null,ur=null,dr=null,bo=new Map,Eo=new Map,er=[],Tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pm(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function $i(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ko(e),e!==null&&Vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ib(t,e,n,r,s){switch(e){case"focusin":return cr=$i(cr,t,e,n,r,s),!0;case"dragenter":return ur=$i(ur,t,e,n,r,s),!0;case"mouseover":return dr=$i(dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bo.set(i,$i(bo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Eo.set(i,$i(Eo.get(i)||null,t,e,n,r,s)),!0}return!1}function Y0(t){var e=qr(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=F0(n),e!==null){t.blockedOn=e,X0(t.priority,function(){K0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);md=r,n.target.dispatchEvent(r),md=null}else return e=Ko(n),e!==null&&Vh(e),t.blockedOn=n,!1;e.shift()}return!0}function Rm(t,e,n){Qa(t)&&n.delete(e)}function kb(){xd=!1,cr!==null&&Qa(cr)&&(cr=null),ur!==null&&Qa(ur)&&(ur=null),dr!==null&&Qa(dr)&&(dr=null),bo.forEach(Rm),Eo.forEach(Rm)}function Bi(t,e){t.blockedOn===e&&(t.blockedOn=null,xd||(xd=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,kb)))}function To(t){function e(s){return Bi(s,t)}if(0<Sa.length){Bi(Sa[0],t);for(var n=1;n<Sa.length;n++){var r=Sa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&Bi(cr,t),ur!==null&&Bi(ur,t),dr!==null&&Bi(dr,t),bo.forEach(e),Eo.forEach(e),n=0;n<er.length;n++)r=er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)Y0(n),n.blockedOn===null&&er.shift()}var Hs=qn.ReactCurrentBatchConfig,wl=!0;function Nb(t,e,n,r){var s=xe,i=Hs.transition;Hs.transition=null;try{xe=1,Oh(t,e,n,r)}finally{xe=s,Hs.transition=i}}function Sb(t,e,n,r){var s=xe,i=Hs.transition;Hs.transition=null;try{xe=4,Oh(t,e,n,r)}finally{xe=s,Hs.transition=i}}function Oh(t,e,n,r){if(wl){var s=wd(t,e,n,r);if(s===null)ju(t,e,r,bl,n),Pm(t,r);else if(Ib(s,t,e,n,r))r.stopPropagation();else if(Pm(t,r),e&4&&-1<Tb.indexOf(t)){for(;s!==null;){var i=Ko(s);if(i!==null&&G0(i),i=wd(t,e,n,r),i===null&&ju(t,e,r,bl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ju(t,e,r,null,n)}}var bl=null;function wd(t,e,n,r){if(bl=null,t=Rh(r),t=qr(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bl=t,null}function J0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mb()){case jh:return 1;case B0:return 4;case _l:case gb:return 16;case q0:return 536870912;default:return 16}default:return 16}}var ir=null,Mh=null,Xa=null;function Z0(){if(Xa)return Xa;var t,e=Mh,n=e.length,r,s="value"in ir?ir.value:ir.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xa=s.slice(t,1<r?1-r:void 0)}function Ya(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function jm(){return!1}function Ft(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Aa:jm,this.isPropagationStopped=jm,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),e}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lh=Ft(gi),Go=je({},gi,{view:0,detail:0}),Ab=Ft(Go),Tu,Iu,qi,dc=je({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qi&&(qi&&t.type==="mousemove"?(Tu=t.screenX-qi.screenX,Iu=t.screenY-qi.screenY):Iu=Tu=0,qi=t),Tu)},movementY:function(t){return"movementY"in t?t.movementY:Iu}}),Dm=Ft(dc),Cb=je({},dc,{dataTransfer:0}),Pb=Ft(Cb),Rb=je({},Go,{relatedTarget:0}),ku=Ft(Rb),jb=je({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Db=Ft(jb),Vb=je({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ob=Ft(Vb),Mb=je({},gi,{data:0}),Vm=Ft(Mb),Lb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ub={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ub[t])?!!e[t]:!1}function Fh(){return zb}var $b=je({},Go,{key:function(t){if(t.key){var e=Lb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fh,charCode:function(t){return t.type==="keypress"?Ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bb=Ft($b),qb=je({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Om=Ft(qb),Hb=je({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fh}),Wb=Ft(Hb),Gb=je({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kb=Ft(Gb),Qb=je({},dc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xb=Ft(Qb),Yb=[9,13,27,32],Uh=jn&&"CompositionEvent"in window,so=null;jn&&"documentMode"in document&&(so=document.documentMode);var Jb=jn&&"TextEvent"in window&&!so,ev=jn&&(!Uh||so&&8<so&&11>=so),Mm=" ",Lm=!1;function tv(t,e){switch(t){case"keyup":return Yb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cs=!1;function Zb(t,e){switch(t){case"compositionend":return nv(e);case"keypress":return e.which!==32?null:(Lm=!0,Mm);case"textInput":return t=e.data,t===Mm&&Lm?null:t;default:return null}}function eE(t,e){if(Cs)return t==="compositionend"||!Uh&&tv(t,e)?(t=Z0(),Xa=Mh=ir=null,Cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ev&&e.locale!=="ko"?null:e.data;default:return null}}var tE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tE[t.type]:e==="textarea"}function rv(t,e,n,r){D0(r),e=El(e,"onChange"),0<e.length&&(n=new Lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var io=null,Io=null;function nE(t){pv(t,0)}function hc(t){var e=js(t);if(N0(e))return t}function rE(t,e){if(t==="change")return e}var sv=!1;if(jn){var Nu;if(jn){var Su="oninput"in document;if(!Su){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),Su=typeof Um.oninput=="function"}Nu=Su}else Nu=!1;sv=Nu&&(!document.documentMode||9<document.documentMode)}function zm(){io&&(io.detachEvent("onpropertychange",iv),Io=io=null)}function iv(t){if(t.propertyName==="value"&&hc(Io)){var e=[];rv(e,Io,t,Rh(t)),L0(nE,e)}}function sE(t,e,n){t==="focusin"?(zm(),io=e,Io=n,io.attachEvent("onpropertychange",iv)):t==="focusout"&&zm()}function iE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hc(Io)}function oE(t,e){if(t==="click")return hc(e)}function aE(t,e){if(t==="input"||t==="change")return hc(e)}function lE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:lE;function ko(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rd.call(e,s)||!on(t[s],e[s]))return!1}return!0}function $m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bm(t,e){var n=$m(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$m(n)}}function ov(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ov(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function av(){for(var t=window,e=gl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gl(t.document)}return e}function zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cE(t){var e=av(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ov(n.ownerDocument.documentElement,n)){if(r!==null&&zh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Bm(n,i);var o=Bm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uE=jn&&"documentMode"in document&&11>=document.documentMode,Ps=null,bd=null,oo=null,Ed=!1;function qm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ed||Ps==null||Ps!==gl(r)||(r=Ps,"selectionStart"in r&&zh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oo&&ko(oo,r)||(oo=r,r=El(bd,"onSelect"),0<r.length&&(e=new Lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function Ca(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionend:Ca("Transition","TransitionEnd")},Au={},lv={};jn&&(lv=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function fc(t){if(Au[t])return Au[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lv)return Au[t]=e[n];return t}var cv=fc("animationend"),uv=fc("animationiteration"),dv=fc("animationstart"),hv=fc("transitionend"),fv=new Map,Hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){fv.set(t,e),hs(e,[t])}for(var Cu=0;Cu<Hm.length;Cu++){var Pu=Hm[Cu],dE=Pu.toLowerCase(),hE=Pu[0].toUpperCase()+Pu.slice(1);Pr(dE,"on"+hE)}Pr(cv,"onAnimationEnd");Pr(uv,"onAnimationIteration");Pr(dv,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(hv,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function Wm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,db(r,e,void 0,t),t.currentTarget=null}function pv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Wm(s,c,h),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Wm(s,c,h),i=u}}}if(vl)throw t=vd,vl=!1,vd=null,t}function ke(t,e){var n=e[Sd];n===void 0&&(n=e[Sd]=new Set);var r=t+"__bubble";n.has(r)||(mv(e,t,2,!1),n.add(r))}function Ru(t,e,n){var r=0;e&&(r|=4),mv(n,t,r,e)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[Pa]){t[Pa]=!0,b0.forEach(function(n){n!=="selectionchange"&&(fE.has(n)||Ru(n,!1,t),Ru(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pa]||(e[Pa]=!0,Ru("selectionchange",!1,e))}}function mv(t,e,n,r){switch(J0(e)){case 1:var s=Nb;break;case 4:s=Sb;break;default:s=Oh}n=s.bind(null,e,n,t),s=void 0,!yd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ju(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=qr(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}L0(function(){var h=i,p=Rh(n),m=[];e:{var g=fv.get(t);if(g!==void 0){var T=Lh,S=t;switch(t){case"keypress":if(Ya(n)===0)break e;case"keydown":case"keyup":T=Bb;break;case"focusin":S="focus",T=ku;break;case"focusout":S="blur",T=ku;break;case"beforeblur":case"afterblur":T=ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Dm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Pb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Wb;break;case cv:case uv:case dv:T=Db;break;case hv:T=Kb;break;case"scroll":T=Ab;break;case"wheel":T=Xb;break;case"copy":case"cut":case"paste":T=Ob;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Om}var N=(e&4)!==0,C=!N&&t==="scroll",x=N?g!==null?g+"Capture":null:g;N=[];for(var _=h,I;_!==null;){I=_;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,x!==null&&(j=wo(_,x),j!=null&&N.push(So(_,j,I)))),C)break;_=_.return}0<N.length&&(g=new T(g,S,null,n,p),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==md&&(S=n.relatedTarget||n.fromElement)&&(qr(S)||S[Dn]))break e;if((T||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,T?(S=n.relatedTarget||n.toElement,T=h,S=S?qr(S):null,S!==null&&(C=fs(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(T=null,S=h),T!==S)){if(N=Dm,j="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(N=Om,j="onPointerLeave",x="onPointerEnter",_="pointer"),C=T==null?g:js(T),I=S==null?g:js(S),g=new N(j,_+"leave",T,n,p),g.target=C,g.relatedTarget=I,j=null,qr(p)===h&&(N=new N(x,_+"enter",S,n,p),N.target=I,N.relatedTarget=C,j=N),C=j,T&&S)t:{for(N=T,x=S,_=0,I=N;I;I=bs(I))_++;for(I=0,j=x;j;j=bs(j))I++;for(;0<_-I;)N=bs(N),_--;for(;0<I-_;)x=bs(x),I--;for(;_--;){if(N===x||x!==null&&N===x.alternate)break t;N=bs(N),x=bs(x)}N=null}else N=null;T!==null&&Gm(m,g,T,N,!1),S!==null&&C!==null&&Gm(m,C,S,N,!0)}}e:{if(g=h?js(h):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var U=rE;else if(Fm(g))if(sv)U=aE;else{U=iE;var $=sE}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=oE);if(U&&(U=U(t,h))){rv(m,U,n,p);break e}$&&$(t,g,h),t==="focusout"&&($=g._wrapperState)&&$.controlled&&g.type==="number"&&ud(g,"number",g.value)}switch($=h?js(h):window,t){case"focusin":(Fm($)||$.contentEditable==="true")&&(Ps=$,bd=h,oo=null);break;case"focusout":oo=bd=Ps=null;break;case"mousedown":Ed=!0;break;case"contextmenu":case"mouseup":case"dragend":Ed=!1,qm(m,n,p);break;case"selectionchange":if(uE)break;case"keydown":case"keyup":qm(m,n,p)}var b;if(Uh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Cs?tv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(ev&&n.locale!=="ko"&&(Cs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Cs&&(b=Z0()):(ir=p,Mh="value"in ir?ir.value:ir.textContent,Cs=!0)),$=El(h,y),0<$.length&&(y=new Vm(y,t,null,n,p),m.push({event:y,listeners:$}),b?y.data=b:(b=nv(n),b!==null&&(y.data=b)))),(b=Jb?Zb(t,n):eE(t,n))&&(h=El(h,"onBeforeInput"),0<h.length&&(p=new Vm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=b))}pv(m,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function El(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wo(t,n),i!=null&&r.unshift(So(t,i,s)),i=wo(t,e),i!=null&&r.push(So(t,i,s))),t=t.return}return r}function bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=wo(n,i),u!=null&&o.unshift(So(n,u,c))):s||(u=wo(n,i),u!=null&&o.push(So(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pE=/\r\n?/g,mE=/\u0000|\uFFFD/g;function Km(t){return(typeof t=="string"?t:""+t).replace(pE,`
`).replace(mE,"")}function Ra(t,e,n){if(e=Km(e),Km(t)!==e&&n)throw Error(B(425))}function Tl(){}var Td=null,Id=null;function kd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,gE=typeof clearTimeout=="function"?clearTimeout:void 0,Qm=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof Qm<"u"?function(t){return Qm.resolve(null).then(t).catch(vE)}:Nd;function vE(t){setTimeout(function(){throw t})}function Du(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),To(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);To(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),dn="__reactFiber$"+yi,Ao="__reactProps$"+yi,Dn="__reactContainer$"+yi,Sd="__reactEvents$"+yi,_E="__reactListeners$"+yi,xE="__reactHandles$"+yi;function qr(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dn]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xm(t);t!==null;){if(n=t[dn])return n;t=Xm(t)}return e}t=n,n=t.parentNode}return null}function Ko(t){return t=t[dn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function pc(t){return t[Ao]||null}var Ad=[],Ds=-1;function Rr(t){return{current:t}}function Se(t){0>Ds||(t.current=Ad[Ds],Ad[Ds]=null,Ds--)}function Te(t,e){Ds++,Ad[Ds]=t.current,t.current=e}var Er={},pt=Rr(Er),St=Rr(!1),ts=Er;function Zs(t,e){var n=t.type.contextTypes;if(!n)return Er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function Il(){Se(St),Se(pt)}function Ym(t,e,n){if(pt.current!==Er)throw Error(B(168));Te(pt,e),Te(St,n)}function gv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,sb(t)||"Unknown",s));return je({},n,r)}function kl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,ts=pt.current,Te(pt,t),Te(St,St.current),!0}function Jm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=gv(t,e,ts),r.__reactInternalMemoizedMergedChildContext=t,Se(St),Se(pt),Te(pt,t)):Se(St),Te(St,n)}var Tn=null,mc=!1,Vu=!1;function yv(t){Tn===null?Tn=[t]:Tn.push(t)}function wE(t){mc=!0,yv(t)}function jr(){if(!Vu&&Tn!==null){Vu=!0;var t=0,e=xe;try{var n=Tn;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,mc=!1}catch(s){throw Tn!==null&&(Tn=Tn.slice(t+1)),$0(jh,jr),s}finally{xe=e,Vu=!1}}return null}var Vs=[],Os=0,Nl=null,Sl=0,Ut=[],zt=0,ns=null,kn=1,Nn="";function zr(t,e){Vs[Os++]=Sl,Vs[Os++]=Nl,Nl=t,Sl=e}function vv(t,e,n){Ut[zt++]=kn,Ut[zt++]=Nn,Ut[zt++]=ns,ns=t;var r=kn;t=Nn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kn=1<<32-nn(e)+s|n<<s|r,Nn=i+t}else kn=1<<i|n<<s|r,Nn=t}function $h(t){t.return!==null&&(zr(t,1),vv(t,1,0))}function Bh(t){for(;t===Nl;)Nl=Vs[--Os],Vs[Os]=null,Sl=Vs[--Os],Vs[Os]=null;for(;t===ns;)ns=Ut[--zt],Ut[zt]=null,Nn=Ut[--zt],Ut[zt]=null,kn=Ut[--zt],Ut[zt]=null}var Ot=null,Dt=null,Ae=!1,Zt=null;function _v(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Dt=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:kn,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Dt=null,!0):!1;default:return!1}}function Cd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pd(t){if(Ae){var e=Dt;if(e){var n=e;if(!Zm(t,e)){if(Cd(t))throw Error(B(418));e=hr(n.nextSibling);var r=Ot;e&&Zm(t,e)?_v(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Ot=t)}}else{if(Cd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ae=!1,Ot=t}}}function eg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function ja(t){if(t!==Ot)return!1;if(!Ae)return eg(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kd(t.type,t.memoizedProps)),e&&(e=Dt)){if(Cd(t))throw xv(),Error(B(418));for(;e;)_v(t,e),e=hr(e.nextSibling)}if(eg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Ot?hr(t.stateNode.nextSibling):null;return!0}function xv(){for(var t=Dt;t;)t=hr(t.nextSibling)}function ei(){Dt=Ot=null,Ae=!1}function qh(t){Zt===null?Zt=[t]:Zt.push(t)}var bE=qn.ReactCurrentBatchConfig;function Hi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Da(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tg(t){var e=t._init;return e(t._payload)}function wv(t){function e(x,_){if(t){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=gr(x,_),x.index=0,x.sibling=null,x}function i(x,_,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,_,I,j){return _===null||_.tag!==6?(_=$u(I,x.mode,j),_.return=x,_):(_=s(_,I),_.return=x,_)}function u(x,_,I,j){var U=I.type;return U===As?p(x,_,I.props.children,j,I.key):_!==null&&(_.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Jn&&tg(U)===_.type)?(j=s(_,I.props),j.ref=Hi(x,_,I),j.return=x,j):(j=sl(I.type,I.key,I.props,null,x.mode,j),j.ref=Hi(x,_,I),j.return=x,j)}function h(x,_,I,j){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=Bu(I,x.mode,j),_.return=x,_):(_=s(_,I.children||[]),_.return=x,_)}function p(x,_,I,j,U){return _===null||_.tag!==7?(_=Xr(I,x.mode,j,U),_.return=x,_):(_=s(_,I),_.return=x,_)}function m(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=$u(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ea:return I=sl(_.type,_.key,_.props,null,x.mode,I),I.ref=Hi(x,null,_),I.return=x,I;case Ss:return _=Bu(_,x.mode,I),_.return=x,_;case Jn:var j=_._init;return m(x,j(_._payload),I)}if(Qi(_)||Ui(_))return _=Xr(_,x.mode,I,null),_.return=x,_;Da(x,_)}return null}function g(x,_,I,j){var U=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return U!==null?null:c(x,_,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ea:return I.key===U?u(x,_,I,j):null;case Ss:return I.key===U?h(x,_,I,j):null;case Jn:return U=I._init,g(x,_,U(I._payload),j)}if(Qi(I)||Ui(I))return U!==null?null:p(x,_,I,j,null);Da(x,I)}return null}function T(x,_,I,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(I)||null,c(_,x,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ea:return x=x.get(j.key===null?I:j.key)||null,u(_,x,j,U);case Ss:return x=x.get(j.key===null?I:j.key)||null,h(_,x,j,U);case Jn:var $=j._init;return T(x,_,I,$(j._payload),U)}if(Qi(j)||Ui(j))return x=x.get(I)||null,p(_,x,j,U,null);Da(_,j)}return null}function S(x,_,I,j){for(var U=null,$=null,b=_,y=_=0,w=null;b!==null&&y<I.length;y++){b.index>y?(w=b,b=null):w=b.sibling;var E=g(x,b,I[y],j);if(E===null){b===null&&(b=w);break}t&&b&&E.alternate===null&&e(x,b),_=i(E,_,y),$===null?U=E:$.sibling=E,$=E,b=w}if(y===I.length)return n(x,b),Ae&&zr(x,y),U;if(b===null){for(;y<I.length;y++)b=m(x,I[y],j),b!==null&&(_=i(b,_,y),$===null?U=b:$.sibling=b,$=b);return Ae&&zr(x,y),U}for(b=r(x,b);y<I.length;y++)w=T(b,x,y,I[y],j),w!==null&&(t&&w.alternate!==null&&b.delete(w.key===null?y:w.key),_=i(w,_,y),$===null?U=w:$.sibling=w,$=w);return t&&b.forEach(function(A){return e(x,A)}),Ae&&zr(x,y),U}function N(x,_,I,j){var U=Ui(I);if(typeof U!="function")throw Error(B(150));if(I=U.call(I),I==null)throw Error(B(151));for(var $=U=null,b=_,y=_=0,w=null,E=I.next();b!==null&&!E.done;y++,E=I.next()){b.index>y?(w=b,b=null):w=b.sibling;var A=g(x,b,E.value,j);if(A===null){b===null&&(b=w);break}t&&b&&A.alternate===null&&e(x,b),_=i(A,_,y),$===null?U=A:$.sibling=A,$=A,b=w}if(E.done)return n(x,b),Ae&&zr(x,y),U;if(b===null){for(;!E.done;y++,E=I.next())E=m(x,E.value,j),E!==null&&(_=i(E,_,y),$===null?U=E:$.sibling=E,$=E);return Ae&&zr(x,y),U}for(b=r(x,b);!E.done;y++,E=I.next())E=T(b,x,y,E.value,j),E!==null&&(t&&E.alternate!==null&&b.delete(E.key===null?y:E.key),_=i(E,_,y),$===null?U=E:$.sibling=E,$=E);return t&&b.forEach(function(P){return e(x,P)}),Ae&&zr(x,y),U}function C(x,_,I,j){if(typeof I=="object"&&I!==null&&I.type===As&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Ea:e:{for(var U=I.key,$=_;$!==null;){if($.key===U){if(U=I.type,U===As){if($.tag===7){n(x,$.sibling),_=s($,I.props.children),_.return=x,x=_;break e}}else if($.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Jn&&tg(U)===$.type){n(x,$.sibling),_=s($,I.props),_.ref=Hi(x,$,I),_.return=x,x=_;break e}n(x,$);break}else e(x,$);$=$.sibling}I.type===As?(_=Xr(I.props.children,x.mode,j,I.key),_.return=x,x=_):(j=sl(I.type,I.key,I.props,null,x.mode,j),j.ref=Hi(x,_,I),j.return=x,x=j)}return o(x);case Ss:e:{for($=I.key;_!==null;){if(_.key===$)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(x,_.sibling),_=s(_,I.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Bu(I,x.mode,j),_.return=x,x=_}return o(x);case Jn:return $=I._init,C(x,_,$(I._payload),j)}if(Qi(I))return S(x,_,I,j);if(Ui(I))return N(x,_,I,j);Da(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,I),_.return=x,x=_):(n(x,_),_=$u(I,x.mode,j),_.return=x,x=_),o(x)):n(x,_)}return C}var ti=wv(!0),bv=wv(!1),Al=Rr(null),Cl=null,Ms=null,Hh=null;function Wh(){Hh=Ms=Cl=null}function Gh(t){var e=Al.current;Se(Al),t._currentValue=e}function Rd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ws(t,e){Cl=t,Hh=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(Hh!==t)if(t={context:t,memoizedValue:e,next:null},Ms===null){if(Cl===null)throw Error(B(308));Ms=t,Cl.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var Hr=null;function Kh(t){Hr===null?Hr=[t]:Hr.push(t)}function Ev(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Kh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function Qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,Kh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function Ja(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dh(t,n)}}function ng(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pl(t,e,n,r){var s=t.updateQueue;Zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=h=u=null,c=i;do{var g=c.lane,T=c.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:T,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,N=c;switch(g=e,T=n,N.tag){case 1:if(S=N.payload,typeof S=="function"){m=S.call(T,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=N.payload,g=typeof S=="function"?S.call(T,m,g):S,g==null)break e;m=je({},m,g);break e;case 2:Zn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else T={eventTime:T,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(h=p=T,u=m):p=p.next=T,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ss|=o,t.lanes=o,t.memoizedState=m}}function rg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Qo={},fn=Rr(Qo),Co=Rr(Qo),Po=Rr(Qo);function Wr(t){if(t===Qo)throw Error(B(174));return t}function Xh(t,e){switch(Te(Po,e),Te(Co,t),Te(fn,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hd(e,t)}Se(fn),Te(fn,e)}function ni(){Se(fn),Se(Co),Se(Po)}function Iv(t){Wr(Po.current);var e=Wr(fn.current),n=hd(e,t.type);e!==n&&(Te(Co,t),Te(fn,n))}function Yh(t){Co.current===t&&(Se(fn),Se(Co))}var Pe=Rr(0);function Rl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ou=[];function Jh(){for(var t=0;t<Ou.length;t++)Ou[t]._workInProgressVersionPrimary=null;Ou.length=0}var Za=qn.ReactCurrentDispatcher,Mu=qn.ReactCurrentBatchConfig,rs=0,Re=null,qe=null,Ke=null,jl=!1,ao=!1,Ro=0,EE=0;function lt(){throw Error(B(321))}function Zh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function ef(t,e,n,r,s,i){if(rs=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Za.current=t===null||t.memoizedState===null?NE:SE,t=n(r,s),ao){i=0;do{if(ao=!1,Ro=0,25<=i)throw Error(B(301));i+=1,Ke=qe=null,e.updateQueue=null,Za.current=AE,t=n(r,s)}while(ao)}if(Za.current=Dl,e=qe!==null&&qe.next!==null,rs=0,Ke=qe=Re=null,jl=!1,e)throw Error(B(300));return t}function tf(){var t=Ro!==0;return Ro=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Re.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Gt(){if(qe===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ke===null?Re.memoizedState:Ke.next;if(e!==null)Ke=e,qe=t;else{if(t===null)throw Error(B(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ke===null?Re.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function jo(t,e){return typeof e=="function"?e(t):e}function Lu(t){var e=Gt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,h=i;do{var p=h.lane;if((rs&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Re.lanes|=p,ss|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=c,on(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fu(t){var e=Gt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function kv(){}function Nv(t,e){var n=Re,r=Gt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,Nt=!0),r=r.queue,nf(Cv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Do(9,Av.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(B(349));rs&30||Sv(n,e,s)}return s}function Sv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Av(t,e,n,r){e.value=n,e.getSnapshot=r,Pv(e)&&Rv(t)}function Cv(t,e,n){return n(function(){Pv(e)&&Rv(t)})}function Pv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function Rv(t){var e=Vn(t,1);e!==null&&rn(e,t,1,-1)}function sg(t){var e=cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:t},e.queue=t,t=t.dispatch=kE.bind(null,Re,t),[e.memoizedState,t]}function Do(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jv(){return Gt().memoizedState}function el(t,e,n,r){var s=cn();Re.flags|=t,s.memoizedState=Do(1|e,n,void 0,r===void 0?null:r)}function gc(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Zh(r,o.deps)){s.memoizedState=Do(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Do(1|e,n,i,r)}function ig(t,e){return el(8390656,8,t,e)}function nf(t,e){return gc(2048,8,t,e)}function Dv(t,e){return gc(4,2,t,e)}function Vv(t,e){return gc(4,4,t,e)}function Ov(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mv(t,e,n){return n=n!=null?n.concat([t]):null,gc(4,4,Ov.bind(null,e,t),n)}function rf(){}function Lv(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fv(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Uv(t,e,n){return rs&21?(on(n,e)||(n=H0(),Re.lanes|=n,ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function TE(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Mu.transition;Mu.transition={};try{t(!1),e()}finally{xe=n,Mu.transition=r}}function zv(){return Gt().memoizedState}function IE(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$v(t))Bv(e,n);else if(n=Ev(t,e,n,r),n!==null){var s=xt();rn(n,t,r,s),qv(n,e,r)}}function kE(t,e,n){var r=mr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($v(t))Bv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,on(c,o)){var u=e.interleaved;u===null?(s.next=s,Kh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ev(t,e,s,r),n!==null&&(s=xt(),rn(n,t,r,s),qv(n,e,r))}}function $v(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function Bv(t,e){ao=jl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dh(t,n)}}var Dl={readContext:Wt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},NE={readContext:Wt,useCallback:function(t,e){return cn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:ig,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,el(4194308,4,Ov.bind(null,e,t),n)},useLayoutEffect:function(t,e){return el(4194308,4,t,e)},useInsertionEffect:function(t,e){return el(4,2,t,e)},useMemo:function(t,e){var n=cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IE.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=cn();return t={current:t},e.memoizedState=t},useState:sg,useDebugValue:rf,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=sg(!1),e=t[0];return t=TE.bind(null,t[1]),cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=cn();if(Ae){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Qe===null)throw Error(B(349));rs&30||Sv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ig(Cv.bind(null,r,i,t),[t]),r.flags|=2048,Do(9,Av.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cn(),e=Qe.identifierPrefix;if(Ae){var n=Nn,r=kn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},SE={readContext:Wt,useCallback:Lv,useContext:Wt,useEffect:nf,useImperativeHandle:Mv,useInsertionEffect:Dv,useLayoutEffect:Vv,useMemo:Fv,useReducer:Lu,useRef:jv,useState:function(){return Lu(jo)},useDebugValue:rf,useDeferredValue:function(t){var e=Gt();return Uv(e,qe.memoizedState,t)},useTransition:function(){var t=Lu(jo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:kv,useSyncExternalStore:Nv,useId:zv,unstable_isNewReconciler:!1},AE={readContext:Wt,useCallback:Lv,useContext:Wt,useEffect:nf,useImperativeHandle:Mv,useInsertionEffect:Dv,useLayoutEffect:Vv,useMemo:Fv,useReducer:Fu,useRef:jv,useState:function(){return Fu(jo)},useDebugValue:rf,useDeferredValue:function(t){var e=Gt();return qe===null?e.memoizedState=t:Uv(e,qe.memoizedState,t)},useTransition:function(){var t=Fu(jo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:kv,useSyncExternalStore:Nv,useId:zv,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yc={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=mr(t),i=Pn(r,s);i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(rn(e,t,s,r),Ja(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=mr(t),i=Pn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(rn(e,t,s,r),Ja(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=mr(t),s=Pn(n,r);s.tag=2,e!=null&&(s.callback=e),e=fr(t,s,r),e!==null&&(rn(e,t,r,n),Ja(e,t,r))}};function og(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ko(n,r)||!ko(s,i):!0}function Hv(t,e,n){var r=!1,s=Er,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=At(e)?ts:pt.current,r=e.contextTypes,i=(r=r!=null)?Zs(t,s):Er),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ag(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yc.enqueueReplaceState(e,e.state,null)}function Dd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=At(e)?ts:pt.current,s.context=Zs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yc.enqueueReplaceState(s,s.state,null),Pl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e){try{var n="",r=e;do n+=rb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Uu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CE=typeof WeakMap=="function"?WeakMap:Map;function Wv(t,e,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ol||(Ol=!0,Hd=r),Vd(t,e)},n}function Gv(t,e,n){n=Pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vd(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qE.bind(null,t,e,n),e.then(t,t))}function cg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ug(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var PE=qn.ReactCurrentOwner,Nt=!1;function vt(t,e,n,r){e.child=t===null?bv(e,null,n,r):ti(e,t.child,n,r)}function dg(t,e,n,r,s){n=n.render;var i=e.ref;return Ws(e,s),r=ef(t,e,n,r,i,s),n=tf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(Ae&&n&&$h(e),e.flags|=1,vt(t,e,r,s),e.child)}function hg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!hf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Kv(t,e,i,r,s)):(t=sl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ko,n(o,r)&&t.ref===e.ref)return On(t,e,s)}return e.flags|=1,t=gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Kv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ko(i,r)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,On(t,e,s)}return Od(t,e,n,r,s)}function Qv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Fs,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Fs,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Fs,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Fs,jt),jt|=r;return vt(t,e,s,n),e.child}function Xv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Od(t,e,n,r,s){var i=At(n)?ts:pt.current;return i=Zs(e,i),Ws(e,s),n=ef(t,e,n,r,i,s),r=tf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(Ae&&r&&$h(e),e.flags|=1,vt(t,e,n,s),e.child)}function fg(t,e,n,r,s){if(At(n)){var i=!0;kl(e)}else i=!1;if(Ws(e,s),e.stateNode===null)tl(t,e),Hv(e,n,r),Dd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Wt(h):(h=At(n)?ts:pt.current,h=Zs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&ag(e,o,r,h),Zn=!1;var g=e.memoizedState;o.state=g,Pl(e,r,o,s),u=e.memoizedState,c!==r||g!==u||St.current||Zn?(typeof p=="function"&&(jd(e,n,p,r),u=e.memoizedState),(c=Zn||og(e,n,c,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tv(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:Yt(e.type,c),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wt(u):(u=At(n)?ts:pt.current,u=Zs(e,u));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&ag(e,o,r,u),Zn=!1,g=e.memoizedState,o.state=g,Pl(e,r,o,s);var S=e.memoizedState;c!==m||g!==S||St.current||Zn?(typeof T=="function"&&(jd(e,n,T,r),S=e.memoizedState),(h=Zn||og(e,n,h,r,g,S,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Md(t,e,n,r,i,s)}function Md(t,e,n,r,s,i){Xv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Jm(e,n,!1),On(t,e,i);r=e.stateNode,PE.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ti(e,t.child,null,i),e.child=ti(e,null,c,i)):vt(t,e,c,i),e.memoizedState=r.state,s&&Jm(e,n,!0),e.child}function Yv(t){var e=t.stateNode;e.pendingContext?Ym(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ym(t,e.context,!1),Xh(t,e.containerInfo)}function pg(t,e,n,r,s){return ei(),qh(s),e.flags|=256,vt(t,e,n,r),e.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Fd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jv(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Pe,s&1),t===null)return Pd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xc(o,r,0,null),t=Xr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fd(n),e.memoizedState=Ld,t):sf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return RE(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=gr(c,i):(i=Xr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ld,r}return i=t.child,t=i.sibling,r=gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sf(t,e){return e=xc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Va(t,e,n,r){return r!==null&&qh(r),ti(e,t.child,null,n),t=sf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Uu(Error(B(422))),Va(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=xc({mode:"visible",children:r.children},s,0,null),i=Xr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ti(e,t.child,null,o),e.child.memoizedState=Fd(o),e.memoizedState=Ld,i);if(!(e.mode&1))return Va(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(B(419)),r=Uu(i,r,void 0),Va(t,e,o,r)}if(c=(o&t.childLanes)!==0,Nt||c){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(t,s),rn(r,t,s,-1))}return df(),r=Uu(Error(B(421))),Va(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=hr(s.nextSibling),Ot=e,Ae=!0,Zt=null,t!==null&&(Ut[zt++]=kn,Ut[zt++]=Nn,Ut[zt++]=ns,kn=t.id,Nn=t.overflow,ns=e),e=sf(e,r.children),e.flags|=4096,e)}function mg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rd(t.return,e,n)}function zu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mg(t,n,e);else if(t.tag===19)mg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zu(e,!0,n,null,i);break;case"together":zu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jE(t,e,n){switch(e.tag){case 3:Yv(e),ei();break;case 5:Iv(e);break;case 1:At(e.type)&&kl(e);break;case 4:Xh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Al,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Jv(t,e,n):(Te(Pe,Pe.current&1),t=On(t,e,n),t!==null?t.sibling:null);Te(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Qv(t,e,n)}return On(t,e,n)}var e_,Ud,t_,n_;e_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ud=function(){};t_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wr(fn.current);var i=null;switch(n){case"input":s=ld(t,s),r=ld(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=dd(t,s),r=dd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tl)}fd(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(_o.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(_o.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ke("scroll",t),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};n_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wi(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DE(t,e,n){var r=e.pendingProps;switch(Bh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return At(e.type)&&Il(),ct(e),null;case 3:return r=e.stateNode,ni(),Se(St),Se(pt),Jh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(Kd(Zt),Zt=null))),Ud(t,e),ct(e),null;case 5:Yh(e);var s=Wr(Po.current);if(n=e.type,t!==null&&e.stateNode!=null)t_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ct(e),null}if(t=Wr(fn.current),ja(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[dn]=e,r[Ao]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<Yi.length;s++)ke(Yi[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Tm(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":km(r,i),ke("invalid",r)}fd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,c,t),s=["children",""+c]):_o.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":Ta(r),Im(r,i,!0);break;case"textarea":Ta(r),Nm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Tl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=C0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dn]=e,t[Ao]=r,e_(t,e,!1,!1),e.stateNode=t;e:{switch(o=pd(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<Yi.length;s++)ke(Yi[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":Tm(t,r),s=ld(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),ke("invalid",t);break;case"textarea":km(t,r),s=dd(t,r),ke("invalid",t);break;default:s=r}fd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?j0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&P0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&xo(t,u):typeof u=="number"&&xo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_o.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&Sh(t,i,u,o))}switch(n){case"input":Ta(t),Im(t,r,!1);break;case"textarea":Ta(t),Nm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+br(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$s(t,!!r.multiple,i,!1):r.defaultValue!=null&&$s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Tl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)n_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Wr(Po.current),Wr(fn.current),ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[dn]=e,(i=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:Ra(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ra(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=e,e.stateNode=r}return ct(e),null;case 13:if(Se(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Dt!==null&&e.mode&1&&!(e.flags&128))xv(),ei(),e.flags|=98560,i=!1;else if(i=ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[dn]=e}else ei(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),i=!1}else Zt!==null&&(Kd(Zt),Zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?He===0&&(He=3):df())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return ni(),Ud(t,e),t===null&&No(e.stateNode.containerInfo),ct(e),null;case 10:return Gh(e.type._context),ct(e),null;case 17:return At(e.type)&&Il(),ct(e),null;case 19:if(Se(Pe),i=e.memoizedState,i===null)return ct(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rl(t),o!==null){for(e.flags|=128,Wi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>si&&(e.flags|=128,r=!0,Wi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Rl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return ct(e),null}else 2*Fe()-i.renderingStartTime>si&&n!==1073741824&&(e.flags|=128,r=!0,Wi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Pe.current,Te(Pe,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return uf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function VE(t,e){switch(Bh(e),e.tag){case 1:return At(e.type)&&Il(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ni(),Se(St),Se(pt),Jh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yh(e),null;case 13:if(Se(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ei()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Pe),null;case 4:return ni(),null;case 10:return Gh(e.type._context),null;case 22:case 23:return uf(),null;case 24:return null;default:return null}}var Oa=!1,ht=!1,OE=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function zd(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var gg=!1;function ME(t,e){if(Td=wl,t=av(),zh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var T;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)g=m,m=T;for(;;){if(m===t)break t;if(g===n&&++h===s&&(c=o),g===i&&++p===r&&(u=o),(T=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=T}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Id={focusedElem:t,selectionRange:n},wl=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var N=S.memoizedProps,C=S.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:Yt(e.type,N),C);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(j){Oe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return S=gg,gg=!1,S}function lo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&zd(e,n,i)}s=s.next}while(s!==r)}}function vc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $d(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r_(t){var e=t.alternate;e!==null&&(t.alternate=null,r_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[Ao],delete e[Sd],delete e[_E],delete e[xE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s_(t){return t.tag===5||t.tag===3||t.tag===4}function yg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tl));else if(r!==4&&(t=t.child,t!==null))for(Bd(t,e,n),t=t.sibling;t!==null;)Bd(t,e,n),t=t.sibling}function qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qd(t,e,n),t=t.sibling;t!==null;)qd(t,e,n),t=t.sibling}var Ze=null,Jt=!1;function Xn(t,e,n){for(n=n.child;n!==null;)i_(t,e,n),n=n.sibling}function i_(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(uc,n)}catch{}switch(n.tag){case 5:ht||Ls(n,e);case 6:var r=Ze,s=Jt;Ze=null,Xn(t,e,n),Ze=r,Jt=s,Ze!==null&&(Jt?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Jt?(t=Ze,n=n.stateNode,t.nodeType===8?Du(t.parentNode,n):t.nodeType===1&&Du(t,n),To(t)):Du(Ze,n.stateNode));break;case 4:r=Ze,s=Jt,Ze=n.stateNode.containerInfo,Jt=!0,Xn(t,e,n),Ze=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&zd(n,e,o),s=s.next}while(s!==r)}Xn(t,e,n);break;case 1:if(!ht&&(Ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Oe(n,e,c)}Xn(t,e,n);break;case 21:Xn(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Xn(t,e,n),ht=r):Xn(t,e,n);break;default:Xn(t,e,n)}}function vg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OE),e.forEach(function(r){var s=WE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ze=c.stateNode,Jt=!1;break e;case 3:Ze=c.stateNode.containerInfo,Jt=!0;break e;case 4:Ze=c.stateNode.containerInfo,Jt=!0;break e}c=c.return}if(Ze===null)throw Error(B(160));i_(i,o,s),Ze=null,Jt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Oe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)o_(e,t),e=e.sibling}function o_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),ln(t),r&4){try{lo(3,t,t.return),vc(3,t)}catch(N){Oe(t,t.return,N)}try{lo(5,t,t.return)}catch(N){Oe(t,t.return,N)}}break;case 1:Xt(e,t),ln(t),r&512&&n!==null&&Ls(n,n.return);break;case 5:if(Xt(e,t),ln(t),r&512&&n!==null&&Ls(n,n.return),t.flags&32){var s=t.stateNode;try{xo(s,"")}catch(N){Oe(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&S0(s,i),pd(c,o);var h=pd(c,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?j0(s,m):p==="dangerouslySetInnerHTML"?P0(s,m):p==="children"?xo(s,m):Sh(s,p,m,h)}switch(c){case"input":cd(s,i);break;case"textarea":A0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?$s(s,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?$s(s,!!i.multiple,i.defaultValue,!0):$s(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ao]=i}catch(N){Oe(t,t.return,N)}}break;case 6:if(Xt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Oe(t,t.return,N)}}break;case 3:if(Xt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{To(e.containerInfo)}catch(N){Oe(t,t.return,N)}break;case 4:Xt(e,t),ln(t);break;case 13:Xt(e,t),ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(lf=Fe())),r&4&&vg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(h=ht)||p,Xt(e,t),ht=h):Xt(e,t),ln(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Z=t,p=t.child;p!==null;){for(m=Z=p;Z!==null;){switch(g=Z,T=g.child,g.tag){case 0:case 11:case 14:case 15:lo(4,g,g.return);break;case 1:Ls(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(N){Oe(r,n,N)}}break;case 5:Ls(g,g.return);break;case 22:if(g.memoizedState!==null){xg(m);continue}}T!==null?(T.return=g,Z=T):xg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=R0("display",o))}catch(N){Oe(t,t.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(N){Oe(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Xt(e,t),ln(t),r&4&&vg(t);break;case 21:break;default:Xt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(s_(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xo(s,""),r.flags&=-33);var i=yg(t);qd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=yg(t);Bd(t,c,o);break;default:throw Error(B(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LE(t,e,n){Z=t,a_(t)}function a_(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Oa;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ht;c=Oa;var h=ht;if(Oa=o,(ht=u)&&!h)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?wg(s):u!==null?(u.return=o,Z=u):wg(s);for(;i!==null;)Z=i,a_(i),i=i.sibling;Z=s,Oa=c,ht=h}_g(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):_g(t)}}function _g(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||vc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&rg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&To(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ht||e.flags&512&&$d(e)}catch(g){Oe(e,e.return,g)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function xg(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function wg(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vc(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{$d(e)}catch(u){Oe(e,i,u)}break;case 5:var o=e.return;try{$d(e)}catch(u){Oe(e,o,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){Z=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Z=c;break}Z=e.return}}var FE=Math.ceil,Vl=qn.ReactCurrentDispatcher,of=qn.ReactCurrentOwner,qt=qn.ReactCurrentBatchConfig,ye=0,Qe=null,ze=null,nt=0,jt=0,Fs=Rr(0),He=0,Vo=null,ss=0,_c=0,af=0,co=null,It=null,lf=0,si=1/0,En=null,Ol=!1,Hd=null,pr=null,Ma=!1,or=null,Ml=0,uo=0,Wd=null,nl=-1,rl=0;function xt(){return ye&6?Fe():nl!==-1?nl:nl=Fe()}function mr(t){return t.mode&1?ye&2&&nt!==0?nt&-nt:bE.transition!==null?(rl===0&&(rl=H0()),rl):(t=xe,t!==0||(t=window.event,t=t===void 0?16:J0(t.type)),t):1}function rn(t,e,n,r){if(50<uo)throw uo=0,Wd=null,Error(B(185));Wo(t,n,r),(!(ye&2)||t!==Qe)&&(t===Qe&&(!(ye&2)&&(_c|=n),He===4&&tr(t,nt)),Ct(t,r),n===1&&ye===0&&!(e.mode&1)&&(si=Fe()+500,mc&&jr()))}function Ct(t,e){var n=t.callbackNode;bb(t,e);var r=xl(t,t===Qe?nt:0);if(r===0)n!==null&&Cm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cm(n),e===1)t.tag===0?wE(bg.bind(null,t)):yv(bg.bind(null,t)),yE(function(){!(ye&6)&&jr()}),n=null;else{switch(W0(r)){case 1:n=jh;break;case 4:n=B0;break;case 16:n=_l;break;case 536870912:n=q0;break;default:n=_l}n=m_(n,l_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function l_(t,e){if(nl=-1,rl=0,ye&6)throw Error(B(327));var n=t.callbackNode;if(Gs()&&t.callbackNode!==n)return null;var r=xl(t,t===Qe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ll(t,r);else{e=r;var s=ye;ye|=2;var i=u_();(Qe!==t||nt!==e)&&(En=null,si=Fe()+500,Qr(t,e));do try{$E();break}catch(c){c_(t,c)}while(!0);Wh(),Vl.current=i,ye=s,ze!==null?e=0:(Qe=null,nt=0,e=He)}if(e!==0){if(e===2&&(s=_d(t),s!==0&&(r=s,e=Gd(t,s))),e===1)throw n=Vo,Qr(t,0),tr(t,r),Ct(t,Fe()),n;if(e===6)tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!UE(s)&&(e=Ll(t,r),e===2&&(i=_d(t),i!==0&&(r=i,e=Gd(t,i))),e===1))throw n=Vo,Qr(t,0),tr(t,r),Ct(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:$r(t,It,En);break;case 3:if(tr(t,r),(r&130023424)===r&&(e=lf+500-Fe(),10<e)){if(xl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nd($r.bind(null,t,It,En),e);break}$r(t,It,En);break;case 4:if(tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FE(r/1960))-r,10<r){t.timeoutHandle=Nd($r.bind(null,t,It,En),r);break}$r(t,It,En);break;case 5:$r(t,It,En);break;default:throw Error(B(329))}}}return Ct(t,Fe()),t.callbackNode===n?l_.bind(null,t):null}function Gd(t,e){var n=co;return t.current.memoizedState.isDehydrated&&(Qr(t,e).flags|=256),t=Ll(t,e),t!==2&&(e=It,It=n,e!==null&&Kd(e)),t}function Kd(t){It===null?It=t:It.push.apply(It,t)}function UE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~af,e&=~_c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function bg(t){if(ye&6)throw Error(B(327));Gs();var e=xl(t,0);if(!(e&1))return Ct(t,Fe()),null;var n=Ll(t,e);if(t.tag!==0&&n===2){var r=_d(t);r!==0&&(e=r,n=Gd(t,r))}if(n===1)throw n=Vo,Qr(t,0),tr(t,e),Ct(t,Fe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,It,En),Ct(t,Fe()),null}function cf(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(si=Fe()+500,mc&&jr())}}function is(t){or!==null&&or.tag===0&&!(ye&6)&&Gs();var e=ye;ye|=1;var n=qt.transition,r=xe;try{if(qt.transition=null,xe=1,t)return t()}finally{xe=r,qt.transition=n,ye=e,!(ye&6)&&jr()}}function uf(){jt=Fs.current,Se(Fs)}function Qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gE(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Bh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Il();break;case 3:ni(),Se(St),Se(pt),Jh();break;case 5:Yh(r);break;case 4:ni();break;case 13:Se(Pe);break;case 19:Se(Pe);break;case 10:Gh(r.type._context);break;case 22:case 23:uf()}n=n.return}if(Qe=t,ze=t=gr(t.current,null),nt=jt=e,He=0,Vo=null,af=_c=ss=0,It=co=null,Hr!==null){for(e=0;e<Hr.length;e++)if(n=Hr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Hr=null}return t}function c_(t,e){do{var n=ze;try{if(Wh(),Za.current=Dl,jl){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jl=!1}if(rs=0,Ke=qe=Re=null,ao=!1,Ro=0,of.current=null,n===null||n.return===null){He=1,Vo=e,ze=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=nt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=cg(o);if(T!==null){T.flags&=-257,ug(T,o,c,i,e),T.mode&1&&lg(i,h,e),e=T,u=h;var S=e.updateQueue;if(S===null){var N=new Set;N.add(u),e.updateQueue=N}else S.add(u);break e}else{if(!(e&1)){lg(i,h,e),df();break e}u=Error(B(426))}}else if(Ae&&c.mode&1){var C=cg(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),ug(C,o,c,i,e),qh(ri(u,c));break e}}i=u=ri(u,c),He!==4&&(He=2),co===null?co=[i]:co.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Wv(i,u,e);ng(i,x);break e;case 1:c=u;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(pr===null||!pr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=Gv(i,c,e);ng(i,j);break e}}i=i.return}while(i!==null)}h_(n)}catch(U){e=U,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function u_(){var t=Vl.current;return Vl.current=Dl,t===null?Dl:t}function df(){(He===0||He===3||He===2)&&(He=4),Qe===null||!(ss&268435455)&&!(_c&268435455)||tr(Qe,nt)}function Ll(t,e){var n=ye;ye|=2;var r=u_();(Qe!==t||nt!==e)&&(En=null,Qr(t,e));do try{zE();break}catch(s){c_(t,s)}while(!0);if(Wh(),ye=n,Vl.current=r,ze!==null)throw Error(B(261));return Qe=null,nt=0,He}function zE(){for(;ze!==null;)d_(ze)}function $E(){for(;ze!==null&&!fb();)d_(ze)}function d_(t){var e=p_(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?h_(t):ze=e,of.current=null}function h_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VE(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,ze=null;return}}else if(n=DE(n,e,jt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);He===0&&(He=5)}function $r(t,e,n){var r=xe,s=qt.transition;try{qt.transition=null,xe=1,BE(t,e,n,r)}finally{qt.transition=s,xe=r}return null}function BE(t,e,n,r){do Gs();while(or!==null);if(ye&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Eb(t,i),t===Qe&&(ze=Qe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ma||(Ma=!0,m_(_l,function(){return Gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=xe;xe=1;var c=ye;ye|=4,of.current=null,ME(t,n),o_(n,t),cE(Id),wl=!!Td,Id=Td=null,t.current=n,LE(n),pb(),ye=c,xe=o,qt.transition=i}else t.current=n;if(Ma&&(Ma=!1,or=t,Ml=s),i=t.pendingLanes,i===0&&(pr=null),yb(n.stateNode),Ct(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ol)throw Ol=!1,t=Hd,Hd=null,t;return Ml&1&&t.tag!==0&&Gs(),i=t.pendingLanes,i&1?t===Wd?uo++:(uo=0,Wd=t):uo=0,jr(),null}function Gs(){if(or!==null){var t=W0(Ml),e=qt.transition,n=xe;try{if(qt.transition=null,xe=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,Ml=0,ye&6)throw Error(B(331));var s=ye;for(ye|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(Z=h;Z!==null;){var p=Z;switch(p.tag){case 0:case 11:case 15:lo(8,p,i)}var m=p.child;if(m!==null)m.return=p,Z=m;else for(;Z!==null;){p=Z;var g=p.sibling,T=p.return;if(r_(p),p===h){Z=null;break}if(g!==null){g.return=T,Z=g;break}Z=T}}}var S=i.alternate;if(S!==null){var N=S.child;if(N!==null){S.child=null;do{var C=N.sibling;N.sibling=null,N=C}while(N!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Z=x;break e}Z=i.return}}var _=t.current;for(Z=_;Z!==null;){o=Z;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Z=I;else e:for(o=_;Z!==null;){if(c=Z,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:vc(9,c)}}catch(U){Oe(c,c.return,U)}if(c===o){Z=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,Z=j;break e}Z=c.return}}if(ye=s,jr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(uc,t)}catch{}r=!0}return r}finally{xe=n,qt.transition=e}}return!1}function Eg(t,e,n){e=ri(n,e),e=Wv(t,e,1),t=fr(t,e,1),e=xt(),t!==null&&(Wo(t,1,e),Ct(t,e))}function Oe(t,e,n){if(t.tag===3)Eg(t,t,n);else for(;e!==null;){if(e.tag===3){Eg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=ri(n,t),t=Gv(e,t,1),e=fr(e,t,1),t=xt(),e!==null&&(Wo(e,1,t),Ct(e,t));break}}e=e.return}}function qE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(nt&n)===n&&(He===4||He===3&&(nt&130023424)===nt&&500>Fe()-lf?Qr(t,0):af|=n),Ct(t,e)}function f_(t,e){e===0&&(t.mode&1?(e=Na,Na<<=1,!(Na&130023424)&&(Na=4194304)):e=1);var n=xt();t=Vn(t,e),t!==null&&(Wo(t,e,n),Ct(t,n))}function HE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f_(t,n)}function WE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),f_(t,n)}var p_;p_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,jE(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Ae&&e.flags&1048576&&vv(e,Sl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tl(t,e),t=e.pendingProps;var s=Zs(e,pt.current);Ws(e,n),s=ef(null,e,r,t,s,n);var i=tf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,kl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qh(e),s.updater=yc,e.stateNode=s,s._reactInternals=e,Dd(e,r,t,n),e=Md(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&$h(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KE(r),t=Yt(r,t),s){case 0:e=Od(null,e,r,t,n);break e;case 1:e=fg(null,e,r,t,n);break e;case 11:e=dg(null,e,r,t,n);break e;case 14:e=hg(null,e,r,Yt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Od(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),fg(t,e,r,s,n);case 3:e:{if(Yv(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tv(t,e),Pl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ri(Error(B(423)),e),e=pg(t,e,r,n,s);break e}else if(r!==s){s=ri(Error(B(424)),e),e=pg(t,e,r,n,s);break e}else for(Dt=hr(e.stateNode.containerInfo.firstChild),Ot=e,Ae=!0,Zt=null,n=bv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ei(),r===s){e=On(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return Iv(e),t===null&&Pd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kd(r,s)?o=null:i!==null&&kd(r,i)&&(e.flags|=32),Xv(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&Pd(e),null;case 13:return Jv(t,e,n);case 4:return Xh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ti(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),dg(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Al,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!St.current){e=On(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Pn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Rd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Rd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ws(e,n),s=Wt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Yt(r,e.pendingProps),s=Yt(r.type,s),hg(t,e,r,s,n);case 15:return Kv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),tl(t,e),e.tag=1,At(r)?(t=!0,kl(e)):t=!1,Ws(e,n),Hv(e,r,s),Dd(e,r,s,n),Md(null,e,r,!0,t,n);case 19:return Zv(t,e,n);case 22:return Qv(t,e,n)}throw Error(B(156,e.tag))};function m_(t,e){return $0(t,e)}function GE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new GE(t,e,n,r)}function hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KE(t){if(typeof t=="function")return hf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ch)return 11;if(t===Ph)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")hf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case As:return Xr(n.children,s,i,e);case Ah:o=8,s|=8;break;case sd:return t=Bt(12,n,e,s|2),t.elementType=sd,t.lanes=i,t;case id:return t=Bt(13,n,e,s),t.elementType=id,t.lanes=i,t;case od:return t=Bt(19,n,e,s),t.elementType=od,t.lanes=i,t;case I0:return xc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E0:o=10;break e;case T0:o=9;break e;case Ch:o=11;break e;case Ph:o=14;break e;case Jn:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Bt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xr(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function xc(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=I0,t.lanes=n,t.stateNode={isHidden:!1},t}function $u(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function Bu(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eu(0),this.expirationTimes=Eu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ff(t,e,n,r,s,i,o,c,u){return t=new QE(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qh(i),t}function XE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ss,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function g_(t){if(!t)return Er;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(At(n))return gv(t,n,e)}return e}function y_(t,e,n,r,s,i,o,c,u){return t=ff(n,r,!0,t,s,i,o,c,u),t.context=g_(null),n=t.current,r=xt(),s=mr(n),i=Pn(r,s),i.callback=e??null,fr(n,i,s),t.current.lanes=s,Wo(t,s,r),Ct(t,r),t}function wc(t,e,n,r){var s=e.current,i=xt(),o=mr(s);return n=g_(n),e.context===null?e.context=n:e.pendingContext=n,e=Pn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(s,e,o),t!==null&&(rn(t,s,o,i),Ja(t,s,o)),o}function Fl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pf(t,e){Tg(t,e),(t=t.alternate)&&Tg(t,e)}function YE(){return null}var v_=typeof reportError=="function"?reportError:function(t){console.error(t)};function mf(t){this._internalRoot=t}bc.prototype.render=mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));wc(t,e,null,null)};bc.prototype.unmount=mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;is(function(){wc(null,t,null,null)}),e[Dn]=null}};function bc(t){this._internalRoot=t}bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&Y0(t)}};function gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ig(){}function JE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Fl(o);i.call(h)}}var o=y_(e,r,t,0,null,!1,!1,"",Ig);return t._reactRootContainer=o,t[Dn]=o.current,No(t.nodeType===8?t.parentNode:t),is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=Fl(u);c.call(h)}}var u=ff(t,0,!1,null,null,!1,!1,"",Ig);return t._reactRootContainer=u,t[Dn]=u.current,No(t.nodeType===8?t.parentNode:t),is(function(){wc(e,u,n,r)}),u}function Tc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Fl(o);c.call(u)}}wc(e,o,t,s)}else o=JE(n,e,t,s,r);return Fl(o)}G0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xi(e.pendingLanes);n!==0&&(Dh(e,n|1),Ct(e,Fe()),!(ye&6)&&(si=Fe()+500,jr()))}break;case 13:is(function(){var r=Vn(t,1);if(r!==null){var s=xt();rn(r,t,1,s)}}),pf(t,1)}};Vh=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=xt();rn(e,t,134217728,n)}pf(t,134217728)}};K0=function(t){if(t.tag===13){var e=mr(t),n=Vn(t,e);if(n!==null){var r=xt();rn(n,t,e,r)}pf(t,e)}};Q0=function(){return xe};X0=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};gd=function(t,e,n){switch(e){case"input":if(cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pc(r);if(!s)throw Error(B(90));N0(r),cd(r,s)}}}break;case"textarea":A0(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};O0=cf;M0=is;var ZE={usingClientEntryPoint:!1,Events:[Ko,js,pc,D0,V0,cf]},Gi={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eT={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U0(t),t===null?null:t.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||YE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{uc=La.inject(eT),hn=La}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZE;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gf(e))throw Error(B(200));return XE(t,e,null,n)};Lt.createRoot=function(t,e){if(!gf(t))throw Error(B(299));var n=!1,r="",s=v_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ff(t,1,!1,null,null,n,!1,r,s),t[Dn]=e.current,No(t.nodeType===8?t.parentNode:t),new mf(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=U0(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return is(t)};Lt.hydrate=function(t,e,n){if(!Ec(e))throw Error(B(200));return Tc(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!gf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=y_(e,null,t,1,n??null,s,!1,i,o),t[Dn]=e.current,No(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new bc(e)};Lt.render=function(t,e,n){if(!Ec(e))throw Error(B(200));return Tc(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Ec(t))throw Error(B(40));return t._reactRootContainer?(is(function(){Tc(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};Lt.unstable_batchedUpdates=cf;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ec(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Tc(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function __(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(__)}catch(t){console.error(t)}}__(),_0.exports=Lt;var tT=_0.exports,x_,kg=tT;x_=kg.createRoot,kg.hydrateRoot;const nT=()=>{};var Ng={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},b_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,T=h&63;u||(T=64,o||(g=64)),r.push(n[p],n[m],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||m==null)throw new sT;const g=i<<2|c>>4;if(r.push(g),h!==64){const T=c<<4&240|h>>2;if(r.push(T),m!==64){const S=h<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iT=function(t){const e=w_(t);return b_.encodeByteArray(e,!0)},Ul=function(t){return iT(t).replace(/\./g,"")},E_=function(t){try{return b_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=()=>oT().__FIREBASE_DEFAULTS__,lT=()=>{if(typeof process>"u"||typeof Ng>"u")return;const t=Ng.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&E_(t[1]);return e&&JSON.parse(e)},Ic=()=>{try{return nT()||aT()||lT()||cT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},T_=t=>{var e,n;return(n=(e=Ic())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uT=t=>{const e=T_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},I_=()=>{var t;return(t=Ic())===null||t===void 0?void 0:t.config},k_=t=>{var e;return(e=Ic())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ul(JSON.stringify(n)),Ul(JSON.stringify(o)),""].join(".")}const ho={};function fT(){const t={prod:[],emulator:[]};for(const e of Object.keys(ho))ho[e]?t.emulator.push(e):t.prod.push(e);return t}function pT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sg=!1;function S_(t,e){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||ho[t]===e||ho[t]||Sg)return;ho[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=fT().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Sg=!0,o()},g}function p(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=pT(r),T=n("text"),S=document.getElementById(T)||document.createElement("span"),N=n("learnmore"),C=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),_=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;c(I),p(C,N);const j=h();u(_,x),I.append(_,S,C,j),document.body.appendChild(I)}i?(S.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function gT(){var t;const e=(t=Ic())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xT(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wT(){return!gT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bT(){try{return typeof indexedDB=="object"}catch{return!1}}function ET(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TT,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?IT(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Hn(s,c,r)}}function IT(t,e){return t.replace(kT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kT=/\{\$([^}]+)}/g;function NT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ag(i)&&Ag(o)){if(!Mn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ag(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ST(t,e){const n=new AT(t,e);return n.subscribe.bind(n)}class AT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qu),s.error===void 0&&(s.error=qu),s.complete===void 0&&(s.complete=qu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class os{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jT(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RT(t){return t===Br?void 0:t}function jT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const VT={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},OT=fe.INFO,MT={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},LT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=MT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=OT,this._logHandler=LT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const FT=(t,e)=>e.some(n=>t instanceof n);let Cg,Pg;function UT(){return Cg||(Cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zT(){return Pg||(Pg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A_=new WeakMap,Qd=new WeakMap,C_=new WeakMap,Hu=new WeakMap,vf=new WeakMap;function $T(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(yr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&A_.set(n,t)}).catch(()=>{}),vf.set(e,t),e}function BT(t){if(Qd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Qd.set(t,e)}let Xd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||C_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qT(t){Xd=t(Xd)}function HT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wu(this),e,...n);return C_.set(r,e.sort?e.sort():[e]),yr(r)}:zT().includes(t)?function(...e){return t.apply(Wu(this),e),yr(A_.get(this))}:function(...e){return yr(t.apply(Wu(this),e))}}function WT(t){return typeof t=="function"?HT(t):(t instanceof IDBTransaction&&BT(t),FT(t,UT())?new Proxy(t,Xd):t)}function yr(t){if(t instanceof IDBRequest)return $T(t);if(Hu.has(t))return Hu.get(t);const e=WT(t);return e!==t&&(Hu.set(t,e),vf.set(e,t)),e}const Wu=t=>vf.get(t);function GT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=yr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(yr(o.result),u.oldVersion,u.newVersion,yr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const KT=["get","getKey","getAll","getAllKeys","count"],QT=["put","add","delete","clear"],Gu=new Map;function Rg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gu.get(e))return Gu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KT.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Gu.set(e,i),i}qT(t=>({...t,get:(e,n,r)=>Rg(e,n)||t.get(e,n,r),has:(e,n)=>!!Rg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yd="@firebase/app",jg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new yf("@firebase/app"),JT="@firebase/app-compat",ZT="@firebase/analytics-compat",e2="@firebase/analytics",t2="@firebase/app-check-compat",n2="@firebase/app-check",r2="@firebase/auth",s2="@firebase/auth-compat",i2="@firebase/database",o2="@firebase/data-connect",a2="@firebase/database-compat",l2="@firebase/functions",c2="@firebase/functions-compat",u2="@firebase/installations",d2="@firebase/installations-compat",h2="@firebase/messaging",f2="@firebase/messaging-compat",p2="@firebase/performance",m2="@firebase/performance-compat",g2="@firebase/remote-config",y2="@firebase/remote-config-compat",v2="@firebase/storage",_2="@firebase/storage-compat",x2="@firebase/firestore",w2="@firebase/ai",b2="@firebase/firestore-compat",E2="firebase",T2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",I2={[Yd]:"fire-core",[JT]:"fire-core-compat",[e2]:"fire-analytics",[ZT]:"fire-analytics-compat",[n2]:"fire-app-check",[t2]:"fire-app-check-compat",[r2]:"fire-auth",[s2]:"fire-auth-compat",[i2]:"fire-rtdb",[o2]:"fire-data-connect",[a2]:"fire-rtdb-compat",[l2]:"fire-fn",[c2]:"fire-fn-compat",[u2]:"fire-iid",[d2]:"fire-iid-compat",[h2]:"fire-fcm",[f2]:"fire-fcm-compat",[p2]:"fire-perf",[m2]:"fire-perf-compat",[g2]:"fire-rc",[y2]:"fire-rc-compat",[v2]:"fire-gcs",[_2]:"fire-gcs-compat",[x2]:"fire-fst",[b2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[E2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new Map,k2=new Map,Zd=new Map;function Dg(t,e){try{t.container.addComponent(e)}catch(n){Ln.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){const e=t.name;if(Zd.has(e))return Ln.debug(`There were multiple attempts to register component ${e}.`),!1;Zd.set(e,t);for(const n of zl.values())Dg(n,t);for(const n of k2.values())Dg(n,t);return!0}function _f(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Xo("app","Firebase",N2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=T2;function P_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jd,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw vr.create("bad-app-name",{appName:String(s)});if(n||(n=I_()),!n)throw vr.create("no-options");const i=zl.get(s);if(i){if(Mn(n,i.options)&&Mn(r,i.config))return i;throw vr.create("duplicate-app",{appName:s})}const o=new DT(s);for(const u of Zd.values())o.addComponent(u);const c=new S2(n,r,o);return zl.set(s,c),c}function R_(t=Jd){const e=zl.get(t);if(!e&&t===Jd&&I_())return P_();if(!e)throw vr.create("no-app",{appName:t});return e}function _r(t,e,n){var r;let s=(r=I2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ln.warn(c.join(" "));return}ii(new os(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="firebase-heartbeat-database",C2=1,Oo="firebase-heartbeat-store";let Ku=null;function j_(){return Ku||(Ku=GT(A2,C2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),Ku}async function P2(t){try{const n=(await j_()).transaction(Oo),r=await n.objectStore(Oo).get(D_(t));return await n.done,r}catch(e){if(e instanceof Hn)Ln.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ln.warn(n.message)}}}async function Vg(t,e){try{const r=(await j_()).transaction(Oo,"readwrite");await r.objectStore(Oo).put(e,D_(t)),await r.done}catch(n){if(n instanceof Hn)Ln.warn(n.message);else{const r=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function D_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=1024,j2=30;class D2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Og();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>j2){const o=M2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ln.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Og(),{heartbeatsToSend:r,unsentEntries:s}=V2(this._heartbeatsCache.heartbeats),i=Ul(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ln.warn(n),""}}}function Og(){return new Date().toISOString().substring(0,10)}function V2(t,e=R2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Mg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Mg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bT()?ET().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Mg(t){return Ul(JSON.stringify({version:2,heartbeats:t})).length}function M2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){ii(new os("platform-logger",e=>new XT(e),"PRIVATE")),ii(new os("heartbeat",e=>new D2(e),"PRIVATE")),_r(Yd,jg,t),_r(Yd,jg,"esm2017"),_r("fire-js","")}L2("");function xf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function V_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F2=V_,O_=new Xo("auth","Firebase",V_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new yf("@firebase/auth");function U2(t,...e){$l.logLevel<=fe.WARN&&$l.warn(`Auth (${_i}): ${t}`,...e)}function il(t,...e){$l.logLevel<=fe.ERROR&&$l.error(`Auth (${_i}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,...e){throw bf(t,...e)}function sn(t,...e){return bf(t,...e)}function wf(t,e,n){const r=Object.assign(Object.assign({},F2()),{[e]:n});return new Xo("auth","Firebase",r).create(e,{appName:t.name})}function Yr(t){return wf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&_n(t,"argument-error"),wf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return O_.create(t,...e)}function ie(t,e,...n){if(!t)throw bf(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw il(e),new Error(e)}function Fn(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $2(){return Lg()==="http:"||Lg()==="https:"}function Lg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($2()||vT()||"connection"in navigator)?navigator.onLine:!0}function q2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=mT()||_T()}get(){return B2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e){Fn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G2=new Jo(3e4,6e4);function Tf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xi(t,e,n,r,s={}){return L_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Yo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return yT()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&vi(t.emulatorConfig.host)&&(h.credentials="include"),M_.fetch()(await F_(t,t.config.apiHost,n,c),h)})}async function L_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},H2),e);try{const s=new Q2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Fa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Fa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Fa(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw wf(t,p,h);_n(t,p)}}catch(s){if(s instanceof Hn)throw s;_n(t,"network-request-failed",{message:String(s)})}}async function K2(t,e,n,r,s={}){const i=await xi(t,e,n,r,s);return"mfaPendingCredential"in i&&_n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function F_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Ef(t.config,s):`${t.config.apiScheme}://${s}`;return W2.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Q2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sn(this.auth,"network-request-failed")),G2.get())})}}function Fa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=sn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return xi(t,"POST","/v1/accounts:delete",e)}async function Bl(t,e){return xi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y2(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),s=If(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:fo(Qu(s.auth_time)),issuedAtTime:fo(Qu(s.iat)),expirationTime:fo(Qu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qu(t){return Number(t)*1e3}function If(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return il("JWT malformed, contained fewer than 3 sections"),null;try{const s=E_(n);return s?JSON.parse(s):(il("Failed to decode base64 JWT payload"),null)}catch(s){return il("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Fg(t){const e=If(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&J2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fo(this.lastLoginAt),this.creationTime=fo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Mo(t,Bl(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?U_(i.providerUserInfo):[],c=tI(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new th(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function eI(t){const e=Xe(t);await ql(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function U_(t){return t.map(e=>{var{providerId:n}=e,r=xf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t,e){const n=await L_(t,{},async()=>{const r=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await F_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&vi(t.emulatorConfig.host)&&(u.credentials="include"),M_.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rI(t,e){return xi(t,"POST","/v2/accounts:revokeToken",Tf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=Fg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await nI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ks;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ks,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=xf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new th(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Mo(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y2(this,e)}reload(){return eI(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ql(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await Mo(this,X2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:j,isAnonymous:U,providerData:$,stsTokenManager:b}=n;ie(I&&b,e,"internal-error");const y=Ks.fromJSON(this.name,b);ie(typeof I=="string",e,"internal-error"),Yn(m,e.name),Yn(g,e.name),ie(typeof j=="boolean",e,"internal-error"),ie(typeof U=="boolean",e,"internal-error"),Yn(T,e.name),Yn(S,e.name),Yn(N,e.name),Yn(C,e.name),Yn(x,e.name),Yn(_,e.name);const w=new tn({uid:I,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:U,photoURL:S,phoneNumber:T,tenantId:N,stsTokenManager:y,createdAt:x,lastLoginAt:_});return $&&Array.isArray($)&&(w.providerData=$.map(E=>Object.assign({},E))),C&&(w._redirectEventId=C),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ks;s.updateFromServerResponse(n);const i=new tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ql(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?U_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ks;c.updateFromIdToken(r);const u=new tn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new th(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new Map;function An(t){Fn(t instanceof Function,"Expected a class definition");let e=Ug.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ug.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z_.type="NONE";const zg=z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t,e,n){return`firebase:${t}:${e}:${n}`}class Qs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ol(this.userKey,s.apiKey,i),this.fullPersistenceKey=ol("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bl(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qs(An(zg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||An(zg);const o=ol(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(o);if(p){let m;if(typeof p=="string"){const g=await Bl(e,{idToken:p}).catch(()=>{});if(!g)break;m=await tn._fromGetAccountInfoResponse(e,g,p)}else m=tn._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Qs(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Qs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G_(e))return"Blackberry";if(K_(e))return"Webos";if(B_(e))return"Safari";if((e.includes("chrome/")||q_(e))&&!e.includes("edge/"))return"Chrome";if(W_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $_(t=mt()){return/firefox\//i.test(t)}function B_(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q_(t=mt()){return/crios\//i.test(t)}function H_(t=mt()){return/iemobile/i.test(t)}function W_(t=mt()){return/android/i.test(t)}function G_(t=mt()){return/blackberry/i.test(t)}function K_(t=mt()){return/webos/i.test(t)}function kf(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sI(t=mt()){var e;return kf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iI(){return xT()&&document.documentMode===10}function Q_(t=mt()){return kf(t)||W_(t)||K_(t)||G_(t)||/windows phone/i.test(t)||H_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e=[]){let n;switch(t){case"Browser":n=$g(mt());break;case"Worker":n=`${$g(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_i}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e={}){return xi(t,"GET","/v2/passwordPolicy",Tf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=6;class cI{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new oI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=An(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bl(this,{idToken:e}),r=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(en(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ql(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Yr(this));const n=e?Xe(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aI(this),n=new cI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&An(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[An(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&U2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kc(t){return Xe(t)}class Bg{constructor(e){this.auth=e,this.observer=null,this.addObserver=ST(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dI(t){Nf=t}function hI(t){return Nf.loadJS(t)}function fI(){return Nf.gapiScript}function pI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t,e){const n=_f(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Mn(i,e??{}))return s;_n(s,"already-initialized")}return n.initialize({options:e})}function gI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(An);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yI(t,e,n){const r=kc(t);ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Y_(e),{host:o,port:c}=vI(e),u=c===null?"":`:${c}`,h={url:`${i}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ie(Mn(h,r.config.emulator)&&Mn(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,vi(o)?(N_(`${i}//${o}${u}`),S_("Auth",!0)):_I()}function Y_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vI(t){const e=Y_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qg(o)}}}function qg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _I(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return K2(t,"POST","/v1/accounts:signInWithIdp",Tf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="http://localhost";class as extends J_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=xf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new as(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:xI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends Sf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Zo{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends Zo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return as._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return In.credential(n,r)}catch{return null}}}In.GOOGLE_SIGN_IN_METHOD="google.com";In.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Zo{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Zo{constructor(){super("twitter.com")}static credential(e,n){return as._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await tn._fromIdTokenResponse(e,r,s),o=Hg(r);return new oi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Hg(r);return new oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Hg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Hn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hl(e,n,r,s)}}function Z_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hl._fromErrorAndOperation(t,i,e,r):i})}async function wI(t,e,n=!1){const r=await Mo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(t,e,n=!1){const{auth:r}=t;if(en(r.app))return Promise.reject(Yr(r));const s="reauthenticate";try{const i=await Mo(t,Z_(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=If(i.idToken);ie(o,r,"internal-error");const{sub:c}=o;return ie(t.uid===c,r,"user-mismatch"),oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e,n=!1){if(en(t.app))return Promise.reject(Yr(t));const r="signIn",s=await Z_(t,r,e),i=await oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function TI(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function II(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function kI(t,e,n,r){return Xe(t).onAuthStateChanged(e,n,r)}function NI(t){return Xe(t).signOut()}const Wl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wl,"1"),this.storage.removeItem(Wl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=1e3,AI=10;class tx extends ex{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);iI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AI):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},SI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tx.type="LOCAL";const CI=tx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends ex{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nx.type="SESSION";const rx=nx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Nc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),u=await PI(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const h=Af("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return window}function jI(t){pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function DI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OI(){return sx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="firebaseLocalStorageDb",MI=1,Gl="firebaseLocalStorage",ox="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sc(t,e){return t.transaction([Gl],e?"readwrite":"readonly").objectStore(Gl)}function LI(){const t=indexedDB.deleteDatabase(ix);return new ea(t).toPromise()}function nh(){const t=indexedDB.open(ix,MI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gl,{keyPath:ox})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gl)?e(r):(r.close(),await LI(),e(await nh()))})})}async function Wg(t,e,n){const r=Sc(t,!0).put({[ox]:e,value:n});return new ea(r).toPromise()}async function FI(t,e){const n=Sc(t,!1).get(e),r=await new ea(n).toPromise();return r===void 0?null:r.value}function Gg(t,e){const n=Sc(t,!0).delete(e);return new ea(n).toPromise()}const UI=800,zI=3;class ax{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nc._getInstance(OI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DI(),!this.activeServiceWorker)return;this.sender=new RI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nh();return await Wg(e,Wl,"1"),await Gg(e,Wl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Sc(s,!1).getAll();return new ea(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ax.type="LOCAL";const $I=ax;new Jo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t,e){return e?An(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends J_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BI(t){return EI(t.auth,new Cf(t),t.bypassAuthState)}function qI(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),bI(n,new Cf(t),t.bypassAuthState)}async function HI(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),wI(n,new Cf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BI;case"linkViaPopup":case"linkViaRedirect":return HI;case"reauthViaPopup":case"reauthViaRedirect":return qI;default:_n(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new Jo(2e3,1e4);async function GI(t,e,n){if(en(t.app))return Promise.reject(sn(t,"operation-not-supported-in-this-environment"));const r=kc(t);z2(t,e,Sf);const s=lx(r,n);return new Gr(r,"signInViaPopup",e,s).executeNotNull()}class Gr extends cx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Gr.currentPopupAction&&Gr.currentPopupAction.cancel(),Gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WI.get())};e()}}Gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="pendingRedirect",al=new Map;class QI extends cx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=al.get(this.auth._key());if(!e){try{const r=await XI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}al.set(this.auth._key(),e)}return this.bypassAuthState||al.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XI(t,e){const n=ZI(e),r=JI(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function YI(t,e){al.set(t._key(),e)}function JI(t){return An(t._redirectPersistence)}function ZI(t){return ol(KI,t.config.apiKey,t.name)}async function ek(t,e,n=!1){if(en(t.app))return Promise.reject(Yr(t));const r=kc(t),s=lx(r,e),o=await new QI(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=10*60*1e3;class nk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ux(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(e))}saveEventToCache(e){this.cachedEventUids.add(Kg(e)),this.lastProcessedEventTime=Date.now()}}function Kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ux({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ux(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(t,e={}){return xi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ok=/^https?/;async function ak(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sk(t);for(const n of e)try{if(lk(n))return}catch{}_n(t,"unauthorized-domain")}function lk(t){const e=eh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ok.test(n))return!1;if(ik.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new Jo(3e4,6e4);function Qg(){const t=pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uk(t){return new Promise((e,n)=>{var r,s,i;function o(){Qg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qg(),n(sn(t,"network-request-failed"))},timeout:ck.get()})}if(!((s=(r=pn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=pn().gapi)===null||i===void 0)&&i.load)o();else{const c=pI("iframefcb");return pn()[c]=()=>{gapi.load?o():n(sn(t,"network-request-failed"))},hI(`${fI()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw ll=null,e})}let ll=null;function dk(t){return ll=ll||uk(t),ll}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new Jo(5e3,15e3),fk="__/auth/iframe",pk="emulator/auth/iframe",mk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yk(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ef(e,pk):`https://${t.config.authDomain}/${fk}`,r={apiKey:e.apiKey,appName:t.name,v:_i},s=gk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Yo(r).slice(1)}`}async function vk(t){const e=await dk(t),n=pn().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:yk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=sn(t,"network-request-failed"),c=pn().setTimeout(()=>{i(o)},hk.get());function u(){pn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xk=500,wk=600,bk="_blank",Ek="http://localhost";class Xg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tk(t,e,n,r=xk,s=wk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},_k),{width:r.toString(),height:s.toString(),top:i,left:o}),h=mt().toLowerCase();n&&(c=q_(h)?bk:n),$_(h)&&(e=e||Ek,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[T,S])=>`${g}${T}=${S},`,"");if(sI(h)&&c!=="_self")return Ik(e||"",c),new Xg(null);const m=window.open(e||"",c,p);ie(m,t,"popup-blocked");try{m.focus()}catch{}return new Xg(m)}function Ik(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="__/auth/handler",Nk="emulator/auth/handler",Sk=encodeURIComponent("fac");async function Yg(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_i,eventId:s};if(e instanceof Sf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Zo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${Sk}=${encodeURIComponent(u)}`:"";return`${Ak(t)}?${Yo(c).slice(1)}${h}`}function Ak({config:t}){return t.emulator?Ef(t,Nk):`https://${t.authDomain}/${kk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="webStorageSupport";class Ck{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rx,this._completeRedirectFn=ek,this._overrideRedirectResult=YI}async _openPopup(e,n,r,s){var i;Fn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Yg(e,n,r,eh(),s);return Tk(e,o,Af())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Yg(e,n,r,eh(),s);return jI(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Fn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vk(e),r=new nk(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xu,{type:Xu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Xu];o!==void 0&&n(!!o),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ak(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Q_()||B_()||kf()}}const Pk=Ck;var Jg="@firebase/auth",Zg="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dk(t){ii(new os("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X_(t)},h=new uI(r,s,i,u);return gI(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ii(new os("auth-internal",e=>{const n=kc(e.getProvider("auth").getImmediate());return(r=>new Rk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(Jg,Zg,jk(t)),_r(Jg,Zg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=5*60,Ok=k_("authIdTokenMaxAge")||Vk;let ey=null;const Mk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ok)return;const s=n==null?void 0:n.token;ey!==s&&(ey=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lk(t=R_()){const e=_f(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mI(t,{popupRedirectResolver:Pk,persistence:[$I,CI,rx]}),r=k_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Mk(i.toString());II(n,o,()=>o(n.currentUser)),TI(n,c=>o(c))}}const s=T_("auth");return s&&yI(n,`http://${s}`),n}function Fk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Fk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dk("Browser");var Uk="firebase",zk="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(Uk,zk,"app");var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xr,dx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function w(){}w.prototype=y.prototype,b.D=y.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,A,P){for(var k=Array(arguments.length-2),q=2;q<arguments.length;q++)k[q-2]=arguments[q];return y.prototype[A].apply(E,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)E[A]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(A=0;16>A;++A)E[A]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=b.g[0],w=b.g[1],A=b.g[2];var P=b.g[3],k=y+(P^w&(A^P))+E[0]+3614090360&4294967295;y=w+(k<<7&4294967295|k>>>25),k=P+(A^y&(w^A))+E[1]+3905402710&4294967295,P=y+(k<<12&4294967295|k>>>20),k=A+(w^P&(y^w))+E[2]+606105819&4294967295,A=P+(k<<17&4294967295|k>>>15),k=w+(y^A&(P^y))+E[3]+3250441966&4294967295,w=A+(k<<22&4294967295|k>>>10),k=y+(P^w&(A^P))+E[4]+4118548399&4294967295,y=w+(k<<7&4294967295|k>>>25),k=P+(A^y&(w^A))+E[5]+1200080426&4294967295,P=y+(k<<12&4294967295|k>>>20),k=A+(w^P&(y^w))+E[6]+2821735955&4294967295,A=P+(k<<17&4294967295|k>>>15),k=w+(y^A&(P^y))+E[7]+4249261313&4294967295,w=A+(k<<22&4294967295|k>>>10),k=y+(P^w&(A^P))+E[8]+1770035416&4294967295,y=w+(k<<7&4294967295|k>>>25),k=P+(A^y&(w^A))+E[9]+2336552879&4294967295,P=y+(k<<12&4294967295|k>>>20),k=A+(w^P&(y^w))+E[10]+4294925233&4294967295,A=P+(k<<17&4294967295|k>>>15),k=w+(y^A&(P^y))+E[11]+2304563134&4294967295,w=A+(k<<22&4294967295|k>>>10),k=y+(P^w&(A^P))+E[12]+1804603682&4294967295,y=w+(k<<7&4294967295|k>>>25),k=P+(A^y&(w^A))+E[13]+4254626195&4294967295,P=y+(k<<12&4294967295|k>>>20),k=A+(w^P&(y^w))+E[14]+2792965006&4294967295,A=P+(k<<17&4294967295|k>>>15),k=w+(y^A&(P^y))+E[15]+1236535329&4294967295,w=A+(k<<22&4294967295|k>>>10),k=y+(A^P&(w^A))+E[1]+4129170786&4294967295,y=w+(k<<5&4294967295|k>>>27),k=P+(w^A&(y^w))+E[6]+3225465664&4294967295,P=y+(k<<9&4294967295|k>>>23),k=A+(y^w&(P^y))+E[11]+643717713&4294967295,A=P+(k<<14&4294967295|k>>>18),k=w+(P^y&(A^P))+E[0]+3921069994&4294967295,w=A+(k<<20&4294967295|k>>>12),k=y+(A^P&(w^A))+E[5]+3593408605&4294967295,y=w+(k<<5&4294967295|k>>>27),k=P+(w^A&(y^w))+E[10]+38016083&4294967295,P=y+(k<<9&4294967295|k>>>23),k=A+(y^w&(P^y))+E[15]+3634488961&4294967295,A=P+(k<<14&4294967295|k>>>18),k=w+(P^y&(A^P))+E[4]+3889429448&4294967295,w=A+(k<<20&4294967295|k>>>12),k=y+(A^P&(w^A))+E[9]+568446438&4294967295,y=w+(k<<5&4294967295|k>>>27),k=P+(w^A&(y^w))+E[14]+3275163606&4294967295,P=y+(k<<9&4294967295|k>>>23),k=A+(y^w&(P^y))+E[3]+4107603335&4294967295,A=P+(k<<14&4294967295|k>>>18),k=w+(P^y&(A^P))+E[8]+1163531501&4294967295,w=A+(k<<20&4294967295|k>>>12),k=y+(A^P&(w^A))+E[13]+2850285829&4294967295,y=w+(k<<5&4294967295|k>>>27),k=P+(w^A&(y^w))+E[2]+4243563512&4294967295,P=y+(k<<9&4294967295|k>>>23),k=A+(y^w&(P^y))+E[7]+1735328473&4294967295,A=P+(k<<14&4294967295|k>>>18),k=w+(P^y&(A^P))+E[12]+2368359562&4294967295,w=A+(k<<20&4294967295|k>>>12),k=y+(w^A^P)+E[5]+4294588738&4294967295,y=w+(k<<4&4294967295|k>>>28),k=P+(y^w^A)+E[8]+2272392833&4294967295,P=y+(k<<11&4294967295|k>>>21),k=A+(P^y^w)+E[11]+1839030562&4294967295,A=P+(k<<16&4294967295|k>>>16),k=w+(A^P^y)+E[14]+4259657740&4294967295,w=A+(k<<23&4294967295|k>>>9),k=y+(w^A^P)+E[1]+2763975236&4294967295,y=w+(k<<4&4294967295|k>>>28),k=P+(y^w^A)+E[4]+1272893353&4294967295,P=y+(k<<11&4294967295|k>>>21),k=A+(P^y^w)+E[7]+4139469664&4294967295,A=P+(k<<16&4294967295|k>>>16),k=w+(A^P^y)+E[10]+3200236656&4294967295,w=A+(k<<23&4294967295|k>>>9),k=y+(w^A^P)+E[13]+681279174&4294967295,y=w+(k<<4&4294967295|k>>>28),k=P+(y^w^A)+E[0]+3936430074&4294967295,P=y+(k<<11&4294967295|k>>>21),k=A+(P^y^w)+E[3]+3572445317&4294967295,A=P+(k<<16&4294967295|k>>>16),k=w+(A^P^y)+E[6]+76029189&4294967295,w=A+(k<<23&4294967295|k>>>9),k=y+(w^A^P)+E[9]+3654602809&4294967295,y=w+(k<<4&4294967295|k>>>28),k=P+(y^w^A)+E[12]+3873151461&4294967295,P=y+(k<<11&4294967295|k>>>21),k=A+(P^y^w)+E[15]+530742520&4294967295,A=P+(k<<16&4294967295|k>>>16),k=w+(A^P^y)+E[2]+3299628645&4294967295,w=A+(k<<23&4294967295|k>>>9),k=y+(A^(w|~P))+E[0]+4096336452&4294967295,y=w+(k<<6&4294967295|k>>>26),k=P+(w^(y|~A))+E[7]+1126891415&4294967295,P=y+(k<<10&4294967295|k>>>22),k=A+(y^(P|~w))+E[14]+2878612391&4294967295,A=P+(k<<15&4294967295|k>>>17),k=w+(P^(A|~y))+E[5]+4237533241&4294967295,w=A+(k<<21&4294967295|k>>>11),k=y+(A^(w|~P))+E[12]+1700485571&4294967295,y=w+(k<<6&4294967295|k>>>26),k=P+(w^(y|~A))+E[3]+2399980690&4294967295,P=y+(k<<10&4294967295|k>>>22),k=A+(y^(P|~w))+E[10]+4293915773&4294967295,A=P+(k<<15&4294967295|k>>>17),k=w+(P^(A|~y))+E[1]+2240044497&4294967295,w=A+(k<<21&4294967295|k>>>11),k=y+(A^(w|~P))+E[8]+1873313359&4294967295,y=w+(k<<6&4294967295|k>>>26),k=P+(w^(y|~A))+E[15]+4264355552&4294967295,P=y+(k<<10&4294967295|k>>>22),k=A+(y^(P|~w))+E[6]+2734768916&4294967295,A=P+(k<<15&4294967295|k>>>17),k=w+(P^(A|~y))+E[13]+1309151649&4294967295,w=A+(k<<21&4294967295|k>>>11),k=y+(A^(w|~P))+E[4]+4149444226&4294967295,y=w+(k<<6&4294967295|k>>>26),k=P+(w^(y|~A))+E[11]+3174756917&4294967295,P=y+(k<<10&4294967295|k>>>22),k=A+(y^(P|~w))+E[2]+718787259&4294967295,A=P+(k<<15&4294967295|k>>>17),k=w+(P^(A|~y))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var w=y-this.blockSize,E=this.B,A=this.h,P=0;P<y;){if(A==0)for(;P<=w;)s(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<y;)if(E[A++]=b.charCodeAt(P++),A==this.blockSize){s(this,E),A=0;break}}else for(;P<y;)if(E[A++]=b[P++],A==this.blockSize){s(this,E),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var w=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=w&255,w/=256;for(this.u(b),b=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)b[w++]=this.g[y]>>>E&255;return b};function i(b,y){var w=c;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=y(b)}function o(b,y){this.h=y;for(var w=[],E=!0,A=b.length-1;0<=A;A--){var P=b[A]|0;E&&P==y||(w[A]=P,E=!1)}this.g=w}var c={};function u(b){return-128<=b&&128>b?i(b,function(y){return new o([y|0],0>y?-1:0)}):new o([b|0],0>b?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return C(h(-b));for(var y=[],w=1,E=0;b>=w;E++)y[E]=b/w|0,w*=4294967296;return new o(y,0)}function p(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return C(p(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(y,8)),E=m,A=0;A<b.length;A+=8){var P=Math.min(8,b.length-A),k=parseInt(b.substring(A,A+P),y);8>P?(P=h(Math.pow(y,P)),E=E.j(P).add(h(k))):(E=E.j(w),E=E.add(h(k)))}return E}var m=u(0),g=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-C(this).m();for(var b=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(N(this))return"-"+C(this).toString(b);for(var y=h(Math.pow(b,6)),w=this,E="";;){var A=j(w,y).g;w=x(w,A.j(y));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=A,S(w))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=x(this,b),N(b)?-1:S(b)?0:1};function C(b){for(var y=b.g.length,w=[],E=0;E<y;E++)w[E]=~b.g[E];return new o(w,~b.h).add(g)}t.abs=function(){return N(this)?C(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0,A=0;A<=y;A++){var P=E+(this.i(A)&65535)+(b.i(A)&65535),k=(P>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);E=k>>>16,P&=65535,k&=65535,w[A]=k<<16|P}return new o(w,w[w.length-1]&-2147483648?-1:0)};function x(b,y){return b.add(C(y))}t.j=function(b){if(S(this)||S(b))return m;if(N(this))return N(b)?C(this).j(C(b)):C(C(this).j(b));if(N(b))return C(this.j(C(b)));if(0>this.l(T)&&0>b.l(T))return h(this.m()*b.m());for(var y=this.g.length+b.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<b.g.length;A++){var P=this.i(E)>>>16,k=this.i(E)&65535,q=b.i(A)>>>16,V=b.i(A)&65535;w[2*E+2*A]+=k*V,_(w,2*E+2*A),w[2*E+2*A+1]+=P*V,_(w,2*E+2*A+1),w[2*E+2*A+1]+=k*q,_(w,2*E+2*A+1),w[2*E+2*A+2]+=P*q,_(w,2*E+2*A+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new o(w,0)};function _(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function I(b,y){this.g=b,this.h=y}function j(b,y){if(S(y))throw Error("division by zero");if(S(b))return new I(m,m);if(N(b))return y=j(C(b),y),new I(C(y.g),C(y.h));if(N(y))return y=j(b,C(y)),new I(C(y.g),y.h);if(30<b.g.length){if(N(b)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var w=g,E=y;0>=E.l(b);)w=U(w),E=U(E);var A=$(w,1),P=$(E,1);for(E=$(E,2),w=$(w,2);!S(E);){var k=P.add(E);0>=k.l(b)&&(A=A.add(w),P=k),E=$(E,1),w=$(w,1)}return y=x(b,A.j(y)),new I(A,y)}for(A=m;0<=b.l(y);){for(w=Math.max(1,Math.floor(b.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),P=h(w),k=P.j(y);N(k)||0<k.l(b);)w-=E,P=h(w),k=P.j(y);S(P)&&(P=g),A=A.add(P),b=x(b,k)}return new I(A,b)}t.A=function(b){return j(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&b.i(E);return new o(w,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|b.i(E);return new o(w,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^b.i(E);return new o(w,this.h^b.h)};function U(b){for(var y=b.g.length+1,w=[],E=0;E<y;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new o(w,b.h)}function $(b,y){var w=y>>5;y%=32;for(var E=b.g.length-w,A=[],P=0;P<E;P++)A[P]=0<y?b.i(P+w)>>>y|b.i(P+w+1)<<32-y:b.i(P+w);return new o(A,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,xr=o}).apply(typeof ty<"u"?ty:typeof self<"u"?self:typeof window<"u"?window:{});var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hx,Ji,fx,cl,rh,px,mx,gx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ua=="object"&&Ua];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var R=a[v];if(!(R in f))break e;f=f[R]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,v=!1,R={next:function(){if(!v&&f<a.length){var O=f++;return{value:d(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),a.apply(d,R)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function T(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function S(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,R,O){for(var H=Array(arguments.length-2),we=2;we<arguments.length;we++)H[we-2]=arguments[we];return d.prototype[R].apply(v,H)}}function N(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function C(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const R=a.length||0,O=v.length||0;a.length=R+O;for(let H=0;H<O;H++)a[R+H]=v[H]}else a.push(v)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function $(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function b(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)a[f]=v[f];for(let O=0;O<w.length;O++)f=w[O],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function P(a){c.setTimeout(()=>{throw a},0)}function k(){var a=J;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class q{constructor(){this.h=this.g=null}add(d,f){const v=V.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var V=new x(()=>new G,a=>a.reset());class G{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let te,M=!1,J=new q,D=()=>{const a=c.Promise.resolve(void 0);te=()=>{a.then(K)}};var K=()=>{for(var a;a=k();){try{a.h.call(a.g)}catch(f){P(f)}var d=V;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}M=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function ee(a,d){if(re.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(U){e:{try{j(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ce[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ee.aa.h.call(this)}}S(ee,re);var Ce={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),oe=0;function be(a,d,f,v,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=R,this.key=++oe,this.da=this.fa=!1}function ge(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ye(a){this.src=a,this.g={},this.h=0}Ye.prototype.add=function(a,d,f,v,R){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var H=Wn(a,d,v,R);return-1<H?(d=a[H],f||(d.fa=!1)):(d=new be(d,this.src,O,!!v,R),d.fa=f,a.push(d)),d};function Et(a,d){var f=d.type;if(f in a.g){var v=a.g[f],R=Array.prototype.indexOf.call(v,d,void 0),O;(O=0<=R)&&Array.prototype.splice.call(v,R,1),O&&(ge(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Wn(a,d,f,v){for(var R=0;R<a.length;++R){var O=a[R];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==v)return R}return-1}var Kt="closure_lm_"+(1e6*Math.random()|0),ys={};function _p(a,d,f,v,R){if(Array.isArray(d)){for(var O=0;O<d.length;O++)_p(a,d[O],f,v,R);return null}return f=bp(f),a&&a[W]?a.K(d,f,h(v)?!!v.capture:!1,R):t1(a,d,f,!1,v,R)}function t1(a,d,f,v,R,O){if(!d)throw Error("Invalid event type");var H=h(R)?!!R.capture:!!R,we=eu(a);if(we||(a[Kt]=we=new Ye(a)),f=we.add(d,f,v,H,O),f.proxy)return f;if(v=n1(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)ue||(R=H),R===void 0&&(R=!1),a.addEventListener(d.toString(),v,R);else if(a.attachEvent)a.attachEvent(wp(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function n1(){function a(f){return d.call(a.src,a.listener,f)}const d=r1;return a}function xp(a,d,f,v,R){if(Array.isArray(d))for(var O=0;O<d.length;O++)xp(a,d[O],f,v,R);else v=h(v)?!!v.capture:!!v,f=bp(f),a&&a[W]?(a=a.i,d=String(d).toString(),d in a.g&&(O=a.g[d],f=Wn(O,f,v,R),-1<f&&(ge(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[d],a.h--)))):a&&(a=eu(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Wn(d,f,v,R)),(f=-1<a?d[a]:null)&&Zc(f))}function Zc(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[W])Et(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(wp(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=eu(d))?(Et(f,a),f.h==0&&(f.src=null,d[Kt]=null)):ge(a)}}}function wp(a){return a in ys?ys[a]:ys[a]="on"+a}function r1(a,d){if(a.da)a=!0;else{d=new ee(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&Zc(a),a=f.call(v,d)}return a}function eu(a){return a=a[Kt],a instanceof Ye?a:null}var tu="__closure_events_fn_"+(1e9*Math.random()>>>0);function bp(a){return typeof a=="function"?a:(a[tu]||(a[tu]=function(d){return a.handleEvent(d)}),a[tu])}function it(){X.call(this),this.i=new Ye(this),this.M=this,this.F=null}S(it,X),it.prototype[W]=!0,it.prototype.removeEventListener=function(a,d,f,v){xp(this,a,d,f,v)};function gt(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new re(d,a);else if(d instanceof re)d.target=d.target||a;else{var R=d;d=new re(v,a),E(d,R)}if(R=!0,f)for(var O=f.length-1;0<=O;O--){var H=d.g=f[O];R=oa(H,v,!0,d)&&R}if(H=d.g=a,R=oa(H,v,!0,d)&&R,R=oa(H,v,!1,d)&&R,f)for(O=0;O<f.length;O++)H=d.g=f[O],R=oa(H,v,!1,d)&&R}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)ge(f[v]);delete a.g[d],a.h--}}this.F=null},it.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},it.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function oa(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,O=0;O<d.length;++O){var H=d[O];if(H&&!H.da&&H.capture==f){var we=H.listener,Je=H.ha||H.src;H.fa&&Et(a.i,H),R=we.call(Je,v)!==!1&&R}}return R&&!v.defaultPrevented}function Ep(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Tp(a){a.g=Ep(()=>{a.g=null,a.i&&(a.i=!1,Tp(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class s1 extends X{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Tp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(a){X.call(this),this.h=a,this.g={}}S(Ni,X);var Ip=[];function kp(a){$(a.g,function(d,f){this.g.hasOwnProperty(f)&&Zc(d)},a),a.g={}}Ni.prototype.N=function(){Ni.aa.N.call(this),kp(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nu=c.JSON.stringify,i1=c.JSON.parse,o1=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function ru(){}ru.prototype.h=null;function Np(a){return a.h||(a.h=a.i())}function Sp(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function su(){re.call(this,"d")}S(su,re);function iu(){re.call(this,"c")}S(iu,re);var Mr={},Ap=null;function aa(){return Ap=Ap||new it}Mr.La="serverreachability";function Cp(a){re.call(this,Mr.La,a)}S(Cp,re);function Ai(a){const d=aa();gt(d,new Cp(d))}Mr.STAT_EVENT="statevent";function Pp(a,d){re.call(this,Mr.STAT_EVENT,a),this.stat=d}S(Pp,re);function yt(a){const d=aa();gt(d,new Pp(d,a))}Mr.Ma="timingevent";function Rp(a,d){re.call(this,Mr.Ma,a),this.size=d}S(Rp,re);function Ci(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Pi(){this.g=!0}Pi.prototype.xa=function(){this.g=!1};function a1(a,d,f,v,R,O){a.info(function(){if(a.g)if(O)for(var H="",we=O.split("&"),Je=0;Je<we.length;Je++){var ve=we[Je].split("=");if(1<ve.length){var ot=ve[0];ve=ve[1];var at=ot.split("_");H=2<=at.length&&at[1]=="type"?H+(ot+"="+ve+"&"):H+(ot+"=redacted&")}}else H=null;else H=O;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+d+`
`+f+`
`+H})}function l1(a,d,f,v,R,O,H){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+d+`
`+f+`
`+O+" "+H})}function vs(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+u1(a,f)+(v?" "+v:"")})}function c1(a,d){a.info(function(){return"TIMEOUT: "+d})}Pi.prototype.info=function(){};function u1(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var O=R[0];if(O!="noop"&&O!="stop"&&O!="close")for(var H=1;H<R.length;H++)R[H]=""}}}}return nu(f)}catch{return d}}var la={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ou;function ca(){}S(ca,ru),ca.prototype.g=function(){return new XMLHttpRequest},ca.prototype.i=function(){return{}},ou=new ca;function Gn(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new Ni(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dp}function Dp(){this.i=null,this.g="",this.h=!1}var Vp={},au={};function lu(a,d,f){a.L=1,a.v=fa(wn(d)),a.m=f,a.P=!0,Op(a,null)}function Op(a,d){a.F=Date.now(),ua(a),a.A=wn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Xp(f.i,"t",v),a.C=0,f=a.j.J,a.h=new Dp,a.g=pm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new s1(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(Ip[0]=R.toString()),R=Ip);for(var O=0;O<R.length;O++){var H=_p(f,R[O],v||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ai(),a1(a.i,a.u,a.A,a.l,a.R,a.m)}Gn.prototype.ca=function(a){a=a.target;const d=this.M;d&&bn(a)==3?d.j():this.Y(a)},Gn.prototype.Y=function(a){try{if(a==this.g)e:{const at=bn(this.g);var d=this.g.Ba();const ws=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||rm(this.g)))){this.J||at!=4||d==7||(d==8||0>=ws?Ai(3):Ai(2)),cu(this);var f=this.g.Z();this.X=f;t:if(Mp(this)){var v=rm(this.g);a="";var R=v.length,O=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),Ri(this);var H="";break t}this.h.i=new c.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(O&&d==R-1)});v.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=f==200,l1(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Je=this.g;if((we=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(we)){var ve=we;break t}}ve=null}if(f=ve)vs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uu(this,f);else{this.o=!1,this.s=3,yt(12),Lr(this),Ri(this);break e}}if(this.P){f=!0;let Qt;for(;!this.J&&this.C<H.length;)if(Qt=d1(this,H),Qt==au){at==4&&(this.s=4,yt(14),f=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Vp){this.s=4,yt(15),vs(this.i,this.l,H,"[Invalid Chunk]"),f=!1;break}else vs(this.i,this.l,Qt,null),uu(this,Qt);if(Mp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||H.length!=0||this.h.h||(this.s=1,yt(16),f=!1),this.o=this.o&&f,!f)vs(this.i,this.l,H,"[Invalid Chunked Response]"),Lr(this),Ri(this);else if(0<H.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),gu(ot),ot.M=!0,yt(11))}}else vs(this.i,this.l,H,null),uu(this,H);at==4&&Lr(this),this.o&&!this.J&&(at==4?um(this.j,this):(this.o=!1,ua(this)))}else S1(this.g),f==400&&0<H.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Lr(this),Ri(this)}}}catch{}finally{}};function Mp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function d1(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?au:(f=Number(d.substring(f,v)),isNaN(f)?Vp:(v+=1,v+f>d.length?au:(d=d.slice(v,v+f),a.C=v+f,d)))}Gn.prototype.cancel=function(){this.J=!0,Lr(this)};function ua(a){a.S=Date.now()+a.I,Lp(a,a.I)}function Lp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ci(g(a.ba,a),d)}function cu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Gn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(c1(this.i,this.A),this.L!=2&&(Ai(),yt(17)),Lr(this),this.s=2,Ri(this)):Lp(this,this.S-a)};function Ri(a){a.j.G==0||a.J||um(a.j,a)}function Lr(a){cu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,kp(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function uu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||du(f.h,a))){if(!a.K&&du(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)_a(f),ya(f);else break e;mu(f),yt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ci(g(f.Za,f),6e3));if(1>=zp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ur(f,11)}else if((a.K||f.g==a)&&_a(f),!_(d))for(R=f.Da.g.parse(d),d=0;d<R.length;d++){let ve=R[d];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];const ot=ve[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));const at=ve[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));const ws=ve[5];ws!=null&&typeof ws=="number"&&0<ws&&(v=1.5*ws,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Qt=a.g;if(Qt){const wa=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wa){var O=v.h;O.g||wa.indexOf("spdy")==-1&&wa.indexOf("quic")==-1&&wa.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(hu(O,O.h),O.h=null))}if(v.D){const yu=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;yu&&(v.ya=yu,Ie(v.I,v.D,yu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var H=a;if(v.qa=fm(v,v.J?v.ia:null,v.W),H.K){$p(v.h,H);var we=H,Je=v.L;Je&&(we.I=Je),we.B&&(cu(we),ua(we)),v.g=H}else lm(v);0<f.i.length&&va(f)}else ve[0]!="stop"&&ve[0]!="close"||Ur(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Ur(f,7):pu(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}Ai(4)}catch{}}var h1=class{constructor(a,d){this.g=a,this.map=d}};function Fp(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Up(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function zp(a){return a.h?1:a.g?a.g.size:0}function du(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function hu(a,d){a.g?a.g.add(d):a.h=d}function $p(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Fp.prototype.cancel=function(){if(this.i=Bp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Bp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function f1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function p1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function qp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=p1(a),v=f1(a),R=v.length,O=0;O<R;O++)d.call(void 0,v[O],f&&f[O],a)}var Hp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),R=null;if(0<=v){var O=a[f].substring(0,v);R=a[f].substring(v+1)}else O=a[f];d(O,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Fr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Fr){this.h=a.h,da(this,a.j),this.o=a.o,this.g=a.g,ha(this,a.s),this.l=a.l;var d=a.i,f=new Vi;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Wp(this,f),this.m=a.m}else a&&(d=String(a).match(Hp))?(this.h=!1,da(this,d[1]||"",!0),this.o=ji(d[2]||""),this.g=ji(d[3]||"",!0),ha(this,d[4]),this.l=ji(d[5]||"",!0),Wp(this,d[6]||"",!0),this.m=ji(d[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}Fr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Di(d,Gp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Di(d,Gp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Di(f,f.charAt(0)=="/"?v1:y1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Di(f,x1)),a.join("")};function wn(a){return new Fr(a)}function da(a,d,f){a.j=f?ji(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ha(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Wp(a,d,f){d instanceof Vi?(a.i=d,w1(a.i,a.h)):(f||(d=Di(d,_1)),a.i=new Vi(d,a.h))}function Ie(a,d,f){a.i.set(d,f)}function fa(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ji(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Di(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,g1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function g1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Gp=/[#\/\?@]/g,y1=/[#\?:]/g,v1=/[#\?]/g,_1=/[#\?@]/g,x1=/#/g;function Vi(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Kn(a){a.g||(a.g=new Map,a.h=0,a.i&&m1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Vi.prototype,t.add=function(a,d){Kn(this),this.i=null,a=_s(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Kp(a,d){Kn(a),d=_s(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Qp(a,d){return Kn(a),d=_s(a,d),a.g.has(d)}t.forEach=function(a,d){Kn(this),this.g.forEach(function(f,v){f.forEach(function(R){a.call(d,R,v,this)},this)},this)},t.na=function(){Kn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const R=a[v];for(let O=0;O<R.length;O++)f.push(d[v])}return f},t.V=function(a){Kn(this);let d=[];if(typeof a=="string")Qp(this,a)&&(d=d.concat(this.g.get(_s(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Kn(this),this.i=null,a=_s(this,a),Qp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Xp(a,d,f){Kp(a,d),0<f.length&&(a.i=null,a.g.set(_s(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const O=encodeURIComponent(String(v)),H=this.V(v);for(v=0;v<H.length;v++){var R=O;H[v]!==""&&(R+="="+encodeURIComponent(String(H[v]))),a.push(R)}}return this.i=a.join("&")};function _s(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function w1(a,d){d&&!a.j&&(Kn(a),a.i=null,a.g.forEach(function(f,v){var R=v.toLowerCase();v!=R&&(Kp(this,v),Xp(this,R,f))},a)),a.j=d}function b1(a,d){const f=new Pi;if(c.Image){const v=new Image;v.onload=T(Qn,f,"TestLoadImage: loaded",!0,d,v),v.onerror=T(Qn,f,"TestLoadImage: error",!1,d,v),v.onabort=T(Qn,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=T(Qn,f,"TestLoadImage: timeout",!1,d,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function E1(a,d){const f=new Pi,v=new AbortController,R=setTimeout(()=>{v.abort(),Qn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(R),O.ok?Qn(f,"TestPingServer: ok",!0,d):Qn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Qn(f,"TestPingServer: error",!1,d)})}function Qn(a,d,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function T1(){this.g=new o1}function I1(a,d,f){const v=f||"";try{qp(a,function(R,O){let H=R;h(R)&&(H=nu(R)),d.push(v+O+"="+encodeURIComponent(H))})}catch(R){throw d.push(v+"type="+encodeURIComponent("_badmap")),R}}function pa(a){this.l=a.Ub||null,this.j=a.eb||!1}S(pa,ru),pa.prototype.g=function(){return new ma(this.l,this.j)},pa.prototype.i=function(a){return function(){return a}}({});function ma(a,d){it.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ma,it),t=ma.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Mi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Oi(this):Mi(this),this.readyState==3&&Yp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Oi(this))},t.Qa=function(a){this.g&&(this.response=a,Oi(this))},t.ga=function(){this.g&&Oi(this)};function Oi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Mi(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Mi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Jp(a){let d="";return $(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function fu(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Jp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ie(a,d,f))}function Ve(a){it.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ve,it);var k1=/^https?$/i,N1=["POST","PUT"];t=Ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ou.g(),this.v=this.o?Np(this.o):Np(ou),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){Zp(this,O);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())f.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),R=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(N1,d,void 0))||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,H]of f)this.g.setRequestHeader(O,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nm(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Zp(this,O)}};function Zp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,em(a),ga(a)}function em(a){a.A||(a.A=!0,gt(a,"complete"),gt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,gt(this,"complete"),gt(this,"abort"),ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ga(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tm(this):this.bb())},t.bb=function(){tm(this)};function tm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||bn(a)!=4||a.Z()!=2)){if(a.u&&bn(a)==4)Ep(a.Ea,0,a);else if(gt(a,"readystatechange"),bn(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=H===0){var R=String(a.D).match(Hp)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),v=!k1.test(R?R.toLowerCase():"")}f=v}if(f)gt(a,"complete"),gt(a,"success");else{a.m=6;try{var O=2<bn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",em(a)}}finally{ga(a)}}}}function ga(a,d){if(a.g){nm(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||gt(a,"ready");try{f.onreadystatechange=v}catch{}}}function nm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function bn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),i1(d)}};function rm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function S1(a){const d={};a=(a.g&&2<=bn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=A(a[v]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=d[R]||[];d[R]=O,O.push(f)}b(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function sm(a){this.Aa=0,this.i=[],this.j=new Pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,a),this.cb=Li("retryDelaySeedMs",1e4,a),this.Wa=Li("forwardChannelMaxRetries",2,a),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Fp(a&&a.concurrentRequestLimit),this.Da=new T1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sm.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){yt(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=fm(this,null,this.W),va(this)};function pu(a){if(im(a),a.G==3){var d=a.U++,f=wn(a.I);if(Ie(f,"SID",a.K),Ie(f,"RID",d),Ie(f,"TYPE","terminate"),Fi(a,f),d=new Gn(a,a.j,d),d.L=2,d.v=fa(wn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=pm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ua(d)}hm(a)}function ya(a){a.g&&(gu(a),a.g.cancel(),a.g=null)}function im(a){ya(a),a.u&&(c.clearTimeout(a.u),a.u=null),_a(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function va(a){if(!Up(a.h)&&!a.s){a.s=!0;var d=a.Ga;te||D(),M||(te(),M=!0),J.add(d,a),a.B=0}}function A1(a,d){return zp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ci(g(a.Ga,a,d),dm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Gn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=y(O),E(O,this.S)):O=this.S),this.m!==null||this.O||(R.H=O,O=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=am(this,R,d),f=wn(this.I),Ie(f,"RID",a),Ie(f,"CVER",22),this.D&&Ie(f,"X-HTTP-Session-Id",this.D),Fi(this,f),O&&(this.O?d="headers="+encodeURIComponent(String(Jp(O)))+"&"+d:this.m&&fu(f,this.m,O)),hu(this.h,R),this.Ua&&Ie(f,"TYPE","init"),this.P?(Ie(f,"$req",d),Ie(f,"SID","null"),R.T=!0,lu(R,f,null)):lu(R,f,d),this.G=2}}else this.G==3&&(a?om(this,a):this.i.length==0||Up(this.h)||om(this))};function om(a,d){var f;d?f=d.l:f=a.U++;const v=wn(a.I);Ie(v,"SID",a.K),Ie(v,"RID",f),Ie(v,"AID",a.T),Fi(a,v),a.m&&a.o&&fu(v,a.m,a.o),f=new Gn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=am(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),hu(a.h,f),lu(f,v,d)}function Fi(a,d){a.H&&$(a.H,function(f,v){Ie(d,v,f)}),a.l&&qp({},function(f,v){Ie(d,v,f)})}function am(a,d,f){f=Math.min(a.i.length,f);var v=a.l?g(a.l.Na,a.l,a):null;e:{var R=a.i;let O=-1;for(;;){const H=["count="+f];O==-1?0<f?(O=R[0].g,H.push("ofs="+O)):O=0:H.push("ofs="+O);let we=!0;for(let Je=0;Je<f;Je++){let ve=R[Je].g;const ot=R[Je].map;if(ve-=O,0>ve)O=Math.max(0,R[Je].g-100),we=!1;else try{I1(ot,H,"req"+ve+"_")}catch{v&&v(ot)}}if(we){v=H.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function lm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;te||D(),M||(te(),M=!0),J.add(d,a),a.v=0}}function mu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ci(g(a.Fa,a),dm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,cm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ci(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),ya(this),cm(this))};function gu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function cm(a){a.g=new Gn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=wn(a.qa);Ie(d,"RID","rpc"),Ie(d,"SID",a.K),Ie(d,"AID",a.T),Ie(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(d,"TO",a.ja),Ie(d,"TYPE","xmlhttp"),Fi(a,d),a.m&&a.o&&fu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=fa(wn(d)),f.m=null,f.P=!0,Op(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),mu(this),yt(19))};function _a(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function um(a,d){var f=null;if(a.g==d){_a(a),gu(a),a.g=null;var v=2}else if(du(a.h,d))f=d.D,$p(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var R=a.B;v=aa(),gt(v,new Rp(v,f)),va(a)}else lm(a);else if(R=d.s,R==3||R==0&&0<d.X||!(v==1&&A1(a,d)||v==2&&mu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),R){case 1:Ur(a,5);break;case 4:Ur(a,10);break;case 3:Ur(a,6);break;default:Ur(a,2)}}}function dm(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Ur(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),v=a.Xa;const R=!v;v=new Fr(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||da(v,"https"),fa(v),R?b1(v.toString(),f):E1(v.toString(),f)}else yt(2);a.G=0,a.l&&a.l.sa(d),hm(a),im(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function hm(a){if(a.G=0,a.ka=[],a.l){const d=Bp(a.h);(d.length!=0||a.i.length!=0)&&(C(a.ka,d),C(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function fm(a,d,f){var v=f instanceof Fr?wn(f):new Fr(f);if(v.g!="")d&&(v.g=d+"."+v.g),ha(v,v.s);else{var R=c.location;v=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var O=new Fr(null);v&&da(O,v),d&&(O.g=d),R&&ha(O,R),f&&(O.l=f),v=O}return f=a.D,d=a.ya,f&&d&&Ie(v,f,d),Ie(v,"VER",a.la),Fi(a,v),v}function pm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ve(new pa({eb:f})):new Ve(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mm(){}t=mm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xa(){}xa.prototype.g=function(a,d){return new Rt(a,d)};function Rt(a,d){it.call(this),this.g=new sm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new xs(this)}S(Rt,it),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){pu(this.g)},Rt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=nu(a),a=f);d.i.push(new h1(d.Ya++,a)),d.G==3&&va(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,pu(this.g),delete this.g,Rt.aa.N.call(this)};function gm(a){su.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}S(gm,su);function ym(){iu.call(this),this.status=1}S(ym,iu);function xs(a){this.g=a}S(xs,mm),xs.prototype.ua=function(){gt(this.g,"a")},xs.prototype.ta=function(a){gt(this.g,new gm(a))},xs.prototype.sa=function(a){gt(this.g,new ym)},xs.prototype.ra=function(){gt(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,gx=function(){return new xa},mx=function(){return aa()},px=Mr,rh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},la.NO_ERROR=0,la.TIMEOUT=8,la.HTTP_ERROR=6,cl=la,jp.COMPLETE="complete",fx=jp,Sp.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",it.prototype.listen=it.prototype.K,Ji=Sp,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,hx=Ve}).apply(typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{});const ny="@firebase/firestore",ry="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new yf("@firebase/firestore");function Ts(){return ls.logLevel}function Y(t,...e){if(ls.logLevel<=fe.DEBUG){const n=e.map(Pf);ls.debug(`Firestore (${wi}): ${t}`,...n)}}function Un(t,...e){if(ls.logLevel<=fe.ERROR){const n=e.map(Pf);ls.error(`Firestore (${wi}): ${t}`,...n)}}function Tr(t,...e){if(ls.logLevel<=fe.WARN){const n=e.map(Pf);ls.warn(`Firestore (${wi}): ${t}`,...n)}}function Pf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,yx(t,r,n)}function yx(t,e,n){let r=`FIRESTORE (${wi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Un(r),new Error(r)}function _e(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||yx(e,s,r)}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $k{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class Bk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qk{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new vx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class Hk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Wk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Hk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Kk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function sh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return de(r,s);{const i=_x(),o=Qk(i.encode(iy(t,n)),i.encode(iy(e,n)));return o!==0?o:de(r,s)}}n+=r>65535?2:1}return de(t.length,e.length)}function iy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Qk(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function ai(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__name__";class un{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return un.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof un?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=un.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return de(e.length,n.length)}static compareSegments(e,n){const r=un.isNumericId(e),s=un.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?un.extractNumericId(e).compare(un.extractNumericId(n)):sh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}}class Ee extends un{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const Xk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends un{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return Xk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oy}static keyField(){return new tt([oy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ee.fromString(e))}static fromName(e){return new ne(Ee.fromString(e).popFirst(5))}static empty(){return new ne(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e,n){if(!n)throw new Q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yk(t,e,n,r){if(e===!0&&r===!0)throw new Q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ay(t){if(!ne.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ly(t){if(ne.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ac(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function Pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ac(t);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e){const n={typeString:t};return e&&(n.value=e),n}function ta(t,e){if(!wx(t))throw new Q(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=-62135596800,uy=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*uy);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cy)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uy}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ta(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:Be("string",Ne._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ne(0,0))}static max(){return new ae(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=-1;function Jk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new Ir(s,ne.empty(),e)}function Zk(t){return new Ir(t.readTime,t.key,Lo)}class Ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ir(ae.min(),ne.empty(),Lo)}static max(){return new Ir(ae.max(),ne.empty(),Lo)}}function eN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==tN)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function rN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ei(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Cc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=-1;function Pc(t){return t==null}function Kl(t){return t===0&&1/t==-1/0}function sN(t){return typeof t=="number"&&Number.isInteger(t)&&!Kl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="";function iN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dy(e)),e=oN(t.get(n),e);return dy(e)}function oN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case bx:n+="";break;default:n+=i}}return n}function dy(t){return t+bx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ex(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}}class za{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fy(this.data.getIterator())}getIteratorFrom(e){return new fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new We(this.comparator);return n.data=e,n}}class fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new We(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Tx("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const aN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=aN.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="server_timestamp",kx="__type__",Nx="__previous_value__",Sx="__local_write_time__";function Df(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[kx])===null||n===void 0?void 0:n.stringValue)===Ix}function Rc(t){const e=t.mapValue.fields[Nx];return Df(e)?Rc(e):e}function Fo(t){const e=kr(t.mapValue.fields[Sx].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r,s,i,o,c,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const Ql="(default)";class Uo{constructor(e,n){this.projectId=e,this.database=n||Ql}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database===Ql}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="__type__",cN="__max__",$a={mapValue:{}},Cx="__vector__",Xl="value";function Sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Df(t)?4:dN(t)?9007199254740991:uN(t)?10:11:se(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=Sr(t);if(n!==Sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=kr(s.timestampValue),c=kr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Nr(s.bytesValue).isEqual(Nr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),c=Le(i.doubleValue);return o===c?Kl(o)===Kl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ai(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(hy(o)!==hy(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!xn(o[u],c[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function zo(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function li(t,e){if(t===e)return 0;const n=Sr(t),r=Sr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Le(i.integerValue||i.doubleValue),u=Le(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return py(t.timestampValue,e.timestampValue);case 4:return py(Fo(t),Fo(e));case 5:return sh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Nr(i),u=Nr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=de(c[h],u[h]);if(p!==0)return p}return de(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=de(Le(i.latitude),Le(o.latitude));return c!==0?c:de(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return my(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,h,p;const m=i.fields||{},g=o.fields||{},T=(c=m[Xl])===null||c===void 0?void 0:c.arrayValue,S=(u=g[Xl])===null||u===void 0?void 0:u.arrayValue,N=de(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:my(T,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$a.mapValue&&o===$a.mapValue)return 0;if(i===$a.mapValue)return 1;if(o===$a.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=sh(u[m],p[m]);if(g!==0)return g;const T=li(c[u[m]],h[p[m]]);if(T!==0)return T}return de(u.length,p.length)}(t.mapValue,e.mapValue);default:throw se(23264,{le:n})}}function py(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=kr(t),r=kr(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function my(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=li(n[s],r[s]);if(i)return i}return de(n.length,r.length)}function ci(t){return ih(t)}function ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Nr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ih(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ih(n.fields[o])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function ul(t){switch(Sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rc(t);return e?16+ul(e):16;case 5:return 2*t.stringValue.length;case 6:return Nr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ul(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Dr(r.fields,(i,o)=>{s+=i.length+ul(o)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function gy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oh(t){return!!t&&"integerValue"in t}function Vf(t){return!!t&&"arrayValue"in t}function yy(t){return!!t&&"nullValue"in t}function vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dl(t){return!!t&&"mapValue"in t}function uN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ax])===null||n===void 0?void 0:n.stringValue)===Cx}function po(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Dr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=po(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=po(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=po(n)}setAll(e){let n=tt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=po(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Dr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(po(this.value))}}function Px(t){const e=[];return Dr(t.fields,(n,r)=>{const s=new tt([n]);if(dl(r)){const i=Px(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ft(e,0,ae.min(),ae.min(),ae.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ae.min(),ae.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ae.min(),ae.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.position=e,this.inclusive=n}}function _y(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=li(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n="asc"){this.field=e,this.dir=n}}function hN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{}class $e extends Rx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pN(e,n,r):n==="array-contains"?new yN(e,r):n==="in"?new vN(e,r):n==="not-in"?new _N(e,r):n==="array-contains-any"?new xN(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mN(e,r):new gN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(li(n,this.value)):n!==null&&Sr(this.value)===Sr(n)&&this.matchesComparison(li(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends Rx{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new an(e,n)}matches(e){return jx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function jx(t){return t.op==="and"}function Dx(t){return fN(t)&&jx(t)}function fN(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function ah(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+ci(t.value);if(Dx(t))return t.filters.map(e=>ah(e)).join(",");{const e=t.filters.map(n=>ah(n)).join(",");return`${t.op}(${e})`}}function Vx(t,e){return t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Vx(o,s.filters[c]),!0):!1}(t,e):void se(19439)}function Ox(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${ci(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(Ox).join(" ,")+"}"}(t):"Filter"}class pN extends $e{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class mN extends $e{constructor(e,n){super(e,"in",n),this.keys=Mx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gN extends $e{constructor(e,n){super(e,"not-in",n),this.keys=Mx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Mx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class yN extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vf(n)&&zo(n.arrayValue,this.value)}}class vN extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zo(this.value.arrayValue,n)}}class _N extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zo(this.value.arrayValue,n)}}class xN extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Pe=null}}function wy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wN(t,e,n,r,s,i,o)}function Of(t){const e=ce(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ah(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ci(r)).join(",")),e.Pe=n}return e.Pe}function Mf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xy(t.startAt,e.startAt)&&xy(t.endAt,e.endAt)}function lh(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function bN(t,e,n,r,s,i,o,c){return new Ti(t,e,n,r,s,i,o,c)}function jc(t){return new Ti(t)}function by(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lx(t){return t.collectionGroup!==null}function mo(t){const e=ce(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new We(tt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new $o(i,r))}),n.has(tt.keyField().canonicalString())||e.Te.push(new $o(tt.keyField(),r))}return e.Te}function mn(t){const e=ce(t);return e.Ie||(e.Ie=EN(e,mo(t))),e.Ie}function EN(t,e){if(t.limitType==="F")return wy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $o(s.field,i)});const n=t.endAt?new Yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yl(t.startAt.position,t.startAt.inclusive):null;return wy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ch(t,e){const n=t.filters.concat([e]);return new Ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uh(t,e,n){return new Ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Mf(mn(t),mn(e))&&t.limitType===e.limitType}function Fx(t){return`${Of(mn(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Ox(s)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ci(s)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of mo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const h=_y(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,mo(r),s)||r.endAt&&!function(o,c,u){const h=_y(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,mo(r),s))}(t,e)}function TN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ux(t){return(e,n)=>{let r=!1;for(const s of mo(t)){const i=IN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IN(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),h=c.data.field(i);return u!==null&&h!==null?li(u,h):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ex(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new De(ne.comparator);function zn(){return kN}const zx=new De(ne.comparator);function Zi(...t){let e=zx;for(const n of t)e=e.insert(n.key,n);return e}function $x(t){let e=zx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kr(){return go()}function Bx(){return go()}function go(){return new ps(t=>t.toString(),(t,e)=>t.isEqual(e))}const NN=new De(ne.comparator),SN=new We(ne.comparator);function pe(...t){let e=SN;for(const n of t)e=e.add(n);return e}const AN=new We(de);function CN(){return AN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kl(e)?"-0":e}}function qx(t){return{integerValue:""+t}}function PN(t,e){return sN(e)?qx(e):Lf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function RN(t,e,n){return t instanceof Bo?function(s,i){const o={fields:{[kx]:{stringValue:Ix},[Sx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Df(i)&&(i=Rc(i)),i&&(o.fields[Nx]=i),{mapValue:o}}(n,e):t instanceof ui?Wx(t,e):t instanceof di?Gx(t,e):function(s,i){const o=Hx(s,i),c=Ey(o)+Ey(s.Ee);return oh(o)&&oh(s.Ee)?qx(c):Lf(s.serializer,c)}(t,e)}function jN(t,e,n){return t instanceof ui?Wx(t,e):t instanceof di?Gx(t,e):n}function Hx(t,e){return t instanceof Jl?function(r){return oh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Bo extends Oc{}class ui extends Oc{constructor(e){super(),this.elements=e}}function Wx(t,e){const n=Kx(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class di extends Oc{constructor(e){super(),this.elements=e}}function Gx(t,e){let n=Kx(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Jl extends Oc{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ey(t){return Le(t.integerValue||t.doubleValue)}function Kx(t){return Vf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.field=e,this.transform=n}}function DN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ui&&s instanceof ui||r instanceof di&&s instanceof di?ai(r.elements,s.elements,xn):r instanceof Jl&&s instanceof Jl?xn(r.Ee,s.Ee):r instanceof Bo&&s instanceof Bo}(t.transform,e.transform)}class VN{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mc{}function Qx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uf(t.key,Ht.none()):new na(t.key,t.data,Ht.none());{const n=t.data,r=kt.empty();let s=new We(tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Vr(t.key,r,new Vt(s.toArray()),Ht.none())}}function ON(t,e,n){t instanceof na?function(s,i,o){const c=s.value.clone(),u=Iy(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(s,i,o){if(!hl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Iy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Xx(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function yo(t,e,n,r){return t instanceof na?function(i,o,c,u){if(!hl(i.precondition,o))return c;const h=i.value.clone(),p=ky(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vr?function(i,o,c,u){if(!hl(i.precondition,o))return c;const h=ky(i.fieldTransforms,u,o),p=o.data;return p.setAll(Xx(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return hl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function MN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Hx(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function Ty(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ai(r,s,(i,o)=>DN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class na extends Mc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vr extends Mc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Xx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Iy(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,jN(o,c,n[s]))}return r}function ky(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,RN(i,o,e))}return r}class Uf extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LN extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ON(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=yo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=yo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Bx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Qx(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&ai(this.mutations,e.mutations,(n,r)=>Ty(n,r))&&ai(this.baseMutations,e.baseMutations,(n,r)=>Ty(n,r))}}class zf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return NN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,me;function $N(t){switch(t){case L.OK:return se(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function Yx(t){if(t===void 0)return Un("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ue.OK:return L.OK;case Ue.CANCELLED:return L.CANCELLED;case Ue.UNKNOWN:return L.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return L.INTERNAL;case Ue.UNAVAILABLE:return L.UNAVAILABLE;case Ue.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ue.NOT_FOUND:return L.NOT_FOUND;case Ue.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ue.ABORTED:return L.ABORTED;case Ue.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ue.DATA_LOSS:return L.DATA_LOSS;default:return se(39323,{code:t})}}(me=Ue||(Ue={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new xr([4294967295,4294967295],0);function Ny(t){const e=_x().encode(t),n=new dx;return n.update(e),new Uint8Array(n.digest())}function Sy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xr([n,r],0),new xr([s,i],0)]}class $f{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new eo(`Invalid padding: ${n}`);if(r<0)throw new eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new eo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=xr.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(xr.fromNumber(r)));return s.compare(BN)===1&&(s=new xr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ny(e),[r,s]=Sy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $f(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.fe===0)return;const n=Ny(e),[r,s]=Sy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ra.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lc(ae.min(),s,new De(de),zn(),pe())}}class ra{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ra(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class Jx{constructor(e,n){this.targetId=e,this.De=n}}class Zx{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ay{constructor(){this.ve=0,this.Ce=Cy(),this.Fe=st.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pe(),n=pe(),r=pe();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new ra(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Cy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class qN{constructor(e){this.We=e,this.Ge=new Map,this.ze=zn(),this.je=Ba(),this.Je=Ba(),this.He=new De(de)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(lh(i))if(r===0){const o=new ne(i.path);this.Xe(n,o,ft.newNoDocument(o,ae.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const c=this._t(e),u=c?this.ut(c,e,o):1;if(u!==0){this.rt(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Nr(r).toUint8Array()}catch(u){if(u instanceof Tx)return Tr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new $f(o,s,i)}catch(u){return Tr(u instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const c=this.st(o);if(c){if(i.current&&lh(c.target)){const u=new ne(c.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,ft.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=pe();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.st(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Lc(e,n,this.He,this.ze,r);return this.ze=zn(),this.je=Ba(),this.Je=Ba(),this.He=new De(de),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ay,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new We(de),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new We(de),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ay),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Ba(){return new De(ne.comparator)}function Cy(){return new De(ne.comparator)}const HN={asc:"ASCENDING",desc:"DESCENDING"},WN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GN={and:"AND",or:"OR"};class KN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dh(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function Zl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ew(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QN(t,e){return Zl(t,e.toTimestamp())}function gn(t){return _e(!!t,49232),ae.fromTimestamp(function(n){const r=kr(n);return new Ne(r.seconds,r.nanos)}(t))}function Bf(t,e){return hh(t,e).canonicalString()}function hh(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tw(t){const e=Ee.fromString(t);return _e(ow(e),10190,{key:e.toString()}),e}function fh(t,e){return Bf(t.databaseId,e.path)}function Yu(t,e){const n=tw(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(rw(n))}function nw(t,e){return Bf(t.databaseId,e)}function XN(t){const e=tw(t);return e.length===4?Ee.emptyPath():rw(e)}function ph(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rw(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Py(t,e,n){return{name:fh(t,e),fields:n.value.mapValue.fields}}function YN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:se(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(_e(p===void 0||typeof p=="string",58123),st.fromBase64String(p||"")):(_e(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),st.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const p=h.code===void 0?L.UNKNOWN:Yx(h.code);return new Q(p,h.message||"")}(o);n=new Zx(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yu(t,r.document.name),i=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):ae.min(),c=new kt({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(s,i,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new fl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yu(t,r.document),i=r.readTime?gn(r.readTime):ae.min(),o=ft.newNoDocument(s,i),c=r.removedTargetIds||[];n=new fl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yu(t,r.document),i=r.removedTargetIds||[];n=new fl([],i,s,null)}else{if(!("filter"in e))return se(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new zN(s,i),c=r.targetId;n=new Jx(c,o)}}return n}function JN(t,e){let n;if(e instanceof na)n={update:Py(t,e.key,e.value)};else if(e instanceof Uf)n={delete:fh(t,e.key)};else if(e instanceof Vr)n={update:Py(t,e.key,e.data),updateMask:aS(e.fieldMask)};else{if(!(e instanceof LN))return se(16599,{Rt:e.type});n={verify:fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Bo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ui)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof di)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Jl)return{fieldPath:o.field.canonicalString(),increment:c.Ee};throw se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function ZN(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?gn(s.updateTime):gn(i);return o.isEqual(ae.min())&&(o=gn(i)),new VN(o,s.transformResults||[])}(n,e))):[]}function eS(t,e){return{documents:[nw(t,e.path)]}}function tS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nw(t,s);const i=function(h){if(h.length!==0)return iw(an.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:ks(g.field),direction:sS(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=dh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:s}}function nS(t){let e=XN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=sw(m);return g instanceof an&&Dx(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(S){return new $o(Ns(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Pc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,T=m.values||[];return new Yl(T,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,T=m.values||[];return new Yl(T,g)}(n.endAt)),bN(e,s,o,i,c,"F",u,h)}function rS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ns(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ns(n.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ns(n.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return $e.create(Ns(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>sw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function sS(t){return HN[t]}function iS(t){return WN[t]}function oS(t){return GN[t]}function ks(t){return{fieldPath:t.canonicalString()}}function Ns(t){return tt.fromServerFormat(t.fieldPath)}function iw(t){return t instanceof $e?function(n){if(n.op==="=="){if(vy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NAN"}};if(yy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NAN"}};if(yy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(n.field),op:iS(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>iw(s));return r.length===1?r[0]:{compositeFilter:{op:oS(n.op),filters:r}}}(t):se(54877,{filter:t})}function aS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ow(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,s,i=ae.min(),o=ae.min(),c=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.gt=e}}function cS(t){const e=nS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.Dn=new dS}addToCollectionParentIndex(e,n){return this.Dn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ir.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class dS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new We(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new We(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aw=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(aw,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new hi(0)}static ur(){return new hi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="LruGarbageCollector",hS=1048576;function Dy([t,e],[n,r]){const s=de(t,n);return s===0?de(e,r):s}class fS{constructor(e){this.Tr=e,this.buffer=new We(Dy),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Dy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Y(jy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ei(n)?Y(jy,"Ignoring IndexedDB error during garbage collection: ",n):await bi(n)}await this.Rr(3e5)})}}class mS{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Cc.ue);const r=new fS(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Ry)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ry):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,c,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Ts()<=fe.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function gS(t,e){return new mS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.changes=new ps(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&yo(r.mutation,s,Vt.empty(),Ne.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Kr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Zi();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=zn();const o=go(),c=function(){return go()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Vr)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),yo(p.mutation,h,p.mutation.getFieldMask(),Ne.now())):o.set(h.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return c.set(h,new vS(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=go();let s=new De((o,c)=>o-c),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Vt.empty();p=c.applyToLocalView(h,p),r.set(u,p);const m=(s.get(c.batchId)||pe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,m=Bx();p.forEach(g=>{if(!i.has(g)){const T=Qx(n.get(g),r.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Kr());let c=Lo,u=i;return o.next(h=>F.forEach(h,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,pe())).next(p=>({batchId:c,changes:$x(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Zi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Zi();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const h=function(m,g){return new Ti(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,ft.newInvalidDocument(p)))});let c=Zi();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&yo(p.mutation,h,Vt.empty(),Ne.now()),Vc(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return F.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:gn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:cS(s.bundledQuery),readTime:gn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.overlays=new De(ne.comparator),this.kr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Kr(),i=n.length+1,o=new ne(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Kr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Kr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return F.resolve(c)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UN(n,r));let i=this.kr.get(n);i===void 0&&(i=pe(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(){this.qr=new We(Ge.Qr),this.$r=new We(Ge.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ge(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ne(new Ee([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ne(new Ee([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=pe();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ne.comparator(e.key,n.key)||de(e.Hr,n.Hr)}static Ur(e,n){return de(e.Hr,n.Hr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new We(Ge.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FN(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Yr=this.Yr.add(new Ge(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?jf:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(de);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),F.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new ne(i),0);let c=new We(de);return this.Yr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Hr)),!0)},o),F.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return F.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Yr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.ni=e,this.docs=function(){return new De(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zn();const o=n.path,c=new ne(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||eN(Zk(p),r)<=0||(s.has(p.key)||Vc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}ri(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IS(this)}getSize(e){return F.resolve(this.size)}}class IS extends yS{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.persistence=e,this.ii=new ps(n=>Of(n),Mf),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.si=0,this.oi=new qf,this.targetCount=0,this._i=hi.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),F.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.hr(n),F.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.ai={},this.overlays={},this.ui=new Cc(0),this.ci=!1,this.ci=!0,this.li=new bS,this.referenceDelegate=e(this),this.hi=new kS(this),this.indexManager=new uS,this.remoteDocumentCache=function(s){return new TS(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new lS(n),this.Ti=new xS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new ES(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new NS(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class NS extends nN{constructor(e){super(),this.currentSequenceNumber=e}}class Hf{constructor(e){this.persistence=e,this.Ai=new qf,this.Ri=null}static Vi(e){return new Hf(e)}get mi(){if(this.Ri)return this.Ri;throw se(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,r=>{const s=ne.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return F.or([()=>F.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ec{constructor(e,n){this.persistence=e,this.gi=new ps(r=>iN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=gS(this,n)}static Vi(e,n){return new ec(e,n)}Ii(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return F.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ul(e.data.value)),n}Sr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return wT()?8:rN(mt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new SS;return this.ws(e,n,o).next(c=>{if(i.result=c,this.Rs)return this.Ss(e,n,o,c.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Ts()<=fe.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Ts()<=fe.DEBUG&&Y("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ts()<=fe.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):F.resolve())}ps(e,n){if(by(n))return F.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=uh(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.gs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,c);return this.Ds(n,h,o,u.readTime)?this.ps(e,uh(n,null,"F")):this.vs(e,h,n,u)}))})))}ys(e,n,r,s){return by(n)||s.isEqual(ae.min())?F.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?F.resolve(null):(Ts()<=fe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Is(n)),this.vs(e,o,n,Jk(s,Lo)).next(c=>c))})}bs(e,n){let r=new We(Ux(e));return n.forEach((s,i)=>{Vc(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Ts()<=fe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Is(n)),this.gs.getDocumentsMatchingQuery(e,n,Ir.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="LocalStore",CS=3e8;class PS{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new De(de),this.Ms=new ps(i=>Of(i),Mf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _S(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function RS(t,e,n,r){return new PS(t,e,n,r)}async function cw(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=pe();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:c}))})})}function jS(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,h,p){const m=h.batch,g=m.keys();let T=F.resolve();return g.forEach(S=>{T=T.next(()=>p.getEntry(u,S)).next(N=>{const C=h.docVersions.get(S);_e(C!==null,48541),N.version.compareTo(C)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=pe();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function uw(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function DS(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;c.push(n.hi.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,p.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(st.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,r)),s=s.insert(m,T),function(N,C,x){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=CS?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,T,p)&&c.push(n.hi.updateTargetData(i,T))});let u=zn(),h=pe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(VS(i,o,e.documentUpdates).next(p=>{u=p.Ls,h=p.ks})),!r.isEqual(ae.min())){const p=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return F.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Fs=s,i))}function VS(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zn();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Y(Gf,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function OS(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MS(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function mh(t,e,n){const r=ce(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ei(o))throw o;Y(Gf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Vy(t,e,n){const r=ce(t);let s=ae.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=ce(u),g=m.Ms.get(p);return g!==void 0?F.resolve(m.Fs.get(g)):m.hi.getTargetData(h,p)}(r,o,mn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:pe())).next(c=>(LS(r,TN(e),c),{documents:c,qs:i})))}function LS(t,e,n){let r=t.xs.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Oy{constructor(){this.activeTargetIds=CN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FS{constructor(){this.Fo=new Oy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Oy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="ConnectivityMonitor";class Ly{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Y(My,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Y(My,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa=null;function gh(){return qa===null?qa=function(){return 268435456+Math.round(2147483648*Math.random())}():qa++,"0x"+qa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="RestConnection",zS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $S{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ql?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=gh(),c=this.Go(e,n.toUriEncodedString());Y(Ju,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:h}=new URL(c),p=vi(h);return this.jo(e,c,u,r,p).then(m=>(Y(Ju,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Tr(Ju,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=zS[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class qS extends $S{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=gh();return new Promise((c,u)=>{const h=new hx;h.setWithCredentials(!0),h.listenOnce(fx.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case cl.NO_ERROR:const m=h.getResponseJson();Y(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case cl.TIMEOUT:Y(ut,`RPC '${e}' ${o} timed out`),u(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:const g=h.getStatus();if(Y(ut,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const N=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(S.status);u(new Q(N,S.message))}else u(new Q(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Q(L.UNAVAILABLE,"Connection failed."));break;default:se(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{Y(ut,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);Y(ut,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",p,r,15)})}P_(e,n,r){const s=gh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gx(),c=mx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Y(ut,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);this.T_(m);let g=!1,T=!1;const S=new BS({Ho:C=>{T?Y(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(g||(Y(ut,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Y(ut,`RPC '${e}' stream ${s} sending:`,C),m.send(C))},Yo:()=>m.close()}),N=(C,x,_)=>{C.listen(x,I=>{try{_(I)}catch(j){setTimeout(()=>{throw j},0)}})};return N(m,Ji.EventType.OPEN,()=>{T||(Y(ut,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),N(m,Ji.EventType.CLOSE,()=>{T||(T=!0,Y(ut,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(m))}),N(m,Ji.EventType.ERROR,C=>{T||(T=!0,Tr(ut,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),S.__(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),N(m,Ji.EventType.MESSAGE,C=>{var x;if(!T){const _=C.data[0];_e(!!_,16349);const I=_,j=(I==null?void 0:I.error)||((x=I[0])===null||x===void 0?void 0:x.error);if(j){Y(ut,`RPC '${e}' stream ${s} received error:`,j);const U=j.status;let $=function(w){const E=Ue[w];if(E!==void 0)return Yx(E)}(U),b=j.message;$===void 0&&($=L.INTERNAL,b="Unknown error status: "+U+" with message "+j.message),T=!0,S.__(new Q($,b)),m.close()}else Y(ut,`RPC '${e}' stream ${s} received:`,_),S.a_(_)}}),N(c,px.STAT_EVENT,C=>{C.stat===rh.PROXY?Y(ut,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===rh.NOPROXY&&Y(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return new KN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="PersistentStream";class hw{constructor(e,n,r,s,i,o,c,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new dw(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new Q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Y(Fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Y(Fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HS extends hw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=YN(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?gn(o.readTime):ae.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ph(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=lh(u)?{documents:eS(i,u)}:{query:tS(i,u).Vt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=ew(i,o.resumeToken);const h=dh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ae.min())>0){c.readTime=Zl(i,o.snapshotVersion.toTimestamp());const h=dh(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=rS(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ph(this.serializer),n.removeTarget=e,this.k_(n)}}class WS extends hw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=ZN(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ph(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JN(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{}class KS extends GS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,hh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(L.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Jo(e,hh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(L.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class QS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Un(n),this._a=!1):Y("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="RemoteStore";class XS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{ms(this)&&(Y(cs,"Restarting streams for network reachability change."),await async function(u){const h=ce(u);h.Ia.add(4),await sa(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Uc(h)}(this))})}),this.Aa=new QS(r,s)}}async function Uc(t){if(ms(t))for(const e of t.da)await e(!0)}async function sa(t){for(const e of t.da)await e(!1)}function fw(t,e){const n=ce(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Yf(n)?Xf(n):Ii(n).x_()&&Qf(n,e))}function Kf(t,e){const n=ce(t),r=Ii(n);n.Ta.delete(e),r.x_()&&pw(n,e),n.Ta.size===0&&(r.x_()?r.B_():ms(n)&&n.Aa.set("Unknown"))}function Qf(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ii(t).H_(e)}function pw(t,e){t.Ra.$e(e),Ii(t).Y_(e)}function Xf(t){t.Ra=new qN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ii(t).start(),t.Aa.aa()}function Yf(t){return ms(t)&&!Ii(t).M_()&&t.Ta.size>0}function ms(t){return ce(t).Ia.size===0}function mw(t){t.Ra=void 0}async function YS(t){t.Aa.set("Online")}async function JS(t){t.Ta.forEach((e,n)=>{Qf(t,e)})}async function ZS(t,e){mw(t),Yf(t)?(t.Aa.la(e),Xf(t)):t.Aa.set("Unknown")}async function eA(t,e,n){if(t.Aa.set("Online"),e instanceof Zx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ta.delete(c),s.Ra.removeTarget(c))}(t,e)}catch(r){Y(cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tc(t,r)}else if(e instanceof fl?t.Ra.Ye(e):e instanceof Jx?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ae.min()))try{const r=await uw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Ra.Pt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ta.get(h);p&&i.Ta.set(h,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const p=i.Ta.get(u);if(!p)return;i.Ta.set(u,p.withResumeToken(st.EMPTY_BYTE_STRING,p.snapshotVersion)),pw(i,u);const m=new ar(p.target,u,h,p.sequenceNumber);Qf(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Y(cs,"Failed to raise snapshot:",r),await tc(t,r)}}async function tc(t,e,n){if(!Ei(e))throw e;t.Ia.add(1),await sa(t),t.Aa.set("Offline"),n||(n=()=>uw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(cs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Uc(t)})}function gw(t,e){return e().catch(n=>tc(t,n,e))}async function zc(t){const e=ce(t),n=Ar(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:jf;for(;tA(e);)try{const s=await OS(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,nA(e,s)}catch(s){await tc(e,s)}yw(e)&&vw(e)}function tA(t){return ms(t)&&t.Pa.length<10}function nA(t,e){t.Pa.push(e);const n=Ar(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function yw(t){return ms(t)&&!Ar(t).M_()&&t.Pa.length>0}function vw(t){Ar(t).start()}async function rA(t){Ar(t).na()}async function sA(t){const e=Ar(t);for(const n of t.Pa)e.X_(n.mutations)}async function iA(t,e,n){const r=t.Pa.shift(),s=zf.from(r,e,n);await gw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zc(t)}async function oA(t,e){e&&Ar(t).Z_&&await async function(r,s){if(function(o){return $N(o)&&o!==L.ABORTED}(s.code)){const i=r.Pa.shift();Ar(r).N_(),await gw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zc(r)}}(t,e),yw(t)&&vw(t)}async function Uy(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),Y(cs,"RemoteStore received new credentials");const r=ms(n);n.Ia.add(3),await sa(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Uc(n)}async function aA(t,e){const n=ce(t);e?(n.Ia.delete(2),await Uc(n)):e||(n.Ia.add(2),await sa(n),n.Aa.set("Unknown"))}function Ii(t){return t.Va||(t.Va=function(n,r,s){const i=ce(n);return i.ia(),new HS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:YS.bind(null,t),e_:JS.bind(null,t),n_:ZS.bind(null,t),J_:eA.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Yf(t)?Xf(t):t.Aa.set("Unknown")):(await t.Va.stop(),mw(t))})),t.Va}function Ar(t){return t.ma||(t.ma=function(n,r,s){const i=ce(n);return i.ia(),new WS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:rA.bind(null,t),n_:oA.bind(null,t),ea:sA.bind(null,t),ta:iA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await zc(t)):(await t.ma.stop(),t.Pa.length>0&&(Y(cs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Jf(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zf(t,e){if(Un("AsyncQueue",`${e}: ${t}`),Ei(t))return new Q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{static emptySet(e){return new Ys(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Zi(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.fa=new De(ne.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):se(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class fi{constructor(e,n,r,s,i,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new fi(e,n,Ys.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class cA{constructor(){this.queries=$y(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=ce(n),i=s.queries;s.queries=$y(),i.forEach((o,c)=>{for(const u of c.wa)u.onError(r)})})(this,new Q(L.ABORTED,"Firestore shutting down"))}}function $y(){return new ps(t=>Fx(t),Dc)}async function ep(t,e){const n=ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new lA,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Zf(o,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&np(n)}async function tp(t,e){const n=ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uA(t,e){const n=ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.wa)c.Ca(s)&&(r=!0);o.ya=s}}r&&np(n)}function dA(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function np(t){t.Da.forEach(e=>{e.next()})}var yh,By;(By=yh||(yh={})).Fa="default",By.Cache="cache";class rp{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class xw{constructor(e){this.key=e}}class hA{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pe(),this.mutatedKeys=pe(),this.Xa=Ux(e),this.eu=new Ys(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new zy,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),T=Vc(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;g&&T?g.data.isEqual(T.data)?S!==N&&(r.track({type:3,doc:T}),C=!0):this.iu(g,T)||(r.track({type:2,doc:T}),C=!0,(u&&this.Xa(T,u)>0||h&&this.Xa(T,h)<0)&&(c=!0)):!g&&T?(r.track({type:0,doc:T}),C=!0):g&&!T&&(r.track({type:1,doc:g}),C=!0,(u||h)&&(c=!0)),C&&(T?(o=o.add(T),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{eu:o,ru:r,Ds:c,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((p,m)=>function(T,S){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{At:C})}};return N(T)-N(S)}(p.type,m.type)||this.Xa(p.doc,m.doc)),this.su(r),s=s!=null&&s;const c=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,h=u!==this.Ya;return this.Ya=u,o.length!==0||h?{snapshot:new fi(this.query,e.eu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=pe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new xw(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new _w(r))}),n}uu(e){this.Ha=e.qs,this.Za=pe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return fi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const sp="SyncEngine";class fA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pA{constructor(e){this.key=e,this.lu=!1}}class mA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new ps(c=>Fx(c),Dc),this.Tu=new Map,this.Iu=new Set,this.du=new De(ne.comparator),this.Eu=new Map,this.Au=new qf,this.Ru={},this.Vu=new Map,this.mu=hi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gA(t,e,n=!0){const r=kw(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await ww(r,e,n,!0),s}async function yA(t,e){const n=kw(t);await ww(n,e,!0,!1)}async function ww(t,e,n,r){const s=await MS(t.localStore,mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await vA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&fw(t.remoteStore,s),c}async function vA(t,e,n,r,s){t.gu=(m,g,T)=>async function(N,C,x,_){let I=C.view.nu(x);I.Ds&&(I=await Vy(N.localStore,C.query,!1).then(({documents:b})=>C.view.nu(b,I)));const j=_&&_.targetChanges.get(C.targetId),U=_&&_.targetMismatches.get(C.targetId)!=null,$=C.view.applyChanges(I,N.isPrimaryClient,j,U);return Hy(N,C.targetId,$._u),$.snapshot}(t,m,g,T);const i=await Vy(t.localStore,e,!0),o=new hA(e,i.qs),c=o.nu(i.documents),u=ra.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,u);Hy(t,n,h._u);const p=new fA(e,n,o);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function _A(t,e,n){const r=ce(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Dc(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Kf(r.remoteStore,s.targetId),vh(r,s.targetId)}).catch(bi)):(vh(r,s.targetId),await mh(r.localStore,s.targetId,!0))}async function xA(t,e){const n=ce(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kf(n.remoteStore,r.targetId))}async function wA(t,e,n){const r=SA(t);try{const s=await function(o,c){const u=ce(o),h=Ne.now(),p=c.reduce((T,S)=>T.add(S.key),pe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=zn(),N=pe();return u.Os.getEntries(T,p).next(C=>{S=C,S.forEach((x,_)=>{_.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,S)).next(C=>{m=C;const x=[];for(const _ of c){const I=MN(_,m.get(_.key).overlayedDocument);I!=null&&x.push(new Vr(_.key,I,Px(I.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,x,c)}).next(C=>{g=C;const x=C.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(T,C.batchId,x)})}).then(()=>({batchId:g.batchId,changes:$x(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let h=o.Ru[o.currentUser.toKey()];h||(h=new De(de)),h=h.insert(c,u),o.Ru[o.currentUser.toKey()]=h}(r,s.batchId,n),await ia(r,s.changes),await zc(r.remoteStore)}catch(s){const i=Zf(s,"Failed to persist write");n.reject(i)}}async function bw(t,e){const n=ce(t);try{const r=await DS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?_e(o.lu,14607):s.removedDocuments.size>0&&(_e(o.lu,42227),o.lu=!1))}),await ia(n,r,e)}catch(r){await bi(r)}}function qy(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=ce(o);u.onlineState=c;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.wa)g.va(c)&&(h=!0)}),h&&np(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bA(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new De(ne.comparator);o=o.insert(i,ft.newNoDocument(i,ae.min()));const c=pe().add(i),u=new Lc(ae.min(),new Map,new De(de),o,c);await bw(r,u),r.du=r.du.remove(i),r.Eu.delete(e),ip(r)}else await mh(r.localStore,e,!1).then(()=>vh(r,e,n)).catch(bi)}async function EA(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await jS(n.localStore,e);Tw(n,r,null),Ew(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ia(n,s)}catch(s){await bi(s)}}async function TA(t,e,n){const r=ce(t);try{const s=await function(o,c){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next(m=>(_e(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);Tw(r,e,n),Ew(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ia(r,s)}catch(s){await bi(s)}}function Ew(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Tw(t,e,n){const r=ce(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function vh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||Iw(t,r)})}function Iw(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Kf(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ip(t))}function Hy(t,e,n){for(const r of n)r instanceof _w?(t.Au.addReference(r.key,e),IA(t,r)):r instanceof xw?(Y(sp,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||Iw(t,r.key)):se(19791,{yu:r})}function IA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Y(sp,"New document in limbo: "+n),t.Iu.add(r),ip(t))}function ip(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ne(Ee.fromString(e)),r=t.mu.next();t.Eu.set(r,new pA(n)),t.du=t.du.insert(n,r),fw(t.remoteStore,new ar(mn(jc(n.path)),r,"TargetPurposeLimboResolution",Cc.ue))}}async function ia(t,e,n){const r=ce(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{o.push(r.gu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Wf.Es(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,h){const p=ce(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(h,g=>F.forEach(g.Is,T=>p.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>F.forEach(g.ds,T=>p.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!Ei(m))throw m;Y(Gf,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const T=p.Fs.get(g),S=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(S);p.Fs=p.Fs.insert(g,N)}}}(r.localStore,i))}async function kA(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){Y(sp,"User change. New user:",e.toKey());const r=await cw(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(c=>{c.forEach(u=>{u.reject(new Q(L.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ia(n,r.Bs)}}function NA(t,e){const n=ce(t),r=n.Eu.get(e);if(r&&r.lu)return pe().add(r.key);{let s=pe();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const c=n.Pu.get(o);s=s.unionWith(c.view.tu)}return s}}function kw(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bA.bind(null,e),e.hu.J_=uA.bind(null,e.eventManager),e.hu.pu=dA.bind(null,e.eventManager),e}function SA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TA.bind(null,e),e}class nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return RS(this.persistence,new AS,e.initialUser,this.serializer)}Du(e){return new lw(Hf.Vi,this.serializer)}bu(e){return new FS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nc.provider={build:()=>new nc};class AA extends nc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){_e(this.persistence.referenceDelegate instanceof ec,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pS(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new lw(r=>ec.Vi(r,n),this.serializer)}}class _h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kA.bind(null,this.syncEngine),await aA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cA}()}createDatastore(e){const n=Fc(e.databaseInfo.databaseId),r=function(i){return new qS(i)}(e.databaseInfo);return function(i,o,c,u){return new KS(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new XS(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>qy(this.syncEngine,n,0),function(){return Ly.C()?new Ly:new US}())}createSyncEngine(e,n){return function(s,i,o,c,u,h,p){const m=new mA(s,i,o,c,u,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ce(s);Y(cs,"RemoteStore shutting down."),i.Ia.add(5),await sa(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_h.provider={build:()=>new _h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class CA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y(Cr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(Cr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Cr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Tr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Y("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Tr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PA(t);Y(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Uy(e.remoteStore,s)),t._onlineComponents=e}async function PA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Cr,"Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Tr("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new nc)}}else Y(Cr,"Using default OfflineComponentProvider"),await ed(t,new AA(void 0));return t._offlineComponents}async function Nw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Cr,"Using user provided OnlineComponentProvider"),await Wy(t,t._uninitializedComponentsProvider._online)):(Y(Cr,"Using default OnlineComponentProvider"),await Wy(t,new _h))),t._onlineComponents}function RA(t){return Nw(t).then(e=>e.syncEngine)}async function rc(t){const e=await Nw(t),n=e.eventManager;return n.onListen=gA.bind(null,e.syncEngine),n.onUnlisten=_A.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xA.bind(null,e.syncEngine),n}function jA(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new op({next:g=>{p.Ou(),o.enqueueAndForget(()=>tp(i,m));const T=g.docs.has(c);!T&&g.fromCache?h.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&u&&u.source==="server"?h.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new rp(jc(c.path),p,{includeMetadataChanges:!0,ka:!0});return ep(i,m)}(await rc(t),t.asyncQueue,e,n,r)),r.promise}function DA(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new op({next:g=>{p.Ou(),o.enqueueAndForget(()=>tp(i,m)),g.fromCache&&u.source==="server"?h.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new rp(c,p,{includeMetadataChanges:!0,ka:!0});return ep(i,m)}(await rc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="firestore.googleapis.com",Ky=!0;class Qy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Aw,this.ssl=Ky}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Ky;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hS)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $c{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $k;switch(r.type){case"firstParty":return new Wk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gy.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Gy.delete(n),r.terminate())}(this),Promise.resolve()}}function VA(t,e,n,r={}){var s;t=Pt(t,$c);const i=vi(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(N_(`https://${u}`),S_("Firestore",!0)),o.host!==Aw&&o.host!==u&&Tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Mn(h,c)&&(t._setSettings(h),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=dt.MOCK_USER;else{p=hT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new dt(g)}t._authCredentials=new Bk(new vx(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class Me{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Me(this.firestore,e,this._key)}toJSON(){return{type:Me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ta(n,Me._jsonSchema))return new Me(e,r||null,new ne(Ee.fromString(n.referencePath)))}}Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:Be("string",Me._jsonSchemaVersion),referencePath:Be("string")};class wr extends Or{constructor(e,n,r){super(e,n,jc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new ne(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function Jr(t,e,...n){if(t=Xe(t),xx("collection","path",e),t instanceof $c){const r=Ee.fromString(e,...n);return ly(r),new wr(t,null,r)}{if(!(t instanceof Me||t instanceof wr))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return ly(r),new wr(t.firestore,null,r)}}function Cn(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Rf.newId()),xx("doc","path",e),t instanceof $c){const r=Ee.fromString(e,...n);return ay(r),new Me(t,null,new ne(r))}{if(!(t instanceof Me||t instanceof wr))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return ay(r),new Me(t.firestore,t instanceof wr?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="AsyncQueue";class Yy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new dw(this,"async_queue_retry"),this.oc=()=>{const r=Zu();r&&Y(Xy,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Zu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Rn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ei(e))throw e;Y(Xy,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Un("INTERNAL UNHANDLED ERROR: ",Jy(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Jf.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&se(47125,{hc:Jy(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Jy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class $n extends $c{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Yy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yy(e),this._firestoreClient=void 0,await e}}}function OA(t,e){const n=typeof t=="object"?t:R_(),r=typeof t=="string"?t:Ql,s=_f(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uT("firestore");i&&VA(s,...i)}return s}function Bc(t){if(t._terminated)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MA(t),t._firestoreClient}function MA(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,h,p){return new lN(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Sw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new CA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(st.fromBase64String(e))}catch(n){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ta(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:Be("string",$t._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yn._jsonSchemaVersion}}static fromJSON(e){if(ta(e,yn._jsonSchema))return new yn(e.latitude,e.longitude)}}yn._jsonSchemaVersion="firestore/geoPoint/1.0",yn._jsonSchema={type:Be("string",yn._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ta(e,vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vn(e.vectorValues);throw new Q(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vn._jsonSchemaVersion="firestore/vectorValue/1.0",vn._jsonSchema={type:Be("string",vn._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=/^__.*__$/;class FA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new na(e,this.data,n,this.fieldTransforms)}}class Cw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ec:t})}}class Hc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Hc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return sc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Pw(this.Ec)&&LA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fc(e)}Dc(e,n,r,s=!1){return new Hc({Ec:e,methodName:n,bc:r,path:tt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wc(t){const e=t._freezeSettings(),n=Fc(t._databaseId);return new UA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rw(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);up("Data must be an object, but it was:",o,r);const c=Dw(r,o);let u,h;if(i.merge)u=new Vt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=xh(e,m,n);if(!o.contains(g))throw new Q(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Ow(p,g)||p.push(g)}u=new Vt(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new FA(new kt(c),u,h)}class Gc extends ki{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}function jw(t,e,n){return new Hc({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ap extends ki{_toFieldTransform(e){return new Ff(e.path,new Bo)}isEqual(e){return e instanceof ap}}class lp extends ki{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=jw(this,e,!0),r=this.vc.map(i=>gs(i,n)),s=new ui(r);return new Ff(e.path,s)}isEqual(e){return e instanceof lp&&Mn(this.vc,e.vc)}}class cp extends ki{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=jw(this,e,!0),r=this.vc.map(i=>gs(i,n)),s=new di(r);return new Ff(e.path,s)}isEqual(e){return e instanceof cp&&Mn(this.vc,e.vc)}}function zA(t,e,n,r){const s=t.Dc(1,e,n);up("Data must be an object, but it was:",s,r);const i=[],o=kt.empty();Dr(r,(u,h)=>{const p=dp(e,u,n);h=Xe(h);const m=s.gc(p);if(h instanceof Gc)i.push(p);else{const g=gs(h,m);g!=null&&(i.push(p),o.set(p,g))}});const c=new Vt(i);return new Cw(o,c,s.fieldTransforms)}function $A(t,e,n,r,s,i){const o=t.Dc(1,e,n),c=[xh(e,r,n)],u=[s];if(i.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(xh(e,i[g])),u.push(i[g+1]);const h=[],p=kt.empty();for(let g=c.length-1;g>=0;--g)if(!Ow(h,c[g])){const T=c[g];let S=u[g];S=Xe(S);const N=o.gc(T);if(S instanceof Gc)h.push(T);else{const C=gs(S,N);C!=null&&(h.push(T),p.set(T,C))}}const m=new Vt(h);return new Cw(p,m,o.fieldTransforms)}function BA(t,e,n,r=!1){return gs(n,t.Dc(r?4:3,e))}function gs(t,e){if(Vw(t=Xe(t)))return up("Unsupported field value:",e,t),Dw(t,e);if(t instanceof ki)return function(r,s){if(!Pw(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=gs(c,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:Zl(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zl(s.serializer,i)}}if(r instanceof yn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:ew(s.serializer,r._byteString)};if(r instanceof Me){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vn)return function(o,c){return{mapValue:{fields:{[Ax]:{stringValue:Cx},[Xl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return Lf(c.serializer,h)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Ac(r)}`)}(t,e)}function Dw(t,e){const n={};return Ex(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(t,(r,s)=>{const i=gs(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Vw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof yn||t instanceof $t||t instanceof Me||t instanceof ki||t instanceof vn)}function up(t,e,n){if(!Vw(n)||!wx(n)){const r=Ac(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function xh(t,e,n){if((e=Xe(e))instanceof qc)return e._internalPath;if(typeof e=="string")return dp(t,e);throw sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const qA=new RegExp("[~\\*/\\[\\]]");function dp(t,e,n){if(e.search(qA)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qc(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Q(L.INVALID_ARGUMENT,c+t+u)}function Ow(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HA extends Mw{data(){return super.data()}}function Kc(t,e){return typeof e=="string"?dp(t,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hp{}class Fw extends hp{}function fp(t,e,...n){let r=[];e instanceof hp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof pp).length,c=i.filter(u=>u instanceof Qc).length;if(o>1||o>0&&c>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Qc extends Fw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qc(e,n,r)}_apply(e){const n=this._parse(e);return Uw(e._query,n),new Or(e.firestore,e.converter,ch(e._query,n))}_parse(e){const n=Wc(e.firestore);return function(i,o,c,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){t0(m,p);const S=[];for(const N of m)S.push(e0(u,i,N));g={arrayValue:{values:S}}}else g=e0(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||t0(m,p),g=BA(c,o,m,p==="in"||p==="not-in");return $e.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function WA(t,e,n){const r=e,s=Kc("where",t);return Qc._create(s,r,n)}class pp extends hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)Uw(o,u),o=ch(o,u)}(e._query,n),new Or(e.firestore,e.converter,ch(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mp extends Fw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $o(i,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ti(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function GA(t,e="asc"){const n=e,r=Kc("orderBy",t);return mp._create(r,n)}function e0(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lx(e)&&n.indexOf("/")!==-1)throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!ne.isDocumentKey(r))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gy(t,new ne(r))}if(n instanceof Me)return gy(t,n._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ac(n)}.`)}function t0(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Uw(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KA{convertValue(e,n="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Dr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Xl].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Le(o.doubleValue));return new vn(i)}convertGeoPoint(e){return new yn(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fo(e));default:return null}}convertTimestamp(e){const n=kr(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);_e(ow(r),9688,{name:e});const s=new Uo(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||Un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class to{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zr extends Mw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zr._jsonSchema={type:Be("string",Zr._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class pl extends Zr{data(e={}){return super.data(e)}}class es{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new to(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pl(this._firestore,this._userDataWriter,r.key,r,new to(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new pl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new to(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new pl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new to(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:QA(c.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=es._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){t=Pt(t,Me);const e=Pt(t.firestore,$n);return jA(Bc(e),t._key).then(n=>qw(e,t,n))}es._jsonSchemaVersion="firestore/querySnapshot/1.0",es._jsonSchema={type:Be("string",es._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class gp extends KA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,n)}}function XA(t){t=Pt(t,Or);const e=Pt(t.firestore,$n),n=Bc(e),r=new gp(e);return Lw(t._query),DA(n,t._query).then(s=>new es(e,r,t,s))}function Bw(t,e,n){t=Pt(t,Me);const r=Pt(t.firestore,$n),s=zw(t.converter,e);return Xc(r,[Rw(Wc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ht.none())])}function vo(t,e,n,...r){t=Pt(t,Me);const s=Pt(t.firestore,$n),i=Wc(s);let o;return o=typeof(e=Xe(e))=="string"||e instanceof qc?$A(i,"updateDoc",t._key,e,n,r):zA(i,"updateDoc",t._key,e),Xc(s,[o.toMutation(t._key,Ht.exists(!0))])}function YA(t){return Xc(Pt(t.firestore,$n),[new Uf(t._key,Ht.none())])}function JA(t,e){const n=Pt(t.firestore,$n),r=Cn(t),s=zw(t.converter,e);return Xc(n,[Rw(Wc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ht.exists(!1))]).then(()=>r)}function Us(t,...e){var n,r,s;t=Xe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Zy(e[o])||(i=e[o++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Zy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,h,p;if(t instanceof Me)h=Pt(t.firestore,$n),p=jc(t._key.path),u={next:m=>{e[o]&&e[o](qw(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Pt(t,Or);h=Pt(m.firestore,$n),p=m._query;const g=new gp(h);u={next:T=>{e[o]&&e[o](new es(h,g,m,T))},error:e[o+1],complete:e[o+2]},Lw(t._query)}return function(g,T,S,N){const C=new op(N),x=new rp(T,C,S);return g.asyncQueue.enqueueAndForget(async()=>ep(await rc(g),x)),()=>{C.Ou(),g.asyncQueue.enqueueAndForget(async()=>tp(await rc(g),x))}}(Bc(h),p,c,u)}function Xc(t,e){return function(r,s){const i=new Rn;return r.asyncQueue.enqueueAndForget(async()=>wA(await RA(r),s,i)),i.promise}(Bc(t),e)}function qw(t,e,n){const r=n.docs.get(e._key),s=new gp(t);return new Zr(t,s,e._key,r,new to(n.hasPendingWrites,n.fromCache),e.converter)}function n0(){return new ap("serverTimestamp")}function ZA(...t){return new lp("arrayUnion",t)}function eC(...t){return new cp("arrayRemove",t)}(function(e,n=!0){(function(s){wi=s})(_i),ii(new os("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new $n(new qk(r.getProvider("auth-internal")),new Gk(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),_r(ny,ry,e),_r(ny,ry,"esm2017")})();const tC={apiKey:"AIzaSyB9wTEF80N6gQC82A2OLuIij4k4TIxCIlc",authDomain:"fengyuan-handbook.firebaseapp.com",projectId:"fengyuan-handbook",storageBucket:"fengyuan-handbook.firebasestorage.app",messagingSenderId:"611897296630",appId:"1:611897296630:web:24958a6cf6cce57633ced7"},Hw=P_(tC),td=Lk(Hw),_t=OA(Hw);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ww=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...c},u)=>z.createElement("svg",{ref:u,...rC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ww("lucide",s),...c},[...o.map(([h,p])=>z.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(t,e)=>{const n=z.forwardRef(({className:r,...s},i)=>z.createElement(sC,{ref:i,iconNode:e,className:Ww(`lucide-${nC(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=le("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=le("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=le("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=le("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=le("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=le("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=le("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=le("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=le("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=le("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=le("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=le("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=le("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=le("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=le("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),i0=[{id:1,title:"",category:"",link:"#",type:"pdf"},{id:2,title:"(UD)",category:"",link:"#",type:"pdf"},{id:3,title:"",category:"",link:"#",type:"pdf"},{id:4,title:" (High Alert) ",category:"",link:"#",type:"pdf"}],IC=[{id:1,area:" ()",ext:"1151",note:""},{id:2,area:"",ext:"1152",note:""},{id:3,area:" ()",ext:"1153",note:""},{id:4,area:"",ext:"1154",note:""},{id:5,area:"",ext:"1157",note:""},{id:6,area:"TPN",ext:"1158",note:""},{id:7,area:"",ext:"1159",note:""},{id:8,area:"",ext:"1063",note:""},{id:9,area:"",ext:"5151",note:""},{id:10,area:" ()",ext:"3253",note:""},{id:11,area:"",ext:"26XX",note:"26+"},{id:12,area:"",ext:"2646",note:"45"}],kC=["","","","","","",""],NC=()=>{const[t,e]=z.useState(""),[n,r]=z.useState("sop"),[s,i]=z.useState(Array.isArray(i0)?i0.map(N=>({...N,source:"local",id:`local_${N.id}`})):[]),[o,c]=z.useState(kC),[u,h]=z.useState(!0),[p,m]=z.useState(null);z.useEffect(()=>{const N=fp(Jr(_t,"sop_articles")),C=Us(N,x=>{const _=[];x.forEach(I=>{_.push({id:I.id,...I.data()})}),_.length>0&&i(_),h(!1)},x=>{console.error(":",x),h(!1)});return()=>C()},[]),z.useEffect(()=>{(async()=>{try{const C=Cn(_t,"site_settings","sop_config"),x=await $w(C);if(x.exists()){const _=x.data();_.quickKeywords&&Array.isArray(_.quickKeywords)&&c(_.quickKeywords)}}catch(C){console.error(":",C)}})()},[]);const g=N=>{if(!N)return"bg-gray-100 text-gray-600";const C={:"bg-orange-100 text-orange-800",:"bg-rose-100 text-rose-800",:"bg-red-100 text-red-800",:"bg-stone-100 text-stone-800",:"bg-amber-100 text-amber-800",:"bg-yellow-100 text-yellow-800",:"bg-pink-100 text-pink-800",:"bg-lime-100 text-lime-800",:"bg-emerald-100 text-emerald-800",:"bg-warmGray-100 text-warmGray-800"};if(C[N])return C[N];const x=["bg-orange-200 text-orange-900","bg-amber-200 text-amber-900","bg-yellow-200 text-yellow-900","bg-rose-200 text-rose-900","bg-pink-200 text-pink-900","bg-red-200 text-red-900","bg-stone-200 text-stone-900","bg-lime-200 text-lime-900","bg-fuchsia-100 text-fuchsia-800","bg-violet-100 text-violet-800","bg-indigo-100 text-indigo-800","bg-teal-100 text-teal-800"];let _=0;for(let j=0;j<N.length;j++)_=N.charCodeAt(j)+((_<<5)-_);const I=Math.abs(_)%x.length;return x[I]},T=IC.filter(N=>N.area.includes(t)||N.ext.includes(t)||N.note.includes(t)),S=s.filter(N=>{var C,x;return((C=N.title)==null?void 0:C.toLowerCase().includes(t.toLowerCase()))||((x=N.category)==null?void 0:x.includes(t))}).sort((N,C)=>(N.category||"").localeCompare(C.category||""));return l.jsxs("div",{className:"space-y-0 sm:space-y-6",children:[" ",l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-xl md:shadow-sm md:border border-gray-100",children:[l.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(lc,{className:"w-5 h-5 md:w-6 md:h-6 text-orange-500"}),""]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(lc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"SOP ...",value:t,onChange:N=>e(N.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 outline-none text-base md:text-lg shadow-inner bg-gray-50 md:bg-white"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:"text-sm text-gray-500 flex items-center mr-1",children:""}),o.map((N,C)=>l.jsx("button",{onClick:()=>e(N),className:"px-3 py-1 bg-orange-50 hover:bg-orange-100 text-orange-700 hover:text-orange-900 rounded-full text-xs transition-colors border border-orange-100",children:N},`${N}-${C}`)),t&&l.jsx("button",{onClick:()=>e(""),className:"px-3 py-1 bg-gray-100 text-gray-500 hover:bg-gray-200 rounded-full text-xs transition-colors border border-gray-200 ml-auto",children:""})]})]}),l.jsxs("div",{className:"flex border-b border-gray-200 bg-white md:rounded-t-xl px-0 md:px-2 pt-2 sticky top-16 z-40 shadow-sm md:shadow-none",children:[l.jsxs("button",{onClick:()=>r("sop"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 transition-all relative top-[1px] md:rounded-t-lg ${n==="sop"?"text-orange-600 bg-orange-50 border-b-2 border-orange-500 md:border-b-0 md:border-x md:border-t md:border-orange-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(lr,{className:"w-4 h-4"})," SOP  (",S.length,")"]}),l.jsxs("button",{onClick:()=>r("extension"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 transition-all relative top-[1px] md:rounded-t-lg ${n==="extension"?"text-green-600 bg-green-50 border-b-2 border-green-500 md:border-b-0 md:border-x md:border-t md:border-green-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(gC,{className:"w-4 h-4"}),"  (",T.length,")"]})]}),l.jsxs("div",{className:"min-h-[300px] bg-gray-50 p-2 md:bg-transparent md:p-0",children:[n==="sop"&&l.jsx("div",{className:"space-y-4 animate-fade-in",children:u?l.jsx("p",{className:"text-gray-500 text-center py-4",children:"..."}):S.length===0?l.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-lg border border-dashed border-gray-200",children:""}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 md:gap-4",children:S.map(N=>l.jsxs("div",{onClick:()=>{N.content&&N.content.trim()!==""?m(N):N.attachmentUrl?window.open(N.attachmentUrl,"_blank"):alert(" SOP ")},className:"group relative bg-white p-4 md:p-5 rounded-lg md:rounded-xl shadow-sm md:border border-gray-100 hover:border-orange-300 hover:shadow-md transition-all cursor-pointer overflow-hidden text-left",children:[l.jsx("div",{className:`absolute top-0 left-0 px-3 py-1 text-xs font-bold rounded-br-lg ${g(N.category)}`,children:N.category||""}),l.jsxs("div",{className:"mt-6 flex items-start justify-between",children:[l.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-orange-600 leading-snug line-clamp-2",children:N.title}),l.jsx("div",{className:"flex-shrink-0 ml-3 text-gray-400 group-hover:text-orange-500",children:N.content?l.jsx(lr,{className:"w-5 h-5"}):l.jsx(oc,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"mt-3 flex items-center justify-end text-xs text-gray-400 h-5",children:N.attachmentUrl&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium bg-orange-50 px-2 py-0.5 rounded-full border border-orange-100",children:[l.jsx(Xw,{className:"w-3 h-3"})," "]})})]},N.id))})}),n==="extension"&&l.jsx("div",{className:"space-y-4 animate-fade-in",children:T.length===0?l.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-lg border border-dashed border-gray-200",children:""}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 md:gap-3",children:T.map((N,C)=>l.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex flex-col justify-center text-center hover:border-green-400 transition-colors",children:[l.jsx("span",{className:"text-gray-500 text-xs mb-1 font-medium",children:N.area}),l.jsx("span",{className:"text-xl font-mono font-bold text-green-700 tracking-wider",children:N.ext}),N.note&&l.jsx("span",{className:"text-[10px] text-gray-400 mt-1 bg-gray-50 px-1 rounded inline-block mx-auto",children:N.note})]},C))})})]}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>m(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col animate-fade-in text-left",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.title}),l.jsx("button",{onClick:()=>m(null),className:"p-1 rounded-full hover:bg-gray-200 text-gray-500 transition-colors",children:l.jsx(ds,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto whitespace-pre-wrap leading-relaxed text-gray-700 text-lg",children:p.content||""}),l.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center",children:[l.jsx("span",{className:`text-xs px-2 py-1 rounded ${g(p.category)}`,children:p.category}),l.jsxs("div",{className:"flex gap-2",children:[p.attachmentUrl&&l.jsxs("a",{href:p.attachmentUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg text-sm hover:bg-orange-100 transition-colors flex items-center gap-1 font-medium",children:[l.jsx(oc,{className:"w-4 h-4"})," /"]}),l.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700 transition-colors",children:""})]})]})]})})]})},SC=()=>{const[t,e]=z.useState("All"),[n,r]=z.useState([]),[s,i]=z.useState(!0);z.useEffect(()=>{const h=fp(Jr(_t,"training_videos"),GA("createdAt","desc")),p=Us(h,m=>{const g=m.docs.map(T=>({id:T.id,...T.data()}));r(g),i(!1)},m=>{console.error("Error fetching videos:",m),i(!1)});return()=>p()},[]);const o=h=>{var m,g,T;if(!h)return null;let p="";try{if(h.includes("youtube.com/watch?v="))p=(m=h.split("v=")[1])==null?void 0:m.split("&")[0];else if(h.includes("youtu.be/"))p=(g=h.split("youtu.be/")[1])==null?void 0:g.split("?")[0];else{if(h.includes("youtube.com/embed/"))return h;h.includes("m.youtube.com/watch?v=")&&(p=(T=h.split("v=")[1])==null?void 0:T.split("&")[0])}}catch{return null}return p?`https://www.youtube.com/embed/${p}`:null},c=["All",...new Set(n.map(h=>h.category).filter(Boolean))],u=t==="All"?n:n.filter(h=>h.category===t);return l.jsxs("div",{className:"bg-transparent md:bg-white md:rounded-lg md:shadow-md p-0 md:p-6",children:[l.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-4 md:mb-6 flex items-center px-4 md:px-0 pt-4 md:pt-0",children:[l.jsx("span",{className:"bg-purple-100 text-purple-600 p-2 rounded-lg mr-3",children:l.jsx(uC,{className:"w-5 h-5 md:w-6 md:h-6"})}),""]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 md:mb-6 scrollbar-hide px-4 md:px-0",children:c.map(h=>l.jsx("button",{onClick:()=>e(h),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${t===h?"bg-purple-600 text-white shadow-md":"bg-white md:bg-gray-100 text-gray-600 border border-gray-200 md:border-transparent hover:bg-gray-200"}`,children:h},h))}),s?l.jsxs("div",{className:"text-center py-12 text-gray-500 flex flex-col items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mb-2"}),"..."]}):u.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 md:gap-6",children:u.map(h=>{const p=o(h.url);return l.jsxs("div",{className:"group bg-white border-t border-b md:border border-gray-100 md:rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 flex flex-col",children:[l.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:p?l.jsx("iframe",{src:p,title:h.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):l.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-800 text-white flex-col p-4 text-center",children:[l.jsx(TC,{className:"w-12 h-12 mb-3 text-gray-400"}),l.jsx("p",{className:"mb-3 font-medium text-sm",children:""}),l.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm flex items-center gap-2 transition-colors",children:[l.jsx(oc,{className:"w-4 h-4"})," "]})]})}),l.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[l.jsx("div",{className:"flex justify-between items-start mb-2",children:l.jsx("h3",{className:"font-bold text-gray-800 line-clamp-2 group-hover:text-purple-600 transition-colors text-lg leading-snug",children:h.title})}),l.jsx("div",{className:"flex items-center gap-2 mb-3",children:l.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-md font-medium",children:h.category||""})}),h.description&&l.jsx("p",{className:"text-sm text-gray-500 line-clamp-3 mb-4 flex-grow",children:h.description}),p&&l.jsx("div",{className:"pt-3 mt-auto border-t border-gray-50 flex justify-end",children:l.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-400 hover:text-purple-600 flex items-center gap-1",children:[l.jsx(oc,{className:"w-3 h-3"})," "]})})]})]},h.id)})}):l.jsx("div",{className:"text-center py-16 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 mx-4 md:mx-0",children:l.jsx("p",{className:"text-gray-500 font-medium",children:""})})]})},AC=[{id:"leave",title:"",icon:l.jsx(EC,{className:"w-5 h-5 text-rose-500"}),color:"bg-rose-50 border-rose-100",content:l.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-rose-700",children:""}),"  ",l.jsx("strong",{className:"bg-rose-100 px-1 rounded",children:"D6 "})," "]}),l.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-xs",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"D6"}),"  ()"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"D5"}),"  13:30-16:30 "]}),l.jsxs("li",{children:[l.jsx("strong",{children:"TPN/"})," 16:30-17:30 "]})]})]})},{id:"handover",title:"",icon:l.jsx(yC,{className:"w-5 h-5 text-blue-500"}),color:"bg-blue-50 border-blue-100",content:l.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-blue-700",children:""})," "]}),l.jsxs("div",{className:"bg-white p-2 rounded border border-blue-100 text-xs",children:[l.jsx("p",{className:"font-bold mb-1",children:" / 5 "}),l.jsxs("p",{children:["DP1TP1  ",l.jsx("span",{className:"text-red-500 font-bold",children:"21:25 "})," "]})]})]})},{id:"meeting",title:"",icon:l.jsx(Zw,{className:"w-5 h-5 text-purple-500"}),color:"bg-purple-50 border-purple-100",content:l.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"bg-white/50 rounded-lg p-2 border border-purple-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-[10px] font-bold bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:""}),l.jsx("span",{className:"text-[10px] text-slate-400",children:"* D5 08:30 "})]}),l.jsx("div",{className:"grid grid-cols-4 gap-1 text-center",children:["D1","D5","D6","D7","D8","D9","TP1","DP2","DP1","D","","TPN"].map(t=>l.jsx("span",{className:"text-xs font-medium text-slate-700 bg-white rounded border border-purple-50 py-1",children:t},t))})]}),l.jsxs("div",{className:"px-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-1",children:l.jsx("span",{className:"text-[10px] font-bold bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full",children:" ()"})}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:"D2, D3, D4, TD, ED, RD, TS1, SP, A, NN"})]})]})}],o0={D1:{title:"D1 ",color:"blue",timeline:[{time:" AM",task:" A  / ",desc:""},{time:" PM",task:" /  / ",desc:""}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:" AM",task:" /  / ",desc:"UD"},{time:"11:30",task:" M2",desc:" M2 "},{time:" PM",task:"",desc:"17W"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:" AM",task:" / M2 ",desc:""},{time:" PM",task:"M2  / ",desc:" (17W)"}]},D4:{title:"D4  ()",color:"sky",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:" / M2 ",desc:""},{time:"17:30",task:" A / ",desc:""}]},RD:{title:"RD  ()",color:"amber",timeline:[{time:" AM",task:"Check",desc:""},{time:"12:00",task:"",desc:""},{time:"13:30",task:"",desc:""}]},D5:{title:"D5 ",color:"teal",timeline:[{time:" AM",task:"M2  /  /  ED",desc:""},{time:" PM",task:" /  ED / 17W ",desc:""}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"Check",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:" AM",task:"M2  / ",desc:""},{time:" PM",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:" / ",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:" AM",task:" / A ",desc:" A "},{time:" PM",task:"",desc:""}]},TD:{title:"TD ",color:"slate",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:"",desc:""}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-16:30",task:"",desc:""}]},D:{title:"D ",color:"purple",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:" AM",task:"B  TPN / ",desc:" TPN  B "}]},PSY:{title:"PSY  ()",color:"violet",timeline:[{time:" AM",task:"B  / ",desc:""},{time:" PM",task:" / PSY ",desc:""}]},PRN:{title:"PRN ",color:"gray",timeline:[{time:"",task:" /  / ",desc:""}]}},a0={D1:{title:"D1 ",color:"blue",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"//",desc:"/()"}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:"07:40-08:30",task:"//",desc:""},{time:"08:30-11:30",task:"UD//",desc:""},{time:"11:30-12:00",task:" M2",desc:" M2 "},{time:"12:30-15:00",task:"",desc:""},{time:"15:00-16:10",task:"17W//",desc:"17"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-11:30",task:"M2 ",desc:" M2 "},{time:"12:00-13:30",task:"M2 ",desc:" M2 "},{time:"13:30-16:30",task:"",desc:""}]},D4:{title:"D4 ",color:"sky",timeline:[{time:"09:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"M2 ",desc:"13:30-14:00  M2 "},{time:"17:30-18:00",task:" A / ",desc:" A "}]},D5:{title:"D5 ",color:"teal",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"12:30-16:30",task:" A ",desc:" A "}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:"08:30-12:30",task:" A / C",desc:" A  C "},{time:"13:30-17:30",task:"",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-09:30",task:"M1 ",desc:" M1 "},{time:"09:30-11:30",task:"",desc:""},{time:"12:00-13:30",task:"",desc:""},{time:"13:30-16:30",task:"",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:"08:00-08:30",task:" A ",desc:" A "},{time:"08:30-12:00",task:" A ",desc:" A "},{time:"12:30-13:30",task:"",desc:""},{time:"13:00-16:30",task:"()",desc:""}]},TP1:{title:"TP1 M2//",color:"rose",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""},{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"W2-W5 ",desc:"16:30-17:30  D1 TP1  A "}]},DP2:{title:"DP2 //M2",color:"violet",timeline:[{time:"08:00-08:30",task:" B ",desc:" B "},{time:"08:30-12:00",task:"+",desc:""},{time:"13:30-16:30",task:"",desc:""},{time:"17:30-20:30",task:"M2 ",desc:" M2 "}]},SP:{title:"SP ",color:"fuchsia",timeline:[{time:"14:00-17:00",task:"/",desc:""},{time:"17:30-21:30",task:"",desc:""},{time:"21:30-",task:"/",desc:""}]},P1:{title:"P1 ",color:"slate",timeline:[{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"",desc:"DP1D5P1D1P1"}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-11:30",task:"",desc:""},{time:"11:30-12:00",task:"",desc:""},{time:"12:00-16:30",task:"",desc:""}]},HD:{title:"HD ",color:"orange",timeline:[{time:"08:00-16:00",task:"",desc:""},{time:"",task:"07:45-08:00 / 16:00-16:15",desc:""}]},A:{title:"A ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:""},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},HA:{title:"HA ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:" A "},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},NN:{title:"NN ",color:"slate",timeline:[{time:"00:00-08:00",task:"",desc:""},{time:"",task:"23:45-00:00 / 08:00-08:15",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:"08:30-12:30",task:"B TPN",desc:" B  TPN () "},{time:"",task:"A ",desc:" A "}]},D:{title:"D ",color:"purple",timeline:[{time:"08:00-12:00",task:"",desc:""},{time:"",task:" / A ",desc:" A "}]},RD:{title:"RD /",color:"orange",timeline:[{time:"08:30-12:00",task:"",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-14:00",task:" (17W)",desc:" 17 "},{time:"14:30-16:00",task:" ER",desc:""},{time:"16:00-16:30",task:"ER ",desc:""},{time:"16:30-17:30",task:"",desc:""}]},PSY:{title:"PSY ",color:"violet",timeline:[{time:"08:00-08:30",task:" D ",desc:" D "},{time:"08:30-12:00",task:"D ",desc:" D  () "},{time:"12:30-13:30",task:"",desc:""},{time:"13:30-16:00",task:"PSY ",desc:""},{time:"16:00-16:30",task:" A ",desc:" A "}]},TS1:{title:"TS1 ",color:"yellow",timeline:[{time:"08:30-12:30",task:"",desc:""},{time:"",task:"",desc:"(A)"}]},TD:{title:"TD ",color:"slate",timeline:[{time:"08:30-12:00",task:"/",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"",desc:"()"}]}};function CC(){const[t,e]=z.useState(new Date),[n,r]=z.useState(null),[s,i]=z.useState(null),[o,c]=z.useState(null),[u,h]=z.useState(!1),[p,m]=z.useState(!1);z.useEffect(()=>{const x=setInterval(()=>e(new Date),6e4);return()=>clearInterval(x)},[]);const g=x=>{if(!x||!x.includes("-"))return!1;const[_,I]=x.split("-"),j=t,U=j.getHours()*60+j.getMinutes(),$=w=>{const[E,A]=w.split(":").map(Number);return E*60+A},b=$(_);let y=$(I);return y<b&&(y+=24*60),U>=b&&U<y},T=s?a0[s]:null,S=o?o0[o]:null,N=x=>{i(_=>_===x?null:x)},C=x=>{c(_=>_===x?null:x)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[l.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-600",children:l.jsx(iC,{className:"w-5 h-5"})}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),u?l.jsx(ml,{className:"w-5 h-5 text-slate-400"}):l.jsx(pi,{className:"w-5 h-5 text-slate-400"})]}),u&&l.jsx("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(a0).map(x=>l.jsx("button",{onClick:()=>N(x),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${s===x?"bg-white border-indigo-200 text-indigo-600 shadow-sm scale-105 ring-2 ring-indigo-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:x},x))})})]}),T&&l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:l.jsx(Gw,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Shift Duty"}),l.jsx("h4",{className:"font-bold text-slate-800",children:T.title})]})]}),l.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:T.timeline.map((x,_)=>{const I=g(x.time);return l.jsxs("div",{className:`relative transition-all duration-500 ${I?"scale-105 origin-left":""}`,children:[l.jsx("div",{className:`absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm transition-all duration-300 ${I?"ring-4 ring-red-100 scale-110":""}`,style:{backgroundColor:I?"#ef4444":`var(--color-${T.color}-500, #3b82f6)`},children:I&&l.jsx("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-75"})}),l.jsxs("div",{className:`rounded-xl p-3 border transition-all duration-300 ${I?"bg-red-50/50 border-red-100 shadow-sm":"border-transparent"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsxs("span",{className:`text-[10px] font-black px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${I?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:[I&&l.jsx(ic,{className:"w-3 h-3"}),x.time]}),l.jsx("h5",{className:`text-sm font-bold transition-colors ${I?"text-red-900":"text-slate-700"}`,children:x.task})]}),l.jsx("p",{className:`text-xs leading-relaxed pl-1 transition-colors ${I?"text-slate-700 font-medium":"text-slate-500"}`,children:x.desc})]})]},_)})})]}),l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[l.jsxs("button",{onClick:()=>m(!p),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-600",children:l.jsx(r0,{className:"w-5 h-5"})}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),p?l.jsx(ml,{className:"w-5 h-5 text-slate-400"}):l.jsx(pi,{className:"w-5 h-5 text-slate-400"})]}),p&&l.jsxs("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:[l.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.keys(o0).map(x=>l.jsx("button",{onClick:()=>C(x),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${o===x?"bg-white border-amber-200 text-amber-600 shadow-sm scale-105 ring-2 ring-amber-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:x},x))}),S&&l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-amber-50 text-amber-600",children:l.jsx(r0,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Holiday Shift"}),l.jsx("h4",{className:"font-bold text-slate-800",children:S.title})]})]}),l.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:S.timeline.map((x,_)=>l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm",style:{backgroundColor:`var(--color-${S.color}-500, #f59e0b)`}}),l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-[10px] font-black text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded",children:x.time}),l.jsx("h5",{className:"text-sm font-bold text-slate-700",children:x.task})]}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:x.desc})]},_))})]})]})]}),l.jsxs("div",{className:"border-t border-slate-100 pt-6 space-y-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[l.jsx(qo,{className:"w-5 h-5 text-slate-400"}),""]})}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:AC.map(x=>{const _=n===x.id;return l.jsxs("div",{className:`rounded-2xl border transition-all duration-300 overflow-hidden ${_?`bg-white shadow-md ${x.color}`:"bg-white border-slate-100"}`,children:[l.jsxs("button",{onClick:()=>r(_?null:x.id),className:"w-full flex items-center justify-between p-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-xl shadow-sm transition-colors ${_?"bg-white":"bg-slate-50"}`,children:x.icon}),l.jsx("h4",{className:`font-bold text-sm ${_?"text-slate-800":"text-slate-600"}`,children:x.title})]}),_?l.jsx(aC,{className:"w-4 h-4 text-slate-400"}):l.jsx(ml,{className:"w-4 h-4 text-slate-300"})]}),_&&l.jsx("div",{className:"px-4 pb-4 animate-in slide-in-from-top-1",children:l.jsx("div",{className:"pt-2 border-t border-slate-100/50",children:x.content})})]},x.id)})})]})]})}const Ha={form_title:" ",version:"1140906",sections:[{id:"section_background",title:"",description:"",fields:[{id:"edu_university",label:"",type:"text",required:!0},{id:"edu_system",label:"",type:"radio",options:["4","5","6"],required:!0},{id:"edu_uni_grad_year",label:"- ()",type:"number",placeholder:": 110",width:"50%",required:!0},{id:"edu_uni_grad_month",label:"-",type:"number",placeholder:"1~12",width:"50%",required:!0},{id:"edu_grad_school",label:"",type:"text",required:!1},{id:"edu_grad_degree",label:"",type:"radio",options:["","",""],required:!1},{id:"edu_grad_year",label:"- ()",type:"number",placeholder:": 112",width:"50%",required:!1},{id:"edu_grad_month",label:"-",type:"number",placeholder:"1~12",width:"50%",required:!1},{id:"lang_english",label:" ()",type:"radio",options:["","","",""],has_other_text:!0,required:!0}]},{id:"section_work_experience",title:"",description:" ()",is_dynamic_list:!0,add_button_text:"",fields:[{id:"work_org",label:"/",type:"text",col_span:4},{id:"start_year",label:"-",type:"number",placeholder:"110",col_span:2},{id:"start_month",label:"-",type:"number",placeholder:"1",col_span:2},{id:"end_year",label:"-",type:"number",placeholder:"112",col_span:2},{id:"end_month",label:"-",type:"number",placeholder:"12",col_span:2}]},{id:"section_learning_history",title:"",description:" ()",fields:[{id:"history_outpatient",label:"1. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","","","","",""],has_other_text:!0}]},{id:"history_inpatient",label:"2. UD",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","","","","",""],has_other_text:!0}]},{id:"history_consult",label:"3. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","EBM","",""],has_other_text:!0}]},{id:"history_management",label:"4. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","",""],has_other_text:!0}]},{id:"history_special",label:"5. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","TPN",""],has_other_text:!0}]},{id:"history_clinical",label:"6. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","ADR","",""],has_other_text:!0}]},{id:"history_other",label:"",type:"group",sub_fields:[{id:"content",label:"",type:"text"},{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""}]}]},{id:"section_assessment",title:"",description:" ()",access_control:"teacher_admin",sub_sections:[{title:"A. ",fields:[{id:"assess_interview",label:"",type:"score_radio",options:["","",""]},{id:"assess_written_test",label:"",type:"score_radio",options:["","",""]},{id:"assess_ksa",label:"KSA",type:"score_radio",options:["","",""]}]},{title:"B. ",layout:"table",columns:["","",""],rows:[{id:"plan_dispensing",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"7",value:6},{label:"",input_type:"number"}]}},{id:"plan_clinical",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"2",value:6},{label:"",input_type:"number"}]}},{id:"plan_consult",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"2",value:3},{label:"",input_type:"number"}]}},{id:"plan_manage",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"1",value:1},{label:"",input_type:"number"}]}},{id:"plan_tcm",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:1},{label:"",input_type:"number"}]}},{id:"plan_care",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:3},{label:"",input_type:"number"}]}},{id:"plan_special",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:3},{label:"",input_type:"number"}]}}]}]}]},PC=({studentEmail:t,studentName:e,userRole:n,currentUserEmail:r,currentUserName:s,gasApiUrl:i})=>{const[o,c]=z.useState("menu"),[u,h]=z.useState({}),[p,m]=z.useState("draft"),[g,T]=z.useState(!1),[S,N]=z.useState(!1),[C,x]=z.useState(null),[_,I]=z.useState({teacherName:"",teacherDate:"",adminName:"",adminDate:""}),j=n==="admin",U=n==="teacher",$=n==="student",b=p==="approved"||p==="assessed"&&!j||p==="submitted"&&$;z.useEffect(()=>{t&&y()},[o,t]),z.useEffect(()=>{const V=new Date().toISOString().split("T")[0];U&&p==="submitted"&&!_.teacherName&&I(G=>({...G,teacherName:s||"",teacherDate:V})),j&&p==="assessed"&&!_.adminName&&I(G=>({...G,adminName:s||"",adminDate:V}))},[n,U,j,p,s]);const y=async()=>{T(!0);try{const G=await(await fetch(`${i}?type=getAssessment&studentEmail=${t}&formType=pre_training`)).json(),te=G.formData||{};h(te),m(G.status||"draft"),x(G.updatedAt?new Date(G.updatedAt):null),I({teacherName:te.sign_teacher_name||"",teacherDate:te.sign_teacher_date||"",adminName:te.sign_admin_name||"",adminDate:te.sign_admin_date||""})}catch(V){console.error("",V)}T(!1)},w=async V=>{N(!0);const G=V||p,te=new Date().toISOString().split("T")[0];let M={...u};if(V==="submitted"&&(M.sign_student_date=te),V==="assessed"){if(!_.teacherDate){alert(""),N(!1);return}M.sign_teacher_name=s,M.sign_teacher_date=_.teacherDate}if(V==="approved"){if(!_.adminDate){alert(""),N(!1);return}M.sign_admin_name=s,M.sign_admin_date=_.adminDate}const J={type:"saveAssessment",formType:"pre_training",studentEmail:t,studentName:e,formData:M,status:G,updatedBy:r};try{await fetch(i,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(J)}),m(G),h(M),x(new Date);let D="";V==="submitted"&&(D=""),V==="assessed"&&(D=""),V==="approved"&&(D=""),alert(D),(V==="approved"||V==="submitted"||V==="assessed")&&c("menu")}catch(D){console.error("",D),alert("")}N(!1)},E=(V,G,te)=>{b||h(M=>({...M,[V]:{...M[V],[G]:te}}))},A=(V,G,te,M)=>{var K;if(b)return;const D=[...((K=u[V])==null?void 0:K.list)||[]];D[G]||(D[G]={}),D[G][te]=M,h(X=>({...X,[V]:{...X[V],list:D}}))},P=V=>{var te;if(b)return;const G=((te=u[V])==null?void 0:te.list)||[];h(M=>({...M,[V]:{...M[V],list:[...G,{}]}}))},k=(V,G)=>{var J;if(b)return;const M=(((J=u[V])==null?void 0:J.list)||[]).filter((D,K)=>K!==G);h(D=>({...D,[V]:{...D[V],list:M}}))},q=(V,G,te,M,J)=>{var X,re;const D=b||J,K=V.width?{width:V.width}:{width:"100%"};switch(V.type){case"text":case"number":return l.jsx("input",{type:V.type,style:K,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",value:te||"",onChange:ee=>M(V.id,ee.target.value),disabled:D,placeholder:V.placeholder});case"textarea":return l.jsx("textarea",{style:K,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",rows:3,value:te||"",onChange:ee=>M(V.id,ee.target.value),disabled:D});case"radio":return l.jsxs("div",{className:"flex flex-wrap gap-4",children:[V.options.map(ee=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${G}_${V.id}`,value:ee,checked:te===ee,onChange:Ce=>M(V.id,Ce.target.value),disabled:D,className:"w-4 h-4 text-indigo-600"}),l.jsx("span",{className:"text-gray-700",children:ee})]},ee)),V.has_other_text&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"radio",name:`${G}_${V.id}`,value:"",checked:te==="",onChange:ee=>M(V.id,""),disabled:D}),l.jsx("span",{className:"text-gray-700",children:":"}),l.jsx("input",{type:"text",className:"border-b border-gray-300 focus:border-indigo-500 outline-none px-1 disabled:bg-transparent",disabled:D||te!=="",value:((X=u[G])==null?void 0:X[`${V.id}_other`])||"",onChange:ee=>M(`${V.id}_other`,ee.target.value)})]})]});case"score_radio":return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-bold text-gray-600",children:":"}),l.jsx("input",{type:"number",placeholder:"0-100",className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100 text-center",value:((re=u[G])==null?void 0:re[`${V.id}_score`])||"",onChange:ee=>M(`${V.id}_score`,ee.target.value),disabled:D})]}),l.jsx("div",{className:"flex flex-wrap gap-4",children:V.options.map(ee=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${G}_${V.id}`,value:ee,checked:te===ee,onChange:Ce=>M(V.id,Ce.target.value),disabled:D,className:"w-4 h-4 text-indigo-600"}),l.jsx("span",{className:"text-gray-700",children:ee})]},ee))})]});case"checkbox":const ue=Array.isArray(te)?te:[];return l.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:V.options.map(ee=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",value:ee,checked:ue.includes(ee),disabled:D,onChange:Ce=>{const W=Ce.target.checked?[...ue,ee]:ue.filter(oe=>oe!==ee);M(V.id,W)},className:"w-4 h-4 text-indigo-600 rounded"}),l.jsx("span",{className:"text-gray-700",children:ee})]},ee))});default:return null}};if(o==="menu"){const V=["submitted","assessed","approved"].includes(p),G=["assessed","approved"].includes(p),te=p==="approved";return l.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-4 flex items-center gap-2",children:[l.jsx(vp,{className:"w-5 h-5 text-indigo-600"}),""]}),l.jsxs("div",{onClick:()=>c("form"),className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md hover:border-indigo-300 transition-all cursor-pointer overflow-hidden group",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 group-hover:bg-indigo-50 transition-colors",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-indigo-600",children:""}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["",Ha.version]})]}),l.jsx(pi,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600"})]}),l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${V?"bg-green-500":"bg-gray-300"}`}),l.jsx("span",{children:""}),u.sign_student_date&&l.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:u.sign_student_date})]}),l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${V?"bg-green-100 text-green-700":p==="draft"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-400"}`,children:V?"":""})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-gray-50 pt-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${G?"bg-green-500":"bg-gray-300"}`}),l.jsx("span",{children:""}),u.sign_teacher_name&&l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-bold text-xs",children:["[",u.sign_teacher_name,"]"]}),l.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:u.sign_teacher_date})]})]}),l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${G?"bg-green-100 text-green-700":V&&!G?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-400"}`,children:G?"":V?"":"--"})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-gray-50 pt-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${te?"bg-green-500":"bg-gray-300"}`}),l.jsx("span",{children:""}),u.sign_admin_name&&l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-bold text-xs",children:["[",u.sign_admin_name,"]"]}),l.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:u.sign_admin_date})]})]}),l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${te?"bg-green-100 text-green-700":G&&!te?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-400"}`,children:te?"":G?"":"--"})]})]})]})]})}return g?l.jsxs("div",{className:"p-8 text-center text-gray-500 flex justify-center",children:[l.jsx(us,{className:"animate-spin mr-2"})," ..."]}):l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-12 animate-in slide-in-from-right-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsxs("button",{onClick:()=>c("menu"),className:"flex items-center gap-1 text-gray-500 hover:text-indigo-600 font-bold text-sm bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx(Kw,{className:"w-4 h-4"})," "]}),l.jsx("span",{className:"text-gray-300",children:"|"}),l.jsxs("span",{className:"text-gray-700 font-medium",children:[e," "]})]}),l.jsxs("div",{className:`p-4 rounded-lg flex justify-between items-center ${p==="approved"?"bg-green-50 border border-green-200 text-green-800":p==="assessed"?"bg-purple-50 border border-purple-200 text-purple-800":p==="submitted"?"bg-blue-50 border border-blue-200 text-blue-800":"bg-gray-50 border border-gray-200 text-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[p==="approved"?l.jsx(ac,{className:"w-5 h-5"}):l.jsx(Qw,{className:"w-5 h-5"}),l.jsxs("span",{className:"font-bold",children:["",p==="draft"&&" ()",p==="submitted"&&" ()",p==="assessed"&&" ()",p==="approved"&&" ()"]})]}),C&&l.jsxs("span",{className:"text-xs opacity-70",children:["",C.toLocaleString()]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"bg-indigo-600 px-6 py-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:Ha.form_title}),l.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["",Ha.version]})]}),l.jsx("div",{className:"p-6 md:p-8 space-y-10",children:Ha.sections.map(V=>{var te;const G=V.access_control==="teacher_admin"&&$;return l.jsxs("div",{className:"border-b border-gray-100 pb-8 last:border-0 last:pb-0",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:V.title}),V.description&&l.jsx("p",{className:"text-sm text-gray-500 mb-6",children:V.description}),G&&l.jsxs("div",{className:"bg-gray-100 text-gray-500 p-3 rounded mb-4 text-sm flex items-center gap-2",children:[l.jsx(ac,{className:"w-4 h-4"})," "]}),V.fields&&!V.is_dynamic_list&&l.jsx("div",{className:"grid grid-cols-1 gap-6",children:V.fields.map(M=>{var J;return M.type==="group"?l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsx("label",{className:"font-bold text-gray-700 block mb-3",children:M.label}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.sub_fields.map(D=>{var K;return l.jsxs("div",{className:D.type==="checkbox"?"md:col-span-2":"",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:D.label}),q(D,V.id,(K=u[V.id])==null?void 0:K[`${M.id}_${D.id}`],(X,re)=>E(V.id,`${M.id}_${X}`,re),G)]},D.id)})})]},M.id):l.jsxs("div",{style:{display:M.width?"inline-block":"block",width:M.width?M.width:"100%",paddingRight:"1rem"},children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[M.label," ",M.required&&l.jsx("span",{className:"text-red-500",children:"*"})]}),q(M,V.id,(J=u[V.id])==null?void 0:J[M.id],(D,K)=>E(V.id,D,K),G)]},M.id)})}),V.is_dynamic_list&&l.jsxs("div",{className:"space-y-4",children:[(((te=u[V.id])==null?void 0:te.list)||[]).map((M,J)=>l.jsxs("div",{className:"relative p-4 border border-gray-200 rounded-lg bg-gray-50 grid grid-cols-1 md:grid-cols-12 gap-4",children:[V.fields.map(D=>l.jsxs("div",{className:`md:col-span-${D.col_span||12} col-span-12`,children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:D.label}),q(D,V.id,M[D.id],(K,X)=>A(V.id,J,K,X),G)]},D.id)),!b&&!G&&l.jsx("button",{onClick:()=>k(V.id,J),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500",children:l.jsx(wC,{className:"w-4 h-4"})})]},J)),!b&&!G&&l.jsxs("button",{onClick:()=>P(V.id),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-500 hover:text-indigo-600 font-bold flex items-center justify-center gap-2 transition-colors",children:[l.jsx(Yw,{className:"w-5 h-5"})," ",V.add_button_text]})]}),V.sub_sections&&l.jsx("div",{className:"space-y-8",children:V.sub_sections.map((M,J)=>l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[l.jsx("h4",{className:"font-bold text-indigo-700 mb-4 pb-2 border-b border-gray-100",children:M.title}),M.fields&&l.jsx("div",{className:"space-y-4",children:M.fields.map(D=>{var K;return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[l.jsxs("label",{className:"text-sm font-bold text-gray-700 min-w-[80px]",children:[D.label,":"]}),l.jsx("div",{className:"flex-1",children:q(D,V.id,(K=u[V.id])==null?void 0:K[D.id],(X,re)=>E(V.id,X,re),G)})]},D.id)})}),M.layout==="table"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-gray-50 text-gray-700 font-bold border-b border-gray-200",children:l.jsx("tr",{children:M.columns.map(D=>l.jsx("th",{className:"p-3",children:D},D))})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:M.rows.map(D=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-3 font-medium text-gray-800",children:D.unit}),l.jsx("td",{className:"p-3",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:D.assessment.options.map(K=>{var X;return l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${D.id}_assess`,value:K,checked:((X=u[V.id])==null?void 0:X[`${D.id}_assess`])===K,onChange:re=>E(V.id,`${D.id}_assess`,re.target.value),disabled:b||G,className:"text-indigo-600"}),l.jsx("span",{children:K})]},K)})})}),l.jsx("td",{className:"p-3",children:l.jsx("div",{className:"flex flex-col gap-2",children:D.planning.options.map((K,X)=>{var re,ue,ee;return l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${D.id}_plan`,value:K.label,checked:((re=u[V.id])==null?void 0:re[`${D.id}_plan`])===K.label,onChange:Ce=>E(V.id,`${D.id}_plan`,Ce.target.value),disabled:b||G,className:"text-indigo-600"}),l.jsx("span",{children:K.label}),K.input_type==="number"&&l.jsx("input",{type:"number",className:"w-16 border-b border-gray-300 text-center focus:border-indigo-500 outline-none p-0 disabled:bg-transparent",disabled:b||G||((ue=u[V.id])==null?void 0:ue[`${D.id}_plan`])!==K.label,value:((ee=u[V.id])==null?void 0:ee[`${D.id}_plan_custom`])||"",onChange:Ce=>E(V.id,`${D.id}_plan_custom`,Ce.target.value)})]},X)})})})]},D.id))})]})})]},J))})]},V.id)})}),l.jsxs("div",{className:"bg-gray-50 border-t border-gray-200",children:[p==="submitted"&&(U||j)&&l.jsxs("div",{className:"px-6 py-4 bg-blue-50 border-b border-blue-100",children:[l.jsxs("h4",{className:"font-bold text-blue-800 mb-3 flex items-center gap-2",children:[l.jsx(Bn,{className:"w-4 h-4"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1",children:""}),l.jsx("input",{type:"text",value:_.teacherName,disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100 cursor-not-allowed"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1",children:""}),l.jsx("input",{type:"date",value:_.teacherDate,onChange:V=>I({..._,teacherDate:V.target.value}),className:"w-full px-3 py-2 border rounded-md"})]})]})]}),p==="assessed"&&j&&l.jsxs("div",{className:"px-6 py-4 bg-purple-50 border-b border-purple-100",children:[l.jsxs("h4",{className:"font-bold text-purple-800 mb-3 flex items-center gap-2",children:[l.jsx(Yc,{className:"w-4 h-4"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-purple-600 mb-1",children:""}),l.jsx("input",{type:"text",value:_.adminName,disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100 cursor-not-allowed"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-purple-600 mb-1",children:""}),l.jsx("input",{type:"date",value:_.adminDate,onChange:V=>I({..._,adminDate:V.target.value}),className:"w-full px-3 py-2 border rounded-md"})]})]})]}),l.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3",children:[!b&&l.jsxs("button",{onClick:()=>w(p),disabled:S,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium flex items-center gap-2",children:[S?l.jsx(us,{className:"w-4 h-4 animate-spin"}):l.jsx(Jc,{className:"w-4 h-4"})," "]}),p==="draft"&&$&&l.jsxs("button",{onClick:()=>{window.confirm("")&&w("submitted")},disabled:S,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium flex items-center gap-2",children:[l.jsx(zs,{className:"w-4 h-4"})," "]}),p==="submitted"&&(U||j)&&l.jsxs("button",{onClick:()=>{window.confirm("")&&w("assessed")},disabled:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2",children:[l.jsx(zs,{className:"w-4 h-4"})," "]}),p==="assessed"&&j&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>w("submitted"),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium",children:""}),l.jsxs("button",{onClick:()=>{window.confirm("")&&w("approved")},disabled:S,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium flex items-center gap-2",children:[l.jsx(zs,{className:"w-4 h-4"})," "]})]}),p==="approved"&&l.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-2",children:[l.jsx(zs,{className:"w-5 h-5"})," "]})]})]})]})]})},e1=[{value:"2a",label:"Level 2a: "},{value:"2b",label:"Level 2b: "},{value:"3a",label:"Level 3a: "},{value:"3b",label:"Level 3b: "},{value:"3c",label:"Level 3c: "},{value:"4",label:"Level 4: "},{value:"5",label:"Level 5: "}],wh=[{value:"unobserved",label:""},{value:"below_expectation",label:""},{value:"meet_expectation",label:""},{value:"exceed_expectation",label:""}],RC=[{id:"EPA_01",title:"EPA 1. ",description:"",check_items:["","","",""]},{id:"EPA_02",title:"EPA 2. ",description:"",check_items:["","","",""]},{id:"EPA_03",title:"EPA 3. ",description:"",check_items:["","","",""]},{id:"EPA_04",title:"EPA 4. ",description:"",check_items:["","","",""]},{id:"EPA_05",title:"EPA 5. ",description:"",check_items:["","","","",""]},{id:"EPA_06",title:"EPA 6. (TDM)",description:"(TDM)",check_items:["","","",""]},{id:"EPA_07",title:"EPA 7. ",description:"",check_items:["","","",""]},{id:"EPA_08",title:"EPA 8. ",description:"",check_items:["","","","",""]}],jC=({epa:t,studentName:e,teacherName:n,onClose:r,onSubmit:s,isSubmitting:i})=>{const[o,c]=z.useState(new Date().toISOString().split("T")[0]),[u,h]=z.useState(""),[p,m]=z.useState({}),[g,T]=z.useState(""),S=(C,x)=>{m(_=>({..._,[C]:x}))},N=()=>{if(!u)return alert("");if(!t.check_items.every(_=>p[_]))return alert("");const x={epa_id:t.id,epa_title:t.title,date:o,level:u,checklist:p,feedback_content:g,teacher_name:n||"Unknown Teacher"};s(x)};return l.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4 animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"px-6 py-4 border-b bg-gray-50 flex justify-between items-center flex-shrink-0",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[l.jsx("span",{className:"bg-indigo-600 text-white text-xs px-2 py-1 rounded",children:""}),t.title]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Bn,{className:"w-4 h-4"})," ",e]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Bn,{className:"w-4 h-4"})," ",n]})]})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:l.jsx(ds,{className:"w-6 h-6 text-gray-500"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[l.jsx("section",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(yp,{className:"w-4 h-4 text-indigo-600"})," ()"]}),l.jsx("input",{type:"date",value:o,onChange:C=>c(C.target.value),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none font-medium text-gray-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),l.jsx("p",{className:"text-sm text-gray-600 bg-white p-3 rounded-lg border border-blue-200",children:t.description})]})]})}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:e1.map(C=>l.jsxs("label",{className:`relative flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all ${u===C.value?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[l.jsx("input",{type:"radio",name:"trust_level",value:C.value,checked:u===C.value,onChange:()=>h(C.value),className:"w-5 h-5 text-indigo-600 border-gray-300 focus:ring-indigo-500"}),l.jsx("span",{className:"ml-3 font-medium text-gray-800",children:C.label.split(":")[0]}),l.jsxs("span",{className:"ml-2 text-gray-600 text-sm",children:[" - ",C.label.split(":")[1]]})]},C.value))})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),l.jsx("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-gray-100 text-gray-700 font-bold border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-1/3",children:""}),wh.map(C=>l.jsx("th",{className:"p-4 text-center text-xs w-[16%]",children:C.label},C.value))]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:t.check_items.map((C,x)=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"p-4 font-medium text-gray-800",children:C}),wh.map(_=>l.jsx("td",{className:"p-4 text-center",children:l.jsx("input",{type:"radio",name:`check_${x}`,checked:p[C]===_.value,onChange:()=>S(C,_.value),className:"w-4 h-4 text-indigo-600 cursor-pointer"})},_.value))]},x))})]})})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),l.jsx("textarea",{className:"w-full h-32 p-4 border rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none resize-none text-gray-700 bg-gray-50",placeholder:"...",value:g,onChange:C=>T(C.target.value)})]})]}),l.jsxs("div",{className:"p-4 border-t bg-white flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:r,className:"px-6 py-2.5 rounded-lg border text-gray-600 font-bold hover:bg-gray-50 transition-colors",children:""}),l.jsx("button",{onClick:N,disabled:i,className:"px-8 py-2.5 rounded-lg bg-indigo-600 text-white font-bold hover:bg-indigo-700 shadow-lg disabled:opacity-50 flex items-center gap-2",children:i?"...":l.jsxs(l.Fragment,{children:[l.jsx(Jc,{className:"w-5 h-5"})," "]})})]})]})})},DC=({studentEmail:t,studentName:e,isTeacher:n,userProfile:r,apiUrl:s})=>{const[i,o]=z.useState(null),[c,u]=z.useState(!1),[h,p]=z.useState(!1),[m,g]=z.useState([]),[T,S]=z.useState(!1),[N,C]=z.useState(!1),x=async()=>{if(t){S(!0);try{const U=await(await fetch(`${s}?action=get_epa_records&student_email=${t}`)).json();Array.isArray(U)?g(U):g([])}catch(j){console.error("Failed to fetch EPA records:",j),g([])}finally{S(!1)}}};z.useEffect(()=>{x()},[t]);const _=async j=>{C(!0);try{await fetch(s,{method:"POST",body:JSON.stringify({action:"save_epa_record",student_email:t,...j})}),alert(""),p(!1),u(!0),x()}catch{alert("")}finally{C(!1)}},I=async(j,U)=>{C(!0);try{const b=await(await fetch(s,{method:"POST",body:JSON.stringify({action:"save_trainee_feedback",record_id:j,reflection:U.reflection,satisfaction:U.satisfaction})})).json();if(b.status==="success")alert(""),u(!1),x();else throw new Error(b.message||"")}catch($){console.error($),alert("")}finally{C(!1)}};return l.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[l.jsxs("div",{className:"flex justify-between items-center border-b pb-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(lr,{className:"w-6 h-6 text-indigo-600"}),"EPA "]}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["",l.jsx("span",{className:"font-medium text-gray-700",children:e||""})]})]}),T&&l.jsxs("span",{className:"text-indigo-600 flex items-center gap-2 text-sm",children:[l.jsx(us,{className:"w-4 h-4 animate-spin"})," ..."]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:RC.map(j=>{const U=Array.isArray(m)?m.filter(y=>y.epa_id===j.id):[],$=U.length>0?U[0]:null;U.length;const b=$&&!$.evaluation.satisfaction_score&&!n;return l.jsxs("div",{onClick:()=>{o(j),u(!0)},className:"bg-white border rounded-xl p-5 hover:shadow-lg transition-all cursor-pointer group relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold rounded",children:j.id}),b&&l.jsx("span",{className:"animate-pulse bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded-full border border-red-200",children:" "})]}),l.jsx("h3",{className:"font-bold text-gray-800 mb-2 group-hover:text-indigo-600",children:j.title.replace(`${j.id}. `,"")}),l.jsxs("div",{className:"pt-3 border-t flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-gray-400",children:""}),l.jsx("span",{className:`text-sm font-bold ${$?"text-green-600":"text-gray-300"}`,children:$?$.evaluation.level:""})]}),l.jsx(pi,{className:"w-5 h-5 text-gray-300 group-hover:text-indigo-500 transition-all"})]})]},j.id)})}),c&&i&&l.jsx(VC,{epa:i,records:Array.isArray(m)?m.filter(j=>j.epa_id===i.id):[],onClose:()=>u(!1),onOpenForm:()=>{u(!1),p(!0)},onSaveFeedback:I,isTeacher:n,studentName:e}),h&&i&&l.jsx(jC,{epa:i,studentName:e,teacherName:(r==null?void 0:r.displayName)||"Teacher",onClose:()=>p(!1),onSubmit:_,isSubmitting:N})]})},VC=({epa:t,records:e,onClose:n,onOpenForm:r,onSaveFeedback:s,isTeacher:i,studentName:o})=>{var N;const[c,u]=z.useState(null),[h,p]=z.useState(""),[m,g]=z.useState(0);z.useEffect(()=>{e.length>0&&u(e[0].record_id)},[e]);const T=e.find(C=>C.record_id===c),S=C=>{const x=wh.find(_=>_.value===C);return x?x.label:""};return l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-gray-50",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:t.title}),l.jsxs("p",{className:"text-sm text-gray-500",children:["",o]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[i&&l.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm font-medium",children:[l.jsx(Yw,{className:"w-4 h-4"})," "]}),l.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-200 rounded-full text-gray-500",children:""})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsxs("div",{className:"w-1/3 border-r bg-gray-50 overflow-y-auto p-4",children:[l.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-3",children:[" (",e.length,")"]}),l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-10 text-gray-400 text-sm",children:""}):e.map(C=>l.jsxs("button",{onClick:()=>u(C.record_id),className:`w-full text-left p-3 rounded-lg border transition-all ${c===C.record_id?"bg-white border-indigo-500 ring-1 ring-indigo-500":"bg-white border-gray-200 hover:border-indigo-300"}`,children:[l.jsxs("div",{className:"flex justify-between font-bold text-gray-800 text-sm",children:[C.evaluation.date,l.jsxs("span",{className:"text-indigo-600",children:["Level ",C.evaluation.level]})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[l.jsx(Bn,{className:"w-3 h-3"})," ",C.teacher_name]})]},C.record_id))})]}),l.jsx("div",{className:"w-2/3 overflow-y-auto p-8 bg-white",children:T?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("section",{children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),l.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-100",children:[l.jsxs("span",{className:"text-2xl font-bold text-indigo-700",children:["Level ",T.evaluation.level]}),l.jsx("p",{className:"text-sm text-indigo-600 mt-1",children:(N=e1.find(C=>C.value===T.evaluation.level))==null?void 0:N.label})]})]}),l.jsxs("section",{children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),l.jsx("div",{className:"space-y-2 border rounded-lg overflow-hidden",children:Object.entries(T.evaluation.checklist).map(([C,x],_)=>l.jsxs("div",{className:"flex items-center justify-between text-sm p-3 bg-white border-b last:border-0 hover:bg-gray-50",children:[l.jsx("span",{className:"text-gray-700 font-medium",children:C}),l.jsxs("div",{className:"flex items-center gap-2",children:[x==="meet_expectation"||x==="exceed_expectation"?l.jsx(Yc,{className:"w-4 h-4 text-green-500"}):l.jsx(qo,{className:"w-4 h-4 text-orange-500"}),l.jsx("span",{className:`text-xs ${x.includes("meet")?"text-green-700":"text-gray-500"}`,children:S(x)})]})]},_))})]}),l.jsxs("section",{children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),l.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded border whitespace-pre-line",children:T.evaluation.feedback_content||""})]}),l.jsxs("section",{className:"pt-6 border-t mt-6",children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-4 flex items-center justify-between",children:l.jsx("span",{children:""})}),T.feedback_satisfaction>0?l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 space-y-2",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:"text-green-700 font-bold",children:["",T.feedback_satisfaction," / 9"]})}),l.jsxs("div",{className:"text-sm text-gray-700",children:[l.jsx("span",{className:"font-bold block mb-1",children:""}),T.feedback_reflection||""]})]}):i?l.jsx("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-300 text-gray-400 text-sm italic",children:""}):l.jsxs("div",{className:"bg-orange-50 p-5 rounded-xl border border-orange-100 space-y-4",children:[l.jsx("h5",{className:"text-sm font-bold text-orange-800",children:" "}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:" (1-9)"}),l.jsx("div",{className:"flex gap-1 flex-wrap",children:[1,2,3,4,5,6,7,8,9].map(C=>l.jsx("button",{onClick:()=>g(C),className:`w-8 h-8 rounded-full text-sm font-bold border ${m===C?"bg-orange-500 text-white border-orange-600":"bg-white text-gray-500 border-gray-300"}`,children:C},C))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:""}),l.jsx("textarea",{className:"w-full h-20 p-3 text-sm border rounded-lg focus:ring-2 focus:ring-orange-300 outline-none",placeholder:"...",value:h,onChange:C=>p(C.target.value)})]}),l.jsx("button",{onClick:()=>s(T.record_id,{satisfaction:m,reflection:h}),disabled:m===0,className:"w-full py-2 bg-orange-600 text-white rounded-lg font-bold text-sm hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m===0?"":""})]})]})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[l.jsx(lc,{className:"w-12 h-12 mb-3 opacity-20"}),l.jsx("p",{children:""})]})})]})]})})},Wa=[{id:"dops_op_dispensing",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ",type:"score_5"},{id:"item_2",label:"2.  ()",type:"score_5"},{id:"item_3",label:"3.  (5)",type:"score_5"},{id:"item_4",label:"4.  ()",type:"score_5"},{id:"item_5",label:"5. 1-3",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_ud_cart",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ()",type:"score_5"},{id:"item_2",label:"2. ()",type:"score_5"},{id:"item_3",label:"3. ()",type:"score_5"},{id:"item_4",label:"4. ()",type:"score_5"},{id:"item_5",label:"5. ()",type:"score_5"},{id:"item_6",label:"6. ()",type:"score_5"},{id:"item_7",label:"7. ()",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_op_delivery",title:" DOPS",version:"113.11",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ",type:"score_5"},{id:"item_2",label:"2. ",type:"score_5"},{id:"item_3",label:"3. ",type:"score_5"},{id:"item_4",label:"4. ",type:"score_5"},{id:"item_5",label:"5. ()",type:"score_5"},{id:"item_6",label:"6. ",type:"score_5"},{id:"item_7",label:"7. ",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_op_verification",title:" DOPS",version:"113.11",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ",type:"score_5"},{id:"item_2",label:"2. ",type:"score_5"},{id:"item_3",label:"3. ",type:"score_5"},{id:"item_4",label:"4. ",type:"score_5"},{id:"item_5",label:"5. ",type:"score_5"},{id:"item_6",label:"6. ",type:"score_5"},{id:"item_7",label:"7. ",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_patient_counseling",title:" DOPS",version:"114.04",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1.  ()",type:"score_5"},{id:"item_2",label:"2.  ()",type:"score_5"},{id:"item_3",label:"3.  ()",type:"score_5"},{id:"item_4",label:"4.  ()",type:"score_5"},{id:"item_5",label:"5.  ()",type:"score_5"},{id:"item_6",label:"6.  ()",type:"score_5"},{id:"item_7",label:"7.  ()",type:"score_5"},{id:"item_8",label:"8.  ()",type:"score_5"},{id:"item_9",label:"9.  ()",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_provider_counseling",title:" DOPS",version:"114.04",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. : EMR",type:"score_5"},{id:"item_2",label:"2. : ,",type:"score_5"},{id:"item_3",label:"3. : ,",type:"score_5"},{id:"item_4",label:"4. : ,",type:"score_5"},{id:"item_5",label:"5. : ",type:"score_5"},{id:"item_6",label:"6. SOAP",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_tcm",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills_1",title:"1. ",fields:[{id:"item_1_1",label:"(1) ",type:"yes_no"},{id:"item_1_2",label:"(2) ",type:"yes_no"},{id:"item_1_3",label:"(3) ",type:"yes_no"}]},{id:"sec_skills_2",title:"2. ",fields:[{id:"item_2_1",label:"(1) ",type:"yes_no"},{id:"item_2_2",label:"(2) ",type:"yes_no"},{id:"item_2_3",label:"(3) ",type:"yes_no"}]},{id:"sec_skills_3",title:"3. ",fields:[{id:"item_3_1",label:"(1) ",type:"yes_no"},{id:"item_3_2",label:"(2) ",type:"yes_no"},{id:"item_3_3",label:"(3) ",type:"yes_no"},{id:"item_3_4",label:"(4) ",type:"yes_no"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_chemo_env",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills_1",title:"1. (BSC)",fields:[{id:"item_1_1",label:"(1) (70%)",type:"yes_no"},{id:"item_1_2",label:"(2) 70%",type:"yes_no"}]},{id:"sec_skills_2",title:"2. ",fields:[{id:"item_2_1",label:"(1) ",type:"yes_no"},{id:"item_2_2",label:"(2) ",type:"yes_no"},{id:"item_2_3",label:"(3) 70%",type:"yes_no"},{id:"item_2_4",label:"(4) ",type:"yes_no"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_chemo_ppe",title:" DOPS",version:"113.03",description:"(PPE)",sections:[{id:"sec_skills_1",title:"1. (PPE)",fields:[{id:"item_1_1",label:"(1) ",type:"yes_no"},{id:"item_1_2",label:"(2) ",type:"yes_no"},{id:"item_1_3",label:"(3) ",type:"yes_no"},{id:"item_1_4",label:"(4) ",type:"yes_no"},{id:"item_1_5",label:"(5) ",type:"yes_no"},{id:"item_1_6",label:"(6) ",type:"yes_no"}]},{id:"sec_skills_2",title:"2. (PPE)",fields:[{id:"item_2_1",label:"(1) ",type:"yes_no"},{id:"item_2_2",label:"(2) ",type:"yes_no"},{id:"item_2_3",label:"(3) ",type:"yes_no"},{id:"item_2_4",label:"(4) ",type:"yes_no"},{id:"item_2_5",label:"(5) PPE",type:"yes_no"},{id:"item_2_6",label:"(6) ",type:"yes_no"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]}],OC=({studentEmail:t,studentName:e,userRole:n,currentUserEmail:r,currentUserName:s,gasApiUrl:i})=>{const[o,c]=z.useState("menu"),[u,h]=z.useState(null),[p,m]=z.useState({}),[g,T]=z.useState({}),[S,N]=z.useState("draft"),[C,x]=z.useState(!1),[_,I]=z.useState(!1),[j,U]=z.useState(!1),[$,b]=z.useState(null),y=n==="admin",w=n==="teacher",E=n==="student",A=Wa.find(D=>D.id===u),P=(w||y)&&S==="draft",k=E&&S==="teacher_graded";z.useEffect(()=>{o==="menu"&&t&&q()},[o,t]),z.useEffect(()=>{o==="form"&&u&&t&&V()},[o,u,t]);const q=async()=>{I(!0);try{const D=Wa.map(re=>fetch(`${i}?type=getDOPS&studentEmail=${t}&dopsId=${re.id}`).then(ue=>ue.json()).then(ue=>({id:re.id,status:ue.status||"draft",updatedAt:ue.updatedAt})).catch(()=>({id:re.id,status:"draft"}))),K=await Promise.all(D),X={};K.forEach(re=>{X[re.id]={status:re.status,updatedAt:re.updatedAt}}),m(X)}catch(D){console.error("",D)}I(!1)},V=async()=>{x(!0);try{const K=await(await fetch(`${i}?type=getDOPS&studentEmail=${t}&dopsId=${u}`)).json();T(K.formData||{}),N(K.status||"draft"),b(K.updatedAt?new Date(K.updatedAt):null)}catch(D){console.error("",D)}x(!1)},G=async D=>{U(!0);const K=D||S;let X={...g};if(D==="teacher_graded"&&(X.sign_teacher_name=s,X.sign_teacher_date=new Date().toISOString().split("T")[0]),D==="completed"){if(!X.feedback_student_thoughts){alert(""),U(!1);return}X.sign_student_name=s,X.sign_student_date=new Date().toISOString().split("T")[0]}const re={type:"saveDOPS",dopsId:u,studentEmail:t,studentName:e,formData:X,status:K,updatedBy:r,teacherSign:X.sign_teacher_name,studentSign:X.sign_student_name};try{await fetch(i,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(re)}),N(K),T(X),b(new Date);let ue="";D==="teacher_graded"&&(ue=""),D==="completed"&&(ue=""),alert(ue),D&&(m(ee=>({...ee,[u]:{status:K,updatedAt:new Date}})),c("menu"))}catch{alert("")}U(!1)},te=(D,K)=>{T(X=>({...X,[D]:K}))},M=(D,K)=>{const X=g[D.id];let re=!1;D.id.startsWith("feedback_student")?re=k:(D.id.startsWith("feedback_teacher"),re=P);const ue=!re;return D.type==="score_5"?l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["5 ()","4 ()","3 ()","2 ()","1 ()","N/A"].map((ee,Ce)=>{const W=ee.split(" ")[0];return l.jsxs("label",{className:`flex items-center gap-1 px-3 py-2 border rounded-lg cursor-pointer transition-colors text-sm ${X===W?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"} ${ue?"opacity-60 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:D.id,value:W,checked:X===W,onChange:()=>te(D.id,W),disabled:ue,className:"hidden"}),ee]},Ce)})}):D.type==="score_10"?l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:[1,2,3,4,5,6,7,8,9,10].map(ee=>l.jsxs("label",{className:`w-8 h-8 flex items-center justify-center rounded-full border cursor-pointer font-bold text-sm transition-colors ${X==ee?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"} ${ue?"opacity-60 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:D.id,value:ee,checked:X==ee,onChange:()=>te(D.id,ee),disabled:ue,className:"hidden"}),ee]},ee))}):D.type==="yes_no"?l.jsx("div",{className:"flex gap-4 mt-1",children:["",""].map(ee=>l.jsxs("label",{className:`flex items-center gap-2 px-4 py-2 border rounded-lg cursor-pointer transition-colors text-sm font-medium ${X===ee?ee===""?"bg-green-100 text-green-800 border-green-300":"bg-red-100 text-red-800 border-red-300":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"} ${ue?"opacity-60 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:D.id,value:ee,checked:X===ee,onChange:()=>te(D.id,ee),disabled:ue,className:"hidden"}),ee===""?l.jsx(oC,{className:"w-4 h-4"}):l.jsx(ds,{className:"w-4 h-4"}),ee]},ee))}):D.type==="textarea"?l.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100 min-h-[80px]",value:X||"",onChange:ee=>te(D.id,ee.target.value),disabled:ue,placeholder:re?"...":"()"}):null},J=({status:D})=>{switch(D){case"completed":return l.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold flex items-center gap-1",children:[l.jsx(zs,{className:"w-3 h-3"})," "]});case"teacher_graded":return l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold flex items-center gap-1",children:[l.jsx(Bn,{className:"w-3 h-3"})," "]});default:return l.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 rounded text-xs font-bold",children:""})}};return o==="menu"?l.jsxs("div",{className:"animate-in fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-700 flex items-center gap-2",children:[l.jsx(Yc,{className:"w-6 h-6 text-indigo-600"})," DOPS "]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[" ",Wa.length," "]})]}),_?l.jsxs("div",{className:"py-12 text-center text-gray-400",children:[l.jsx(us,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),"..."]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Wa.map(D=>{var re,ue;const K=((re=p[D.id])==null?void 0:re.status)||"draft",X=(ue=p[D.id])==null?void 0:ue.updatedAt;return l.jsxs("button",{onClick:()=>{h(D.id),c("form")},className:"flex flex-col text-left bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md hover:border-indigo-400 transition-all group relative overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg group-hover:bg-indigo-100 transition-colors",children:l.jsx(vp,{className:"w-6 h-6 text-indigo-600"})}),l.jsx(J,{status:K})]}),l.jsx("h4",{className:"font-bold text-gray-800 text-base mb-1 group-hover:text-indigo-600 transition-colors",children:D.title}),l.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 mb-4 h-8",children:D.description}),l.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-50 flex justify-between items-center w-full",children:[l.jsx("span",{className:"text-[10px] text-gray-400",children:X?`: ${new Date(X).toLocaleDateString()}`:""}),l.jsx(pi,{className:"w-4 h-4 text-gray-300 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all"})]})]},D.id)})})]}):C?l.jsxs("div",{className:"p-8 text-center text-gray-500 flex justify-center",children:[l.jsx(us,{className:"animate-spin mr-2"})," ..."]}):l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-12 animate-in slide-in-from-right-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsxs("button",{onClick:()=>c("menu"),className:"flex items-center gap-1 text-gray-500 hover:text-indigo-600 font-bold text-sm bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx(Kw,{className:"w-4 h-4"})," "]}),l.jsx("span",{className:"text-gray-300",children:"|"}),l.jsxs("span",{className:"text-gray-700 font-medium",children:[e," - ",A==null?void 0:A.title]})]}),l.jsxs("div",{className:`p-4 rounded-lg flex justify-between items-center ${S==="completed"?"bg-green-50 border-green-200 text-green-800":S==="teacher_graded"?"bg-blue-50 border-blue-200 text-blue-800":"bg-gray-50 border-gray-200 text-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[S==="completed"?l.jsx(ac,{className:"w-5 h-5"}):l.jsx(Qw,{className:"w-5 h-5"}),l.jsxs("span",{className:"font-bold",children:["",S==="draft"?"":S==="teacher_graded"?"":""]})]}),$&&l.jsxs("span",{className:"text-xs opacity-70",children:["",$.toLocaleDateString()]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"bg-indigo-600 px-6 py-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:A==null?void 0:A.title}),l.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["",A==null?void 0:A.version]})]}),l.jsx("div",{className:"p-6 md:p-8 space-y-10",children:A==null?void 0:A.sections.map(D=>l.jsxs("div",{className:"border-b border-gray-100 pb-8 last:border-0 last:pb-0",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 bg-gray-50 p-2 rounded border-l-4 border-indigo-500",children:D.title}),l.jsx("div",{className:"space-y-6",children:D.fields.map(K=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:K.label}),M(K,D.id)]},K.id))})]},D.id))}),l.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:[S==="draft"&&(w||y)&&l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>G("draft"),disabled:j,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg",children:""}),l.jsxs("button",{onClick:()=>{window.confirm("")&&G("teacher_graded")},disabled:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg flex items-center gap-2",children:[l.jsx(vC,{className:"w-4 h-4"})," "]})]}),S==="teacher_graded"&&E&&l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 p-3 rounded text-blue-800 text-sm",children:[l.jsx(qo,{className:"w-5 h-5 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:""}),l.jsx("p",{children:""})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>G("teacher_graded"),disabled:j,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg",children:""}),l.jsxs("button",{onClick:()=>{window.confirm("")&&G("completed")},disabled:j,className:"px-4 py-2 bg-green-600 text-white rounded-lg flex items-center gap-2",children:[l.jsx(zs,{className:"w-4 h-4"})," "]})]})]}),S==="completed"&&l.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{children:["",g.sign_teacher_name," (",g.sign_teacher_date,")"]}),l.jsxs("span",{children:["",g.sign_student_name," (",g.sign_student_date,")"]})]}),l.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[l.jsx(ac,{className:"w-4 h-4"})," "]})]}),S==="teacher_graded"&&(w||y)&&l.jsxs("div",{className:"text-center text-blue-600 font-bold flex items-center justify-center gap-2",children:[l.jsx(ic,{className:"w-5 h-5"})," ..."]}),S==="draft"&&E&&l.jsxs("div",{className:"text-center text-gray-400 font-bold flex items-center justify-center gap-2",children:[l.jsx(ic,{className:"w-5 h-5"})," ..."]})]})]})]})},Es="https://script.google.com/macros/s/AKfycbw3-nakNBi0t3W3_-XtQmztYqq9qAj0ZOaGpXKZG41eZfhYjNfIM5xuVXwzSLa1_X3hfA/exec",MC=({user:t,userRole:e,userProfile:n})=>{const[r,s]=z.useState([]),i=["teacher","admin"].includes(e),[o,c]=z.useState(i?"":t==null?void 0:t.email),[u,h]=z.useState(t==null?void 0:t.displayName),[p,m]=z.useState(""),[g,T]=z.useState("records"),[S,N]=z.useState("pre_training"),[C,x]=z.useState({items:[],records:{},periods:{}}),[_,I]=z.useState({}),[j,U]=z.useState(!1),[$,b]=z.useState({}),[y,w]=z.useState(null),[E,A]=z.useState(!1),[P,k]=z.useState({itemId:"",itemName:"",status:"pass",date:"",note:""}),[q,V]=z.useState(!1),[G,te]=z.useState(null);z.useEffect(()=>{i&&(async()=>{try{const oe=fp(Jr(_t,"users"),WA("role","==","student")),ge=(await XA(oe)).docs.map(Ye=>Ye.data());if(s(ge),ge.length>0){const Ye=ge.some(Et=>Et.email===o);(!o||!Ye)&&c(ge[0].email)}}catch(oe){console.error(":",oe)}})()},[e]),z.useEffect(()=>{if(i){if(r.length>0&&o){const W=r.find(oe=>oe.email===o);W&&(h(W.displayName||W.email),m(W.arrivalDate||""))}}else h((n==null?void 0:n.displayName)||t.displayName),m((n==null?void 0:n.arrivalDate)||"")},[o,r,e,n,t]),z.useEffect(()=>{o&&g==="records"&&M(o)},[o,g]);const M=async W=>{if(w(null),!!W){U(!0);try{const be=await(await fetch(`${Es}?type=getData&studentEmail=${W}`)).json();if(be.status==="error")throw new Error(be.message);if(x(be),I(be.periods||{}),be.items&&be.items.length>0){const ge=be.items[0].category_id;Object.keys($).length===0&&b(Ye=>({...Ye,[ge]:!0}))}}catch(oe){console.error(":",oe),w("")}U(!1)}},J=W=>{if(!i)return;const oe=new Date().toISOString().split("T")[0];k({itemId:W.id,itemName:W.sub_item||W.title,status:"pass",date:oe,note:""}),A(!0)},D=async()=>{V(!0);const W=(n==null?void 0:n.displayName)||t.displayName||t.email.split("@")[0];try{await fetch(Es,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({type:"saveEval",studentEmail:o,itemId:P.itemId,status:P.status,assessDate:P.date,teacherName:W,note:P.note})}),await M(o),A(!1),alert("")}catch{alert("")}V(!1)},K=(W,oe,be)=>{I(ge=>({...ge,[W]:{...ge[W],[oe]:be}}))},X=async W=>{te(W);const oe=_[W];try{await fetch(Es,{method:"POST",body:JSON.stringify({type:"savePeriod",studentEmail:o,categoryId:W,startDate:(oe==null?void 0:oe.startDate)||"",endDate:(oe==null?void 0:oe.endDate)||"",updatedBy:(n==null?void 0:n.displayName)||t.displayName})}),await M(o)}catch{alert("")}te(null)},re=W=>{b(oe=>({...oe,[W]:!oe[W]}))},ue=(C.items||[]).reduce((W,oe)=>(W[oe.category_id]||(W[oe.category_id]={id:oe.category_id,title:oe.category_name,items:[]}),W[oe.category_id].items.push(oe),W),{}),ee=(W,oe=!1)=>{const be=C.records[W.id]||{},ge=be.status;return l.jsxs("div",{className:`p-3 pl-4 flex flex-col sm:flex-row sm:items-center justify-between gap-2 hover:bg-gray-50 border-b border-gray-50 last:border-0 ${oe?"bg-white":""}`,children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`text-sm flex items-start gap-2 ${oe?"font-bold text-gray-700":"font-medium text-gray-800"}`,children:[l.jsx("span",{className:"mt-1",children:oe?l.jsx(vp,{className:"w-4 h-4 text-gray-500"}):l.jsx(lC,{className:"w-2 h-2 text-gray-300 fill-gray-300 mt-1"})}),W.sub_item||W.title]}),be.teacher&&l.jsxs("p",{className:"text-xs text-green-600 mt-1 ml-6 flex items-center gap-1",children:[l.jsx(bC,{className:"w-3 h-3"})," ",be.teacher," (",new Date(be.date).toLocaleDateString(),")",be.note&&l.jsxs("span",{className:"text-gray-400",children:[" - ",be.note]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-6 sm:ml-0",children:[ge==="pass"&&l.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold flex items-center gap-1",children:[l.jsx(Yc,{className:"w-3 h-3"})," "]}),ge==="improve"&&l.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold flex items-center gap-1",children:[l.jsx(qo,{className:"w-3 h-3"})," "]}),i&&l.jsx("button",{onClick:()=>J(W),className:"px-3 py-1 border border-indigo-200 text-indigo-600 hover:bg-indigo-50 rounded-md text-xs font-bold transition-colors",children:ge?"":""})]})]},W.id)},Ce=W=>{const oe={},be=[];return W.forEach(ge=>{oe[ge.title]||(oe[ge.title]=[],be.push(ge.title)),oe[ge.title].push(ge)}),be.map((ge,Ye)=>{const Et=oe[ge],Wn=Et.length>1||Et[0]&&Et[0].sub_item;return l.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:[Wn&&l.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-bold text-gray-700 text-sm flex items-center gap-2",children:[l.jsx(hC,{className:"w-4 h-4 text-gray-500"}),ge]}),l.jsx("div",{className:"bg-white",children:Et.map(Kt=>ee(Kt,!Wn))})]},Ye)})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-xl shadow-sm border border-gray-100",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:l.jsx(lr,{className:"w-6 h-6 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:""}),l.jsx("p",{className:"text-xs text-gray-500",children:i?"":""})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[i?l.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200",children:[l.jsx(Bn,{className:"w-4 h-4 text-gray-400"}),l.jsx("select",{value:o,onChange:W=>c(W.target.value),className:"bg-transparent text-sm font-bold text-gray-700 outline-none min-w-[150px]",children:r.length>0?r.map(W=>l.jsx("option",{value:W.email,children:W.displayName||W.email},W.email)):l.jsx("option",{disabled:!0,children:"..."})})]}):l.jsxs("div",{className:"px-4 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-bold flex items-center gap-2",children:[l.jsx(Bn,{className:"w-4 h-4"})," ",u]}),p&&l.jsxs("div",{className:"px-4 py-1.5 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium flex items-center gap-2",children:[l.jsx(yp,{className:"w-3.5 h-3.5"})," ",p]})]})]}),l.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[l.jsxs("button",{onClick:()=>T("records"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold transition-all border-b-2 ${g==="records"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(cC,{className:"w-4 h-4"}),""]}),l.jsxs("button",{onClick:()=>T("assessment"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold transition-all border-b-2 ${g==="assessment"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(dC,{className:"w-4 h-4"}),""]})]}),y&&l.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4 rounded text-red-700 text-sm font-bold flex items-center gap-2",children:[l.jsx(qo,{className:"w-5 h-5"})," ",y]}),g==="records"?l.jsx("div",{className:"space-y-4",children:j?l.jsxs("div",{className:"text-center py-12 text-gray-400 flex flex-col items-center",children:[l.jsx(us,{className:"w-8 h-8 animate-spin mb-2"}),l.jsx("p",{children:"..."})]}):Object.values(ue).length>0?Object.values(ue).map(W=>{const oe=$[W.id],be=W.items.length>0?Math.round(W.items.filter(Kt=>{var ys;return((ys=C.records[Kt.id])==null?void 0:ys.status)==="pass"}).length/W.items.length*100):0,ge=C.periods[W.id]||{},Ye=_[W.id]||ge,Et=G===W.id,Wn=Ye.startDate!==ge.startDate||Ye.endDate!==ge.endDate;return l.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white",children:[l.jsxs("div",{className:"p-4 bg-gray-50 flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[l.jsxs("button",{onClick:()=>re(W.id),className:"flex items-center gap-3 hover:text-indigo-600 transition-colors text-left flex-1",children:[oe?l.jsx(ml,{className:"w-5 h-5 text-gray-400"}):l.jsx(pi,{className:"w-5 h-5 text-gray-400"}),l.jsx("div",{children:l.jsx("span",{className:"font-bold text-gray-700 block sm:inline",children:W.title})}),l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${be===100?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:[be,"%"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm bg-white p-1.5 rounded-lg border border-gray-200 shadow-sm self-start sm:self-auto",children:[l.jsx(ic,{className:"w-3.5 h-3.5 text-gray-400"}),i?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"date",className:"bg-transparent w-24 sm:w-auto outline-none",value:Ye.startDate||"",onChange:Kt=>K(W.id,"startDate",Kt.target.value)}),l.jsx("span",{className:"text-gray-300",children:""}),l.jsx("input",{type:"date",className:"bg-transparent w-24 sm:w-auto outline-none",value:Ye.endDate||"",onChange:Kt=>K(W.id,"endDate",Kt.target.value)}),(Wn||Et)&&l.jsx("button",{onClick:()=>X(W.id),disabled:Et,className:"ml-1 p-1 rounded-full bg-indigo-100 text-indigo-600",children:Et?l.jsx(us,{className:"w-3 h-3 animate-spin"}):l.jsx(Jc,{className:"w-3 h-3"})})]}):l.jsxs("span",{children:[ge.startDate||"--","  ",ge.endDate||"--"]})]})]}),oe&&l.jsx("div",{className:"bg-white p-3 border-t border-gray-100",children:Ce(W.items)})]},W.id)}):l.jsx("div",{className:"text-center py-8 text-gray-400 border border-dashed rounded-lg bg-gray-50",children:" "})}):l.jsxs("div",{className:"animate-in fade-in duration-300",children:[l.jsx("div",{className:"mb-6 overflow-x-auto pb-2 scrollbar-hide",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>N("pre_training"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${S==="pre_training"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[l.jsx(mC,{className:"w-4 h-4"}),""]}),l.jsxs("button",{onClick:()=>N("epa"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${S==="epa"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[l.jsx(Gw,{className:"w-4 h-4"}),"EPA "]}),l.jsxs("button",{onClick:()=>N("dops"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${S==="dops"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[l.jsx(xC,{className:"w-4 h-4"}),"DOPS "]})]})}),S==="pre_training"?l.jsx(PC,{studentEmail:o,studentName:u,userRole:e,currentUserEmail:t==null?void 0:t.email,currentUserName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName),gasApiUrl:Es}):S==="epa"?l.jsx(DC,{studentEmail:o,studentName:u,isTeacher:i,userProfile:n,apiUrl:Es}):l.jsx(OC,{studentEmail:o,studentName:u,userRole:e,currentUserEmail:t==null?void 0:t.email,currentUserName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName),gasApiUrl:Es})]})]}),E&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>A(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden",onClick:W=>W.stopPropagation(),children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[l.jsx("h3",{className:"font-bold text-gray-800",children:""}),l.jsx("button",{onClick:()=>A(!1),children:l.jsx(ds,{className:"w-5 h-5 text-gray-400"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),l.jsx("p",{className:"font-bold",children:P.itemName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),l.jsx("input",{type:"date",value:P.date,onChange:W=>k({...P,date:W.target.value}),className:"w-full border rounded p-2"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>k({...P,status:"pass"}),className:`flex-1 py-2 rounded border font-bold ${P.status==="pass"?"bg-green-100 text-green-700":"bg-white"}`,children:""}),l.jsx("button",{onClick:()=>k({...P,status:"improve"}),className:`flex-1 py-2 rounded border font-bold ${P.status==="improve"?"bg-orange-100 text-orange-700":"bg-white"}`,children:""})]}),l.jsx("button",{onClick:D,disabled:q,className:"w-full py-2 bg-indigo-600 text-white rounded font-bold",children:q?"...":""})]})]})})]})},LC=({editData:t=null,onCancelEdit:e,onSuccess:n,settings:r={quickKeywords:[],categories:[]}})=>{const[s,i]=z.useState(!1),[o,c]=z.useState("sop"),[u,h]=z.useState({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""}),p=r.quickKeywords||[],m=r.categories||[];z.useEffect(()=>{t?(c(t.type||"sop"),h({title:t.title||"",category:t.category||"",content:t.content||"",url:t.url||"",attachmentUrl:t.attachmentUrl||"",keywords:t.keywords||[],description:t.description||""})):h({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""})},[t]);const g=N=>{h({...u,[N.target.name]:N.target.value})},T=N=>{h(C=>{const x=C.keywords||[];return x.includes(N)?{...C,keywords:x.filter(_=>_!==N)}:{...C,keywords:[...x,N]}})},S=async N=>{N.preventDefault(),i(!0);try{if(!u.title||!u.category){alert(""),i(!1);return}if(o==="video"&&!u.url){alert(""),i(!1);return}const C={title:u.title,category:u.category,keywords:u.keywords,description:u.description,updatedAt:n0()};o==="sop"?(C.content=u.content,C.attachmentUrl=u.attachmentUrl):C.url=u.url;const x=o==="sop"?"sop_articles":"training_videos";t?(await vo(Cn(_t,x,t.id),C),alert(`${o==="sop"?"SOP":""} `)):(C.createdAt=n0(),await JA(Jr(_t,x),C),alert(`${o==="sop"?"SOP":""} `)),h({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""}),n&&n()}catch(C){console.error("Error saving document: ",C),alert("")}finally{i(!1)}};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:t?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-indigo-600 mr-2",children:""})," ",o==="sop"?"SOP ":""]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-green-600 mr-2",children:""}),""]})}),t&&l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-3 py-1 bg-gray-100 rounded-md",children:""})]}),l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("label",{className:`flex-1 flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${o==="sop"?"border-blue-500 bg-blue-50 text-blue-700 font-bold":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:"resourceType",value:"sop",checked:o==="sop",onChange:()=>c("sop"),disabled:!!t,className:"hidden"})," SOP "]}),l.jsxs("label",{className:`flex-1 flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${o==="video"?"border-purple-500 bg-purple-50 text-purple-700 font-bold":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:"resourceType",value:"video",checked:o==="video",onChange:()=>c("video"),disabled:!!t,className:"hidden"})," "]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("input",{type:"text",name:"title",value:u.title,onChange:g,placeholder:o==="sop"?"":"",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("div",{className:"relative",children:l.jsxs("select",{name:"category",value:u.category,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none bg-white",required:!0,children:[l.jsx("option",{value:"",disabled:!0,children:""}),m.length>0?m.map((N,C)=>l.jsx("option",{value:N,children:N},C)):l.jsx("option",{value:"",children:" ()"})]})})]})]}),o==="sop"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"SOP "}),l.jsx("textarea",{name:"content",value:u.content,onChange:g,rows:"5",placeholder:"SOP...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-gray-700 font-bold mb-2",children:["SOP  ",l.jsx("span",{className:"text-gray-400 font-normal text-sm",children:"()"})]}),l.jsx("input",{type:"url",name:"attachmentUrl",value:u.attachmentUrl,onChange:g,placeholder:"Google Drive PDF ...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-600"})]})]}),o==="video"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("input",{type:"url",name:"url",value:u.url,onChange:g,placeholder:"https://...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:" ()"}),l.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg border border-gray-100",children:p.length>0?p.map((N,C)=>l.jsx("button",{type:"button",onClick:()=>T(N),className:`px-3 py-1 rounded-full text-sm transition-colors border ${u.keywords.includes(N)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:border-blue-400"}`,children:N},C)):l.jsx("span",{className:"text-gray-400 text-sm",children:""})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("input",{type:"text",name:"description",value:u.description,onChange:g,placeholder:"...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),l.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 rounded-lg font-bold text-lg text-white shadow-lg ${o==="sop"?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"}`,children:s?"...":t?"":""})]})]})},nd=["amanhung0419@gmail.com","admin@example.com"],FC=({user:t})=>{var P,k;const[e,n]=z.useState("resources"),[r,s]=z.useState([]),[i,o]=z.useState([]),[c,u]=z.useState([]),[h,p]=z.useState({quickKeywords:[],categories:[]}),[m,g]=z.useState(null),[T,S]=z.useState(null),[N,C]=z.useState(null),[x,_]=z.useState({displayName:"",arrivalDate:"",role:"student"}),[I,j]=z.useState(""),[U,$]=z.useState("");z.useEffect(()=>{const q=Us(Jr(_t,"sop_articles"),V=>{const G=V.docs.map(te=>({id:te.id,...te.data()}));s(G)});return()=>q()},[]),z.useEffect(()=>{const q=Us(Jr(_t,"training_videos"),V=>{const G=V.docs.map(te=>({id:te.id,...te.data()}));o(G)});return()=>q()},[]),z.useEffect(()=>{const q=Cn(_t,"site_settings","sop_config"),V=Us(q,G=>{G.exists()?p(G.data()):Bw(q,{quickKeywords:[],categories:[]})});return()=>V()},[]),z.useEffect(()=>{const q=Us(Jr(_t,"users"),V=>{const G=V.docs.map(te=>({id:te.id,...te.data()}));u(G)});return()=>q()},[]);const b=async(q,V)=>{if(window.confirm(""))try{await YA(Cn(_t,q,V)),T&&T.id===V&&S(null)}catch{alert("")}},y=(q,V)=>{S({...q,type:V}),window.scrollTo({top:0,behavior:"smooth"})},w=async(q,V,G)=>{var M;if(!G.trim())return;const te=Cn(_t,"site_settings","sop_config");try{if(V==="add"){if((M=h[q])!=null&&M.includes(G))return alert("");await vo(te,{[q]:ZA(G)})}else V==="remove"&&window.confirm(` "${G}"?`)&&await vo(te,{[q]:eC(G)})}catch{alert("")}},E=q=>{C(q),_({displayName:q.displayName||"",arrivalDate:q.arrivalDate||"",role:q.role||"student"})},A=async q=>{if(q.preventDefault(),!!N){if(nd.includes(N.email)&&x.role!=="teacher"){alert("()");return}try{await vo(Cn(_t,"users",N.id),{displayName:x.displayName,arrivalDate:x.arrivalDate,role:x.role}),C(null),alert("")}catch(V){console.error(V),alert("")}}};return l.jsxs("div",{className:"bg-gray-50 min-h-screen p-0 md:p-6",children:[l.jsxs("div",{className:"max-w-6xl mx-auto space-y-4 md:space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center bg-white p-4 md:p-6 md:rounded-lg shadow-sm border-b md:border-0 border-gray-100",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800",children:""}),l.jsxs("p",{className:"text-gray-500 text-xs md:text-sm mt-1",children:["",r.length," SOP, ",i.length," , ",c.length," "]})]}),l.jsxs("div",{className:"space-x-2",children:[l.jsx("button",{onClick:()=>n("resources"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-sm font-medium transition-colors ${e==="resources"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:""}),l.jsx("button",{onClick:()=>n("settings"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-sm font-medium transition-colors ${e==="settings"?"bg-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:""})]})]}),m&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded text-red-700 font-bold mx-4 md:mx-0",children:m}),e==="resources"&&l.jsxs("div",{className:"space-y-4 md:space-y-8",children:[l.jsx(LC,{editData:T,onCancelEdit:()=>S(null),onSuccess:()=>S(null),settings:h}),l.jsxs("div",{className:"bg-white md:rounded-lg shadow-sm overflow-hidden border-t md:border-t-0 border-gray-100",children:[l.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-gray-100 bg-blue-50 flex justify-between items-center",children:l.jsxs("h3",{className:"font-bold text-blue-800 text-sm md:text-base",children:["SOP  (",r.length,")"]})}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[l.jsx("thead",{className:"bg-gray-50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:r.map(q=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 md:px-6 py-4",children:q.title}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:l.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:q.category})}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:q.attachmentUrl?l.jsxs("a",{href:q.attachmentUrl,target:"_blank",rel:"noreferrer",className:"text-blue-500 flex items-center gap-1",children:[l.jsx(Xw,{className:"w-3 h-3"}),""]}):"-"}),l.jsxs("td",{className:"px-4 md:px-6 py-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>y(q,"sop"),className:"text-indigo-600 font-medium text-xs md:text-sm",children:""}),l.jsx("button",{onClick:()=>b("sop_articles",q.id),className:"text-red-600 font-medium text-xs md:text-sm",children:""})]})]},q.id))})]})})]}),l.jsxs("div",{className:"bg-white md:rounded-lg shadow-sm overflow-hidden border-t md:border-t-0 border-gray-100",children:[l.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-gray-100 bg-purple-50 flex justify-between items-center",children:l.jsxs("h3",{className:"font-bold text-purple-800 text-sm md:text-base",children:[" (",i.length,")"]})}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[l.jsx("thead",{className:"bg-gray-50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map(q=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 md:px-6 py-4",children:q.title}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:l.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:q.category})}),l.jsxs("td",{className:"px-4 md:px-6 py-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>y(q,"video"),className:"text-indigo-600 font-medium text-xs md:text-sm",children:""}),l.jsx("button",{onClick:()=>b("training_videos",q.id),className:"text-red-600 font-medium text-xs md:text-sm",children:""})]})]},q.id))})]})})]})]}),e==="settings"&&l.jsxs("div",{className:"space-y-4 md:space-y-8",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-8",children:[l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm",children:[l.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4",children:" "}),l.jsxs("div",{className:"flex gap-2 mb-6",children:[l.jsx("input",{type:"text",value:I,onChange:q=>j(q.target.value),placeholder:"...",className:"flex-1 px-4 py-2 border rounded-lg text-sm"}),l.jsx("button",{onClick:()=>{w("quickKeywords","add",I),j("")},className:"bg-teal-600 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(P=h.quickKeywords)==null?void 0:P.map((q,V)=>l.jsxs("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs md:text-sm flex items-center",children:[q,l.jsx("button",{onClick:()=>w("quickKeywords","remove",q),className:"ml-2 text-gray-400 hover:text-red-500",children:""})]},V))})]}),l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm",children:[l.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4",children:" "}),l.jsxs("div",{className:"flex gap-2 mb-6",children:[l.jsx("input",{type:"text",value:U,onChange:q=>$(q.target.value),placeholder:"...",className:"flex-1 px-4 py-2 border rounded-lg text-sm"}),l.jsx("button",{onClick:()=>{w("categories","add",U),$("")},className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),l.jsx("div",{className:"flex flex-col gap-2",children:(k=h.categories)==null?void 0:k.map((q,V)=>l.jsxs("div",{className:"flex justify-between bg-blue-50 px-3 py-2 rounded-lg text-sm",children:[l.jsx("span",{className:"text-blue-800",children:q}),l.jsx("button",{onClick:()=>w("categories","remove",q),className:"text-red-400 hover:text-red-600",children:""})]},V))})]})]}),l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm border-t md:border border-gray-200",children:[l.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Zw,{className:"w-5 h-5 text-indigo-600"})," "]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[l.jsx("thead",{className:"bg-gray-50 text-gray-600 uppercase border-b border-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:c.map(q=>{const V=q.role==="teacher",G=nd.includes(q.email);return l.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${G?"bg-indigo-50/50":""}`,children:[l.jsxs("td",{className:"px-4 md:px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2 font-medium text-gray-900",children:[l.jsx("img",{src:q.photoURL||"https://via.placeholder.com/32",alt:"",className:"w-6 h-6 rounded-full"}),q.displayName||"",G&&l.jsx(s0,{className:"w-3 h-3 text-amber-500"})]}),l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:q.email})]}),l.jsx("td",{className:"px-4 md:px-6 py-4 text-gray-600 font-mono",children:q.arrivalDate||"-"}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:G?l.jsx("span",{className:"inline-flex items-center gap-1 bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-bold border border-purple-200",children:""}):V?l.jsx("span",{className:"inline-flex items-center gap-1 bg-emerald-100 text-emerald-800 px-2 py-1 rounded-full text-xs font-bold",children:""}):l.jsx("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:"PGY "})}),l.jsx("td",{className:"px-4 md:px-6 py-4 text-right",children:l.jsxs("button",{onClick:()=>E(q),className:"px-3 py-1 bg-gray-100 hover:bg-indigo-50 text-indigo-600 rounded-md text-xs font-medium border border-gray-200 flex items-center gap-1 ml-auto",children:[l.jsx(Jw,{className:"w-3 h-3"})," ",l.jsx("span",{className:"hidden sm:inline",children:""})]})})]},q.id)})})]})})]})]})]}),N&&l.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>C(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:q=>q.stopPropagation(),children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:""}),l.jsx("button",{onClick:()=>C(null),children:l.jsx(ds,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Email ()"}),l.jsx("input",{type:"text",value:N.email,disabled:!0,className:"w-full px-4 py-2 border bg-gray-100 rounded-lg text-gray-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsx("input",{type:"text",value:x.displayName,onChange:q=>_({...x,displayName:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsx("input",{type:"date",value:x.arrivalDate,onChange:q=>_({...x,arrivalDate:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>_({...x,role:"student"}),className:`flex-1 py-2 rounded-lg border text-sm font-bold ${x.role==="student"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200"}`,children:"PGY "}),l.jsx("button",{type:"button",onClick:()=>_({...x,role:"teacher"}),className:`flex-1 py-2 rounded-lg border text-sm font-bold ${x.role==="teacher"?"bg-emerald-600 text-white border-emerald-600":"bg-white text-gray-600 border-gray-200"}`,children:""})]}),nd.includes(N.email)&&l.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium flex items-center gap-1",children:[l.jsx(s0,{className:"w-3 h-3"})," "]})]}),l.jsx("div",{className:"pt-4",children:l.jsx("button",{type:"submit",className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700",children:""})})]})]})})]})};function UC(){const[t,e]=z.useState(null),[n,r]=z.useState(null),[s,i]=z.useState("student"),[o,c]=z.useState("lookup"),[u,h]=z.useState(!1),[p,m]=z.useState(!0),[g,T]=z.useState(!1),[S,N]=z.useState({displayName:"",arrivalDate:""}),C=["teacher","admin"].includes(s),x=async()=>{try{const y=new In;y.setCustomParameters({prompt:"select_account"});const w=await GI(td,y);console.log(":",w.user.email)}catch(y){console.error(":",y),alert(`: ${y.message}`)}},_=async()=>{try{await NI(td),e(null),r(null),i("student"),c("lookup")}catch(y){console.error("Logout failed:",y)}};z.useEffect(()=>{const y=kI(td,async w=>{if(m(!0),w){e(w);const E=Cn(_t,"users",w.uid);try{const A=await $w(E);if(A.exists()){const P=A.data();r(P),i(P.role||"student")}else{const P={email:w.email,displayName:w.displayName,photoURL:w.photoURL,role:"student",arrivalDate:"",createdAt:new Date().toISOString()};await Bw(E,P),r(P),i("student")}}catch(A){console.error("Error fetching user data:",A)}}else e(null),r(null),i("student");m(!1)});return()=>y()},[]);const I=()=>{N({displayName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||"",arrivalDate:(n==null?void 0:n.arrivalDate)||""}),T(!0),h(!1)},j=async y=>{if(y.preventDefault(),!!t)try{const w=Cn(_t,"users",t.uid);await vo(w,{displayName:S.displayName,arrivalDate:S.arrivalDate}),r(E=>({...E,displayName:S.displayName,arrivalDate:S.arrivalDate})),T(!1),alert("")}catch(w){console.error(":",w),alert("")}},U=()=>s==="admin"?"":s==="teacher"?"":"PGY ",$=()=>s==="admin"?"text-purple-600 font-bold":s==="teacher"?"text-emerald-600 font-bold":"text-gray-500";if(p)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"..."})]})});if(!t)return l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 p-4",children:[l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-indigo-50",children:[l.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(lr,{className:"w-10 h-10 text-indigo-600"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:""}),l.jsxs("p",{className:"text-gray-500 mb-8",children:["",l.jsx("br",{})," SOP"]}),l.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md",children:[l.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-6 h-6",alt:"Google"})," Google "]})]}),l.jsxs("p",{className:"mt-8 text-sm text-gray-400",children:[" ",new Date().getFullYear()," Pharmacy Department Training System"]})]});const b=(n==null?void 0:n.displayName)||t.displayName;return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("nav",{className:"bg-white shadow-sm sticky top-0 z-50 border-b border-indigo-100",children:[l.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between h-16",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:l.jsx(lr,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-gray-800 hidden sm:block",children:""}),l.jsx("h1",{className:"text-xl font-bold text-gray-800 sm:hidden",children:"P.T.S"})]})]}),l.jsx("div",{className:"hidden md:flex items-center gap-1",children:[{id:"lookup",label:"SOP ",icon:lc},{id:"video",label:"",icon:lr},{id:"shift",label:"",icon:lr},{id:"passport",label:"",icon:Bn},...C?[{id:"admin",label:"",icon:_C}]:[]].map(y=>l.jsxs("button",{onClick:()=>c(y.id),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${o===y.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[y.icon&&l.jsx(y.icon,{className:"w-4 h-4"}),y.label]},y.id))}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"hidden sm:flex items-center gap-3 pl-4 border-l border-gray-200",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:b}),l.jsx("p",{className:`text-xs ${$()}`,children:U()})]}),l.jsx("div",{className:"relative group cursor-pointer",children:l.jsx("img",{src:t.photoURL,alt:b,className:`w-9 h-9 rounded-full border-2 ${C?"border-emerald-400":"border-gray-200"}`,onClick:()=>h(!u)})})]}),l.jsx("button",{onClick:()=>h(!u),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md",children:u?l.jsx(ds,{className:"w-6 h-6"}):l.jsx(pC,{className:"w-6 h-6"})})]})]})}),u&&l.jsxs("div",{className:"absolute right-0 top-16 w-full md:w-64 bg-white shadow-lg border-b border-gray-100 md:rounded-bl-xl z-50 animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"px-4 py-3 border-b border-gray-100 md:hidden",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:t.photoURL,alt:"Avatar",className:"w-10 h-10 rounded-full"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-800",children:b}),l.jsx("p",{className:`text-xs ${$()}`,children:U()})]})]})}),l.jsxs("div",{className:"p-2 space-y-1",children:[l.jsx("div",{className:"md:hidden space-y-1 pb-2 mb-2 border-b border-gray-100",children:[{id:"lookup",label:"SOP "},{id:"video",label:""},{id:"shift",label:""},{id:"passport",label:""},...C?[{id:"admin",label:""}]:[]].map(y=>l.jsx("button",{onClick:()=>{c(y.id),h(!1)},className:`block w-full text-left px-3 py-2 rounded-md text-base font-medium ${o===y.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:y.label},y.id))}),l.jsxs("button",{onClick:I,className:"w-full text-left px-3 py-2 text-gray-700 font-medium flex items-center gap-2 hover:bg-indigo-50 hover:text-indigo-600 rounded-md transition-colors",children:[l.jsx(Bn,{className:"w-4 h-4"})," "]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{onClick:_,className:"w-full text-left px-3 py-2 text-red-600 font-medium flex items-center gap-2 hover:bg-red-50 rounded-md transition-colors",children:[l.jsx(fC,{className:"w-4 h-4"})," "]})]})]})]}),g&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>T(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:y=>y.stopPropagation(),children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(Jw,{className:"w-5 h-5 text-indigo-600"})," "]}),l.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:l.jsx(ds,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" ()"}),l.jsx("input",{type:"text",value:S.displayName,onChange:y=>N({...S,displayName:y.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:""})]}),s==="student"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(yp,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"date",value:S.arrivalDate,onChange:y=>N({...S,arrivalDate:y.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),l.jsxs("div",{className:"pt-4 flex gap-3",children:[l.jsx("button",{type:"button",onClick:()=>T(!1),className:"flex-1 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:""}),l.jsxs("button",{type:"submit",className:"flex-1 py-2 text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg font-medium flex justify-center items-center gap-2",children:[l.jsx(Jc,{className:"w-4 h-4"})," "]})]})]})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-0 sm:px-6 lg:px-8 py-0 sm:py-8",children:[o==="lookup"&&l.jsx(NC,{}),o==="video"&&l.jsx(SC,{}),o==="shift"&&l.jsx(CC,{}),o==="passport"&&l.jsx(MC,{user:t,userRole:s,userProfile:n}),o==="admin"&&C&&l.jsx(FC,{user:t})]})]})}x_(document.getElementById("root")).render(l.jsx(z.StrictMode,{children:l.jsx(UC,{})}));
