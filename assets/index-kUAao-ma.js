(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Qg={exports:{}},yl={},Yg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ro=Symbol.for("react.element"),Z1=Symbol.for("react.portal"),ew=Symbol.for("react.fragment"),tw=Symbol.for("react.strict_mode"),nw=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),sw=Symbol.for("react.context"),iw=Symbol.for("react.forward_ref"),ow=Symbol.for("react.suspense"),aw=Symbol.for("react.memo"),lw=Symbol.for("react.lazy"),gp=Symbol.iterator;function uw(t){return t===null||typeof t!="object"?null:(t=gp&&t[gp]||t["@@iterator"],typeof t=="function"?t:null)}var Xg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jg=Object.assign,Zg={};function Rs(t,e,n){this.props=t,this.context=e,this.refs=Zg,this.updater=n||Xg}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ey(){}ey.prototype=Rs.prototype;function Nh(t,e,n){this.props=t,this.context=e,this.refs=Zg,this.updater=n||Xg}var Dh=Nh.prototype=new ey;Dh.constructor=Nh;Jg(Dh,Rs.prototype);Dh.isPureReactComponent=!0;var yp=Array.isArray,ty=Object.prototype.hasOwnProperty,bh={current:null},ny={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ty.call(e,r)&&!ny.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ro,type:t,key:i,ref:o,props:s,_owner:bh.current}}function cw(t,e){return{$$typeof:ro,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ro}function hw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vp=/\/+/g;function Tu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hw(""+t.key):e.toString(36)}function oa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ro:case Z1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tu(o,0):r,yp(s)?(n="",t!=null&&(n=t.replace(vp,"$&/")+"/"),oa(s,e,n,"",function(h){return h})):s!=null&&(Vh(s)&&(s=cw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",yp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Tu(i,l);o+=oa(i,e,n,u,s)}else if(u=uw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Tu(i,l++),o+=oa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oo(t,e,n){if(t==null)return t;var r=[],s=0;return oa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ot={current:null},aa={transition:null},fw={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:aa,ReactCurrentOwner:bh};function sy(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Oo,forEach:function(t,e,n){Oo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oo(t,function(){e++}),e},toArray:function(t){return Oo(t,function(e){return e})||[]},only:function(t){if(!Vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Rs;Z.Fragment=ew;Z.Profiler=nw;Z.PureComponent=Nh;Z.StrictMode=tw;Z.Suspense=ow;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fw;Z.act=sy;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ty.call(e,u)&&!ny.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ro,type:t.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:sw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rw,_context:t},t.Consumer=t};Z.createElement=ry;Z.createFactory=function(t){var e=ry.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:iw,render:t}};Z.isValidElement=Vh;Z.lazy=function(t){return{$$typeof:lw,_payload:{_status:-1,_result:t},_init:dw}};Z.memo=function(t,e){return{$$typeof:aw,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=aa.transition;aa.transition={};try{t()}finally{aa.transition=e}};Z.unstable_act=sy;Z.useCallback=function(t,e){return ot.current.useCallback(t,e)};Z.useContext=function(t){return ot.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return ot.current.useDeferredValue(t)};Z.useEffect=function(t,e){return ot.current.useEffect(t,e)};Z.useId=function(){return ot.current.useId()};Z.useImperativeHandle=function(t,e,n){return ot.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return ot.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return ot.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return ot.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return ot.current.useReducer(t,e,n)};Z.useRef=function(t){return ot.current.useRef(t)};Z.useState=function(t){return ot.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return ot.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return ot.current.useTransition()};Z.version="18.3.1";Yg.exports=Z;var b=Yg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw=b,mw=Symbol.for("react.element"),gw=Symbol.for("react.fragment"),yw=Object.prototype.hasOwnProperty,vw=pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_w={key:!0,ref:!0,__self:!0,__source:!0};function iy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yw.call(e,r)&&!_w.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mw,type:t,key:i,ref:o,props:s,_owner:vw.current}}yl.Fragment=gw;yl.jsx=iy;yl.jsxs=iy;Qg.exports=yl;var g=Qg.exports,oy={exports:{}},xt={},ay={exports:{}},ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var X=$.length;$.push(K);e:for(;0<X;){var ye=X-1>>>1,le=$[ye];if(0<s(le,K))$[ye]=K,$[X]=le,X=ye;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],X=$.pop();if(X!==K){$[0]=X;e:for(var ye=0,le=$.length,ke=le>>>1;ye<ke;){var rn=2*(ye+1)-1,sn=$[rn],on=rn+1,an=$[on];if(0>s(sn,X))on<le&&0>s(an,sn)?($[ye]=an,$[on]=X,ye=on):($[ye]=sn,$[rn]=X,ye=rn);else if(on<le&&0>s(an,X))$[ye]=an,$[on]=X,ye=on;else break e}}return K}function s($,K){var X=$.sortIndex-K.sortIndex;return X!==0?X:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,p=null,m=3,I=!1,A=!1,R=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=$)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function P($){if(R=!1,x($),!A)if(n(u)!==null)A=!0,Fs(M);else{var K=n(h);K!==null&&nn(P,K.startTime-$)}}function M($,K){A=!1,R&&(R=!1,v(y),y=-1),I=!0;var X=m;try{for(x(K),p=n(u);p!==null&&(!(p.expirationTime>K)||$&&!C());){var ye=p.callback;if(typeof ye=="function"){p.callback=null,m=p.priorityLevel;var le=ye(p.expirationTime<=K);K=t.unstable_now(),typeof le=="function"?p.callback=le:p===n(u)&&r(u),x(K)}else r(u);p=n(u)}if(p!==null)var ke=!0;else{var rn=n(h);rn!==null&&nn(P,rn.startTime-K),ke=!1}return ke}finally{p=null,m=X,I=!1}}var O=!1,E=null,y=-1,T=5,S=-1;function C(){return!(t.unstable_now()-S<T)}function D(){if(E!==null){var $=t.unstable_now();S=$;var K=!0;try{K=E(!0,$)}finally{K?k():(O=!1,E=null)}}else O=!1}var k;if(typeof w=="function")k=function(){w(D)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,dr=St.port2;St.port1.onmessage=D,k=function(){dr.postMessage(null)}}else k=function(){N(D,0)};function Fs($){E=$,O||(O=!0,k())}function nn($,K){y=N(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){A||I||(A=!0,Fs(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var X=m;m=K;try{return $()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=m;m=$;try{return K()}finally{m=X}},t.unstable_scheduleCallback=function($,K,X){var ye=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=X+le,$={id:d++,callback:K,priorityLevel:$,startTime:X,expirationTime:le,sortIndex:-1},X>ye?($.sortIndex=X,e(h,$),n(u)===null&&$===n(h)&&(R?(v(y),y=-1):R=!0,nn(P,X-ye))):($.sortIndex=le,e(u,$),A||I||(A=!0,Fs(M))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var K=m;return function(){var X=m;m=K;try{return $.apply(this,arguments)}finally{m=X}}}})(ly);ay.exports=ly;var ww=ay.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=b,Et=ww;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uy=new Set,Pi={};function Mr(t,e){ys(t,e),ys(t+"Capture",e)}function ys(t,e){for(Pi[t]=e,t=0;t<e.length;t++)uy.add(e[t])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=Object.prototype.hasOwnProperty,xw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_p={},wp={};function Tw(t){return ac.call(wp,t)?!0:ac.call(_p,t)?!1:xw.test(t)?wp[t]=!0:(_p[t]=!0,!1)}function Sw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Iw(t,e,n,r){if(e===null||typeof e>"u"||Sw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function at(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){He[t]=new at(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];He[e]=new at(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){He[t]=new at(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){He[t]=new at(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){He[t]=new at(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){He[t]=new at(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){He[t]=new at(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){He[t]=new at(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){He[t]=new at(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mh=/[\-:]([a-z])/g;function Lh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mh,Lh);He[e]=new at(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mh,Lh);He[e]=new at(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mh,Lh);He[e]=new at(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){He[t]=new at(t,1,!1,t.toLowerCase(),null,!1,!1)});He.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){He[t]=new at(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oh(t,e,n,r){var s=He.hasOwnProperty(e)?He[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Iw(e,n,s,r)&&(n=null),r||s===null?Tw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var An=Ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),jh=Symbol.for("react.strict_mode"),lc=Symbol.for("react.profiler"),cy=Symbol.for("react.provider"),hy=Symbol.for("react.context"),Fh=Symbol.for("react.forward_ref"),uc=Symbol.for("react.suspense"),cc=Symbol.for("react.suspense_list"),Uh=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),dy=Symbol.for("react.offscreen"),Ep=Symbol.iterator;function Zs(t){return t===null||typeof t!="object"?null:(t=Ep&&t[Ep]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,Su;function li(t){if(Su===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Su=e&&e[1]||""}return`
`+Su+t}var Iu=!1;function ku(t,e){if(!t||Iu)return"";Iu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Iu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?li(t):""}function kw(t){switch(t.tag){case 5:return li(t.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 2:case 15:return t=ku(t.type,!1),t;case 11:return t=ku(t.type.render,!1),t;case 1:return t=ku(t.type,!0),t;default:return""}}function hc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xr:return"Fragment";case Yr:return"Portal";case lc:return"Profiler";case jh:return"StrictMode";case uc:return"Suspense";case cc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hy:return(t.displayName||"Context")+".Consumer";case cy:return(t._context.displayName||"Context")+".Provider";case Fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uh:return e=t.displayName||null,e!==null?e:hc(t.type)||"Memo";case bn:e=t._payload,t=t._init;try{return hc(t(e))}catch{}}return null}function Aw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hc(e);case 8:return e===jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cw(t){var e=fy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fo(t){t._valueTracker||(t._valueTracker=Cw(t))}function py(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dc(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function my(t,e){e=e.checked,e!=null&&Oh(t,"checked",e,!1)}function fc(t,e){my(t,e);var n=Jn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pc(t,e.type,n):e.hasOwnProperty("defaultValue")&&pc(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pc(t,e,n){(e!=="number"||Aa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ui=Array.isArray;function us(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ui(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jn(n)}}function gy(t,e){var n=Jn(e.value),r=Jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ip(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uo,vy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ni(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rw=["Webkit","ms","Moz","O"];Object.keys(gi).forEach(function(t){Rw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gi[e]=gi[t]})});function _y(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gi.hasOwnProperty(t)&&gi[t]?(""+e).trim():e+"px"}function wy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_y(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Pw=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yc(t,e){if(e){if(Pw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function vc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _c=null;function zh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wc=null,cs=null,hs=null;function kp(t){if(t=oo(t)){if(typeof wc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=xl(e),wc(t.stateNode,t.type,e))}}function Ey(t){cs?hs?hs.push(t):hs=[t]:cs=t}function xy(){if(cs){var t=cs,e=hs;if(hs=cs=null,kp(t),e)for(t=0;t<e.length;t++)kp(e[t])}}function Ty(t,e){return t(e)}function Sy(){}var Au=!1;function Iy(t,e,n){if(Au)return t(e,n);Au=!0;try{return Ty(t,e,n)}finally{Au=!1,(cs!==null||hs!==null)&&(Sy(),xy())}}function Di(t,e){var n=t.stateNode;if(n===null)return null;var r=xl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Ec=!1;if(vn)try{var ei={};Object.defineProperty(ei,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",ei,ei),window.removeEventListener("test",ei,ei)}catch{Ec=!1}function Nw(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var yi=!1,Ca=null,Ra=!1,xc=null,Dw={onError:function(t){yi=!0,Ca=t}};function bw(t,e,n,r,s,i,o,l,u){yi=!1,Ca=null,Nw.apply(Dw,arguments)}function Vw(t,e,n,r,s,i,o,l,u){if(bw.apply(this,arguments),yi){if(yi){var h=Ca;yi=!1,Ca=null}else throw Error(U(198));Ra||(Ra=!0,xc=h)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ky(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ap(t){if(Lr(t)!==t)throw Error(U(188))}function Mw(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ap(s),t;if(i===r)return Ap(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Ay(t){return t=Mw(t),t!==null?Cy(t):null}function Cy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cy(t);if(e!==null)return e;t=t.sibling}return null}var Ry=Et.unstable_scheduleCallback,Cp=Et.unstable_cancelCallback,Lw=Et.unstable_shouldYield,Ow=Et.unstable_requestPaint,Ce=Et.unstable_now,jw=Et.unstable_getCurrentPriorityLevel,Bh=Et.unstable_ImmediatePriority,Py=Et.unstable_UserBlockingPriority,Pa=Et.unstable_NormalPriority,Fw=Et.unstable_LowPriority,Ny=Et.unstable_IdlePriority,vl=null,Kt=null;function Uw(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(vl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:$w,zw=Math.log,Bw=Math.LN2;function $w(t){return t>>>=0,t===0?32:31-(zw(t)/Bw|0)|0}var zo=64,Bo=4194304;function ci(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Na(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ci(l):(i&=o,i!==0&&(r=ci(i)))}else o=n&~s,o!==0?r=ci(o):i!==0&&(r=ci(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ft(e),s=1<<n,r|=t[n],e&=~s;return r}function Hw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ft(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Hw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Tc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dy(){var t=zo;return zo<<=1,!(zo&4194240)&&(zo=64),t}function Cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function so(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function Ww(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ft(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $h(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ft(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function by(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vy,Hh,My,Ly,Oy,Sc=!1,$o=[],Un=null,zn=null,Bn=null,bi=new Map,Vi=new Map,Mn=[],Gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rp(t,e){switch(t){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":bi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(e.pointerId)}}function ti(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=oo(e),e!==null&&Hh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Kw(t,e,n,r,s){switch(e){case"focusin":return Un=ti(Un,t,e,n,r,s),!0;case"dragenter":return zn=ti(zn,t,e,n,r,s),!0;case"mouseover":return Bn=ti(Bn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bi.set(i,ti(bi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vi.set(i,ti(Vi.get(i)||null,t,e,n,r,s)),!0}return!1}function jy(t){var e=wr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=ky(n),e!==null){t.blockedOn=e,Oy(t.priority,function(){My(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function la(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ic(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_c=r,n.target.dispatchEvent(r),_c=null}else return e=oo(n),e!==null&&Hh(e),t.blockedOn=n,!1;e.shift()}return!0}function Pp(t,e,n){la(t)&&n.delete(e)}function Qw(){Sc=!1,Un!==null&&la(Un)&&(Un=null),zn!==null&&la(zn)&&(zn=null),Bn!==null&&la(Bn)&&(Bn=null),bi.forEach(Pp),Vi.forEach(Pp)}function ni(t,e){t.blockedOn===e&&(t.blockedOn=null,Sc||(Sc=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,Qw)))}function Mi(t){function e(s){return ni(s,t)}if(0<$o.length){ni($o[0],t);for(var n=1;n<$o.length;n++){var r=$o[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Un!==null&&ni(Un,t),zn!==null&&ni(zn,t),Bn!==null&&ni(Bn,t),bi.forEach(e),Vi.forEach(e),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)jy(n),n.blockedOn===null&&Mn.shift()}var ds=An.ReactCurrentBatchConfig,Da=!0;function Yw(t,e,n,r){var s=ae,i=ds.transition;ds.transition=null;try{ae=1,qh(t,e,n,r)}finally{ae=s,ds.transition=i}}function Xw(t,e,n,r){var s=ae,i=ds.transition;ds.transition=null;try{ae=4,qh(t,e,n,r)}finally{ae=s,ds.transition=i}}function qh(t,e,n,r){if(Da){var s=Ic(t,e,n,r);if(s===null)ju(t,e,r,ba,n),Rp(t,r);else if(Kw(s,t,e,n,r))r.stopPropagation();else if(Rp(t,r),e&4&&-1<Gw.indexOf(t)){for(;s!==null;){var i=oo(s);if(i!==null&&Vy(i),i=Ic(t,e,n,r),i===null&&ju(t,e,r,ba,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ju(t,e,r,null,n)}}var ba=null;function Ic(t,e,n,r){if(ba=null,t=zh(r),t=wr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ky(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ba=t,null}function Fy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jw()){case Bh:return 1;case Py:return 4;case Pa:case Fw:return 16;case Ny:return 536870912;default:return 16}default:return 16}}var On=null,Wh=null,ua=null;function Uy(){if(ua)return ua;var t,e=Wh,n=e.length,r,s="value"in On?On.value:On.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ua=s.slice(t,1<r?1-r:void 0)}function ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ho(){return!0}function Np(){return!1}function Tt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ho:Np,this.isPropagationStopped=Np,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),e}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gh=Tt(Ps),io=Ee({},Ps,{view:0,detail:0}),Jw=Tt(io),Ru,Pu,ri,_l=Ee({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(Ru=t.screenX-ri.screenX,Pu=t.screenY-ri.screenY):Pu=Ru=0,ri=t),Ru)},movementY:function(t){return"movementY"in t?t.movementY:Pu}}),Dp=Tt(_l),Zw=Ee({},_l,{dataTransfer:0}),eE=Tt(Zw),tE=Ee({},io,{relatedTarget:0}),Nu=Tt(tE),nE=Ee({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),rE=Tt(nE),sE=Ee({},Ps,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iE=Tt(sE),oE=Ee({},Ps,{data:0}),bp=Tt(oE),aE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uE[t])?!!e[t]:!1}function Kh(){return cE}var hE=Ee({},io,{key:function(t){if(t.key){var e=aE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kh,charCode:function(t){return t.type==="keypress"?ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dE=Tt(hE),fE=Ee({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vp=Tt(fE),pE=Ee({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kh}),mE=Tt(pE),gE=Ee({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),yE=Tt(gE),vE=Ee({},_l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_E=Tt(vE),wE=[9,13,27,32],Qh=vn&&"CompositionEvent"in window,vi=null;vn&&"documentMode"in document&&(vi=document.documentMode);var EE=vn&&"TextEvent"in window&&!vi,zy=vn&&(!Qh||vi&&8<vi&&11>=vi),Mp=" ",Lp=!1;function By(t,e){switch(t){case"keyup":return wE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $y(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function xE(t,e){switch(t){case"compositionend":return $y(e);case"keypress":return e.which!==32?null:(Lp=!0,Mp);case"textInput":return t=e.data,t===Mp&&Lp?null:t;default:return null}}function TE(t,e){if(Jr)return t==="compositionend"||!Qh&&By(t,e)?(t=Uy(),ua=Wh=On=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zy&&e.locale!=="ko"?null:e.data;default:return null}}var SE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SE[t.type]:e==="textarea"}function Hy(t,e,n,r){Ey(r),e=Va(e,"onChange"),0<e.length&&(n=new Gh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _i=null,Li=null;function IE(t){t0(t,0)}function wl(t){var e=ts(t);if(py(e))return t}function kE(t,e){if(t==="change")return e}var qy=!1;if(vn){var Du;if(vn){var bu="oninput"in document;if(!bu){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),bu=typeof jp.oninput=="function"}Du=bu}else Du=!1;qy=Du&&(!document.documentMode||9<document.documentMode)}function Fp(){_i&&(_i.detachEvent("onpropertychange",Wy),Li=_i=null)}function Wy(t){if(t.propertyName==="value"&&wl(Li)){var e=[];Hy(e,Li,t,zh(t)),Iy(IE,e)}}function AE(t,e,n){t==="focusin"?(Fp(),_i=e,Li=n,_i.attachEvent("onpropertychange",Wy)):t==="focusout"&&Fp()}function CE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wl(Li)}function RE(t,e){if(t==="click")return wl(e)}function PE(t,e){if(t==="input"||t==="change")return wl(e)}function NE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zt=typeof Object.is=="function"?Object.is:NE;function Oi(t,e){if(zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ac.call(e,s)||!zt(t[s],e[s]))return!1}return!0}function Up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zp(t,e){var n=Up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Up(n)}}function Gy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ky(){for(var t=window,e=Aa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Aa(t.document)}return e}function Yh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DE(t){var e=Ky(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gy(n.ownerDocument.documentElement,n)){if(r!==null&&Yh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zp(n,i);var o=zp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bE=vn&&"documentMode"in document&&11>=document.documentMode,Zr=null,kc=null,wi=null,Ac=!1;function Bp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ac||Zr==null||Zr!==Aa(r)||(r=Zr,"selectionStart"in r&&Yh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wi&&Oi(wi,r)||(wi=r,r=Va(kc,"onSelect"),0<r.length&&(e=new Gh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zr)))}function qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var es={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionend:qo("Transition","TransitionEnd")},Vu={},Qy={};vn&&(Qy=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function El(t){if(Vu[t])return Vu[t];if(!es[t])return t;var e=es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qy)return Vu[t]=e[n];return t}var Yy=El("animationend"),Xy=El("animationiteration"),Jy=El("animationstart"),Zy=El("transitionend"),e0=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(t,e){e0.set(t,e),Mr(e,[t])}for(var Mu=0;Mu<$p.length;Mu++){var Lu=$p[Mu],VE=Lu.toLowerCase(),ME=Lu[0].toUpperCase()+Lu.slice(1);ar(VE,"on"+ME)}ar(Yy,"onAnimationEnd");ar(Xy,"onAnimationIteration");ar(Jy,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(Zy,"onTransitionEnd");ys("onMouseEnter",["mouseout","mouseover"]);ys("onMouseLeave",["mouseout","mouseover"]);ys("onPointerEnter",["pointerout","pointerover"]);ys("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LE=new Set("cancel close invalid load scroll toggle".split(" ").concat(hi));function Hp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Vw(r,e,void 0,t),t.currentTarget=null}function t0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Hp(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Hp(s,l,h),i=u}}}if(Ra)throw t=xc,Ra=!1,xc=null,t}function fe(t,e){var n=e[Dc];n===void 0&&(n=e[Dc]=new Set);var r=t+"__bubble";n.has(r)||(n0(e,t,2,!1),n.add(r))}function Ou(t,e,n){var r=0;e&&(r|=4),n0(n,t,r,e)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function ji(t){if(!t[Wo]){t[Wo]=!0,uy.forEach(function(n){n!=="selectionchange"&&(LE.has(n)||Ou(n,!1,t),Ou(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wo]||(e[Wo]=!0,Ou("selectionchange",!1,e))}}function n0(t,e,n,r){switch(Fy(e)){case 1:var s=Yw;break;case 4:s=Xw;break;default:s=qh}n=s.bind(null,e,n,t),s=void 0,!Ec||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ju(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=wr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Iy(function(){var h=i,d=zh(n),p=[];e:{var m=e0.get(t);if(m!==void 0){var I=Gh,A=t;switch(t){case"keypress":if(ca(n)===0)break e;case"keydown":case"keyup":I=dE;break;case"focusin":A="focus",I=Nu;break;case"focusout":A="blur",I=Nu;break;case"beforeblur":case"afterblur":I=Nu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=eE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=mE;break;case Yy:case Xy:case Jy:I=rE;break;case Zy:I=yE;break;case"scroll":I=Jw;break;case"wheel":I=_E;break;case"copy":case"cut":case"paste":I=iE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Vp}var R=(e&4)!==0,N=!R&&t==="scroll",v=R?m!==null?m+"Capture":null:m;R=[];for(var w=h,x;w!==null;){x=w;var P=x.stateNode;if(x.tag===5&&P!==null&&(x=P,v!==null&&(P=Di(w,v),P!=null&&R.push(Fi(w,P,x)))),N)break;w=w.return}0<R.length&&(m=new I(m,A,null,n,d),p.push({event:m,listeners:R}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",m&&n!==_c&&(A=n.relatedTarget||n.fromElement)&&(wr(A)||A[_n]))break e;if((I||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,I?(A=n.relatedTarget||n.toElement,I=h,A=A?wr(A):null,A!==null&&(N=Lr(A),A!==N||A.tag!==5&&A.tag!==6)&&(A=null)):(I=null,A=h),I!==A)){if(R=Dp,P="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=Vp,P="onPointerLeave",v="onPointerEnter",w="pointer"),N=I==null?m:ts(I),x=A==null?m:ts(A),m=new R(P,w+"leave",I,n,d),m.target=N,m.relatedTarget=x,P=null,wr(d)===h&&(R=new R(v,w+"enter",A,n,d),R.target=x,R.relatedTarget=N,P=R),N=P,I&&A)t:{for(R=I,v=A,w=0,x=R;x;x=qr(x))w++;for(x=0,P=v;P;P=qr(P))x++;for(;0<w-x;)R=qr(R),w--;for(;0<x-w;)v=qr(v),x--;for(;w--;){if(R===v||v!==null&&R===v.alternate)break t;R=qr(R),v=qr(v)}R=null}else R=null;I!==null&&qp(p,m,I,R,!1),A!==null&&N!==null&&qp(p,N,A,R,!0)}}e:{if(m=h?ts(h):window,I=m.nodeName&&m.nodeName.toLowerCase(),I==="select"||I==="input"&&m.type==="file")var M=kE;else if(Op(m))if(qy)M=PE;else{M=CE;var O=AE}else(I=m.nodeName)&&I.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=RE);if(M&&(M=M(t,h))){Hy(p,M,n,d);break e}O&&O(t,m,h),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&pc(m,"number",m.value)}switch(O=h?ts(h):window,t){case"focusin":(Op(O)||O.contentEditable==="true")&&(Zr=O,kc=h,wi=null);break;case"focusout":wi=kc=Zr=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,Bp(p,n,d);break;case"selectionchange":if(bE)break;case"keydown":case"keyup":Bp(p,n,d)}var E;if(Qh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Jr?By(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(zy&&n.locale!=="ko"&&(Jr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Jr&&(E=Uy()):(On=d,Wh="value"in On?On.value:On.textContent,Jr=!0)),O=Va(h,y),0<O.length&&(y=new bp(y,t,null,n,d),p.push({event:y,listeners:O}),E?y.data=E:(E=$y(n),E!==null&&(y.data=E)))),(E=EE?xE(t,n):TE(t,n))&&(h=Va(h,"onBeforeInput"),0<h.length&&(d=new bp("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=E))}t0(p,e)})}function Fi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Va(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Di(t,n),i!=null&&r.unshift(Fi(t,i,s)),i=Di(t,e),i!=null&&r.push(Fi(t,i,s))),t=t.return}return r}function qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Di(n,i),u!=null&&o.unshift(Fi(n,u,l))):s||(u=Di(n,i),u!=null&&o.push(Fi(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var OE=/\r\n?/g,jE=/\u0000|\uFFFD/g;function Wp(t){return(typeof t=="string"?t:""+t).replace(OE,`
`).replace(jE,"")}function Go(t,e,n){if(e=Wp(e),Wp(t)!==e&&n)throw Error(U(425))}function Ma(){}var Cc=null,Rc=null;function Pc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nc=typeof setTimeout=="function"?setTimeout:void 0,FE=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,UE=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(t){return Gp.resolve(null).then(t).catch(zE)}:Nc;function zE(t){setTimeout(function(){throw t})}function Fu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Mi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mi(e)}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Ns,Ui="__reactProps$"+Ns,_n="__reactContainer$"+Ns,Dc="__reactEvents$"+Ns,BE="__reactListeners$"+Ns,$E="__reactHandles$"+Ns;function wr(t){var e=t[Gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_n]||n[Gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kp(t);t!==null;){if(n=t[Gt])return n;t=Kp(t)}return e}t=n,n=t.parentNode}return null}function oo(t){return t=t[Gt]||t[_n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function xl(t){return t[Ui]||null}var bc=[],ns=-1;function lr(t){return{current:t}}function me(t){0>ns||(t.current=bc[ns],bc[ns]=null,ns--)}function he(t,e){ns++,bc[ns]=t.current,t.current=e}var Zn={},tt=lr(Zn),dt=lr(!1),Cr=Zn;function vs(t,e){var n=t.type.contextTypes;if(!n)return Zn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ft(t){return t=t.childContextTypes,t!=null}function La(){me(dt),me(tt)}function Qp(t,e,n){if(tt.current!==Zn)throw Error(U(168));he(tt,e),he(dt,n)}function r0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,Aw(t)||"Unknown",s));return Ee({},n,r)}function Oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zn,Cr=tt.current,he(tt,t),he(dt,dt.current),!0}function Yp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=r0(t,e,Cr),r.__reactInternalMemoizedMergedChildContext=t,me(dt),me(tt),he(tt,t)):me(dt),he(dt,n)}var hn=null,Tl=!1,Uu=!1;function s0(t){hn===null?hn=[t]:hn.push(t)}function HE(t){Tl=!0,s0(t)}function ur(){if(!Uu&&hn!==null){Uu=!0;var t=0,e=ae;try{var n=hn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,Tl=!1}catch(s){throw hn!==null&&(hn=hn.slice(t+1)),Ry(Bh,ur),s}finally{ae=e,Uu=!1}}return null}var rs=[],ss=0,ja=null,Fa=0,It=[],kt=0,Rr=null,fn=1,pn="";function yr(t,e){rs[ss++]=Fa,rs[ss++]=ja,ja=t,Fa=e}function i0(t,e,n){It[kt++]=fn,It[kt++]=pn,It[kt++]=Rr,Rr=t;var r=fn;t=pn;var s=32-Ft(r)-1;r&=~(1<<s),n+=1;var i=32-Ft(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fn=1<<32-Ft(e)+s|n<<s|r,pn=i+t}else fn=1<<i|n<<s|r,pn=t}function Xh(t){t.return!==null&&(yr(t,1),i0(t,1,0))}function Jh(t){for(;t===ja;)ja=rs[--ss],rs[ss]=null,Fa=rs[--ss],rs[ss]=null;for(;t===Rr;)Rr=It[--kt],It[kt]=null,pn=It[--kt],It[kt]=null,fn=It[--kt],It[kt]=null}var wt=null,vt=null,ge=!1,jt=null;function o0(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wt=t,vt=$n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wt=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rr!==null?{id:fn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wt=t,vt=null,!0):!1;default:return!1}}function Vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mc(t){if(ge){var e=vt;if(e){var n=e;if(!Xp(t,e)){if(Vc(t))throw Error(U(418));e=$n(n.nextSibling);var r=wt;e&&Xp(t,e)?o0(r,n):(t.flags=t.flags&-4097|2,ge=!1,wt=t)}}else{if(Vc(t))throw Error(U(418));t.flags=t.flags&-4097|2,ge=!1,wt=t}}}function Jp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function Ko(t){if(t!==wt)return!1;if(!ge)return Jp(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pc(t.type,t.memoizedProps)),e&&(e=vt)){if(Vc(t))throw a0(),Error(U(418));for(;e;)o0(t,e),e=$n(e.nextSibling)}if(Jp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=$n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=wt?$n(t.stateNode.nextSibling):null;return!0}function a0(){for(var t=vt;t;)t=$n(t.nextSibling)}function _s(){vt=wt=null,ge=!1}function Zh(t){jt===null?jt=[t]:jt.push(t)}var qE=An.ReactCurrentBatchConfig;function si(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Qo(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zp(t){var e=t._init;return e(t._payload)}function l0(t){function e(v,w){if(t){var x=v.deletions;x===null?(v.deletions=[w],v.flags|=16):x.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Gn(v,w),v.index=0,v.sibling=null,v}function i(v,w,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<w?(v.flags|=2,w):x):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,w,x,P){return w===null||w.tag!==6?(w=Gu(x,v.mode,P),w.return=v,w):(w=s(w,x),w.return=v,w)}function u(v,w,x,P){var M=x.type;return M===Xr?d(v,w,x.props.children,P,x.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bn&&Zp(M)===w.type)?(P=s(w,x.props),P.ref=si(v,w,x),P.return=v,P):(P=ya(x.type,x.key,x.props,null,v.mode,P),P.ref=si(v,w,x),P.return=v,P)}function h(v,w,x,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Ku(x,v.mode,P),w.return=v,w):(w=s(w,x.children||[]),w.return=v,w)}function d(v,w,x,P,M){return w===null||w.tag!==7?(w=Ir(x,v.mode,P,M),w.return=v,w):(w=s(w,x),w.return=v,w)}function p(v,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Gu(""+w,v.mode,x),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jo:return x=ya(w.type,w.key,w.props,null,v.mode,x),x.ref=si(v,null,w),x.return=v,x;case Yr:return w=Ku(w,v.mode,x),w.return=v,w;case bn:var P=w._init;return p(v,P(w._payload),x)}if(ui(w)||Zs(w))return w=Ir(w,v.mode,x,null),w.return=v,w;Qo(v,w)}return null}function m(v,w,x,P){var M=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:l(v,w,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jo:return x.key===M?u(v,w,x,P):null;case Yr:return x.key===M?h(v,w,x,P):null;case bn:return M=x._init,m(v,w,M(x._payload),P)}if(ui(x)||Zs(x))return M!==null?null:d(v,w,x,P,null);Qo(v,x)}return null}function I(v,w,x,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(x)||null,l(w,v,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case jo:return v=v.get(P.key===null?x:P.key)||null,u(w,v,P,M);case Yr:return v=v.get(P.key===null?x:P.key)||null,h(w,v,P,M);case bn:var O=P._init;return I(v,w,x,O(P._payload),M)}if(ui(P)||Zs(P))return v=v.get(x)||null,d(w,v,P,M,null);Qo(w,P)}return null}function A(v,w,x,P){for(var M=null,O=null,E=w,y=w=0,T=null;E!==null&&y<x.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var S=m(v,E,x[y],P);if(S===null){E===null&&(E=T);break}t&&E&&S.alternate===null&&e(v,E),w=i(S,w,y),O===null?M=S:O.sibling=S,O=S,E=T}if(y===x.length)return n(v,E),ge&&yr(v,y),M;if(E===null){for(;y<x.length;y++)E=p(v,x[y],P),E!==null&&(w=i(E,w,y),O===null?M=E:O.sibling=E,O=E);return ge&&yr(v,y),M}for(E=r(v,E);y<x.length;y++)T=I(E,v,y,x[y],P),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),w=i(T,w,y),O===null?M=T:O.sibling=T,O=T);return t&&E.forEach(function(C){return e(v,C)}),ge&&yr(v,y),M}function R(v,w,x,P){var M=Zs(x);if(typeof M!="function")throw Error(U(150));if(x=M.call(x),x==null)throw Error(U(151));for(var O=M=null,E=w,y=w=0,T=null,S=x.next();E!==null&&!S.done;y++,S=x.next()){E.index>y?(T=E,E=null):T=E.sibling;var C=m(v,E,S.value,P);if(C===null){E===null&&(E=T);break}t&&E&&C.alternate===null&&e(v,E),w=i(C,w,y),O===null?M=C:O.sibling=C,O=C,E=T}if(S.done)return n(v,E),ge&&yr(v,y),M;if(E===null){for(;!S.done;y++,S=x.next())S=p(v,S.value,P),S!==null&&(w=i(S,w,y),O===null?M=S:O.sibling=S,O=S);return ge&&yr(v,y),M}for(E=r(v,E);!S.done;y++,S=x.next())S=I(E,v,y,S.value,P),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?y:S.key),w=i(S,w,y),O===null?M=S:O.sibling=S,O=S);return t&&E.forEach(function(D){return e(v,D)}),ge&&yr(v,y),M}function N(v,w,x,P){if(typeof x=="object"&&x!==null&&x.type===Xr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case jo:e:{for(var M=x.key,O=w;O!==null;){if(O.key===M){if(M=x.type,M===Xr){if(O.tag===7){n(v,O.sibling),w=s(O,x.props.children),w.return=v,v=w;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bn&&Zp(M)===O.type){n(v,O.sibling),w=s(O,x.props),w.ref=si(v,O,x),w.return=v,v=w;break e}n(v,O);break}else e(v,O);O=O.sibling}x.type===Xr?(w=Ir(x.props.children,v.mode,P,x.key),w.return=v,v=w):(P=ya(x.type,x.key,x.props,null,v.mode,P),P.ref=si(v,w,x),P.return=v,v=P)}return o(v);case Yr:e:{for(O=x.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(v,w.sibling),w=s(w,x.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Ku(x,v.mode,P),w.return=v,v=w}return o(v);case bn:return O=x._init,N(v,w,O(x._payload),P)}if(ui(x))return A(v,w,x,P);if(Zs(x))return R(v,w,x,P);Qo(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(v,w.sibling),w=s(w,x),w.return=v,v=w):(n(v,w),w=Gu(x,v.mode,P),w.return=v,v=w),o(v)):n(v,w)}return N}var ws=l0(!0),u0=l0(!1),Ua=lr(null),za=null,is=null,ed=null;function td(){ed=is=za=null}function nd(t){var e=Ua.current;me(Ua),t._currentValue=e}function Lc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fs(t,e){za=t,ed=is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ht=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(ed!==t)if(t={context:t,memoizedValue:e,next:null},is===null){if(za===null)throw Error(U(308));is=t,za.dependencies={lanes:0,firstContext:t}}else is=is.next=t;return e}var Er=null;function rd(t){Er===null?Er=[t]:Er.push(t)}function c0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rd(e)):(n.next=s.next,s.next=n),e.interleaved=n,wn(t,r)}function wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vn=!1;function sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,wn(t,n)}return s=r.interleaved,s===null?(e.next=e,rd(r)):(e.next=s.next,s.next=e),r.interleaved=e,wn(t,n)}function ha(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$h(t,n)}}function em(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ba(t,e,n,r){var s=t.updateQueue;Vn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,d=h=u=null,l=i;do{var m=l.lane,I=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,R=l;switch(m=e,I=n,R.tag){case 1:if(A=R.payload,typeof A=="function"){p=A.call(I,p,m);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=R.payload,m=typeof A=="function"?A.call(I,p,m):A,m==null)break e;p=Ee({},p,m);break e;case 2:Vn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else I={eventTime:I,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=I,u=p):d=d.next=I,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(u=p),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Nr|=o,t.lanes=o,t.memoizedState=p}}function tm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ao={},Qt=lr(ao),zi=lr(ao),Bi=lr(ao);function xr(t){if(t===ao)throw Error(U(174));return t}function id(t,e){switch(he(Bi,e),he(zi,t),he(Qt,ao),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gc(e,t)}me(Qt),he(Qt,e)}function Es(){me(Qt),me(zi),me(Bi)}function d0(t){xr(Bi.current);var e=xr(Qt.current),n=gc(e,t.type);e!==n&&(he(zi,t),he(Qt,n))}function od(t){zi.current===t&&(me(Qt),me(zi))}var ve=lr(0);function $a(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zu=[];function ad(){for(var t=0;t<zu.length;t++)zu[t]._workInProgressVersionPrimary=null;zu.length=0}var da=An.ReactCurrentDispatcher,Bu=An.ReactCurrentBatchConfig,Pr=0,_e=null,be=null,Oe=null,Ha=!1,Ei=!1,$i=0,WE=0;function Qe(){throw Error(U(321))}function ld(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zt(t[n],e[n]))return!1;return!0}function ud(t,e,n,r,s,i){if(Pr=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=t===null||t.memoizedState===null?YE:XE,t=n(r,s),Ei){i=0;do{if(Ei=!1,$i=0,25<=i)throw Error(U(301));i+=1,Oe=be=null,e.updateQueue=null,da.current=JE,t=n(r,s)}while(Ei)}if(da.current=qa,e=be!==null&&be.next!==null,Pr=0,Oe=be=_e=null,Ha=!1,e)throw Error(U(300));return t}function cd(){var t=$i!==0;return $i=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?_e.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function Dt(){if(be===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Oe===null?_e.memoizedState:Oe.next;if(e!==null)Oe=e,be=t;else{if(t===null)throw Error(U(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Oe===null?_e.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function Hi(t,e){return typeof e=="function"?e(t):e}function $u(t){var e=Dt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var d=h.lane;if((Pr&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,_e.lanes|=d,Nr|=d}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,zt(r,e.memoizedState)||(ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_e.lanes|=i,Nr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);zt(i,e.memoizedState)||(ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function f0(){}function p0(t,e){var n=_e,r=Dt(),s=e(),i=!zt(r.memoizedState,s);if(i&&(r.memoizedState=s,ht=!0),r=r.queue,hd(y0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,qi(9,g0.bind(null,n,r,s,e),void 0,null),je===null)throw Error(U(349));Pr&30||m0(n,e,s)}return s}function m0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function g0(t,e,n,r){e.value=n,e.getSnapshot=r,v0(e)&&_0(t)}function y0(t,e,n){return n(function(){v0(e)&&_0(t)})}function v0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zt(t,n)}catch{return!0}}function _0(t){var e=wn(t,1);e!==null&&Ut(e,t,1,-1)}function nm(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:t},e.queue=t,t=t.dispatch=QE.bind(null,_e,t),[e.memoizedState,t]}function qi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function w0(){return Dt().memoizedState}function fa(t,e,n,r){var s=qt();_e.flags|=t,s.memoizedState=qi(1|e,n,void 0,r===void 0?null:r)}function Sl(t,e,n,r){var s=Dt();r=r===void 0?null:r;var i=void 0;if(be!==null){var o=be.memoizedState;if(i=o.destroy,r!==null&&ld(r,o.deps)){s.memoizedState=qi(e,n,i,r);return}}_e.flags|=t,s.memoizedState=qi(1|e,n,i,r)}function rm(t,e){return fa(8390656,8,t,e)}function hd(t,e){return Sl(2048,8,t,e)}function E0(t,e){return Sl(4,2,t,e)}function x0(t,e){return Sl(4,4,t,e)}function T0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function S0(t,e,n){return n=n!=null?n.concat([t]):null,Sl(4,4,T0.bind(null,e,t),n)}function dd(){}function I0(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ld(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function k0(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ld(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function A0(t,e,n){return Pr&21?(zt(n,e)||(n=Dy(),_e.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n)}function GE(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Bu.transition;Bu.transition={};try{t(!1),e()}finally{ae=n,Bu.transition=r}}function C0(){return Dt().memoizedState}function KE(t,e,n){var r=Wn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},R0(t))P0(e,n);else if(n=c0(t,e,n,r),n!==null){var s=it();Ut(n,t,r,s),N0(n,e,r)}}function QE(t,e,n){var r=Wn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(R0(t))P0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,zt(l,o)){var u=e.interleaved;u===null?(s.next=s,rd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=c0(t,e,s,r),n!==null&&(s=it(),Ut(n,t,r,s),N0(n,e,r))}}function R0(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function P0(t,e){Ei=Ha=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$h(t,n)}}var qa={readContext:Nt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},YE={readContext:Nt,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:rm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fa(4194308,4,T0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return fa(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=KE.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:nm,useDebugValue:dd,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=nm(!1),e=t[0];return t=GE.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,s=qt();if(ge){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),je===null)throw Error(U(349));Pr&30||m0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,rm(y0.bind(null,r,i,t),[t]),r.flags|=2048,qi(9,g0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qt(),e=je.identifierPrefix;if(ge){var n=pn,r=fn;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$i++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XE={readContext:Nt,useCallback:I0,useContext:Nt,useEffect:hd,useImperativeHandle:S0,useInsertionEffect:E0,useLayoutEffect:x0,useMemo:k0,useReducer:$u,useRef:w0,useState:function(){return $u(Hi)},useDebugValue:dd,useDeferredValue:function(t){var e=Dt();return A0(e,be.memoizedState,t)},useTransition:function(){var t=$u(Hi)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:f0,useSyncExternalStore:p0,useId:C0,unstable_isNewReconciler:!1},JE={readContext:Nt,useCallback:I0,useContext:Nt,useEffect:hd,useImperativeHandle:S0,useInsertionEffect:E0,useLayoutEffect:x0,useMemo:k0,useReducer:Hu,useRef:w0,useState:function(){return Hu(Hi)},useDebugValue:dd,useDeferredValue:function(t){var e=Dt();return be===null?e.memoizedState=t:A0(e,be.memoizedState,t)},useTransition:function(){var t=Hu(Hi)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:f0,useSyncExternalStore:p0,useId:C0,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Il={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=it(),s=Wn(t),i=mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hn(t,i,s),e!==null&&(Ut(e,t,s,r),ha(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=it(),s=Wn(t),i=mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hn(t,i,s),e!==null&&(Ut(e,t,s,r),ha(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=it(),r=Wn(t),s=mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hn(t,s,r),e!==null&&(Ut(e,t,r,n),ha(e,t,r))}};function sm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oi(n,r)||!Oi(s,i):!0}function D0(t,e,n){var r=!1,s=Zn,i=e.contextType;return typeof i=="object"&&i!==null?i=Nt(i):(s=ft(e)?Cr:tt.current,r=e.contextTypes,i=(r=r!=null)?vs(t,s):Zn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Il,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function im(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Il.enqueueReplaceState(e,e.state,null)}function jc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Nt(i):(i=ft(e)?Cr:tt.current,s.context=vs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Oc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Il.enqueueReplaceState(s,s.state,null),Ba(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xs(t,e){try{var n="",r=e;do n+=kw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZE=typeof WeakMap=="function"?WeakMap:Map;function b0(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ga||(Ga=!0,Qc=r),Fc(t,e)},n}function V0(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Fc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fc(t,e),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function om(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fx.bind(null,t,e,n),e.then(t,t))}function am(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var ex=An.ReactCurrentOwner,ht=!1;function st(t,e,n,r){e.child=t===null?u0(e,null,n,r):ws(e,t.child,n,r)}function um(t,e,n,r,s){n=n.render;var i=e.ref;return fs(e,s),r=ud(t,e,n,r,i,s),n=cd(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(ge&&n&&Xh(e),e.flags|=1,st(t,e,r,s),e.child)}function cm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,M0(t,e,i,r,s)):(t=ya(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oi,n(o,r)&&t.ref===e.ref)return En(t,e,s)}return e.flags|=1,t=Gn(i,r),t.ref=e.ref,t.return=e,e.child=t}function M0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oi(i,r)&&t.ref===e.ref)if(ht=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ht=!0);else return e.lanes=t.lanes,En(t,e,s)}return Uc(t,e,n,r,s)}function L0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(as,yt),yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(as,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,he(as,yt),yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,he(as,yt),yt|=r;return st(t,e,s,n),e.child}function O0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uc(t,e,n,r,s){var i=ft(n)?Cr:tt.current;return i=vs(e,i),fs(e,s),n=ud(t,e,n,r,i,s),r=cd(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(ge&&r&&Xh(e),e.flags|=1,st(t,e,n,s),e.child)}function hm(t,e,n,r,s){if(ft(n)){var i=!0;Oa(e)}else i=!1;if(fs(e,s),e.stateNode===null)pa(t,e),D0(e,n,r),jc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Nt(h):(h=ft(n)?Cr:tt.current,h=vs(e,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&im(e,o,r,h),Vn=!1;var m=e.memoizedState;o.state=m,Ba(e,r,o,s),u=e.memoizedState,l!==r||m!==u||dt.current||Vn?(typeof d=="function"&&(Oc(e,n,d,r),u=e.memoizedState),(l=Vn||sm(e,n,l,r,m,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,h0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Lt(e.type,l),o.props=h,p=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=ft(n)?Cr:tt.current,u=vs(e,u));var I=n.getDerivedStateFromProps;(d=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==u)&&im(e,o,r,u),Vn=!1,m=e.memoizedState,o.state=m,Ba(e,r,o,s);var A=e.memoizedState;l!==p||m!==A||dt.current||Vn?(typeof I=="function"&&(Oc(e,n,I,r),A=e.memoizedState),(h=Vn||sm(e,n,h,r,m,A,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return zc(t,e,n,r,i,s)}function zc(t,e,n,r,s,i){O0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Yp(e,n,!1),En(t,e,i);r=e.stateNode,ex.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ws(e,t.child,null,i),e.child=ws(e,null,l,i)):st(t,e,l,i),e.memoizedState=r.state,s&&Yp(e,n,!0),e.child}function j0(t){var e=t.stateNode;e.pendingContext?Qp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qp(t,e.context,!1),id(t,e.containerInfo)}function dm(t,e,n,r,s){return _s(),Zh(s),e.flags|=256,st(t,e,n,r),e.child}var Bc={dehydrated:null,treeContext:null,retryLane:0};function $c(t){return{baseLanes:t,cachePool:null,transitions:null}}function F0(t,e,n){var r=e.pendingProps,s=ve.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),he(ve,s&1),t===null)return Mc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cl(o,r,0,null),t=Ir(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$c(n),e.memoizedState=Bc,t):fd(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Gn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Gn(l,i):(i=Ir(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$c(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bc,r}return i=t.child,t=i.sibling,r=Gn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fd(t,e){return e=Cl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yo(t,e,n,r){return r!==null&&Zh(r),ws(e,t.child,null,n),t=fd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=qu(Error(U(422))),Yo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cl({mode:"visible",children:r.children},s,0,null),i=Ir(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ws(e,t.child,null,o),e.child.memoizedState=$c(o),e.memoizedState=Bc,i);if(!(e.mode&1))return Yo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=qu(i,r,void 0),Yo(t,e,o,r)}if(l=(o&t.childLanes)!==0,ht||l){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,wn(t,s),Ut(r,t,s,-1))}return _d(),r=qu(Error(U(421))),Yo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=px.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,vt=$n(s.nextSibling),wt=e,ge=!0,jt=null,t!==null&&(It[kt++]=fn,It[kt++]=pn,It[kt++]=Rr,fn=t.id,pn=t.overflow,Rr=e),e=fd(e,r.children),e.flags|=4096,e)}function fm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lc(t.return,e,n)}function Wu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function U0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(st(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fm(t,n,e);else if(t.tag===19)fm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$a(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Wu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$a(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Wu(e,!0,n,null,i);break;case"together":Wu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nx(t,e,n){switch(e.tag){case 3:j0(e),_s();break;case 5:d0(e);break;case 1:ft(e.type)&&Oa(e);break;case 4:id(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;he(Ua,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?F0(t,e,n):(he(ve,ve.current&1),t=En(t,e,n),t!==null?t.sibling:null);he(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return U0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),he(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,L0(t,e,n)}return En(t,e,n)}var z0,Hc,B0,$0;z0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hc=function(){};B0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xr(Qt.current);var i=null;switch(n){case"input":s=dc(t,s),r=dc(t,r),i=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),i=[];break;case"textarea":s=mc(t,s),r=mc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ma)}yc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Pi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&fe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};$0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ii(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rx(t,e,n){var r=e.pendingProps;switch(Jh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(e),null;case 1:return ft(e.type)&&La(),Ye(e),null;case 3:return r=e.stateNode,Es(),me(dt),me(tt),ad(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ko(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(Jc(jt),jt=null))),Hc(t,e),Ye(e),null;case 5:od(e);var s=xr(Bi.current);if(n=e.type,t!==null&&e.stateNode!=null)B0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ye(e),null}if(t=xr(Qt.current),Ko(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Gt]=e,r[Ui]=i,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(s=0;s<hi.length;s++)fe(hi[s],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":xp(r,i),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fe("invalid",r);break;case"textarea":Sp(r,i),fe("invalid",r)}yc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Go(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Go(r.textContent,l,t),s=["children",""+l]):Pi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":Fo(r),Tp(r,i,!0);break;case"textarea":Fo(r),Ip(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ma)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Gt]=e,t[Ui]=r,z0(t,e,!1,!1),e.stateNode=t;e:{switch(o=vc(n,r),n){case"dialog":fe("cancel",t),fe("close",t),s=r;break;case"iframe":case"object":case"embed":fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<hi.length;s++)fe(hi[s],t);s=r;break;case"source":fe("error",t),s=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),s=r;break;case"details":fe("toggle",t),s=r;break;case"input":xp(t,r),s=dc(t,r),fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),fe("invalid",t);break;case"textarea":Sp(t,r),s=mc(t,r),fe("invalid",t);break;default:s=r}yc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?wy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&vy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ni(t,u):typeof u=="number"&&Ni(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&fe("scroll",t):u!=null&&Oh(t,i,u,o))}switch(n){case"input":Fo(t),Tp(t,r,!1);break;case"textarea":Fo(t),Ip(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?us(t,!!r.multiple,i,!1):r.defaultValue!=null&&us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ma)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ye(e),null;case 6:if(t&&e.stateNode!=null)$0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=xr(Bi.current),xr(Qt.current),Ko(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gt]=e,(i=r.nodeValue!==n)&&(t=wt,t!==null))switch(t.tag){case 3:Go(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Go(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gt]=e,e.stateNode=r}return Ye(e),null;case 13:if(me(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&vt!==null&&e.mode&1&&!(e.flags&128))a0(),_s(),e.flags|=98560,i=!1;else if(i=Ko(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Gt]=e}else _s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ye(e),i=!1}else jt!==null&&(Jc(jt),jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Ve===0&&(Ve=3):_d())),e.updateQueue!==null&&(e.flags|=4),Ye(e),null);case 4:return Es(),Hc(t,e),t===null&&ji(e.stateNode.containerInfo),Ye(e),null;case 10:return nd(e.type._context),Ye(e),null;case 17:return ft(e.type)&&La(),Ye(e),null;case 19:if(me(ve),i=e.memoizedState,i===null)return Ye(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ii(i,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$a(t),o!==null){for(e.flags|=128,ii(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(ve,ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ce()>Ts&&(e.flags|=128,r=!0,ii(i,!1),e.lanes=4194304)}else{if(!r)if(t=$a(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ii(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ge)return Ye(e),null}else 2*Ce()-i.renderingStartTime>Ts&&n!==1073741824&&(e.flags|=128,r=!0,ii(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ce(),e.sibling=null,n=ve.current,he(ve,r?n&1|2:n&1),e):(Ye(e),null);case 22:case 23:return vd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(Ye(e),e.subtreeFlags&6&&(e.flags|=8192)):Ye(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function sx(t,e){switch(Jh(e),e.tag){case 1:return ft(e.type)&&La(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(),me(dt),me(tt),ad(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return od(e),null;case 13:if(me(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));_s()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ve),null;case 4:return Es(),null;case 10:return nd(e.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var Xo=!1,Ze=!1,ix=typeof WeakSet=="function"?WeakSet:Set,q=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function qc(t,e,n){try{n()}catch(r){Se(t,e,r)}}var pm=!1;function ox(t,e){if(Cc=Da,t=Ky(),Yh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,d=0,p=t,m=null;t:for(;;){for(var I;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(I=p.firstChild)!==null;)m=p,p=I;for(;;){if(p===t)break t;if(m===n&&++h===s&&(l=o),m===i&&++d===r&&(u=o),(I=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=I}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rc={focusedElem:t,selectionRange:n},Da=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var R=A.memoizedProps,N=A.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?R:Lt(e.type,R),N);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(P){Se(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return A=pm,pm=!1,A}function xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&qc(e,n,i)}s=s.next}while(s!==r)}}function kl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H0(t){var e=t.alternate;e!==null&&(t.alternate=null,H0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gt],delete e[Ui],delete e[Dc],delete e[BE],delete e[$E])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q0(t){return t.tag===5||t.tag===3||t.tag===4}function mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ma));else if(r!==4&&(t=t.child,t!==null))for(Gc(t,e,n),t=t.sibling;t!==null;)Gc(t,e,n),t=t.sibling}function Kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kc(t,e,n),t=t.sibling;t!==null;)Kc(t,e,n),t=t.sibling}var Ue=null,Ot=!1;function Dn(t,e,n){for(n=n.child;n!==null;)W0(t,e,n),n=n.sibling}function W0(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:Ze||os(n,e);case 6:var r=Ue,s=Ot;Ue=null,Dn(t,e,n),Ue=r,Ot=s,Ue!==null&&(Ot?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Ot?(t=Ue,n=n.stateNode,t.nodeType===8?Fu(t.parentNode,n):t.nodeType===1&&Fu(t,n),Mi(t)):Fu(Ue,n.stateNode));break;case 4:r=Ue,s=Ot,Ue=n.stateNode.containerInfo,Ot=!0,Dn(t,e,n),Ue=r,Ot=s;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&qc(n,e,o),s=s.next}while(s!==r)}Dn(t,e,n);break;case 1:if(!Ze&&(os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Se(n,e,l)}Dn(t,e,n);break;case 21:Dn(t,e,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,Dn(t,e,n),Ze=r):Dn(t,e,n);break;default:Dn(t,e,n)}}function gm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ix),e.forEach(function(r){var s=mx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,Ot=!1;break e;case 3:Ue=l.stateNode.containerInfo,Ot=!0;break e;case 4:Ue=l.stateNode.containerInfo,Ot=!0;break e}l=l.return}if(Ue===null)throw Error(U(160));W0(i,o,s),Ue=null,Ot=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Se(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)G0(e,t),e=e.sibling}function G0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Ht(t),r&4){try{xi(3,t,t.return),kl(3,t)}catch(R){Se(t,t.return,R)}try{xi(5,t,t.return)}catch(R){Se(t,t.return,R)}}break;case 1:Mt(e,t),Ht(t),r&512&&n!==null&&os(n,n.return);break;case 5:if(Mt(e,t),Ht(t),r&512&&n!==null&&os(n,n.return),t.flags&32){var s=t.stateNode;try{Ni(s,"")}catch(R){Se(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&my(s,i),vc(l,o);var h=vc(l,i);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?wy(s,p):d==="dangerouslySetInnerHTML"?vy(s,p):d==="children"?Ni(s,p):Oh(s,d,p,h)}switch(l){case"input":fc(s,i);break;case"textarea":gy(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?us(s,!!i.multiple,I,!1):m!==!!i.multiple&&(i.defaultValue!=null?us(s,!!i.multiple,i.defaultValue,!0):us(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ui]=i}catch(R){Se(t,t.return,R)}}break;case 6:if(Mt(e,t),Ht(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Se(t,t.return,R)}}break;case 3:if(Mt(e,t),Ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(R){Se(t,t.return,R)}break;case 4:Mt(e,t),Ht(t);break;case 13:Mt(e,t),Ht(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gd=Ce())),r&4&&gm(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(h=Ze)||d,Mt(e,t),Ze=h):Mt(e,t),Ht(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(p=q=d;q!==null;){switch(m=q,I=m.child,m.tag){case 0:case 11:case 14:case 15:xi(4,m,m.return);break;case 1:os(m,m.return);var A=m.stateNode;if(typeof A.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(R){Se(r,n,R)}}break;case 5:os(m,m.return);break;case 22:if(m.memoizedState!==null){vm(p);continue}}I!==null?(I.return=m,q=I):vm(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=_y("display",o))}catch(R){Se(t,t.return,R)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(R){Se(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Mt(e,t),Ht(t),r&4&&gm(t);break;case 21:break;default:Mt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(q0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ni(s,""),r.flags&=-33);var i=mm(t);Kc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=mm(t);Gc(t,l,o);break;default:throw Error(U(161))}}catch(u){Se(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ax(t,e,n){q=t,K0(t)}function K0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xo;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Ze;l=Xo;var h=Ze;if(Xo=o,(Ze=u)&&!h)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?_m(s):u!==null?(u.return=o,q=u):_m(s);for(;i!==null;)q=i,K0(i),i=i.sibling;q=s,Xo=l,Ze=h}ym(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):ym(t)}}function ym(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||kl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Mi(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ze||e.flags&512&&Wc(e)}catch(m){Se(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function vm(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function _m(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kl(4,e)}catch(u){Se(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Se(e,s,u)}}var i=e.return;try{Wc(e)}catch(u){Se(e,i,u)}break;case 5:var o=e.return;try{Wc(e)}catch(u){Se(e,o,u)}}}catch(u){Se(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var lx=Math.ceil,Wa=An.ReactCurrentDispatcher,pd=An.ReactCurrentOwner,Rt=An.ReactCurrentBatchConfig,re=0,je=null,Pe=null,$e=0,yt=0,as=lr(0),Ve=0,Wi=null,Nr=0,Al=0,md=0,Ti=null,ut=null,gd=0,Ts=1/0,cn=null,Ga=!1,Qc=null,qn=null,Jo=!1,jn=null,Ka=0,Si=0,Yc=null,ma=-1,ga=0;function it(){return re&6?Ce():ma!==-1?ma:ma=Ce()}function Wn(t){return t.mode&1?re&2&&$e!==0?$e&-$e:qE.transition!==null?(ga===0&&(ga=Dy()),ga):(t=ae,t!==0||(t=window.event,t=t===void 0?16:Fy(t.type)),t):1}function Ut(t,e,n,r){if(50<Si)throw Si=0,Yc=null,Error(U(185));so(t,n,r),(!(re&2)||t!==je)&&(t===je&&(!(re&2)&&(Al|=n),Ve===4&&Ln(t,$e)),pt(t,r),n===1&&re===0&&!(e.mode&1)&&(Ts=Ce()+500,Tl&&ur()))}function pt(t,e){var n=t.callbackNode;qw(t,e);var r=Na(t,t===je?$e:0);if(r===0)n!==null&&Cp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cp(n),e===1)t.tag===0?HE(wm.bind(null,t)):s0(wm.bind(null,t)),UE(function(){!(re&6)&&ur()}),n=null;else{switch(by(r)){case 1:n=Bh;break;case 4:n=Py;break;case 16:n=Pa;break;case 536870912:n=Ny;break;default:n=Pa}n=nv(n,Q0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Q0(t,e){if(ma=-1,ga=0,re&6)throw Error(U(327));var n=t.callbackNode;if(ps()&&t.callbackNode!==n)return null;var r=Na(t,t===je?$e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qa(t,r);else{e=r;var s=re;re|=2;var i=X0();(je!==t||$e!==e)&&(cn=null,Ts=Ce()+500,Sr(t,e));do try{hx();break}catch(l){Y0(t,l)}while(!0);td(),Wa.current=i,re=s,Pe!==null?e=0:(je=null,$e=0,e=Ve)}if(e!==0){if(e===2&&(s=Tc(t),s!==0&&(r=s,e=Xc(t,s))),e===1)throw n=Wi,Sr(t,0),Ln(t,r),pt(t,Ce()),n;if(e===6)Ln(t,r);else{if(s=t.current.alternate,!(r&30)&&!ux(s)&&(e=Qa(t,r),e===2&&(i=Tc(t),i!==0&&(r=i,e=Xc(t,i))),e===1))throw n=Wi,Sr(t,0),Ln(t,r),pt(t,Ce()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:vr(t,ut,cn);break;case 3:if(Ln(t,r),(r&130023424)===r&&(e=gd+500-Ce(),10<e)){if(Na(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){it(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nc(vr.bind(null,t,ut,cn),e);break}vr(t,ut,cn);break;case 4:if(Ln(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ft(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lx(r/1960))-r,10<r){t.timeoutHandle=Nc(vr.bind(null,t,ut,cn),r);break}vr(t,ut,cn);break;case 5:vr(t,ut,cn);break;default:throw Error(U(329))}}}return pt(t,Ce()),t.callbackNode===n?Q0.bind(null,t):null}function Xc(t,e){var n=Ti;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=Qa(t,e),t!==2&&(e=ut,ut=n,e!==null&&Jc(e)),t}function Jc(t){ut===null?ut=t:ut.push.apply(ut,t)}function ux(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!zt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ln(t,e){for(e&=~md,e&=~Al,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),r=1<<n;t[n]=-1,e&=~r}}function wm(t){if(re&6)throw Error(U(327));ps();var e=Na(t,0);if(!(e&1))return pt(t,Ce()),null;var n=Qa(t,e);if(t.tag!==0&&n===2){var r=Tc(t);r!==0&&(e=r,n=Xc(t,r))}if(n===1)throw n=Wi,Sr(t,0),Ln(t,e),pt(t,Ce()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,ut,cn),pt(t,Ce()),null}function yd(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Ts=Ce()+500,Tl&&ur())}}function Dr(t){jn!==null&&jn.tag===0&&!(re&6)&&ps();var e=re;re|=1;var n=Rt.transition,r=ae;try{if(Rt.transition=null,ae=1,t)return t()}finally{ae=r,Rt.transition=n,re=e,!(re&6)&&ur()}}function vd(){yt=as.current,me(as)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,FE(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(Jh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&La();break;case 3:Es(),me(dt),me(tt),ad();break;case 5:od(r);break;case 4:Es();break;case 13:me(ve);break;case 19:me(ve);break;case 10:nd(r.type._context);break;case 22:case 23:vd()}n=n.return}if(je=t,Pe=t=Gn(t.current,null),$e=yt=e,Ve=0,Wi=null,md=Al=Nr=0,ut=Ti=null,Er!==null){for(e=0;e<Er.length;e++)if(n=Er[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Er=null}return t}function Y0(t,e){do{var n=Pe;try{if(td(),da.current=qa,Ha){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ha=!1}if(Pr=0,Oe=be=_e=null,Ei=!1,$i=0,pd.current=null,n===null||n.return===null){Ve=1,Wi=e,Pe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=$e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var I=am(o);if(I!==null){I.flags&=-257,lm(I,o,l,i,e),I.mode&1&&om(i,h,e),e=I,u=h;var A=e.updateQueue;if(A===null){var R=new Set;R.add(u),e.updateQueue=R}else A.add(u);break e}else{if(!(e&1)){om(i,h,e),_d();break e}u=Error(U(426))}}else if(ge&&l.mode&1){var N=am(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),lm(N,o,l,i,e),Zh(xs(u,l));break e}}i=u=xs(u,l),Ve!==4&&(Ve=2),Ti===null?Ti=[i]:Ti.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=b0(i,u,e);em(i,v);break e;case 1:l=u;var w=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(qn===null||!qn.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=V0(i,l,e);em(i,P);break e}}i=i.return}while(i!==null)}Z0(n)}catch(M){e=M,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function X0(){var t=Wa.current;return Wa.current=qa,t===null?qa:t}function _d(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),je===null||!(Nr&268435455)&&!(Al&268435455)||Ln(je,$e)}function Qa(t,e){var n=re;re|=2;var r=X0();(je!==t||$e!==e)&&(cn=null,Sr(t,e));do try{cx();break}catch(s){Y0(t,s)}while(!0);if(td(),re=n,Wa.current=r,Pe!==null)throw Error(U(261));return je=null,$e=0,Ve}function cx(){for(;Pe!==null;)J0(Pe)}function hx(){for(;Pe!==null&&!Lw();)J0(Pe)}function J0(t){var e=tv(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?Z0(t):Pe=e,pd.current=null}function Z0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sx(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,Pe=null;return}}else if(n=rx(n,e,yt),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);Ve===0&&(Ve=5)}function vr(t,e,n){var r=ae,s=Rt.transition;try{Rt.transition=null,ae=1,dx(t,e,n,r)}finally{Rt.transition=s,ae=r}return null}function dx(t,e,n,r){do ps();while(jn!==null);if(re&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ww(t,i),t===je&&(Pe=je=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jo||(Jo=!0,nv(Pa,function(){return ps(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rt.transition,Rt.transition=null;var o=ae;ae=1;var l=re;re|=4,pd.current=null,ox(t,n),G0(n,t),DE(Rc),Da=!!Cc,Rc=Cc=null,t.current=n,ax(n),Ow(),re=l,ae=o,Rt.transition=i}else t.current=n;if(Jo&&(Jo=!1,jn=t,Ka=s),i=t.pendingLanes,i===0&&(qn=null),Uw(n.stateNode),pt(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ga)throw Ga=!1,t=Qc,Qc=null,t;return Ka&1&&t.tag!==0&&ps(),i=t.pendingLanes,i&1?t===Yc?Si++:(Si=0,Yc=t):Si=0,ur(),null}function ps(){if(jn!==null){var t=by(Ka),e=Rt.transition,n=ae;try{if(Rt.transition=null,ae=16>t?16:t,jn===null)var r=!1;else{if(t=jn,jn=null,Ka=0,re&6)throw Error(U(331));var s=re;for(re|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:xi(8,d,i)}var p=d.child;if(p!==null)p.return=d,q=p;else for(;q!==null;){d=q;var m=d.sibling,I=d.return;if(H0(d),d===h){q=null;break}if(m!==null){m.return=I,q=m;break}q=I}}}var A=i.alternate;if(A!==null){var R=A.child;if(R!==null){A.child=null;do{var N=R.sibling;R.sibling=null,R=N}while(R!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xi(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,q=v;break e}q=i.return}}var w=t.current;for(q=w;q!==null;){o=q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,q=x;else e:for(o=w;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kl(9,l)}}catch(M){Se(l,l.return,M)}if(l===o){q=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,q=P;break e}q=l.return}}if(re=s,ur(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(vl,t)}catch{}r=!0}return r}finally{ae=n,Rt.transition=e}}return!1}function Em(t,e,n){e=xs(n,e),e=b0(t,e,1),t=Hn(t,e,1),e=it(),t!==null&&(so(t,1,e),pt(t,e))}function Se(t,e,n){if(t.tag===3)Em(t,t,n);else for(;e!==null;){if(e.tag===3){Em(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){t=xs(n,t),t=V0(e,t,1),e=Hn(e,t,1),t=it(),e!==null&&(so(e,1,t),pt(e,t));break}}e=e.return}}function fx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=it(),t.pingedLanes|=t.suspendedLanes&n,je===t&&($e&n)===n&&(Ve===4||Ve===3&&($e&130023424)===$e&&500>Ce()-gd?Sr(t,0):md|=n),pt(t,e)}function ev(t,e){e===0&&(t.mode&1?(e=Bo,Bo<<=1,!(Bo&130023424)&&(Bo=4194304)):e=1);var n=it();t=wn(t,e),t!==null&&(so(t,e,n),pt(t,n))}function px(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ev(t,n)}function mx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),ev(t,n)}var tv;tv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dt.current)ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ht=!1,nx(t,e,n);ht=!!(t.flags&131072)}else ht=!1,ge&&e.flags&1048576&&i0(e,Fa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pa(t,e),t=e.pendingProps;var s=vs(e,tt.current);fs(e,n),s=ud(null,e,r,t,s,n);var i=cd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(r)?(i=!0,Oa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sd(e),s.updater=Il,e.stateNode=s,s._reactInternals=e,jc(e,r,t,n),e=zc(null,e,r,!0,i,n)):(e.tag=0,ge&&i&&Xh(e),st(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yx(r),t=Lt(r,t),s){case 0:e=Uc(null,e,r,t,n);break e;case 1:e=hm(null,e,r,t,n);break e;case 11:e=um(null,e,r,t,n);break e;case 14:e=cm(null,e,r,Lt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),Uc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),hm(t,e,r,s,n);case 3:e:{if(j0(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,h0(t,e),Ba(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xs(Error(U(423)),e),e=dm(t,e,r,n,s);break e}else if(r!==s){s=xs(Error(U(424)),e),e=dm(t,e,r,n,s);break e}else for(vt=$n(e.stateNode.containerInfo.firstChild),wt=e,ge=!0,jt=null,n=u0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_s(),r===s){e=En(t,e,n);break e}st(t,e,r,n)}e=e.child}return e;case 5:return d0(e),t===null&&Mc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Pc(r,s)?o=null:i!==null&&Pc(r,i)&&(e.flags|=32),O0(t,e),st(t,e,o,n),e.child;case 6:return t===null&&Mc(e),null;case 13:return F0(t,e,n);case 4:return id(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ws(e,null,r,n):st(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),um(t,e,r,s,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,he(Ua,r._currentValue),r._currentValue=o,i!==null)if(zt(i.value,o)){if(i.children===s.children&&!dt.current){e=En(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=mn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Lc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Lc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}st(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,fs(e,n),s=Nt(s),r=r(s),e.flags|=1,st(t,e,r,n),e.child;case 14:return r=e.type,s=Lt(r,e.pendingProps),s=Lt(r.type,s),cm(t,e,r,s,n);case 15:return M0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),pa(t,e),e.tag=1,ft(r)?(t=!0,Oa(e)):t=!1,fs(e,n),D0(e,r,s),jc(e,r,s,n),zc(null,e,r,!0,t,n);case 19:return U0(t,e,n);case 22:return L0(t,e,n)}throw Error(U(156,e.tag))};function nv(t,e){return Ry(t,e)}function gx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,r){return new gx(t,e,n,r)}function wd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yx(t){if(typeof t=="function")return wd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fh)return 11;if(t===Uh)return 14}return 2}function Gn(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ya(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xr:return Ir(n.children,s,i,e);case jh:o=8,s|=8;break;case lc:return t=Ct(12,n,e,s|2),t.elementType=lc,t.lanes=i,t;case uc:return t=Ct(13,n,e,s),t.elementType=uc,t.lanes=i,t;case cc:return t=Ct(19,n,e,s),t.elementType=cc,t.lanes=i,t;case dy:return Cl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cy:o=10;break e;case hy:o=9;break e;case Fh:o=11;break e;case Uh:o=14;break e;case bn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ct(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ir(t,e,n,r){return t=Ct(7,t,r,e),t.lanes=n,t}function Cl(t,e,n,r){return t=Ct(22,t,r,e),t.elementType=dy,t.lanes=n,t.stateNode={isHidden:!1},t}function Gu(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function Ku(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cu(0),this.expirationTimes=Cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ed(t,e,n,r,s,i,o,l,u){return t=new vx(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ct(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sd(i),t}function _x(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rv(t){if(!t)return Zn;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(ft(n))return r0(t,n,e)}return e}function sv(t,e,n,r,s,i,o,l,u){return t=Ed(n,r,!0,t,s,i,o,l,u),t.context=rv(null),n=t.current,r=it(),s=Wn(n),i=mn(r,s),i.callback=e??null,Hn(n,i,s),t.current.lanes=s,so(t,s,r),pt(t,r),t}function Rl(t,e,n,r){var s=e.current,i=it(),o=Wn(s);return n=rv(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(s,e,o),t!==null&&(Ut(t,s,o,i),ha(t,s,o)),o}function Ya(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xd(t,e){xm(t,e),(t=t.alternate)&&xm(t,e)}function wx(){return null}var iv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Td(t){this._internalRoot=t}Pl.prototype.render=Td.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Rl(t,e,null,null)};Pl.prototype.unmount=Td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dr(function(){Rl(null,t,null,null)}),e[_n]=null}};function Pl(t){this._internalRoot=t}Pl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ly();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mn.length&&e!==0&&e<Mn[n].priority;n++);Mn.splice(n,0,t),n===0&&jy(t)}};function Sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tm(){}function Ex(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Ya(o);i.call(h)}}var o=sv(e,r,t,0,null,!1,!1,"",Tm);return t._reactRootContainer=o,t[_n]=o.current,ji(t.nodeType===8?t.parentNode:t),Dr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Ya(u);l.call(h)}}var u=Ed(t,0,!1,null,null,!1,!1,"",Tm);return t._reactRootContainer=u,t[_n]=u.current,ji(t.nodeType===8?t.parentNode:t),Dr(function(){Rl(e,u,n,r)}),u}function Dl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Ya(o);l.call(u)}}Rl(e,o,t,s)}else o=Ex(n,e,t,s,r);return Ya(o)}Vy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ci(e.pendingLanes);n!==0&&($h(e,n|1),pt(e,Ce()),!(re&6)&&(Ts=Ce()+500,ur()))}break;case 13:Dr(function(){var r=wn(t,1);if(r!==null){var s=it();Ut(r,t,1,s)}}),xd(t,1)}};Hh=function(t){if(t.tag===13){var e=wn(t,134217728);if(e!==null){var n=it();Ut(e,t,134217728,n)}xd(t,134217728)}};My=function(t){if(t.tag===13){var e=Wn(t),n=wn(t,e);if(n!==null){var r=it();Ut(n,t,e,r)}xd(t,e)}};Ly=function(){return ae};Oy=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};wc=function(t,e,n){switch(e){case"input":if(fc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xl(r);if(!s)throw Error(U(90));py(r),fc(r,s)}}}break;case"textarea":gy(t,n);break;case"select":e=n.value,e!=null&&us(t,!!n.multiple,e,!1)}};Ty=yd;Sy=Dr;var xx={usingClientEntryPoint:!1,Events:[oo,ts,xl,Ey,xy,yd]},oi={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tx={bundleType:oi.bundleType,version:oi.version,rendererPackageName:oi.rendererPackageName,rendererConfig:oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ay(t),t===null?null:t.stateNode},findFiberByHostInstance:oi.findFiberByHostInstance||wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{vl=Zo.inject(Tx),Kt=Zo}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xx;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(e))throw Error(U(200));return _x(t,e,null,n)};xt.createRoot=function(t,e){if(!Sd(t))throw Error(U(299));var n=!1,r="",s=iv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ed(t,1,!1,null,null,n,!1,r,s),t[_n]=e.current,ji(t.nodeType===8?t.parentNode:t),new Td(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Ay(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return Dr(t)};xt.hydrate=function(t,e,n){if(!Nl(e))throw Error(U(200));return Dl(null,t,e,!0,n)};xt.hydrateRoot=function(t,e,n){if(!Sd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=iv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sv(e,null,t,1,n??null,s,!1,i,o),t[_n]=e.current,ji(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pl(e)};xt.render=function(t,e,n){if(!Nl(e))throw Error(U(200));return Dl(null,t,e,!1,n)};xt.unmountComponentAtNode=function(t){if(!Nl(t))throw Error(U(40));return t._reactRootContainer?(Dr(function(){Dl(null,null,t,!1,function(){t._reactRootContainer=null,t[_n]=null})}),!0):!1};xt.unstable_batchedUpdates=yd;xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nl(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Dl(t,e,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function ov(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ov)}catch(t){console.error(t)}}ov(),oy.exports=xt;var Sx=oy.exports,av,Sm=Sx;av=Sm.createRoot,Sm.hydrateRoot;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Im="popstate";function Ix(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Zc("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Gi(s)}return Ax(e,n,null,t)}function we(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kx(){return Math.random().toString(36).substring(2,10)}function km(t,e){return{usr:t.state,key:t.key,idx:e}}function Zc(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ds(e):e,state:n,key:e&&e.key||r||kx()}}function Gi({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ds(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Ax(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",u=null,h=d();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function d(){return(o.state||{idx:null}).idx}function p(){l="POP";let N=d(),v=N==null?null:N-h;h=N,u&&u({action:l,location:R.location,delta:v})}function m(N,v){l="PUSH";let w=Zc(R.location,N,v);h=d()+1;let x=km(w,h),P=R.createHref(w);try{o.pushState(x,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(P)}i&&u&&u({action:l,location:R.location,delta:1})}function I(N,v){l="REPLACE";let w=Zc(R.location,N,v);h=d();let x=km(w,h),P=R.createHref(w);o.replaceState(x,"",P),i&&u&&u({action:l,location:R.location,delta:0})}function A(N){return Cx(N)}let R={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Im,p),u=N,()=>{s.removeEventListener(Im,p),u=null}},createHref(N){return e(s,N)},createURL:A,encodeLocation(N){let v=A(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:I,go(N){return o.go(N)}};return R}function Cx(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),we(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Gi(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function lv(t,e,n="/"){return Rx(t,e,n,!1)}function Rx(t,e,n,r){let s=typeof e=="string"?Ds(e):e,i=xn(s.pathname||"/",n);if(i==null)return null;let o=uv(t);Px(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=zx(i);l=Fx(o[u],h,r)}return l}function uv(t,e=[],n=[],r="",s=!1){let i=(o,l,u=s,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&u)return;we(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let p=gn([r,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&(we(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),uv(o.children,e,m,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:Ox(p,o.index),routesMeta:m})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let h of cv(o.path))i(o,l,!0,h)}),e}function cv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=cv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function Px(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Nx=/^:[\w-]+$/,Dx=3,bx=2,Vx=1,Mx=10,Lx=-2,Am=t=>t==="*";function Ox(t,e){let n=t.split("/"),r=n.length;return n.some(Am)&&(r+=Lx),e&&(r+=bx),n.filter(s=>!Am(s)).reduce((s,i)=>s+(Nx.test(i)?Dx:i===""?Vx:Mx),r)}function jx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Fx(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=Xa({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),m=u.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=Xa({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:gn([i,p.pathname]),pathnameBase:qx(gn([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=gn([i,p.pathnameBase]))}return o}function Xa(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ux(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,{paramName:d,isOptional:p},m)=>{if(d==="*"){let A=l[m]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const I=l[m];return p&&!I?h[d]=void 0:h[d]=(I||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function Ux(t,e=!1,n=!0){Bt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function xn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bx=t=>hv.test(t);function $x(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ds(t):t,i;if(n)if(Bx(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Bt(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=Cm(n.substring(1),"/"):i=Cm(n,e)}else i=e;return{pathname:i,search:Wx(r),hash:Gx(s)}}function Cm(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qu(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dv(t){let e=Hx(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function fv(t,e,n,r=!1){let s;typeof t=="string"?s=Ds(t):(s={...t},we(!s.pathname||!s.pathname.includes("?"),Qu("?","pathname","search",s)),we(!s.pathname||!s.pathname.includes("#"),Qu("#","pathname","hash",s)),we(!s.search||!s.search.includes("#"),Qu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=$x(s,l),h=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}var gn=t=>t.join("/").replace(/\/\/+/g,"/"),qx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Wx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Kx=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Qx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Yx(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mv(t,e){let n=t;if(typeof n!="string"||!hv.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(pv)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=xn(o.pathname,e);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:s=!0}catch{Bt(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gv=["POST","PUT","PATCH","DELETE"];new Set(gv);var Xx=["GET",...gv];new Set(Xx);var bs=b.createContext(null);bs.displayName="DataRouter";var bl=b.createContext(null);bl.displayName="DataRouterState";var Jx=b.createContext(!1),yv=b.createContext({isTransitioning:!1});yv.displayName="ViewTransition";var Zx=b.createContext(new Map);Zx.displayName="Fetchers";var e2=b.createContext(null);e2.displayName="Await";var bt=b.createContext(null);bt.displayName="Navigation";var lo=b.createContext(null);lo.displayName="Location";var Cn=b.createContext({outlet:null,matches:[],isDataRoute:!1});Cn.displayName="Route";var Id=b.createContext(null);Id.displayName="RouteError";var vv="REACT_ROUTER_ERROR",t2="REDIRECT",n2="ROUTE_ERROR_RESPONSE";function r2(t){if(t.startsWith(`${vv}:${t2}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function s2(t){if(t.startsWith(`${vv}:${n2}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Kx(e.status,e.statusText,e.data)}catch{}}function i2(t,{relative:e}={}){we(uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(bt),{hash:s,pathname:i,search:o}=co(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:gn([n,i])),r.createHref({pathname:l,search:o,hash:s})}function uo(){return b.useContext(lo)!=null}function Or(){return we(uo(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(lo).location}var _v="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wv(t){b.useContext(bt).static||b.useLayoutEffect(t)}function o2(){let{isDataRoute:t}=b.useContext(Cn);return t?_2():a2()}function a2(){we(uo(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(bs),{basename:e,navigator:n}=b.useContext(bt),{matches:r}=b.useContext(Cn),{pathname:s}=Or(),i=JSON.stringify(dv(r)),o=b.useRef(!1);return wv(()=>{o.current=!0}),b.useCallback((u,h={})=>{if(Bt(o.current,_v),!o.current)return;if(typeof u=="number"){n.go(u);return}let d=fv(u,JSON.parse(i),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:gn([e,d.pathname])),(h.replace?n.replace:n.push)(d,h.state,h)},[e,n,i,s,t])}b.createContext(null);function co(t,{relative:e}={}){let{matches:n}=b.useContext(Cn),{pathname:r}=Or(),s=JSON.stringify(dv(n));return b.useMemo(()=>fv(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function l2(t,e){return Ev(t,e)}function Ev(t,e,n,r,s){var w;we(uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=b.useContext(bt),{matches:o}=b.useContext(Cn),l=o[o.length-1],u=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let x=p&&p.path||"";Tv(h,!p||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let m=Or(),I;if(e){let x=typeof e=="string"?Ds(e):e;we(d==="/"||((w=x.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${x.pathname}" was given in the \`location\` prop.`),I=x}else I=m;let A=I.pathname||"/",R=A;if(d!=="/"){let x=d.replace(/^\//,"").split("/");R="/"+A.replace(/^\//,"").split("/").slice(x.length).join("/")}let N=lv(t,{pathname:R});Bt(p||N!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Bt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=f2(N&&N.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:gn([d,i.encodeLocation?i.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:gn([d,i.encodeLocation?i.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,n,r,s);return e&&v?b.createElement(lo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},v):v}function u2(){let t=v2(),e=Qx(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,o)}var c2=b.createElement(u2,null),xv=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=s2(t.digest);n&&(t=n)}let e=t!==void 0?b.createElement(Cn.Provider,{value:this.props.routeContext},b.createElement(Id.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?b.createElement(h2,{error:t},e):e}};xv.contextType=Jx;var Yu=new WeakMap;function h2({children:t,error:e}){let{basename:n}=b.useContext(bt);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=r2(e.digest);if(r){let s=Yu.get(e);if(s)throw s;let i=mv(r.location,n);if(pv&&!Yu.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw Yu.set(e,o),o}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function d2({routeContext:t,match:e,children:n}){let r=b.useContext(bs);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Cn.Provider,{value:t},n)}function f2(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);we(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(n)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:m,errors:I}=n,A=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!I||I[p.route.id]===void 0);if(p.route.lazy||A){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let h=n&&r?(d,p)=>{var m,I;r(d,{location:n.location,params:((I=(m=n.matches)==null?void 0:m[0])==null?void 0:I.params)??{},unstable_pattern:Yx(n.matches),errorInfo:p})}:void 0;return i.reduceRight((d,p,m)=>{let I,A=!1,R=null,N=null;n&&(I=o&&p.route.id?o[p.route.id]:void 0,R=p.route.errorElement||c2,l&&(u<0&&m===0?(Tv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,N=null):u===m&&(A=!0,N=p.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,m+1)),w=()=>{let x;return I?x=R:A?x=N:p.route.Component?x=b.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=d,b.createElement(d2,{match:p,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?b.createElement(xv,{location:n.location,revalidation:n.revalidation,component:R,error:I,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:h}):w()},null)}function kd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p2(t){let e=b.useContext(bs);return we(e,kd(t)),e}function m2(t){let e=b.useContext(bl);return we(e,kd(t)),e}function g2(t){let e=b.useContext(Cn);return we(e,kd(t)),e}function Ad(t){let e=g2(t),n=e.matches[e.matches.length-1];return we(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function y2(){return Ad("useRouteId")}function v2(){var r;let t=b.useContext(Id),e=m2("useRouteError"),n=Ad("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function _2(){let{router:t}=p2("useNavigate"),e=Ad("useNavigate"),n=b.useRef(!1);return wv(()=>{n.current=!0}),b.useCallback(async(s,i={})=>{Bt(n.current,_v),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var Rm={};function Tv(t,e,n){!e&&!Rm[t]&&(Rm[t]=!0,Bt(!1,n))}b.memo(w2);function w2({routes:t,future:e,state:n,onError:r}){return Ev(t,void 0,n,r,e)}function eh(t){we(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function E2({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){we(!uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[l,s,i,o]);typeof n=="string"&&(n=Ds(n));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:I="default"}=n,A=b.useMemo(()=>{let R=xn(h,l);return R==null?null:{location:{pathname:R,search:d,hash:p,state:m,key:I},navigationType:r}},[l,h,d,p,m,I,r]);return Bt(A!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:b.createElement(bt.Provider,{value:u},b.createElement(lo.Provider,{children:e,value:A}))}function x2({children:t,location:e}){return l2(th(t),e)}function th(t,e=[]){let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,th(r.props.children,i));return}we(r.type===eh,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),we(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=th(r.props.children,i)),n.push(o)}),n}var va="get",_a="application/x-www-form-urlencoded";function Vl(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function T2(t){return Vl(t)&&t.tagName.toLowerCase()==="button"}function S2(t){return Vl(t)&&t.tagName.toLowerCase()==="form"}function I2(t){return Vl(t)&&t.tagName.toLowerCase()==="input"}function k2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function A2(t,e){return t.button===0&&(!e||e==="_self")&&!k2(t)}var ea=null;function C2(){if(ea===null)try{new FormData(document.createElement("form"),0),ea=!1}catch{ea=!0}return ea}var R2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xu(t){return t!=null&&!R2.has(t)?(Bt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_a}"`),null):t}function P2(t,e){let n,r,s,i,o;if(S2(t)){let l=t.getAttribute("action");r=l?xn(l,e):null,n=t.getAttribute("method")||va,s=Xu(t.getAttribute("enctype"))||_a,i=new FormData(t)}else if(T2(t)||I2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(r=u?xn(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||va,s=Xu(t.getAttribute("formenctype"))||Xu(l.getAttribute("enctype"))||_a,i=new FormData(l,t),!C2()){let{name:h,type:d,value:p}=t;if(d==="image"){let m=h?`${h}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else h&&i.append(h,p)}}else{if(Vl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=va,r=null,s=_a,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cd(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function N2(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&xn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function D2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function b2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function V2(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await D2(i,n);return o.links?o.links():[]}return[]}));return j2(r.flat(1).filter(b2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Pm(t,e,n,r,s,i){let o=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,l=(u,h)=>{var d;return n[h].pathname!==u.pathname||((d=n[h].route.path)==null?void 0:d.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,h)=>o(u,h)||l(u,h)):i==="data"?e.filter((u,h)=>{var p;let d=r.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,h)||l(u,h))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function M2(t,e,{includeHydrateFallback:n}={}){return L2(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function L2(t){return[...new Set(t)]}function O2(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function j2(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(O2(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function Sv(){let t=b.useContext(bs);return Cd(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function F2(){let t=b.useContext(bl);return Cd(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Rd=b.createContext(void 0);Rd.displayName="FrameworkContext";function Iv(){let t=b.useContext(Rd);return Cd(t,"You must render this element inside a <HydratedRouter> element"),t}function U2(t,e){let n=b.useContext(Rd),[r,s]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:d,onTouchStart:p}=e,m=b.useRef(null);b.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let R=v=>{v.forEach(w=>{o(w.isIntersecting)})},N=new IntersectionObserver(R,{threshold:.5});return m.current&&N.observe(m.current),()=>{N.disconnect()}}},[t]),b.useEffect(()=>{if(r){let R=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(R)}}},[r]);let I=()=>{s(!0)},A=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:ai(l,I),onBlur:ai(u,A),onMouseEnter:ai(h,I),onMouseLeave:ai(d,A),onTouchStart:ai(p,I)}]:[!1,m,{}]}function ai(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function z2({page:t,...e}){let{router:n}=Sv(),r=b.useMemo(()=>lv(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement($2,{page:t,matches:r,...e}):null}function B2(t){let{manifest:e,routeModules:n}=Iv(),[r,s]=b.useState([]);return b.useEffect(()=>{let i=!1;return V2(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function $2({page:t,matches:e,...n}){let r=Or(),{future:s,manifest:i,routeModules:o}=Iv(),{basename:l}=Sv(),{loaderData:u,matches:h}=F2(),d=b.useMemo(()=>Pm(t,e,h,i,r,"data"),[t,e,h,i,r]),p=b.useMemo(()=>Pm(t,e,h,i,r,"assets"),[t,e,h,i,r]),m=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let R=new Set,N=!1;if(e.forEach(w=>{var P;let x=i.routes[w.route.id];!x||!x.hasLoader||(!d.some(M=>M.route.id===w.route.id)&&w.route.id in u&&((P=o[w.route.id])!=null&&P.shouldRevalidate)||x.hasClientLoader?N=!0:R.add(w.route.id))}),R.size===0)return[];let v=N2(t,l,s.unstable_trailingSlashAwareDataRequests,"data");return N&&R.size>0&&v.searchParams.set("_routes",e.filter(w=>R.has(w.route.id)).map(w=>w.route.id).join(",")),[v.pathname+v.search]},[l,s.unstable_trailingSlashAwareDataRequests,u,r,i,d,e,t,o]),I=b.useMemo(()=>M2(p,i),[p,i]),A=B2(p);return b.createElement(b.Fragment,null,m.map(R=>b.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),I.map(R=>b.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),A.map(({key:R,link:N})=>b.createElement("link",{key:R,nonce:n.nonce,...N})))}function H2(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var q2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{q2&&(window.__reactRouterVersion="7.12.0")}catch{}function W2({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=b.useRef();s.current==null&&(s.current=Ix({window:r,v5Compat:!0}));let i=s.current,[o,l]=b.useState({action:i.action,location:i.location}),u=b.useCallback(h=>{n===!1?l(h):b.startTransition(()=>l(h))},[n]);return b.useLayoutEffect(()=>i.listen(u),[i,u]),b.createElement(E2,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ki=b.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:m,...I},A){let{basename:R,unstable_useTransitions:N}=b.useContext(bt),v=typeof h=="string"&&kv.test(h),w=mv(h,R);h=w.to;let x=i2(h,{relative:s}),[P,M,O]=U2(r,I),E=Y2(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:m,unstable_useTransitions:N});function y(S){e&&e(S),S.defaultPrevented||E(S)}let T=b.createElement("a",{...I,...O,href:w.absoluteURL||x,onClick:w.isExternal||i?e:y,ref:H2(A,M),target:u,"data-discover":!v&&n==="render"?"true":void 0});return P&&!v?b.createElement(b.Fragment,null,T,b.createElement(z2,{page:x})):T});Ki.displayName="Link";var G2=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:u,...h},d){let p=co(o,{relative:h.relative}),m=Or(),I=b.useContext(bl),{navigator:A,basename:R}=b.useContext(bt),N=I!=null&&tT(p)&&l===!0,v=A.encodeLocation?A.encodeLocation(p).pathname:p.pathname,w=m.pathname,x=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(w=w.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&R&&(x=xn(x,R)||x);const P=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=w===v||!s&&w.startsWith(v)&&w.charAt(P)==="/",O=x!=null&&(x===v||!s&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:M,isPending:O,isTransitioning:N},y=M?e:void 0,T;typeof r=="function"?T=r(E):T=[r,M?"active":null,O?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let S=typeof i=="function"?i(E):i;return b.createElement(Ki,{...h,"aria-current":y,className:T,ref:d,style:S,to:o,viewTransition:l},typeof u=="function"?u(E):u)});G2.displayName="NavLink";var K2=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=va,action:l,onSubmit:u,relative:h,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:m,...I},A)=>{let{unstable_useTransitions:R}=b.useContext(bt),N=Z2(),v=eT(l,{relative:h}),w=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&kv.test(l),P=M=>{if(u&&u(M),M.defaultPrevented)return;M.preventDefault();let O=M.nativeEvent.submitter,E=(O==null?void 0:O.getAttribute("formmethod"))||o,y=()=>N(O||M.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:s,state:i,relative:h,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:m});R&&n!==!1?b.startTransition(()=>y()):y()};return b.createElement("form",{ref:A,method:w,action:v,onSubmit:r?u:P,...I,"data-discover":!x&&t==="render"?"true":void 0})});K2.displayName="Form";function Q2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Av(t){let e=b.useContext(bs);return we(e,Q2(t)),e}function Y2(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:u}={}){let h=o2(),d=Or(),p=co(t,{relative:i});return b.useCallback(m=>{if(A2(m,e)){m.preventDefault();let I=n!==void 0?n:Gi(d)===Gi(p),A=()=>h(t,{replace:I,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});u?b.startTransition(()=>A()):A()}},[d,h,p,n,r,e,t,s,i,o,l,u])}var X2=0,J2=()=>`__${String(++X2)}__`;function Z2(){let{router:t}=Av("useSubmit"),{basename:e}=b.useContext(bt),n=y2(),r=t.fetch,s=t.navigate;return b.useCallback(async(i,o={})=>{let{action:l,method:u,encType:h,formData:d,body:p}=P2(i,e);if(o.navigate===!1){let m=o.fetcherKey||J2();await r(m,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:p,formMethod:o.method||u,formEncType:o.encType||h,flushSync:o.flushSync})}else await s(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:p,formMethod:o.method||u,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function eT(t,{relative:e}={}){let{basename:n}=b.useContext(bt),r=b.useContext(Cn);we(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...co(t||".",{relative:e})},o=Or();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(p=>p).forEach(p=>l.append("index",p));let d=l.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:gn([n,i.pathname])),Gi(i)}function tT(t,{relative:e}={}){let n=b.useContext(yv);we(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Av("useViewTransitionState"),s=co(t,{relative:e});if(!n.isTransitioning)return!1;let i=xn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=xn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Xa(s.pathname,o)!=null||Xa(s.pathname,i)!=null}const nT=()=>{};var Nm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,I=h&63;u||(I=64,o||(m=64)),r.push(n[d],n[p],n[m],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new sT;const m=i<<2|l>>4;if(r.push(m),h!==64){const I=l<<4&240|h>>2;if(r.push(I),p!==64){const A=h<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iT=function(t){const e=Cv(t);return Rv.encodeByteArray(e,!0)},Ja=function(t){return iT(t).replace(/\./g,"")},oT=function(t){try{return Rv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=()=>aT().__FIREBASE_DEFAULTS__,uT=()=>{if(typeof process>"u"||typeof Nm>"u")return;const t=Nm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oT(t[1]);return e&&JSON.parse(e)},Pd=()=>{try{return nT()||lT()||uT()||cT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hT=t=>{var e,n;return(n=(e=Pd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dT=t=>{const e=hT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pv=()=>{var t;return(t=Pd())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ja(JSON.stringify(n)),Ja(JSON.stringify(o)),""].join(".")}const Ii={};function gT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ii))Ii[e]?t.emulator.push(e):t.prod.push(e);return t}function yT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dm=!1;function vT(t,e){if(typeof window>"u"||typeof document>"u"||!Nd(window.location.host)||Ii[t]===e||Ii[t]||Dm)return;Ii[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=gT().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,I){m.setAttribute("width","24"),m.setAttribute("id",I),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Dm=!0,o()},m}function d(m,I){m.setAttribute("id",I),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=yT(r),I=n("text"),A=document.getElementById(I)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),v=n("preprendIcon"),w=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;l(x),d(N,R);const P=h();u(w,v),x.append(w,A,N,P),document.body.appendChild(x)}i?(A.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wT(){var t;const e=(t=Pd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ET(){return!wT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xT(){try{return typeof indexedDB=="object"}catch{return!1}}function TT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="FirebaseError";class Vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ST,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nv.prototype.create)}}class Nv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?IT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Vs(s,l,r)}}function IT(t,e){return t.replace(kT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kT=/\{\$([^}]+)}/g;function Za(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(bm(i)&&bm(o)){if(!Za(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RT(e))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=_r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_r){return this.instances.has(e)}getOptions(e=_r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_r){return this.component?this.component.multipleInstances?e:_r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CT(t){return t===_r?void 0:t}function RT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const NT={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},DT=ne.INFO,bT={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},VT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dv{constructor(e){this.name=e,this._logLevel=DT,this._logHandler=VT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const MT=(t,e)=>e.some(n=>t instanceof n);let Vm,Mm;function LT(){return Vm||(Vm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OT(){return Mm||(Mm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bv=new WeakMap,nh=new WeakMap,Vv=new WeakMap,Ju=new WeakMap,Dd=new WeakMap;function jT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Kn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bv.set(n,t)}).catch(()=>{}),Dd.set(e,t),e}function FT(t){if(nh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nh.set(t,e)}let rh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UT(t){rh=t(rh)}function zT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zu(this),e,...n);return Vv.set(r,e.sort?e.sort():[e]),Kn(r)}:OT().includes(t)?function(...e){return t.apply(Zu(this),e),Kn(bv.get(this))}:function(...e){return Kn(t.apply(Zu(this),e))}}function BT(t){return typeof t=="function"?zT(t):(t instanceof IDBTransaction&&FT(t),MT(t,LT())?new Proxy(t,rh):t)}function Kn(t){if(t instanceof IDBRequest)return jT(t);if(Ju.has(t))return Ju.get(t);const e=BT(t);return e!==t&&(Ju.set(t,e),Dd.set(e,t)),e}const Zu=t=>Dd.get(t);function $T(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Kn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kn(o.result),u.oldVersion,u.newVersion,Kn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const HT=["get","getKey","getAll","getAllKeys","count"],qT=["put","add","delete","clear"],ec=new Map;function Lm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ec.get(e))return ec.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=qT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||HT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return ec.set(e,i),i}UT(t=>({...t,get:(e,n,r)=>Lm(e,n)||t.get(e,n,r),has:(e,n)=>!!Lm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sh="@firebase/app",Om="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Dv("@firebase/app"),KT="@firebase/app-compat",QT="@firebase/analytics-compat",YT="@firebase/analytics",XT="@firebase/app-check-compat",JT="@firebase/app-check",ZT="@firebase/auth",eS="@firebase/auth-compat",tS="@firebase/database",nS="@firebase/data-connect",rS="@firebase/database-compat",sS="@firebase/functions",iS="@firebase/functions-compat",oS="@firebase/installations",aS="@firebase/installations-compat",lS="@firebase/messaging",uS="@firebase/messaging-compat",cS="@firebase/performance",hS="@firebase/performance-compat",dS="@firebase/remote-config",fS="@firebase/remote-config-compat",pS="@firebase/storage",mS="@firebase/storage-compat",gS="@firebase/firestore",yS="@firebase/ai",vS="@firebase/firestore-compat",_S="firebase",wS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="[DEFAULT]",ES={[sh]:"fire-core",[KT]:"fire-core-compat",[YT]:"fire-analytics",[QT]:"fire-analytics-compat",[JT]:"fire-app-check",[XT]:"fire-app-check-compat",[ZT]:"fire-auth",[eS]:"fire-auth-compat",[tS]:"fire-rtdb",[nS]:"fire-data-connect",[rS]:"fire-rtdb-compat",[sS]:"fire-fn",[iS]:"fire-fn-compat",[oS]:"fire-iid",[aS]:"fire-iid-compat",[lS]:"fire-fcm",[uS]:"fire-fcm-compat",[cS]:"fire-perf",[hS]:"fire-perf-compat",[dS]:"fire-rc",[fS]:"fire-rc-compat",[pS]:"fire-gcs",[mS]:"fire-gcs-compat",[gS]:"fire-fst",[vS]:"fire-fst-compat",[yS]:"fire-vertex","fire-js":"fire-js",[_S]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new Map,xS=new Map,oh=new Map;function jm(t,e){try{t.container.addComponent(e)}catch(n){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tl(t){const e=t.name;if(oh.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;oh.set(e,t);for(const n of el.values())jm(n,t);for(const n of xS.values())jm(n,t);return!0}function TS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function SS(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new Nv("app","Firebase",IS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=wS;function Mv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ih,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Qn.create("bad-app-name",{appName:String(s)});if(n||(n=Pv()),!n)throw Qn.create("no-options");const i=el.get(s);if(i){if(Za(n,i.options)&&Za(r,i.config))return i;throw Qn.create("duplicate-app",{appName:s})}const o=new PT(s);for(const u of oh.values())o.addComponent(u);const l=new kS(n,r,o);return el.set(s,l),l}function CS(t=ih){const e=el.get(t);if(!e&&t===ih&&Pv())return Mv();if(!e)throw Qn.create("no-app",{appName:t});return e}function ms(t,e,n){var r;let s=(r=ES[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(l.join(" "));return}tl(new Qi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firebase-heartbeat-database",PS=1,Yi="firebase-heartbeat-store";let tc=null;function Lv(){return tc||(tc=$T(RS,PS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),tc}async function NS(t){try{const n=(await Lv()).transaction(Yi),r=await n.objectStore(Yi).get(Ov(t));return await n.done,r}catch(e){if(e instanceof Vs)Tn.warn(e.message);else{const n=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tn.warn(n.message)}}}async function Fm(t,e){try{const r=(await Lv()).transaction(Yi,"readwrite");await r.objectStore(Yi).put(e,Ov(t)),await r.done}catch(n){if(n instanceof Vs)Tn.warn(n.message);else{const r=Qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tn.warn(r.message)}}}function Ov(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=1024,bS=30;class VS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Um();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>bS){const o=OS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Um(),{heartbeatsToSend:r,unsentEntries:s}=MS(this._heartbeatsCache.heartbeats),i=Ja(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Tn.warn(n),""}}}function Um(){return new Date().toISOString().substring(0,10)}function MS(t,e=DS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),zm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xT()?TT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zm(t){return Ja(JSON.stringify({version:2,heartbeats:t})).length}function OS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){tl(new Qi("platform-logger",e=>new WT(e),"PRIVATE")),tl(new Qi("heartbeat",e=>new VS(e),"PRIVATE")),ms(sh,Om,t),ms(sh,Om,"esm2017"),ms("fire-js","")}jS("");var FS="firebase",US="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(FS,US,"app");var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yn,jv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function T(){}T.prototype=y.prototype,E.D=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(S,C,D){for(var k=Array(arguments.length-2),St=2;St<arguments.length;St++)k[St-2]=arguments[St];return y.prototype[C].apply(S,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,T){T||(T=0);var S=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)S[C]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(C=0;16>C;++C)S[C]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],C=E.g[2];var D=E.g[3],k=y+(D^T&(C^D))+S[0]+3614090360&4294967295;y=T+(k<<7&4294967295|k>>>25),k=D+(C^y&(T^C))+S[1]+3905402710&4294967295,D=y+(k<<12&4294967295|k>>>20),k=C+(T^D&(y^T))+S[2]+606105819&4294967295,C=D+(k<<17&4294967295|k>>>15),k=T+(y^C&(D^y))+S[3]+3250441966&4294967295,T=C+(k<<22&4294967295|k>>>10),k=y+(D^T&(C^D))+S[4]+4118548399&4294967295,y=T+(k<<7&4294967295|k>>>25),k=D+(C^y&(T^C))+S[5]+1200080426&4294967295,D=y+(k<<12&4294967295|k>>>20),k=C+(T^D&(y^T))+S[6]+2821735955&4294967295,C=D+(k<<17&4294967295|k>>>15),k=T+(y^C&(D^y))+S[7]+4249261313&4294967295,T=C+(k<<22&4294967295|k>>>10),k=y+(D^T&(C^D))+S[8]+1770035416&4294967295,y=T+(k<<7&4294967295|k>>>25),k=D+(C^y&(T^C))+S[9]+2336552879&4294967295,D=y+(k<<12&4294967295|k>>>20),k=C+(T^D&(y^T))+S[10]+4294925233&4294967295,C=D+(k<<17&4294967295|k>>>15),k=T+(y^C&(D^y))+S[11]+2304563134&4294967295,T=C+(k<<22&4294967295|k>>>10),k=y+(D^T&(C^D))+S[12]+1804603682&4294967295,y=T+(k<<7&4294967295|k>>>25),k=D+(C^y&(T^C))+S[13]+4254626195&4294967295,D=y+(k<<12&4294967295|k>>>20),k=C+(T^D&(y^T))+S[14]+2792965006&4294967295,C=D+(k<<17&4294967295|k>>>15),k=T+(y^C&(D^y))+S[15]+1236535329&4294967295,T=C+(k<<22&4294967295|k>>>10),k=y+(C^D&(T^C))+S[1]+4129170786&4294967295,y=T+(k<<5&4294967295|k>>>27),k=D+(T^C&(y^T))+S[6]+3225465664&4294967295,D=y+(k<<9&4294967295|k>>>23),k=C+(y^T&(D^y))+S[11]+643717713&4294967295,C=D+(k<<14&4294967295|k>>>18),k=T+(D^y&(C^D))+S[0]+3921069994&4294967295,T=C+(k<<20&4294967295|k>>>12),k=y+(C^D&(T^C))+S[5]+3593408605&4294967295,y=T+(k<<5&4294967295|k>>>27),k=D+(T^C&(y^T))+S[10]+38016083&4294967295,D=y+(k<<9&4294967295|k>>>23),k=C+(y^T&(D^y))+S[15]+3634488961&4294967295,C=D+(k<<14&4294967295|k>>>18),k=T+(D^y&(C^D))+S[4]+3889429448&4294967295,T=C+(k<<20&4294967295|k>>>12),k=y+(C^D&(T^C))+S[9]+568446438&4294967295,y=T+(k<<5&4294967295|k>>>27),k=D+(T^C&(y^T))+S[14]+3275163606&4294967295,D=y+(k<<9&4294967295|k>>>23),k=C+(y^T&(D^y))+S[3]+4107603335&4294967295,C=D+(k<<14&4294967295|k>>>18),k=T+(D^y&(C^D))+S[8]+1163531501&4294967295,T=C+(k<<20&4294967295|k>>>12),k=y+(C^D&(T^C))+S[13]+2850285829&4294967295,y=T+(k<<5&4294967295|k>>>27),k=D+(T^C&(y^T))+S[2]+4243563512&4294967295,D=y+(k<<9&4294967295|k>>>23),k=C+(y^T&(D^y))+S[7]+1735328473&4294967295,C=D+(k<<14&4294967295|k>>>18),k=T+(D^y&(C^D))+S[12]+2368359562&4294967295,T=C+(k<<20&4294967295|k>>>12),k=y+(T^C^D)+S[5]+4294588738&4294967295,y=T+(k<<4&4294967295|k>>>28),k=D+(y^T^C)+S[8]+2272392833&4294967295,D=y+(k<<11&4294967295|k>>>21),k=C+(D^y^T)+S[11]+1839030562&4294967295,C=D+(k<<16&4294967295|k>>>16),k=T+(C^D^y)+S[14]+4259657740&4294967295,T=C+(k<<23&4294967295|k>>>9),k=y+(T^C^D)+S[1]+2763975236&4294967295,y=T+(k<<4&4294967295|k>>>28),k=D+(y^T^C)+S[4]+1272893353&4294967295,D=y+(k<<11&4294967295|k>>>21),k=C+(D^y^T)+S[7]+4139469664&4294967295,C=D+(k<<16&4294967295|k>>>16),k=T+(C^D^y)+S[10]+3200236656&4294967295,T=C+(k<<23&4294967295|k>>>9),k=y+(T^C^D)+S[13]+681279174&4294967295,y=T+(k<<4&4294967295|k>>>28),k=D+(y^T^C)+S[0]+3936430074&4294967295,D=y+(k<<11&4294967295|k>>>21),k=C+(D^y^T)+S[3]+3572445317&4294967295,C=D+(k<<16&4294967295|k>>>16),k=T+(C^D^y)+S[6]+76029189&4294967295,T=C+(k<<23&4294967295|k>>>9),k=y+(T^C^D)+S[9]+3654602809&4294967295,y=T+(k<<4&4294967295|k>>>28),k=D+(y^T^C)+S[12]+3873151461&4294967295,D=y+(k<<11&4294967295|k>>>21),k=C+(D^y^T)+S[15]+530742520&4294967295,C=D+(k<<16&4294967295|k>>>16),k=T+(C^D^y)+S[2]+3299628645&4294967295,T=C+(k<<23&4294967295|k>>>9),k=y+(C^(T|~D))+S[0]+4096336452&4294967295,y=T+(k<<6&4294967295|k>>>26),k=D+(T^(y|~C))+S[7]+1126891415&4294967295,D=y+(k<<10&4294967295|k>>>22),k=C+(y^(D|~T))+S[14]+2878612391&4294967295,C=D+(k<<15&4294967295|k>>>17),k=T+(D^(C|~y))+S[5]+4237533241&4294967295,T=C+(k<<21&4294967295|k>>>11),k=y+(C^(T|~D))+S[12]+1700485571&4294967295,y=T+(k<<6&4294967295|k>>>26),k=D+(T^(y|~C))+S[3]+2399980690&4294967295,D=y+(k<<10&4294967295|k>>>22),k=C+(y^(D|~T))+S[10]+4293915773&4294967295,C=D+(k<<15&4294967295|k>>>17),k=T+(D^(C|~y))+S[1]+2240044497&4294967295,T=C+(k<<21&4294967295|k>>>11),k=y+(C^(T|~D))+S[8]+1873313359&4294967295,y=T+(k<<6&4294967295|k>>>26),k=D+(T^(y|~C))+S[15]+4264355552&4294967295,D=y+(k<<10&4294967295|k>>>22),k=C+(y^(D|~T))+S[6]+2734768916&4294967295,C=D+(k<<15&4294967295|k>>>17),k=T+(D^(C|~y))+S[13]+1309151649&4294967295,T=C+(k<<21&4294967295|k>>>11),k=y+(C^(T|~D))+S[4]+4149444226&4294967295,y=T+(k<<6&4294967295|k>>>26),k=D+(T^(y|~C))+S[11]+3174756917&4294967295,D=y+(k<<10&4294967295|k>>>22),k=C+(y^(D|~T))+S[2]+718787259&4294967295,C=D+(k<<15&4294967295|k>>>17),k=T+(D^(C|~y))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+D&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var T=y-this.blockSize,S=this.B,C=this.h,D=0;D<y;){if(C==0)for(;D<=T;)s(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<y;)if(S[C++]=E.charCodeAt(D++),C==this.blockSize){s(this,S),C=0;break}}else for(;D<y;)if(S[C++]=E[D++],C==this.blockSize){s(this,S),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var T=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=T&255,T/=256;for(this.u(E),E=Array(16),y=T=0;4>y;++y)for(var S=0;32>S;S+=8)E[T++]=this.g[y]>>>S&255;return E};function i(E,y){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function o(E,y){this.h=y;for(var T=[],S=!0,C=E.length-1;0<=C;C--){var D=E[C]|0;S&&D==y||(T[C]=D,S=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return N(h(-E));for(var y=[],T=1,S=0;E>=T;S++)y[S]=E/T|0,T*=4294967296;return new o(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return N(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(y,8)),S=p,C=0;C<E.length;C+=8){var D=Math.min(8,E.length-C),k=parseInt(E.substring(C,C+D),y);8>D?(D=h(Math.pow(y,D)),S=S.j(D).add(h(k))):(S=S.j(T),S=S.add(h(k)))}return S}var p=u(0),m=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-N(this).m();for(var E=0,y=1,T=0;T<this.g.length;T++){var S=this.i(T);E+=(0<=S?S:4294967296+S)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(R(this))return"-"+N(this).toString(E);for(var y=h(Math.pow(E,6)),T=this,S="";;){var C=P(T,y).g;T=v(T,C.j(y));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=C,A(T))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=v(this,E),R(E)?-1:A(E)?0:1};function N(E){for(var y=E.g.length,T=[],S=0;S<y;S++)T[S]=~E.g[S];return new o(T,~E.h).add(m)}t.abs=function(){return R(this)?N(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0,C=0;C<=y;C++){var D=S+(this.i(C)&65535)+(E.i(C)&65535),k=(D>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);S=k>>>16,D&=65535,k&=65535,T[C]=k<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function v(E,y){return E.add(N(y))}t.j=function(E){if(A(this)||A(E))return p;if(R(this))return R(E)?N(this).j(N(E)):N(N(this).j(E));if(R(E))return N(this.j(N(E)));if(0>this.l(I)&&0>E.l(I))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,T=[],S=0;S<2*y;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var C=0;C<E.g.length;C++){var D=this.i(S)>>>16,k=this.i(S)&65535,St=E.i(C)>>>16,dr=E.i(C)&65535;T[2*S+2*C]+=k*dr,w(T,2*S+2*C),T[2*S+2*C+1]+=D*dr,w(T,2*S+2*C+1),T[2*S+2*C+1]+=k*St,w(T,2*S+2*C+1),T[2*S+2*C+2]+=D*St,w(T,2*S+2*C+2)}for(S=0;S<y;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=y;S<2*y;S++)T[S]=0;return new o(T,0)};function w(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function x(E,y){this.g=E,this.h=y}function P(E,y){if(A(y))throw Error("division by zero");if(A(E))return new x(p,p);if(R(E))return y=P(N(E),y),new x(N(y.g),N(y.h));if(R(y))return y=P(E,N(y)),new x(N(y.g),y.h);if(30<E.g.length){if(R(E)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=y;0>=S.l(E);)T=M(T),S=M(S);var C=O(T,1),D=O(S,1);for(S=O(S,2),T=O(T,2);!A(S);){var k=D.add(S);0>=k.l(E)&&(C=C.add(T),D=k),S=O(S,1),T=O(T,1)}return y=v(E,C.j(y)),new x(C,y)}for(C=p;0<=E.l(y);){for(T=Math.max(1,Math.floor(E.m()/y.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=h(T),k=D.j(y);R(k)||0<k.l(E);)T-=S,D=h(T),k=D.j(y);A(D)&&(D=m),C=C.add(D),E=v(E,k)}return new x(C,E)}t.A=function(E){return P(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)&E.i(S);return new o(T,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)|E.i(S);return new o(T,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],S=0;S<y;S++)T[S]=this.i(S)^E.i(S);return new o(T,this.h^E.h)};function M(E){for(var y=E.g.length+1,T=[],S=0;S<y;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(T,E.h)}function O(E,y){var T=y>>5;y%=32;for(var S=E.g.length-T,C=[],D=0;D<S;D++)C[D]=0<y?E.i(D+T)>>>y|E.i(D+T+1)<<32-y:E.i(D+T);return new o(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Yn=o}).apply(typeof Bm<"u"?Bm:typeof self<"u"?self:typeof window<"u"?window:{});var ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fv,di,Uv,wa,ah,zv,Bv,$v;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,f){return a==Array.prototype||a==Object.prototype||(a[c]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ta=="object"&&ta];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var V=a[_];if(!(V in f))break e;f=f[V]}a=a[a.length-1],_=f[a],c=c(_),c!=_&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var f=0,_=!1,V={next:function(){if(!_&&f<a.length){var L=f++;return{value:c(L,a[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function d(a,c,f){return a.call.apply(a.bind,arguments)}function p(a,c,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),a.apply(c,V)}}return function(){return a.apply(c,arguments)}}function m(a,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function I(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function A(a,c){function f(){}f.prototype=c.prototype,a.aa=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,V,L){for(var z=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)z[ue-2]=arguments[ue];return c.prototype[V].apply(_,z)}}function R(a){const c=a.length;if(0<c){const f=Array(c);for(let _=0;_<c;_++)f[_]=a[_];return f}return[]}function N(a,c){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const V=a.length||0,L=_.length||0;a.length=V+L;for(let z=0;z<L;z++)a[V+z]=_[z]}else a.push(_)}}class v{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var M=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(a,c,f){for(const _ in a)c.call(f,a[_],_,a)}function E(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function y(a){const c={};for(const f in a)c[f]=a[f];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,c){let f,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(f in _)a[f]=_[f];for(let L=0;L<T.length;L++)f=T[L],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function C(a){var c=1;a=a.split(":");const f=[];for(;0<c&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function D(a){l.setTimeout(()=>{throw a},0)}function k(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class St{constructor(){this.h=this.g=null}add(c,f){const _=dr.get();_.set(c,f),this.h?this.h.next=_:this.g=_,this.h=_}}var dr=new v(()=>new Fs,a=>a.reset());class Fs{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let nn,$=!1,K=new St,X=()=>{const a=l.Promise.resolve(void 0);nn=()=>{a.then(ye)}};var ye=()=>{for(var a;a=k();){try{a.h.call(a.g)}catch(f){D(f)}var c=dr;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}$=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return a}();function sn(a,c){if(ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(M){e:{try{P(c.nodeName);var V=!0;break e}catch{}V=!1}V||(c=null)}}else f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement);this.relatedTarget=c,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:on[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&sn.aa.h.call(this)}}A(sn,ke);var on={2:"touch",3:"pen",4:"mouse"};sn.prototype.h=function(){sn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),x1=0;function T1(a,c,f,_,V){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!_,this.ha=V,this.key=++x1,this.da=this.fa=!1}function _o(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function wo(a){this.src=a,this.g={},this.h=0}wo.prototype.add=function(a,c,f,_,V){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var z=tu(a,c,_,V);return-1<z?(c=a[z],f||(c.fa=!1)):(c=new T1(c,this.src,L,!!_,V),c.fa=f,a.push(c)),c};function eu(a,c){var f=c.type;if(f in a.g){var _=a.g[f],V=Array.prototype.indexOf.call(_,c,void 0),L;(L=0<=V)&&Array.prototype.splice.call(_,V,1),L&&(_o(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function tu(a,c,f,_){for(var V=0;V<a.length;++V){var L=a[V];if(!L.da&&L.listener==c&&L.capture==!!f&&L.ha==_)return V}return-1}var nu="closure_lm_"+(1e6*Math.random()|0),ru={};function yf(a,c,f,_,V){if(Array.isArray(c)){for(var L=0;L<c.length;L++)yf(a,c[L],f,_,V);return null}return f=wf(f),a&&a[an]?a.K(c,f,h(_)?!!_.capture:!1,V):S1(a,c,f,!1,_,V)}function S1(a,c,f,_,V,L){if(!c)throw Error("Invalid event type");var z=h(V)?!!V.capture:!!V,ue=iu(a);if(ue||(a[nu]=ue=new wo(a)),f=ue.add(c,f,_,z,L),f.proxy)return f;if(_=I1(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)rn||(V=z),V===void 0&&(V=!1),a.addEventListener(c.toString(),_,V);else if(a.attachEvent)a.attachEvent(_f(c.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function I1(){function a(f){return c.call(a.src,a.listener,f)}const c=k1;return a}function vf(a,c,f,_,V){if(Array.isArray(c))for(var L=0;L<c.length;L++)vf(a,c[L],f,_,V);else _=h(_)?!!_.capture:!!_,f=wf(f),a&&a[an]?(a=a.i,c=String(c).toString(),c in a.g&&(L=a.g[c],f=tu(L,f,_,V),-1<f&&(_o(L[f]),Array.prototype.splice.call(L,f,1),L.length==0&&(delete a.g[c],a.h--)))):a&&(a=iu(a))&&(c=a.g[c.toString()],a=-1,c&&(a=tu(c,f,_,V)),(f=-1<a?c[a]:null)&&su(f))}function su(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[an])eu(c.i,a);else{var f=a.type,_=a.proxy;c.removeEventListener?c.removeEventListener(f,_,a.capture):c.detachEvent?c.detachEvent(_f(f),_):c.addListener&&c.removeListener&&c.removeListener(_),(f=iu(c))?(eu(f,a),f.h==0&&(f.src=null,c[nu]=null)):_o(a)}}}function _f(a){return a in ru?ru[a]:ru[a]="on"+a}function k1(a,c){if(a.da)a=!0;else{c=new sn(c,this);var f=a.listener,_=a.ha||a.src;a.fa&&su(a),a=f.call(_,c)}return a}function iu(a){return a=a[nu],a instanceof wo?a:null}var ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function wf(a){return typeof a=="function"?a:(a[ou]||(a[ou]=function(c){return a.handleEvent(c)}),a[ou])}function We(){le.call(this),this.i=new wo(this),this.M=this,this.F=null}A(We,le),We.prototype[an]=!0,We.prototype.removeEventListener=function(a,c,f,_){vf(this,a,c,f,_)};function nt(a,c){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=c.type||c,typeof c=="string")c=new ke(c,a);else if(c instanceof ke)c.target=c.target||a;else{var V=c;c=new ke(_,a),S(c,V)}if(V=!0,f)for(var L=f.length-1;0<=L;L--){var z=c.g=f[L];V=Eo(z,_,!0,c)&&V}if(z=c.g=a,V=Eo(z,_,!0,c)&&V,V=Eo(z,_,!1,c)&&V,f)for(L=0;L<f.length;L++)z=c.g=f[L],V=Eo(z,_,!1,c)&&V}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var f=a.g[c],_=0;_<f.length;_++)_o(f[_]);delete a.g[c],a.h--}}this.F=null},We.prototype.K=function(a,c,f,_){return this.i.add(String(a),c,!1,f,_)},We.prototype.L=function(a,c,f,_){return this.i.add(String(a),c,!0,f,_)};function Eo(a,c,f,_){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var V=!0,L=0;L<c.length;++L){var z=c[L];if(z&&!z.da&&z.capture==f){var ue=z.listener,Fe=z.ha||z.src;z.fa&&eu(a.i,z),V=ue.call(Fe,_)!==!1&&V}}return V&&!_.defaultPrevented}function Ef(a,c,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function xf(a){a.g=Ef(()=>{a.g=null,a.i&&(a.i=!1,xf(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class A1 extends le{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:xf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(a){le.call(this),this.h=a,this.g={}}A(Us,le);var Tf=[];function Sf(a){O(a.g,function(c,f){this.g.hasOwnProperty(f)&&su(c)},a),a.g={}}Us.prototype.N=function(){Us.aa.N.call(this),Sf(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var au=l.JSON.stringify,C1=l.JSON.parse,R1=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function lu(){}lu.prototype.h=null;function If(a){return a.h||(a.h=a.i())}function kf(){}var zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uu(){ke.call(this,"d")}A(uu,ke);function cu(){ke.call(this,"c")}A(cu,ke);var fr={},Af=null;function xo(){return Af=Af||new We}fr.La="serverreachability";function Cf(a){ke.call(this,fr.La,a)}A(Cf,ke);function Bs(a){const c=xo();nt(c,new Cf(c))}fr.STAT_EVENT="statevent";function Rf(a,c){ke.call(this,fr.STAT_EVENT,a),this.stat=c}A(Rf,ke);function rt(a){const c=xo();nt(c,new Rf(c,a))}fr.Ma="timingevent";function Pf(a,c){ke.call(this,fr.Ma,a),this.size=c}A(Pf,ke);function $s(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Hs(){this.g=!0}Hs.prototype.xa=function(){this.g=!1};function P1(a,c,f,_,V,L){a.info(function(){if(a.g)if(L)for(var z="",ue=L.split("&"),Fe=0;Fe<ue.length;Fe++){var se=ue[Fe].split("=");if(1<se.length){var Ge=se[0];se=se[1];var Ke=Ge.split("_");z=2<=Ke.length&&Ke[1]=="type"?z+(Ge+"="+se+"&"):z+(Ge+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+c+`
`+f+`
`+z})}function N1(a,c,f,_,V,L,z){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+c+`
`+f+`
`+L+" "+z})}function zr(a,c,f,_){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+b1(a,f)+(_?" "+_:"")})}function D1(a,c){a.info(function(){return"TIMEOUT: "+c})}Hs.prototype.info=function(){};function b1(a,c){if(!a.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var L=V[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<V.length;z++)V[z]=""}}}}return au(f)}catch{return c}}var To={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hu;function So(){}A(So,lu),So.prototype.g=function(){return new XMLHttpRequest},So.prototype.i=function(){return{}},hu=new So;function Rn(a,c,f,_){this.j=a,this.i=c,this.l=f,this.R=_||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Df}function Df(){this.i=null,this.g="",this.h=!1}var bf={},du={};function fu(a,c,f){a.L=1,a.v=Co(ln(c)),a.m=f,a.P=!0,Vf(a,null)}function Vf(a,c){a.F=Date.now(),Io(a),a.A=ln(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Kf(f.i,"t",_),a.C=0,f=a.j.J,a.h=new Df,a.g=dp(a.j,f?c:null,!a.m),0<a.O&&(a.M=new A1(m(a.Y,a,a.g),a.O)),c=a.U,f=a.g,_=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Tf[0]=V.toString()),V=Tf);for(var L=0;L<V.length;L++){var z=yf(f,V[L],_||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),Bs(),P1(a.i,a.u,a.A,a.l,a.R,a.m)}Rn.prototype.ca=function(a){a=a.target;const c=this.M;c&&un(a)==3?c.j():this.Y(a)},Rn.prototype.Y=function(a){try{if(a==this.g)e:{const Ke=un(this.g);var c=this.g.Ba();const Hr=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||tp(this.g)))){this.J||Ke!=4||c==7||(c==8||0>=Hr?Bs(3):Bs(2)),pu(this);var f=this.g.Z();this.X=f;t:if(Mf(this)){var _=tp(this.g);a="";var V=_.length,L=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),qs(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<V;c++)this.h.h=!0,a+=this.h.i.decode(_[c],{stream:!(L&&c==V-1)});_.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,N1(this.i,this.u,this.A,this.l,this.R,Ke,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,Fe=this.g;if((ue=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ue)){var se=ue;break t}}se=null}if(f=se)zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mu(this,f);else{this.o=!1,this.s=3,rt(12),pr(this),qs(this);break e}}if(this.P){f=!0;let Vt;for(;!this.J&&this.C<z.length;)if(Vt=V1(this,z),Vt==du){Ke==4&&(this.s=4,rt(14),f=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==bf){this.s=4,rt(15),zr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else zr(this.i,this.l,Vt,null),mu(this,Vt);if(Mf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||z.length!=0||this.h.h||(this.s=1,rt(16),f=!1),this.o=this.o&&f,!f)zr(this.i,this.l,z,"[Invalid Chunked Response]"),pr(this),qs(this);else if(0<z.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Eu(Ge),Ge.M=!0,rt(11))}}else zr(this.i,this.l,z,null),mu(this,z);Ke==4&&pr(this),this.o&&!this.J&&(Ke==4?lp(this.j,this):(this.o=!1,Io(this)))}else X1(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),pr(this),qs(this)}}}catch{}finally{}};function Mf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function V1(a,c){var f=a.C,_=c.indexOf(`
`,f);return _==-1?du:(f=Number(c.substring(f,_)),isNaN(f)?bf:(_+=1,_+f>c.length?du:(c=c.slice(_,_+f),a.C=_+f,c)))}Rn.prototype.cancel=function(){this.J=!0,pr(this)};function Io(a){a.S=Date.now()+a.I,Lf(a,a.I)}function Lf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=$s(m(a.ba,a),c)}function pu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Rn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(D1(this.i,this.A),this.L!=2&&(Bs(),rt(17)),pr(this),this.s=2,qs(this)):Lf(this,this.S-a)};function qs(a){a.j.G==0||a.J||lp(a.j,a)}function pr(a){pu(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Sf(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function mu(a,c){try{var f=a.j;if(f.G!=0&&(f.g==a||gu(f.h,a))){if(!a.K&&gu(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(c)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Vo(f),Do(f);else break e;wu(f),rt(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=$s(m(f.Za,f),6e3));if(1>=Ff(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else gr(f,11)}else if((a.K||f.g==a)&&Vo(f),!w(c))for(V=f.Da.g.parse(c),c=0;c<V.length;c++){let se=V[c];if(f.T=se[0],se=se[1],f.G==2)if(se[0]=="c"){f.K=se[1],f.ia=se[2];const Ge=se[3];Ge!=null&&(f.la=Ge,f.j.info("VER="+f.la));const Ke=se[4];Ke!=null&&(f.Aa=Ke,f.j.info("SVER="+f.Aa));const Hr=se[5];Hr!=null&&typeof Hr=="number"&&0<Hr&&(_=1.5*Hr,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Vt=a.g;if(Vt){const Lo=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lo){var L=_.h;L.g||Lo.indexOf("spdy")==-1&&Lo.indexOf("quic")==-1&&Lo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(yu(L,L.h),L.h=null))}if(_.D){const xu=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;xu&&(_.ya=xu,de(_.I,_.D,xu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var z=a;if(_.qa=hp(_,_.J?_.ia:null,_.W),z.K){Uf(_.h,z);var ue=z,Fe=_.L;Fe&&(ue.I=Fe),ue.B&&(pu(ue),Io(ue)),_.g=z}else op(_);0<f.i.length&&bo(f)}else se[0]!="stop"&&se[0]!="close"||gr(f,7);else f.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?gr(f,7):_u(f):se[0]!="noop"&&f.l&&f.l.ta(se),f.v=0)}}Bs(4)}catch{}}var M1=class{constructor(a,c){this.g=a,this.map=c}};function Of(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ff(a){return a.h?1:a.g?a.g.size:0}function gu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function yu(a,c){a.g?a.g.add(c):a.h=c}function Uf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Of.prototype.cancel=function(){if(this.i=zf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.D);return c}return R(a.i)}function L1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],f=a.length,_=0;_<f;_++)c.push(a[_]);return c}c=[],f=0;for(_ in a)c[f++]=a[_];return c}function O1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var f=0;f<a;f++)c.push(f);return c}c=[],f=0;for(const _ in a)c[f++]=_;return c}}}function Bf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var f=O1(a),_=L1(a),V=_.length,L=0;L<V;L++)c.call(void 0,_[L],f&&f[L],a)}var $f=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j1(a,c){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),V=null;if(0<=_){var L=a[f].substring(0,_);V=a[f].substring(_+1)}else L=a[f];c(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function mr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof mr){this.h=a.h,ko(this,a.j),this.o=a.o,this.g=a.g,Ao(this,a.s),this.l=a.l;var c=a.i,f=new Ks;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Hf(this,f),this.m=a.m}else a&&(c=String(a).match($f))?(this.h=!1,ko(this,c[1]||"",!0),this.o=Ws(c[2]||""),this.g=Ws(c[3]||"",!0),Ao(this,c[4]),this.l=Ws(c[5]||"",!0),Hf(this,c[6]||"",!0),this.m=Ws(c[7]||"")):(this.h=!1,this.i=new Ks(null,this.h))}mr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Gs(c,qf,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Gs(c,qf,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Gs(f,f.charAt(0)=="/"?z1:U1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Gs(f,$1)),a.join("")};function ln(a){return new mr(a)}function ko(a,c,f){a.j=f?Ws(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ao(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Hf(a,c,f){c instanceof Ks?(a.i=c,H1(a.i,a.h)):(f||(c=Gs(c,B1)),a.i=new Ks(c,a.h))}function de(a,c,f){a.i.set(c,f)}function Co(a){return de(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ws(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gs(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,F1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function F1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var qf=/[#\/\?@]/g,U1=/[#\?:]/g,z1=/[#\?]/g,B1=/[#\?@]/g,$1=/#/g;function Ks(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&j1(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Ks.prototype,t.add=function(a,c){Pn(this),this.i=null,a=Br(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function Wf(a,c){Pn(a),c=Br(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Gf(a,c){return Pn(a),c=Br(a,c),a.g.has(c)}t.forEach=function(a,c){Pn(this),this.g.forEach(function(f,_){f.forEach(function(V){a.call(c,V,_,this)},this)},this)},t.na=function(){Pn(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let _=0;_<c.length;_++){const V=a[_];for(let L=0;L<V.length;L++)f.push(c[_])}return f},t.V=function(a){Pn(this);let c=[];if(typeof a=="string")Gf(this,a)&&(c=c.concat(this.g.get(Br(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)c=c.concat(a[f])}return c},t.set=function(a,c){return Pn(this),this.i=null,a=Br(this,a),Gf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Kf(a,c,f){Wf(a,c),0<f.length&&(a.i=null,a.g.set(Br(a,c),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var _=c[f];const L=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var V=L;z[_]!==""&&(V+="="+encodeURIComponent(String(z[_]))),a.push(V)}}return this.i=a.join("&")};function Br(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function H1(a,c){c&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(f,_){var V=_.toLowerCase();_!=V&&(Wf(this,_),Kf(this,V,f))},a)),a.j=c}function q1(a,c){const f=new Hs;if(l.Image){const _=new Image;_.onload=I(Nn,f,"TestLoadImage: loaded",!0,c,_),_.onerror=I(Nn,f,"TestLoadImage: error",!1,c,_),_.onabort=I(Nn,f,"TestLoadImage: abort",!1,c,_),_.ontimeout=I(Nn,f,"TestLoadImage: timeout",!1,c,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else c(!1)}function W1(a,c){const f=new Hs,_=new AbortController,V=setTimeout(()=>{_.abort(),Nn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:_.signal}).then(L=>{clearTimeout(V),L.ok?Nn(f,"TestPingServer: ok",!0,c):Nn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),Nn(f,"TestPingServer: error",!1,c)})}function Nn(a,c,f,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(f)}catch{}}function G1(){this.g=new R1}function K1(a,c,f){const _=f||"";try{Bf(a,function(V,L){let z=V;h(V)&&(z=au(V)),c.push(_+L+"="+encodeURIComponent(z))})}catch(V){throw c.push(_+"type="+encodeURIComponent("_badmap")),V}}function Ro(a){this.l=a.Ub||null,this.j=a.eb||!1}A(Ro,lu),Ro.prototype.g=function(){return new Po(this.l,this.j)},Ro.prototype.i=function(a){return function(){return a}}({});function Po(a,c){We.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Po,We),t=Po.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Ys(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Qs(this):Ys(this),this.readyState==3&&Qf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Qs(this))},t.Qa=function(a){this.g&&(this.response=a,Qs(this))},t.ga=function(){this.g&&Qs(this)};function Qs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ys(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function Ys(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Yf(a){let c="";return O(a,function(f,_){c+=_,c+=":",c+=f,c+=`\r
`}),c}function vu(a,c,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Yf(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):de(a,c,f))}function Te(a){We.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Te,We);var Q1=/^https?$/i,Y1=["POST","PUT"];t=Te.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hu.g(),this.v=this.o?If(this.o):If(hu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(L){Xf(this,L);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)f.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())f.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Y1,c,void 0))||_||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of f)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ep(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Xf(this,L)}};function Xf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,Jf(a),No(a)}function Jf(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,nt(this,"complete"),nt(this,"abort"),No(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),No(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zf(this):this.bb())},t.bb=function(){Zf(this)};function Zf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||un(a)!=4||a.Z()!=2)){if(a.u&&un(a)==4)Ef(a.Ea,0,a);else if(nt(a,"readystatechange"),un(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var _;if(_=z===0){var V=String(a.D).match($f)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),_=!Q1.test(V?V.toLowerCase():"")}f=_}if(f)nt(a,"complete"),nt(a,"success");else{a.m=6;try{var L=2<un(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Jf(a)}}finally{No(a)}}}}function No(a,c){if(a.g){ep(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||nt(a,"ready");try{f.onreadystatechange=_}catch{}}}function ep(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function un(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),C1(c)}};function tp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function X1(a){const c={};a=(a.g&&2<=un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(w(a[_]))continue;var f=C(a[_]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=c[V]||[];c[V]=L,L.push(f)}E(c,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function np(a){this.Aa=0,this.i=[],this.j=new Hs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xs("baseRetryDelayMs",5e3,a),this.cb=Xs("retryDelaySeedMs",1e4,a),this.Wa=Xs("forwardChannelMaxRetries",2,a),this.wa=Xs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Of(a&&a.concurrentRequestLimit),this.Da=new G1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=np.prototype,t.la=8,t.G=1,t.connect=function(a,c,f,_){rt(0),this.W=a,this.H=c||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=hp(this,null,this.W),bo(this)};function _u(a){if(rp(a),a.G==3){var c=a.U++,f=ln(a.I);if(de(f,"SID",a.K),de(f,"RID",c),de(f,"TYPE","terminate"),Js(a,f),c=new Rn(a,a.j,c),c.L=2,c.v=Co(ln(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=dp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Io(c)}cp(a)}function Do(a){a.g&&(Eu(a),a.g.cancel(),a.g=null)}function rp(a){Do(a),a.u&&(l.clearTimeout(a.u),a.u=null),Vo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function bo(a){if(!jf(a.h)&&!a.s){a.s=!0;var c=a.Ga;nn||X(),$||(nn(),$=!0),K.add(c,a),a.B=0}}function J1(a,c){return Ff(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=$s(m(a.Ga,a,c),up(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new Rn(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(V.H=L,L=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(c+=_,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=ip(this,V,c),f=ln(this.I),de(f,"RID",a),de(f,"CVER",22),this.D&&de(f,"X-HTTP-Session-Id",this.D),Js(this,f),L&&(this.O?c="headers="+encodeURIComponent(String(Yf(L)))+"&"+c:this.m&&vu(f,this.m,L)),yu(this.h,V),this.Ua&&de(f,"TYPE","init"),this.P?(de(f,"$req",c),de(f,"SID","null"),V.T=!0,fu(V,f,null)):fu(V,f,c),this.G=2}}else this.G==3&&(a?sp(this,a):this.i.length==0||jf(this.h)||sp(this))};function sp(a,c){var f;c?f=c.l:f=a.U++;const _=ln(a.I);de(_,"SID",a.K),de(_,"RID",f),de(_,"AID",a.T),Js(a,_),a.m&&a.o&&vu(_,a.m,a.o),f=new Rn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),c&&(a.i=c.D.concat(a.i)),c=ip(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),yu(a.h,f),fu(f,_,c)}function Js(a,c){a.H&&O(a.H,function(f,_){de(c,_,f)}),a.l&&Bf({},function(f,_){de(c,_,f)})}function ip(a,c,f){f=Math.min(a.i.length,f);var _=a.l?m(a.l.Na,a.l,a):null;e:{var V=a.i;let L=-1;for(;;){const z=["count="+f];L==-1?0<f?(L=V[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let ue=!0;for(let Fe=0;Fe<f;Fe++){let se=V[Fe].g;const Ge=V[Fe].map;if(se-=L,0>se)L=Math.max(0,V[Fe].g-100),ue=!1;else try{K1(Ge,z,"req"+se+"_")}catch{_&&_(Ge)}}if(ue){_=z.join("&");break e}}}return a=a.i.splice(0,f),c.D=a,_}function op(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;nn||X(),$||(nn(),$=!0),K.add(c,a),a.v=0}}function wu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=$s(m(a.Fa,a),up(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,ap(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=$s(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Do(this),ap(this))};function Eu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function ap(a){a.g=new Rn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=ln(a.qa);de(c,"RID","rpc"),de(c,"SID",a.K),de(c,"AID",a.T),de(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&de(c,"TO",a.ja),de(c,"TYPE","xmlhttp"),Js(a,c),a.m&&a.o&&vu(c,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Co(ln(c)),f.m=null,f.P=!0,Vf(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Do(this),wu(this),rt(19))};function Vo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function lp(a,c){var f=null;if(a.g==c){Vo(a),Eu(a),a.g=null;var _=2}else if(gu(a.h,c))f=c.D,Uf(a.h,c),_=1;else return;if(a.G!=0){if(c.o)if(_==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var V=a.B;_=xo(),nt(_,new Pf(_,f)),bo(a)}else op(a);else if(V=c.s,V==3||V==0&&0<c.X||!(_==1&&J1(a,c)||_==2&&wu(a)))switch(f&&0<f.length&&(c=a.h,c.i=c.i.concat(f)),V){case 1:gr(a,5);break;case 4:gr(a,10);break;case 3:gr(a,6);break;default:gr(a,2)}}}function up(a,c){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*c}function gr(a,c){if(a.j.info("Error code "+c),c==2){var f=m(a.fb,a),_=a.Xa;const V=!_;_=new mr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ko(_,"https"),Co(_),V?q1(_.toString(),f):W1(_.toString(),f)}else rt(2);a.G=0,a.l&&a.l.sa(c),cp(a),rp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function cp(a){if(a.G=0,a.ka=[],a.l){const c=zf(a.h);(c.length!=0||a.i.length!=0)&&(N(a.ka,c),N(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function hp(a,c,f){var _=f instanceof mr?ln(f):new mr(f);if(_.g!="")c&&(_.g=c+"."+_.g),Ao(_,_.s);else{var V=l.location;_=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;var L=new mr(null);_&&ko(L,_),c&&(L.g=c),V&&Ao(L,V),f&&(L.l=f),_=L}return f=a.D,c=a.ya,f&&c&&de(_,f,c),de(_,"VER",a.la),Js(a,_),_}function dp(a,c,f){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Te(new Ro({eb:f})):new Te(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fp(){}t=fp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mo(){}Mo.prototype.g=function(a,c){return new gt(a,c)};function gt(a,c){We.call(this),this.g=new np(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!w(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new $r(this)}A(gt,We),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){_u(this.g)},gt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=au(a),a=f);c.i.push(new M1(c.Ya++,a)),c.G==3&&bo(c)},gt.prototype.N=function(){this.g.l=null,delete this.j,_u(this.g),delete this.g,gt.aa.N.call(this)};function pp(a){uu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}A(pp,uu);function mp(){cu.call(this),this.status=1}A(mp,cu);function $r(a){this.g=a}A($r,fp),$r.prototype.ua=function(){nt(this.g,"a")},$r.prototype.ta=function(a){nt(this.g,new pp(a))},$r.prototype.sa=function(a){nt(this.g,new mp)},$r.prototype.ra=function(){nt(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,$v=function(){return new Mo},Bv=function(){return xo()},zv=fr,ah={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,wa=To,Nf.COMPLETE="complete",Uv=Nf,kf.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",We.prototype.listen=We.prototype.K,di=kf,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,Fv=Te}).apply(typeof ta<"u"?ta:typeof self<"u"?self:typeof window<"u"?window:{});const $m="@firebase/firestore",Hm="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Dv("@firebase/firestore");function Wr(){return br.logLevel}function H(t,...e){if(br.logLevel<=ne.DEBUG){const n=e.map(bd);br.debug(`Firestore (${Ms}): ${t}`,...n)}}function Sn(t,...e){if(br.logLevel<=ne.ERROR){const n=e.map(bd);br.error(`Firestore (${Ms}): ${t}`,...n)}}function er(t,...e){if(br.logLevel<=ne.WARN){const n=e.map(bd);br.warn(`Firestore (${Ms}): ${t}`,...n)}}function bd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Hv(t,r,n)}function Hv(t,e,n){let r=`FIRESTORE (${Ms}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sn(r),new Error(r)}function oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Hv(e,s,r)}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class BS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $S{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new yn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new yn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new qv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Je(e)}}class HS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new HS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,SS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=GS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function lh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return J(r,s);{const i=Wv(),o=KS(i.encode(Wm(t,n)),i.encode(Wm(e,n)));return o!==0?o:J(r,s)}}n+=r>65535?2:1}return J(t.length,e.length)}function Wm(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function KS(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return J(t[n],e[n]);return J(t.length,e.length)}function Ss(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="__name__";class Wt{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Wt.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return J(e.length,n.length)}static compareSegments(e,n){const r=Wt.isNumericId(e),s=Wt.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Wt.extractNumericId(e).compare(Wt.extractNumericId(n)):lh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}}class ce extends Wt{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const QS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Wt{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return QS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gm}static keyField(){return new Be([Gm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ce.fromString(e))}static fromName(e){return new W(ce.fromString(e).popFirst(5))}static empty(){return new W(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e,n){if(!n)throw new B(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YS(t,e,n,r){if(e===!0&&r===!0)throw new B(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Km(t){if(!W.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qm(t){if(W.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ml(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function mt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ml(t);throw new B(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e){const n={typeString:t};return e&&(n.value=e),n}function ho(t,e){if(!Kv(t))throw new B(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=-62135596800,Xm=1e6;class pe{static now(){return pe.fromMillis(Date.now())}static fromDate(e){return pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Xm);return new pe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ym)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xm}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ho(e,pe._jsonSchema))return new pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ym;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pe._jsonSchemaVersion="firestore/timestamp/1.0",pe._jsonSchema={type:De("string",pe._jsonSchemaVersion),seconds:De("number"),nanoseconds:De("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static fromTimestamp(e){return new Q(e)}static min(){return new Q(new pe(0,0))}static max(){return new Q(new pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=-1;function XS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Q.fromTimestamp(r===1e9?new pe(n+1,0):new pe(n,r));return new tr(s,W.empty(),e)}function JS(t){return new tr(t.readTime,t.key,Xi)}class tr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new tr(Q.min(),W.empty(),Xi)}static max(){return new tr(Q.max(),W.empty(),Xi)}}function ZS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==eI)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function nI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Os(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ll.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=-1;function Ol(t){return t==null}function nl(t){return t===0&&1/t==-1/0}function rI(t){return typeof t=="number"&&Number.isInteger(t)&&!nl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="";function sI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Jm(e)),e=iI(t.get(n),e);return Jm(e)}function iI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Qv:n+="";break;default:n+=i}}return n}function Jm(t){return t+Qv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||ze.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new na(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new na(this.root,e,this.comparator,!1)}getReverseIterator(){return new na(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new na(this.root,e,this.comparator,!0)}}class na{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ze.RED,this.left=s??ze.EMPTY,this.right=i??ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eg(this.data.getIterator())}getIteratorFrom(e){return new eg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Me(this.comparator);return n.data=e,n}}class eg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new _t([])}unionWith(e){let n=new Me(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ss(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Xv("Invalid base64 string: "+i):i}}(e);return new qe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qe.EMPTY_BYTE_STRING=new qe("");const oI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=oI.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rr(t){return typeof t=="string"?qe.fromBase64String(t):qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="server_timestamp",Zv="__type__",e_="__previous_value__",t_="__local_write_time__";function Ld(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zv])===null||n===void 0?void 0:n.stringValue)===Jv}function jl(t){const e=t.mapValue.fields[e_];return Ld(e)?jl(e):e}function Ji(t){const e=nr(t.mapValue.fields[t_].timestampValue);return new pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,s,i,o,l,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const rl="(default)";class Zi{constructor(e,n){this.projectId=e,this.database=n||rl}static empty(){return new Zi("","")}get isDefaultDatabase(){return this.database===rl}isEqual(e){return e instanceof Zi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="__type__",lI="__max__",ra={mapValue:{}},r_="__vector__",sl="value";function sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ld(t)?4:cI(t)?9007199254740991:uI(t)?10:11:G(28295,{value:t})}function tn(t,e){if(t===e)return!0;const n=sr(t);if(n!==sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ji(t).isEqual(Ji(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=nr(s.timestampValue),l=nr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return rr(s.bytesValue).isEqual(rr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?nl(o)===nl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ss(t.arrayValue.values||[],e.arrayValue.values||[],tn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Zm(o)!==Zm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!tn(o[u],l[u])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function eo(t,e){return(t.values||[]).find(n=>tn(n,e))!==void 0}function Is(t,e){if(t===e)return 0;const n=sr(t),r=sr(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),u=Ae(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return tg(t.timestampValue,e.timestampValue);case 4:return tg(Ji(t),Ji(e));case 5:return lh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=rr(i),u=rr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=J(l[h],u[h]);if(d!==0)return d}return J(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=J(Ae(i.latitude),Ae(o.latitude));return l!==0?l:J(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ng(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,d;const p=i.fields||{},m=o.fields||{},I=(l=p[sl])===null||l===void 0?void 0:l.arrayValue,A=(u=m[sl])===null||u===void 0?void 0:u.arrayValue,R=J(((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0,((d=A==null?void 0:A.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:ng(I,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ra.mapValue&&o===ra.mapValue)return 0;if(i===ra.mapValue)return 1;if(o===ra.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=lh(u[p],d[p]);if(m!==0)return m;const I=Is(l[u[p]],h[d[p]]);if(I!==0)return I}return J(u.length,d.length)}(t.mapValue,e.mapValue);default:throw G(23264,{le:n})}}function tg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=nr(t),r=nr(e),s=J(n.seconds,r.seconds);return s!==0?s:J(n.nanos,r.nanos)}function ng(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Is(n[s],r[s]);if(i)return i}return J(n.length,r.length)}function ks(t){return uh(t)}function uh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=uh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${uh(n.fields[o])}`;return s+"}"}(t.mapValue):G(61005,{value:t})}function Ea(t){switch(sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jl(t);return e?16+Ea(e):16;case 5:return 2*t.stringValue.length;case 6:return rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ea(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return cr(r.fields,(i,o)=>{s+=i.length+Ea(o)}),s}(t.mapValue);default:throw G(13486,{value:t})}}function rg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ch(t){return!!t&&"integerValue"in t}function Od(t){return!!t&&"arrayValue"in t}function sg(t){return!!t&&"nullValue"in t}function ig(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xa(t){return!!t&&"mapValue"in t}function uI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[n_])===null||n===void 0?void 0:n.stringValue)===r_}function ki(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ki(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ki(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.value=e}static empty(){return new ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ki(n)}setAll(e){let n=Be.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ki(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());xa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];xa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){cr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ct(ki(this.value))}}function s_(t){const e=[];return cr(t.fields,(n,r)=>{const s=new Be([n]);if(xa(r)){const i=s_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new _t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new et(e,0,Q.min(),Q.min(),Q.min(),ct.empty(),0)}static newFoundDocument(e,n,r,s){return new et(e,1,n,Q.min(),r,s,0)}static newNoDocument(e,n){return new et(e,2,n,Q.min(),Q.min(),ct.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,Q.min(),Q.min(),ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.position=e,this.inclusive=n}}function og(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Is(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ag(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function hI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{}class Ne extends i_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fI(e,n,r):n==="array-contains"?new gI(e,r):n==="in"?new yI(e,r):n==="not-in"?new vI(e,r):n==="array-contains-any"?new _I(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pI(e,r):new mI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Is(n,this.value)):n!==null&&sr(this.value)===sr(n)&&this.matchesComparison(Is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends i_{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new $t(e,n)}matches(e){return o_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function o_(t){return t.op==="and"}function a_(t){return dI(t)&&o_(t)}function dI(t){for(const e of t.filters)if(e instanceof $t)return!1;return!0}function hh(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+ks(t.value);if(a_(t))return t.filters.map(e=>hh(e)).join(",");{const e=t.filters.map(n=>hh(n)).join(",");return`${t.op}(${e})`}}function l_(t,e){return t instanceof Ne?function(r,s){return s instanceof Ne&&r.op===s.op&&r.field.isEqual(s.field)&&tn(r.value,s.value)}(t,e):t instanceof $t?function(r,s){return s instanceof $t&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&l_(o,s.filters[l]),!0):!1}(t,e):void G(19439)}function u_(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${ks(n.value)}`}(t):t instanceof $t?function(n){return n.op.toString()+" {"+n.getFilters().map(u_).join(" ,")+"}"}(t):"Filter"}class fI extends Ne{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class pI extends Ne{constructor(e,n){super(e,"in",n),this.keys=c_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mI extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=c_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function c_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class gI extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Od(n)&&eo(n.arrayValue,this.value)}}class yI extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eo(this.value.arrayValue,n)}}class vI extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eo(this.value.arrayValue,n)}}class _I extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Od(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function lg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wI(t,e,n,r,s,i,o)}function jd(t){const e=Y(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ol(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ks(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ks(r)).join(",")),e.Pe=n}return e.Pe}function Fd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!l_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ag(t.startAt,e.startAt)&&ag(t.endAt,e.endAt)}function dh(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function EI(t,e,n,r,s,i,o,l){return new fo(t,e,n,r,s,i,o,l)}function Fl(t){return new fo(t)}function ug(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h_(t){return t.collectionGroup!==null}function Ai(t){const e=Y(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Me(Be.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new ol(i,r))}),n.has(Be.keyField().canonicalString())||e.Te.push(new ol(Be.keyField(),r))}return e.Te}function Yt(t){const e=Y(t);return e.Ie||(e.Ie=xI(e,Ai(t))),e.Ie}function xI(t,e){if(t.limitType==="F")return lg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ol(s.field,i)});const n=t.endAt?new il(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new il(t.startAt.position,t.startAt.inclusive):null;return lg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fh(t,e){const n=t.filters.concat([e]);return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ph(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ul(t,e){return Fd(Yt(t),Yt(e))&&t.limitType===e.limitType}function d_(t){return`${jd(Yt(t))}|lt:${t.limitType}`}function Gr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>u_(s)).join(", ")}]`),Ol(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ks(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ks(s)).join(",")),`Target(${r})`}(Yt(t))}; limitType=${t.limitType})`}function zl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ai(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=og(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Ai(r),s)||r.endAt&&!function(o,l,u){const h=og(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Ai(r),s))}(t,e)}function TI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function f_(t){return(e,n)=>{let r=!1;for(const s of Ai(t)){const i=SI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function SI(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Is(u,h):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Yv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new xe(W.comparator);function In(){return II}const p_=new xe(W.comparator);function fi(...t){let e=p_;for(const n of t)e=e.insert(n.key,n);return e}function m_(t){let e=p_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tr(){return Ci()}function g_(){return Ci()}function Ci(){return new jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const kI=new xe(W.comparator),AI=new Me(W.comparator);function ee(...t){let e=AI;for(const n of t)e=e.add(n);return e}const CI=new Me(J);function RI(){return CI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nl(e)?"-0":e}}function y_(t){return{integerValue:""+t}}function PI(t,e){return rI(e)?y_(e):Ud(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this._=void 0}}function NI(t,e,n){return t instanceof al?function(s,i){const o={fields:{[Zv]:{stringValue:Jv},[t_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ld(i)&&(i=jl(i)),i&&(o.fields[e_]=i),{mapValue:o}}(n,e):t instanceof to?__(t,e):t instanceof no?w_(t,e):function(s,i){const o=v_(s,i),l=cg(o)+cg(s.Ee);return ch(o)&&ch(s.Ee)?y_(l):Ud(s.serializer,l)}(t,e)}function DI(t,e,n){return t instanceof to?__(t,e):t instanceof no?w_(t,e):n}function v_(t,e){return t instanceof ll?function(r){return ch(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class al extends Bl{}class to extends Bl{constructor(e){super(),this.elements=e}}function __(t,e){const n=E_(e);for(const r of t.elements)n.some(s=>tn(s,r))||n.push(r);return{arrayValue:{values:n}}}class no extends Bl{constructor(e){super(),this.elements=e}}function w_(t,e){let n=E_(e);for(const r of t.elements)n=n.filter(s=>!tn(s,r));return{arrayValue:{values:n}}}class ll extends Bl{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function cg(t){return Ae(t.integerValue||t.doubleValue)}function E_(t){return Od(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function bI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof to&&s instanceof to||r instanceof no&&s instanceof no?Ss(r.elements,s.elements,tn):r instanceof ll&&s instanceof ll?tn(r.Ee,s.Ee):r instanceof al&&s instanceof al}(t.transform,e.transform)}class VI{constructor(e,n){this.version=e,this.transformResults=n}}class Pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pt}static exists(e){return new Pt(void 0,e)}static updateTime(e){return new Pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ta(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $l{}function x_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zd(t.key,Pt.none()):new po(t.key,t.data,Pt.none());{const n=t.data,r=ct.empty();let s=new Me(Be.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new hr(t.key,r,new _t(s.toArray()),Pt.none())}}function MI(t,e,n){t instanceof po?function(s,i,o){const l=s.value.clone(),u=dg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hr?function(s,i,o){if(!Ta(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=dg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(T_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ri(t,e,n,r){return t instanceof po?function(i,o,l,u){if(!Ta(i.precondition,o))return l;const h=i.value.clone(),d=fg(i.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof hr?function(i,o,l,u){if(!Ta(i.precondition,o))return l;const h=fg(i.fieldTransforms,u,o),d=o.data;return d.setAll(T_(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Ta(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function LI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=v_(r.transform,s||null);i!=null&&(n===null&&(n=ct.empty()),n.set(r.field,i))}return n||null}function hg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ss(r,s,(i,o)=>bI(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class po extends $l{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hr extends $l{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function T_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dg(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,DI(o,l,n[s]))}return r}function fg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NI(i,o,e))}return r}class zd extends $l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OI extends $l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&MI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ri(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=g_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=x_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,(n,r)=>hg(n,r))&&Ss(this.baseMutations,e.baseMutations,(n,r)=>hg(n,r))}}class Bd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){oe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return kI}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Bd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,te;function zI(t){switch(t){case j.OK:return G(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function S_(t){if(t===void 0)return Sn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Re.OK:return j.OK;case Re.CANCELLED:return j.CANCELLED;case Re.UNKNOWN:return j.UNKNOWN;case Re.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Re.INTERNAL:return j.INTERNAL;case Re.UNAVAILABLE:return j.UNAVAILABLE;case Re.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Re.NOT_FOUND:return j.NOT_FOUND;case Re.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Re.ABORTED:return j.ABORTED;case Re.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Re.DATA_LOSS:return j.DATA_LOSS;default:return G(39323,{code:t})}}(te=Re||(Re={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new Yn([4294967295,4294967295],0);function pg(t){const e=Wv().encode(t),n=new jv;return n.update(e),new Uint8Array(n.digest())}function mg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Yn([n,r],0),new Yn([s,i],0)]}class $d{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pi(`Invalid padding: ${n}`);if(r<0)throw new pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Yn.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Yn.fromNumber(r)));return s.compare(BI)===1&&(s=new Yn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=pg(e),[r,s]=mg(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $d(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=pg(e),[r,s]=mg(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,mo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hl(Q.min(),s,new xe(J),In(),ee())}}class mo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mo(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class I_{constructor(e,n){this.targetId=e,this.De=n}}class k_{constructor(e,n,r=qe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class gg{constructor(){this.ve=0,this.Ce=yg(),this.Fe=qe.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ee(),n=ee(),r=ee();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G(38017,{changeType:i})}}),new mo(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=yg()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class $I{constructor(e){this.We=e,this.Ge=new Map,this.ze=In(),this.je=sa(),this.Je=sa(),this.He=new xe(J)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(dh(i))if(r===0){const o=new W(i.path);this.Xe(n,o,et.newNoDocument(o,Q.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),u=l?this.ut(l,e,o):1;if(u!==0){this.rt(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=rr(r).toUint8Array()}catch(u){if(u instanceof Xv)return er("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new $d(o,s,i)}catch(u){return er(u instanceof pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&dh(l.target)){const u=new W(l.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,et.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=ee();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.st(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Hl(e,n,this.He,this.ze,r);return this.ze=In(),this.je=sa(),this.Je=sa(),this.He=new xe(J),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new gg,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Me(J),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Me(J),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new gg),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function sa(){return new xe(W.comparator)}function yg(){return new xe(W.comparator)}const HI={asc:"ASCENDING",desc:"DESCENDING"},qI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WI={and:"AND",or:"OR"};class GI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mh(t,e){return t.useProto3Json||Ol(e)?e:{value:e}}function ul(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KI(t,e){return ul(t,e.toTimestamp())}function Xt(t){return oe(!!t,49232),Q.fromTimestamp(function(n){const r=nr(n);return new pe(r.seconds,r.nanos)}(t))}function Hd(t,e){return gh(t,e).canonicalString()}function gh(t,e){const n=function(s){return new ce(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function C_(t){const e=ce.fromString(t);return oe(b_(e),10190,{key:e.toString()}),e}function yh(t,e){return Hd(t.databaseId,e.path)}function nc(t,e){const n=C_(e);if(n.get(1)!==t.databaseId.projectId)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(P_(n))}function R_(t,e){return Hd(t.databaseId,e)}function QI(t){const e=C_(t);return e.length===4?ce.emptyPath():P_(e)}function vh(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function P_(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vg(t,e,n){return{name:yh(t,e),fields:n.value.mapValue.fields}}function YI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(oe(d===void 0||typeof d=="string",58123),qe.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),qe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?j.UNKNOWN:S_(h.code);return new B(d,h.message||"")}(o);n=new k_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=nc(t,r.document.name),i=Xt(r.document.updateTime),o=r.document.createTime?Xt(r.document.createTime):Q.min(),l=new ct({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(s,i,o,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Sa(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=nc(t,r.document),i=r.readTime?Xt(r.readTime):Q.min(),o=et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Sa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=nc(t,r.document),i=r.removedTargetIds||[];n=new Sa([],i,s,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new UI(s,i),l=r.targetId;n=new I_(l,o)}}return n}function XI(t,e){let n;if(e instanceof po)n={update:vg(t,e.key,e.value)};else if(e instanceof zd)n={delete:yh(t,e.key)};else if(e instanceof hr)n={update:vg(t,e.key,e.data),updateMask:ok(e.fieldMask)};else{if(!(e instanceof OI))return G(16599,{Rt:e.type});n={verify:yh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof al)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof to)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof no)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ll)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw G(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:KI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G(27497)}(t,e.precondition)),n}function JI(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Xt(s.updateTime):Xt(i);return o.isEqual(Q.min())&&(o=Xt(i)),new VI(o,s.transformResults||[])}(n,e))):[]}function ZI(t,e){return{documents:[R_(t,e.path)]}}function ek(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=R_(t,s);const i=function(h){if(h.length!==0)return D_($t.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:Kr(m.field),direction:rk(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=mh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:s}}function tk(t){let e=QI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=N_(p);return m instanceof $t&&a_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(A){return new ol(Qr(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Ol(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,I=p.values||[];return new il(I,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,I=p.values||[];return new il(I,m)}(n.endAt)),EI(e,s,o,i,l,"F",u,h)}function nk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function N_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qr(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Qr(n.unaryFilter.field);return Ne.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qr(n.unaryFilter.field);return Ne.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qr(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(Qr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $t.create(n.compositeFilter.filters.map(r=>N_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function rk(t){return HI[t]}function sk(t){return qI[t]}function ik(t){return WI[t]}function Kr(t){return{fieldPath:t.canonicalString()}}function Qr(t){return Be.fromServerFormat(t.fieldPath)}function D_(t){return t instanceof Ne?function(n){if(n.op==="=="){if(ig(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NAN"}};if(sg(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ig(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NAN"}};if(sg(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kr(n.field),op:sk(n.op),value:n.value}}}(t):t instanceof $t?function(n){const r=n.getFilters().map(s=>D_(s));return r.length===1?r[0]:{compositeFilter:{op:ik(n.op),filters:r}}}(t):G(54877,{filter:t})}function ok(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function b_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,s,i=Q.min(),o=Q.min(),l=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Fn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.gt=e}}function lk(t){const e=tk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.Dn=new ck}addToCollectionParentIndex(e,n){return this.Dn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(tr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class ck{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Me(ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Me(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V_=41943040;class lt{static withCacheSize(e){return new lt(e,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lt.DEFAULT_COLLECTION_PERCENTILE=10,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lt.DEFAULT=new lt(V_,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lt.DISABLED=new lt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new As(0)}static ur(){return new As(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="LruGarbageCollector",hk=1048576;function Eg([t,e],[n,r]){const s=J(t,n);return s===0?J(e,r):s}class dk{constructor(e){this.Tr=e,this.buffer=new Me(Eg),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Eg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){H(wg,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Os(n)?H(wg,"Ignoring IndexedDB error during garbage collection: ",n):await Ls(n)}await this.Rr(3e5)})}}class pk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Ll.ue);const r=new dk(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(_g)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_g):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Wr()<=ne.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function mk(t,e){return new pk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.changes=new jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ri(r.mutation,s,_t.empty(),pe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=Tr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=fi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Tr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=In();const o=Ci(),l=function(){return Ci()}();return n.forEach((u,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof hr)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Ri(d.mutation,h,d.mutation.getFieldMask(),pe.now())):o.set(h.key,_t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>{var p;return l.set(h,new yk(d,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ci();let s=new xe((o,l)=>o-l),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||_t.empty();d=l.applyToLocalView(h,d),r.set(u,d);const p=(s.get(l.batchId)||ee()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=g_();d.forEach(m=>{if(!i.has(m)){const I=x_(n.get(m),r.get(m));I!==null&&p.set(m,I),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Tr());let l=Xi,u=i;return o.next(h=>F.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ee())).next(d=>({batchId:l,changes:m_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=fi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=fi();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const h=function(p,m){return new fo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,et.newInvalidDocument(d)))});let l=fi();return o.forEach((u,h)=>{const d=i.get(u);d!==void 0&&Ri(d.mutation,h,_t.empty(),pe.now()),zl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return F.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xt(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:lk(s.bundledQuery),readTime:Xt(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.overlays=new xe(W.comparator),this.kr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Tr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Tr(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new xe((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=Tr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Tr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return F.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FI(n,r));let i=this.kr.get(n);i===void 0&&(i=ee(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.qr=new Me(Le.Qr),this.$r=new Me(Le.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Le(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Le(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new W(new ce([])),r=new Le(n,e),s=new Le(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new W(new ce([])),r=new Le(n,e),s=new Le(n,e+1);let i=ee();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Le(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Le{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return W.comparator(e.key,n.key)||J(e.Hr,n.Hr)}static Ur(e,n){return J(e.Hr,n.Hr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Me(Le.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jI(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new Le(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Md:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Le(n,0),s=new Le(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(J);return n.forEach(s=>{const i=new Le(s,0),o=new Le(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new Le(new W(i),0);let l=new Me(J);return this.Yr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Hr)),!0)},o),F.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){oe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return F.forEach(n.mutations,s=>{const i=new Le(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Le(n,0),s=this.Yr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.ni=e,this.docs=function(){return new xe(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let r=In();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():et.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=In();const o=n.path,l=new W(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||ZS(JS(d),r)<=0||(s.has(d.key)||zl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G(9500)}ri(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Sk(this)}getSize(e){return F.resolve(this.size)}}class Sk extends gk{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.persistence=e,this.ii=new jr(n=>jd(n),Fd),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.si=0,this.oi=new qd,this.targetCount=0,this._i=As.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),F.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new As(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.hr(n),F.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ll(0),this.ci=!1,this.ci=!0,this.li=new Ek,this.referenceDelegate=e(this),this.hi=new Ik(this),this.indexManager=new uk,this.remoteDocumentCache=function(s){return new Tk(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new ak(n),this.Ti=new _k(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xk(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new kk(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class kk extends tI{constructor(e){super(),this.currentSequenceNumber=e}}class Wd{constructor(e){this.persistence=e,this.Ai=new qd,this.Ri=null}static Vi(e){return new Wd(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,r=>{const s=W.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,Q.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return F.or([()=>F.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class cl{constructor(e,n){this.persistence=e,this.gi=new jr(r=>sI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=mk(this,n)}static Vi(e,n){return new cl(e,n)}Ii(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return F.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Q.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ea(e.data.value)),n}Sr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return ET()?8:nI(_T())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Ak;return this.ws(e,n,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Wr()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Wr()<=ne.DEBUG&&H("QueryEngine","Query:",Gr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Wr()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yt(n))):F.resolve())}ps(e,n){if(ug(n))return F.resolve(null);let r=Yt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ph(n,null,"F"),r=Yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ds(n,h,o,u.readTime)?this.ps(e,ph(n,null,"F")):this.vs(e,h,n,u)}))})))}ys(e,n,r,s){return ug(n)||s.isEqual(Q.min())?F.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?F.resolve(null):(Wr()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gr(n)),this.vs(e,o,n,XS(s,Xi)).next(l=>l))})}bs(e,n){let r=new Me(f_(e));return n.forEach((s,i)=>{zl(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Wr()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Gr(n)),this.gs.getDocumentsMatchingQuery(e,n,tr.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="LocalStore",Rk=3e8;class Pk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new xe(J),this.Ms=new jr(i=>jd(i),Fd),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Nk(t,e,n,r){return new Pk(t,e,n,r)}async function L_(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ee();for(const h of s){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:l}))})})}function Dk(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let I=F.resolve();return m.forEach(A=>{I=I.next(()=>d.getEntry(u,A)).next(R=>{const N=h.docVersions.get(A);oe(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),d.addEntry(R)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function O_(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function bk(t,e){const n=Y(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;l.push(n.hi.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,p)));let I=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(qe.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):d.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(d.resumeToken,r)),s=s.insert(p,I),function(R,N,v){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Rk?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,I,d)&&l.push(n.hi.updateTargetData(i,I))});let u=In(),h=ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(Vk(i,o,e.documentUpdates).next(d=>{u=d.Ls,h=d.ks})),!r.isEqual(Q.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(p=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Fs=s,i))}function Vk(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=In();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(Kd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function Mk(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Md),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lk(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new Fn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function _h(t,e,n){const r=Y(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Os(o))throw o;H(Kd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function xg(t,e,n){const r=Y(t);let s=Q.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const p=Y(u),m=p.Ms.get(d);return m!==void 0?F.resolve(p.Fs.get(m)):p.hi.getTargetData(h,d)}(r,o,Yt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Q.min(),n?i:ee())).next(l=>(Ok(r,TI(e),l),{documents:l,qs:i})))}function Ok(t,e,n){let r=t.xs.get(e)||Q.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Tg{constructor(){this.activeTargetIds=RI()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jk{constructor(){this.Fo=new Tg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Tg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="ConnectivityMonitor";class Ig{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){H(Sg,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){H(Sg,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=null;function wh(){return ia===null?ia=function(){return 268435456+Math.round(2147483648*Math.random())}():ia++,"0x"+ia.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc="RestConnection",Uk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zk{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===rl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=wh(),l=this.Go(e,n.toUriEncodedString());H(rc,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:h}=new URL(l),d=Nd(h);return this.jo(e,l,u,r,d).then(p=>(H(rc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw er(rc,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ms}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Uk[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class $k extends zk{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=wh();return new Promise((l,u)=>{const h=new Fv;h.setWithCredentials(!0),h.listenOnce(Uv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wa.NO_ERROR:const p=h.getResponseJson();H(Xe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case wa.TIMEOUT:H(Xe,`RPC '${e}' ${o} timed out`),u(new B(j.DEADLINE_EXCEEDED,"Request time out"));break;case wa.HTTP_ERROR:const m=h.getStatus();if(H(Xe,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I==null?void 0:I.error;if(A&&A.status&&A.message){const R=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(w)>=0?w:j.UNKNOWN}(A.status);u(new B(R,A.message))}else u(new B(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(j.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{H(Xe,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);H(Xe,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",d,r,15)})}P_(e,n,r){const s=wh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$v(),l=Bv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");H(Xe,`Creating RPC '${e}' stream ${s}: ${d}`,u);const p=o.createWebChannel(d,u);this.T_(p);let m=!1,I=!1;const A=new Bk({Ho:N=>{I?H(Xe,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(m||(H(Xe,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),H(Xe,`RPC '${e}' stream ${s} sending:`,N),p.send(N))},Yo:()=>p.close()}),R=(N,v,w)=>{N.listen(v,x=>{try{w(x)}catch(P){setTimeout(()=>{throw P},0)}})};return R(p,di.EventType.OPEN,()=>{I||(H(Xe,`RPC '${e}' stream ${s} transport opened.`),A.s_())}),R(p,di.EventType.CLOSE,()=>{I||(I=!0,H(Xe,`RPC '${e}' stream ${s} transport closed`),A.__(),this.I_(p))}),R(p,di.EventType.ERROR,N=>{I||(I=!0,er(Xe,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),A.__(new B(j.UNAVAILABLE,"The operation could not be completed")))}),R(p,di.EventType.MESSAGE,N=>{var v;if(!I){const w=N.data[0];oe(!!w,16349);const x=w,P=(x==null?void 0:x.error)||((v=x[0])===null||v===void 0?void 0:v.error);if(P){H(Xe,`RPC '${e}' stream ${s} received error:`,P);const M=P.status;let O=function(T){const S=Re[T];if(S!==void 0)return S_(S)}(M),E=P.message;O===void 0&&(O=j.INTERNAL,E="Unknown error status: "+M+" with message "+P.message),I=!0,A.__(new B(O,E)),p.close()}else H(Xe,`RPC '${e}' stream ${s} received:`,w),A.a_(w)}}),R(l,zv.STAT_EVENT,N=>{N.stat===ah.PROXY?H(Xe,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===ah.NOPROXY&&H(Xe,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function sc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){return new GI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="PersistentStream";class F_{constructor(e,n,r,s,i,o,l,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new j_(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Sn(n.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new B(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return H(kg,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(H(kg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hk extends F_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=YI(this.serializer,e),r=function(i){if(!("targetChange"in i))return Q.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Xt(o.readTime):Q.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=vh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=dh(u)?{documents:ZI(i,u)}:{query:ek(i,u).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=A_(i,o.resumeToken);const h=mh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Q.min())>0){l.readTime=ul(i,o.snapshotVersion.toTimestamp());const h=mh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=nk(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=vh(this.serializer),n.removeTarget=e,this.k_(n)}}class qk extends F_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=JI(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=vh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>XI(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{}class Gk extends Wk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,gh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(j.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,gh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(j.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Kk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Sn(n),this._a=!1):H("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="RemoteStore";class Qk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Fr(this)&&(H(Vr,"Restarting streams for network reachability change."),await async function(u){const h=Y(u);h.Ia.add(4),await go(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Wl(h)}(this))})}),this.Aa=new Kk(r,s)}}async function Wl(t){if(Fr(t))for(const e of t.da)await e(!0)}async function go(t){for(const e of t.da)await e(!1)}function U_(t,e){const n=Y(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Jd(n)?Xd(n):js(n).x_()&&Yd(n,e))}function Qd(t,e){const n=Y(t),r=js(n);n.Ta.delete(e),r.x_()&&z_(n,e),n.Ta.size===0&&(r.x_()?r.B_():Fr(n)&&n.Aa.set("Unknown"))}function Yd(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}js(t).H_(e)}function z_(t,e){t.Ra.$e(e),js(t).Y_(e)}function Xd(t){t.Ra=new $I({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),js(t).start(),t.Aa.aa()}function Jd(t){return Fr(t)&&!js(t).M_()&&t.Ta.size>0}function Fr(t){return Y(t).Ia.size===0}function B_(t){t.Ra=void 0}async function Yk(t){t.Aa.set("Online")}async function Xk(t){t.Ta.forEach((e,n)=>{Yd(t,e)})}async function Jk(t,e){B_(t),Jd(t)?(t.Aa.la(e),Xd(t)):t.Aa.set("Unknown")}async function Zk(t,e,n){if(t.Aa.set("Online"),e instanceof k_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){H(Vr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hl(t,r)}else if(e instanceof Sa?t.Ra.Ye(e):e instanceof I_?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Q.min()))try{const r=await O_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ta.get(h);d&&i.Ta.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=i.Ta.get(u);if(!d)return;i.Ta.set(u,d.withResumeToken(qe.EMPTY_BYTE_STRING,d.snapshotVersion)),z_(i,u);const p=new Fn(d.target,u,h,d.sequenceNumber);Yd(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Vr,"Failed to raise snapshot:",r),await hl(t,r)}}async function hl(t,e,n){if(!Os(e))throw e;t.Ia.add(1),await go(t),t.Aa.set("Offline"),n||(n=()=>O_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Vr,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Wl(t)})}function $_(t,e){return e().catch(n=>hl(t,n,e))}async function Gl(t){const e=Y(t),n=ir(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Md;for(;eA(e);)try{const s=await Mk(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,tA(e,s)}catch(s){await hl(e,s)}H_(e)&&q_(e)}function eA(t){return Fr(t)&&t.Pa.length<10}function tA(t,e){t.Pa.push(e);const n=ir(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function H_(t){return Fr(t)&&!ir(t).M_()&&t.Pa.length>0}function q_(t){ir(t).start()}async function nA(t){ir(t).na()}async function rA(t){const e=ir(t);for(const n of t.Pa)e.X_(n.mutations)}async function sA(t,e,n){const r=t.Pa.shift(),s=Bd.from(r,e,n);await $_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Gl(t)}async function iA(t,e){e&&ir(t).Z_&&await async function(r,s){if(function(o){return zI(o)&&o!==j.ABORTED}(s.code)){const i=r.Pa.shift();ir(r).N_(),await $_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Gl(r)}}(t,e),H_(t)&&q_(t)}async function Ag(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),H(Vr,"RemoteStore received new credentials");const r=Fr(n);n.Ia.add(3),await go(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Wl(n)}async function oA(t,e){const n=Y(t);e?(n.Ia.delete(2),await Wl(n)):e||(n.Ia.add(2),await go(n),n.Aa.set("Unknown"))}function js(t){return t.Va||(t.Va=function(n,r,s){const i=Y(n);return i.ia(),new Hk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Yk.bind(null,t),e_:Xk.bind(null,t),n_:Jk.bind(null,t),J_:Zk.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Jd(t)?Xd(t):t.Aa.set("Unknown")):(await t.Va.stop(),B_(t))})),t.Va}function ir(t){return t.ma||(t.ma=function(n,r,s){const i=Y(n);return i.ia(),new qk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:nA.bind(null,t),n_:iA.bind(null,t),ea:rA.bind(null,t),ta:sA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Gl(t)):(await t.ma.stop(),t.Pa.length>0&&(H(Vr,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Zd(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ef(t,e){if(Sn("AsyncQueue",`${e}: ${t}`),Os(t))return new B(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{static emptySet(e){return new gs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=fi(),this.sortedSet=new xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this.fa=new xe(W.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cs{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Cs(e,n,gs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class lA{constructor(){this.queries=Rg(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Y(n),i=s.queries;s.queries=Rg(),i.forEach((o,l)=>{for(const u of l.wa)u.onError(r)})})(this,new B(j.ABORTED,"Firestore shutting down"))}}function Rg(){return new jr(t=>d_(t),Ul)}async function tf(t,e){const n=Y(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new aA,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ef(o,`Initialization of query '${Gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&rf(n)}async function nf(t,e){const n=Y(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uA(t,e){const n=Y(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(r=!0);o.ya=s}}r&&rf(n)}function cA(t,e,n){const r=Y(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function rf(t){t.Da.forEach(e=>{e.next()})}var Eh,Pg;(Pg=Eh||(Eh={})).Fa="default",Pg.Cache="cache";class sf{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Cs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.key=e}}class G_{constructor(e){this.key=e}}class hA{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ee(),this.mutatedKeys=ee(),this.Xa=f_(e),this.eu=new gs(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Cg,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),I=zl(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let N=!1;m&&I?m.data.isEqual(I.data)?A!==R&&(r.track({type:3,doc:I}),N=!0):this.iu(m,I)||(r.track({type:2,doc:I}),N=!0,(u&&this.Xa(I,u)>0||h&&this.Xa(I,h)<0)&&(l=!0)):!m&&I?(r.track({type:0,doc:I}),N=!0):m&&!I&&(r.track({type:1,doc:m}),N=!0,(u||h)&&(l=!0)),N&&(I?(o=o.add(I),i=R?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,p)=>function(I,A){const R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:N})}};return R(I)-R(A)}(d.type,p.type)||this.Xa(d.doc,p.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,h=u!==this.Ya;return this.Ya=u,o.length!==0||h?{snapshot:new Cs(this.query,e.eu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Cg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new G_(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new W_(r))}),n}uu(e){this.Ha=e.qs,this.Za=ee();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Cs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const of="SyncEngine";class dA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fA{constructor(e){this.key=e,this.lu=!1}}class pA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new jr(l=>d_(l),Ul),this.Tu=new Map,this.Iu=new Set,this.du=new xe(W.comparator),this.Eu=new Map,this.Au=new qd,this.Ru={},this.Vu=new Map,this.mu=As.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function mA(t,e,n=!0){const r=Z_(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await K_(r,e,n,!0),s}async function gA(t,e){const n=Z_(t);await K_(n,e,!0,!1)}async function K_(t,e,n,r){const s=await Lk(t.localStore,Yt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await yA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&U_(t.remoteStore,s),l}async function yA(t,e,n,r,s){t.gu=(p,m,I)=>async function(R,N,v,w){let x=N.view.nu(v);x.Ds&&(x=await xg(R.localStore,N.query,!1).then(({documents:E})=>N.view.nu(E,x)));const P=w&&w.targetChanges.get(N.targetId),M=w&&w.targetMismatches.get(N.targetId)!=null,O=N.view.applyChanges(x,R.isPrimaryClient,P,M);return Dg(R,N.targetId,O._u),O.snapshot}(t,p,m,I);const i=await xg(t.localStore,e,!0),o=new hA(e,i.qs),l=o.nu(i.documents),u=mo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Dg(t,n,h._u);const d=new dA(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function vA(t,e,n){const r=Y(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Ul(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _h(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qd(r.remoteStore,s.targetId),xh(r,s.targetId)}).catch(Ls)):(xh(r,s.targetId),await _h(r.localStore,s.targetId,!0))}async function _A(t,e){const n=Y(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qd(n.remoteStore,r.targetId))}async function wA(t,e,n){const r=AA(t);try{const s=await function(o,l){const u=Y(o),h=pe.now(),d=l.reduce((I,A)=>I.add(A.key),ee());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let A=In(),R=ee();return u.Os.getEntries(I,d).next(N=>{A=N,A.forEach((v,w)=>{w.isValidDocument()||(R=R.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,A)).next(N=>{p=N;const v=[];for(const w of l){const x=LI(w,p.get(w.key).overlayedDocument);x!=null&&v.push(new hr(w.key,x,s_(x.value.mapValue),Pt.exists(!0)))}return u.mutationQueue.addMutationBatch(I,h,v,l)}).next(N=>{m=N;const v=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(I,N.batchId,v)})}).then(()=>({batchId:m.batchId,changes:m_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ru[o.currentUser.toKey()];h||(h=new xe(J)),h=h.insert(l,u),o.Ru[o.currentUser.toKey()]=h}(r,s.batchId,n),await yo(r,s.changes),await Gl(r.remoteStore)}catch(s){const i=ef(s,"Failed to persist write");n.reject(i)}}async function Q_(t,e){const n=Y(t);try{const r=await bk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?oe(o.lu,14607):s.removedDocuments.size>0&&(oe(o.lu,42227),o.lu=!1))}),await yo(n,r,e)}catch(r){await Ls(r)}}function Ng(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Y(o);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.wa)m.va(l)&&(h=!0)}),h&&rf(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EA(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new xe(W.comparator);o=o.insert(i,et.newNoDocument(i,Q.min()));const l=ee().add(i),u=new Hl(Q.min(),new Map,new xe(J),o,l);await Q_(r,u),r.du=r.du.remove(i),r.Eu.delete(e),af(r)}else await _h(r.localStore,e,!1).then(()=>xh(r,e,n)).catch(Ls)}async function xA(t,e){const n=Y(t),r=e.batch.batchId;try{const s=await Dk(n.localStore,e);X_(n,r,null),Y_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yo(n,s)}catch(s){await Ls(s)}}async function TA(t,e,n){const r=Y(t);try{const s=await function(o,l){const u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(oe(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);X_(r,e,n),Y_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yo(r,s)}catch(s){await Ls(s)}}function Y_(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function X_(t,e,n){const r=Y(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function xh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||J_(t,r)})}function J_(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qd(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),af(t))}function Dg(t,e,n){for(const r of n)r instanceof W_?(t.Au.addReference(r.key,e),SA(t,r)):r instanceof G_?(H(of,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||J_(t,r.key)):G(19791,{yu:r})}function SA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(H(of,"New document in limbo: "+n),t.Iu.add(r),af(t))}function af(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new W(ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new fA(n)),t.du=t.du.insert(n,r),U_(t.remoteStore,new Fn(Yt(Fl(n.path)),r,"TargetPurposeLimboResolution",Ll.ue))}}async function yo(t,e,n){const r=Y(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,u)=>{o.push(r.gu(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Gd.Es(u.targetId,h);i.push(p)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,h){const d=Y(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,m=>F.forEach(m.Is,I=>d.persistence.referenceDelegate.addReference(p,m.targetId,I)).next(()=>F.forEach(m.ds,I=>d.persistence.referenceDelegate.removeReference(p,m.targetId,I)))))}catch(p){if(!Os(p))throw p;H(Kd,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const I=d.Fs.get(m),A=I.snapshotVersion,R=I.withLastLimboFreeSnapshotVersion(A);d.Fs=d.Fs.insert(m,R)}}}(r.localStore,i))}async function IA(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){H(of,"User change. New user:",e.toKey());const r=await L_(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(u=>{u.reject(new B(j.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yo(n,r.Bs)}}function kA(t,e){const n=Y(t),r=n.Eu.get(e);if(r&&r.lu)return ee().add(r.key);{let s=ee();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const l=n.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function Z_(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EA.bind(null,e),e.hu.J_=uA.bind(null,e.eventManager),e.hu.pu=cA.bind(null,e.eventManager),e}function AA(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TA.bind(null,e),e}class dl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ql(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Nk(this.persistence,new Ck,e.initialUser,this.serializer)}Du(e){return new M_(Wd.Vi,this.serializer)}bu(e){return new jk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dl.provider={build:()=>new dl};class CA extends dl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){oe(this.persistence.referenceDelegate instanceof cl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fk(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?lt.withCacheSize(this.cacheSizeBytes):lt.DEFAULT;return new M_(r=>cl.Vi(r,n),this.serializer)}}class Th{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ng(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IA.bind(null,this.syncEngine),await oA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lA}()}createDatastore(e){const n=ql(e.databaseInfo.databaseId),r=function(i){return new $k(i)}(e.databaseInfo);return function(i,o,l,u){return new Gk(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Qk(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Ng(this.syncEngine,n,0),function(){return Ig.C()?new Ig:new Fk}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,d){const p=new pA(s,i,o,l,u,h);return d&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Y(s);H(Vr,"RemoteStore shutting down."),i.Ia.add(5),await go(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Th.provider={build:()=>new Th};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="FirestoreClient";class RA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Je.UNAUTHENTICATED,this.clientId=Vd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ef(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ic(t,e){t.asyncQueue.verifyOperationInProgress(),H(or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await L_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{er("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{H("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{er("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function bg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PA(t);H(or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ag(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ag(e.remoteStore,s)),t._onlineComponents=e}async function PA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(or,"Using user provided OfflineComponentProvider");try{await ic(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;er("Error using user provided cache. Falling back to memory cache: "+n),await ic(t,new dl)}}else H(or,"Using default OfflineComponentProvider"),await ic(t,new CA(void 0));return t._offlineComponents}async function e1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(or,"Using user provided OnlineComponentProvider"),await bg(t,t._uninitializedComponentsProvider._online)):(H(or,"Using default OnlineComponentProvider"),await bg(t,new Th))),t._onlineComponents}function NA(t){return e1(t).then(e=>e.syncEngine)}async function fl(t){const e=await e1(t),n=e.eventManager;return n.onListen=mA.bind(null,e.syncEngine),n.onUnlisten=vA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_A.bind(null,e.syncEngine),n}function DA(t,e,n={}){const r=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const d=new lf({next:m=>{d.Ou(),o.enqueueAndForget(()=>nf(i,p));const I=m.docs.has(l);!I&&m.fromCache?h.reject(new B(j.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&m.fromCache&&u&&u.source==="server"?h.reject(new B(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new sf(Fl(l.path),d,{includeMetadataChanges:!0,ka:!0});return tf(i,p)}(await fl(t),t.asyncQueue,e,n,r)),r.promise}function bA(t,e,n={}){const r=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const d=new lf({next:m=>{d.Ou(),o.enqueueAndForget(()=>nf(i,p)),m.fromCache&&u.source==="server"?h.reject(new B(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new sf(l,d,{includeMetadataChanges:!0,ka:!0});return tf(i,p)}(await fl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="firestore.googleapis.com",Mg=!0;class Lg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=n1,this.ssl=Mg}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Mg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hk)throw new B(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zS;switch(r.type){case"firstParty":return new qS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Vg.get(n);r&&(H("ComponentProvider","Removing Datastore"),Vg.delete(n),r.terminate())}(this),Promise.resolve()}}function VA(t,e,n,r={}){var s;t=mt(t,Kl);const i=Nd(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(pT(`https://${u}`),vT("Firestore",!0)),o.host!==n1&&o.host!==u&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Za(h,l)&&(t._setSettings(h),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Je.MOCK_USER;else{d=mT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new B(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Je(m)}t._authCredentials=new BS(new qv(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class Ie{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ie(this.firestore,e,this._key)}toJSON(){return{type:Ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ho(n,Ie._jsonSchema))return new Ie(e,r||null,new W(ce.fromString(n.referencePath)))}}Ie._jsonSchemaVersion="firestore/documentReference/1.0",Ie._jsonSchema={type:De("string",Ie._jsonSchemaVersion),referencePath:De("string")};class Xn extends Ur{constructor(e,n,r){super(e,n,Fl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ie(this.firestore,null,new W(e))}withConverter(e){return new Xn(this.firestore,e,this._path)}}function pl(t,e,...n){if(t=en(t),Gv("collection","path",e),t instanceof Kl){const r=ce.fromString(e,...n);return Qm(r),new Xn(t,null,r)}{if(!(t instanceof Ie||t instanceof Xn))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return Qm(r),new Xn(t.firestore,null,r)}}function ls(t,e,...n){if(t=en(t),arguments.length===1&&(e=Vd.newId()),Gv("doc","path",e),t instanceof Kl){const r=ce.fromString(e,...n);return Km(r),new Ie(t,null,new W(r))}{if(!(t instanceof Ie||t instanceof Xn))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return Km(r),new Ie(t.firestore,t instanceof Xn?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="AsyncQueue";class jg{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new j_(this,"async_queue_retry"),this.oc=()=>{const r=sc();r&&H(Og,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new yn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Os(e))throw e;H(Og,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Sn("INTERNAL UNHANDLED ERROR: ",Fg(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Zd.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&G(47125,{hc:Fg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Fg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class kn extends Kl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}}function MA(t,e){const n=typeof t=="object"?t:CS(),r=typeof t=="string"?t:rl,s=TS(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dT("firestore");i&&VA(s,...i)}return s}function Ql(t){if(t._terminated)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LA(t),t._firestoreClient}function LA(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,d){return new aI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,t1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new RA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this._byteString=e}static fromBase64String(e){try{return new At(qe.fromBase64String(e))}catch(n){throw new B(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new At(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:At._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ho(e,At._jsonSchema))return At.fromBase64String(e.bytes)}}At._jsonSchemaVersion="firestore/bytes/1.0",At._jsonSchema={type:De("string",At._jsonSchemaVersion),bytes:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jt._jsonSchemaVersion}}static fromJSON(e){if(ho(e,Jt._jsonSchema))return new Jt(e.latitude,e.longitude)}}Jt._jsonSchemaVersion="firestore/geoPoint/1.0",Jt._jsonSchema={type:De("string",Jt._jsonSchemaVersion),latitude:De("number"),longitude:De("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Zt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ho(e,Zt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Zt(e.vectorValues);throw new B(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zt._jsonSchemaVersion="firestore/vectorValue/1.0",Zt._jsonSchema={type:De("string",Zt._jsonSchemaVersion),vectorValues:De("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=/^__.*__$/;class jA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new po(e,this.data,n,this.fieldTransforms)}}class r1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function s1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:t})}}class cf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ml(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(s1(this.Ec)&&OA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class FA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ql(e)}Dc(e,n,r,s=!1){return new cf({Ec:e,methodName:n,bc:r,path:Be.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xl(t){const e=t._freezeSettings(),n=ql(t._databaseId);return new FA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function i1(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);hf("Data must be an object, but it was:",o,r);const l=o1(r,o);let u,h;if(i.merge)u=new _t(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=Sh(e,p,n);if(!o.contains(m))throw new B(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);l1(d,m)||d.push(m)}u=new _t(d),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new jA(new ct(l),u,h)}class Jl extends uf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jl}}function UA(t,e,n,r){const s=t.Dc(1,e,n);hf("Data must be an object, but it was:",s,r);const i=[],o=ct.empty();cr(r,(u,h)=>{const d=df(e,u,n);h=en(h);const p=s.gc(d);if(h instanceof Jl)i.push(d);else{const m=vo(h,p);m!=null&&(i.push(d),o.set(d,m))}});const l=new _t(i);return new r1(o,l,s.fieldTransforms)}function zA(t,e,n,r,s,i){const o=t.Dc(1,e,n),l=[Sh(e,r,n)],u=[s];if(i.length%2!=0)throw new B(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Sh(e,i[m])),u.push(i[m+1]);const h=[],d=ct.empty();for(let m=l.length-1;m>=0;--m)if(!l1(h,l[m])){const I=l[m];let A=u[m];A=en(A);const R=o.gc(I);if(A instanceof Jl)h.push(I);else{const N=vo(A,R);N!=null&&(h.push(I),d.set(I,N))}}const p=new _t(h);return new r1(d,p,o.fieldTransforms)}function BA(t,e,n,r=!1){return vo(n,t.Dc(r?4:3,e))}function vo(t,e){if(a1(t=en(t)))return hf("Unsupported field value:",e,t),o1(t,e);if(t instanceof uf)return function(r,s){if(!s1(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=vo(l,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=pe.fromDate(r);return{timestampValue:ul(s.serializer,i)}}if(r instanceof pe){const i=new pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ul(s.serializer,i)}}if(r instanceof Jt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof At)return{bytesValue:A_(s.serializer,r._byteString)};if(r instanceof Ie){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zt)return function(o,l){return{mapValue:{fields:{[n_]:{stringValue:r_},[sl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.wc("VectorValues must only contain numeric values.");return Ud(l.serializer,h)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Ml(r)}`)}(t,e)}function o1(t,e){const n={};return Yv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(t,(r,s)=>{const i=vo(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function a1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pe||t instanceof Jt||t instanceof At||t instanceof Ie||t instanceof uf||t instanceof Zt)}function hf(t,e,n){if(!a1(n)||!Kv(n)){const r=Ml(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Sh(t,e,n){if((e=en(e))instanceof Yl)return e._internalPath;if(typeof e=="string")return df(t,e);throw ml("Field path arguments must be of type string or ",t,!1,void 0,n)}const $A=new RegExp("[~\\*/\\[\\]]");function df(t,e,n){if(e.search($A)>=0)throw ml(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yl(...e.split("."))._internalPath}catch{throw ml(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ml(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new B(j.INVALID_ARGUMENT,l+t+u)}function l1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(c1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HA extends u1{data(){return super.data()}}function c1(t,e){return typeof e=="string"?df(t,e):e instanceof Yl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ff{}class qA extends ff{}function WA(t,e,...n){let r=[];e instanceof ff&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof mf).length,l=i.filter(u=>u instanceof pf).length;if(o>1||o>0&&l>0)throw new B(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class pf extends qA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pf(e,n,r)}_apply(e){const n=this._parse(e);return d1(e._query,n),new Ur(e.firestore,e.converter,fh(e._query,n))}_parse(e){const n=Xl(e.firestore);return function(i,o,l,u,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Bg(p,d);const A=[];for(const R of p)A.push(zg(u,i,R));m={arrayValue:{values:A}}}else m=zg(u,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Bg(p,d),m=BA(l,o,p,d==="in"||d==="not-in");return Ne.create(h,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class mf extends ff{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)d1(o,u),o=fh(o,u)}(e._query,n),new Ur(e.firestore,e.converter,fh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zg(t,e,n){if(typeof(n=en(n))=="string"){if(n==="")throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h_(e)&&n.indexOf("/")!==-1)throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!W.isDocumentKey(r))throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rg(t,new W(r))}if(n instanceof Ie)return rg(t,n._key);throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ml(n)}.`)}function Bg(t,e){if(!Array.isArray(t)||t.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d1(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GA{convertValue(e,n="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[sl].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ae(o.doubleValue));return new Zt(i)}convertGeoPoint(e){return new Jt(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ji(e));default:return null}}convertTimestamp(e){const n=nr(e);return new pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);oe(b_(r),9688,{name:e});const s=new Zi(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||Sn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class mi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kr extends u1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(c1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",kr._jsonSchema={type:De("string",kr._jsonSchemaVersion),bundleSource:De("string","DocumentSnapshot"),bundleName:De("string"),bundle:De("string")};class Ia extends kr{data(e={}){return super.data(e)}}class Ar{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new mi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ia(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Ia(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ia(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:KA(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ar._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){t=mt(t,Ie);const e=mt(t.firestore,kn);return DA(Ql(e),t._key).then(n=>g1(e,t,n))}Ar._jsonSchemaVersion="firestore/querySnapshot/1.0",Ar._jsonSchema={type:De("string",Ar._jsonSchemaVersion),bundleSource:De("string","QuerySnapshot"),bundleName:De("string"),bundle:De("string")};class gf extends GA{constructor(e){super(),this.firestore=e}convertBytes(e){return new At(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ie(this.firestore,null,n)}}function m1(t){t=mt(t,Ur);const e=mt(t.firestore,kn),n=Ql(e),r=new gf(e);return h1(t._query),bA(n,t._query).then(s=>new Ar(e,r,t,s))}function $g(t,e,n){t=mt(t,Ie);const r=mt(t.firestore,kn),s=f1(t.converter,e);return Zl(r,[i1(Xl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Pt.none())])}function QA(t,e,n,...r){t=mt(t,Ie);const s=mt(t.firestore,kn),i=Xl(s);let o;return o=typeof(e=en(e))=="string"||e instanceof Yl?zA(i,"updateDoc",t._key,e,n,r):UA(i,"updateDoc",t._key,e),Zl(s,[o.toMutation(t._key,Pt.exists(!0))])}function YA(t){return Zl(mt(t.firestore,kn),[new zd(t._key,Pt.none())])}function XA(t,e){const n=mt(t.firestore,kn),r=ls(t),s=f1(t.converter,e);return Zl(n,[i1(Xl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Pt.exists(!1))]).then(()=>r)}function JA(t,...e){var n,r,s;t=en(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ug(e[o])||(i=e[o++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Ug(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,h,d;if(t instanceof Ie)h=mt(t.firestore,kn),d=Fl(t._key.path),u={next:p=>{e[o]&&e[o](g1(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=mt(t,Ur);h=mt(p.firestore,kn),d=p._query;const m=new gf(h);u={next:I=>{e[o]&&e[o](new Ar(h,m,p,I))},error:e[o+1],complete:e[o+2]},h1(t._query)}return function(m,I,A,R){const N=new lf(R),v=new sf(I,N,A);return m.asyncQueue.enqueueAndForget(async()=>tf(await fl(m),v)),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(async()=>nf(await fl(m),v))}}(Ql(h),d,l,u)}function Zl(t,e){return function(r,s){const i=new yn;return r.asyncQueue.enqueueAndForget(async()=>wA(await NA(r),s,i)),i.promise}(Ql(t),e)}function g1(t,e,n){const r=n.docs.get(e._key),s=new gf(t);return new kr(t,s,e._key,r,new mi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ms=s})(AS),tl(new Qi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new kn(new $S(r.getProvider("auth-internal")),new WS(o,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zi(h.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ms($m,Hm,e),ms($m,Hm,"esm2017")})();const ZA={apiKey:"AIzaSyB9wTEF80N6gQC82A2OLuIij4k4TIxCIlc",authDomain:"fengyuan-handbook.firebaseapp.com",projectId:"fengyuan-handbook",storageBucket:"fengyuan-handbook.firebasestorage.app",messagingSenderId:"611897296630",appId:"1:611897296630:web:24958a6cf6cce57633ced7"},eC=Mv(ZA),dn=MA(eC);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>b.createElement("svg",{ref:u,...nC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:y1("lucide",s),...l},[...o.map(([h,d])=>b.createElement(h,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(rC,{ref:i,iconNode:e,className:y1(`lucide-${tC(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=ie("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=ie("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ie("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ie("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ie("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ie("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ie("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function SC(){const[t,e]=b.useState("list"),[n,r]=b.useState([]),[s,i]=b.useState(!1),[o,l]=b.useState({categories:["","","","","",""],quickKeywords:["","","",""]}),[u,h]=b.useState(!1),[d,p]=b.useState(null),m=async()=>{i(!0);try{const w=(await m1(pl(dn,"sop_articles"))).docs.map(M=>({id:M.id,...M.data()}));r(w.sort((M,O)=>{var E,y;return(((E=O.createdAt)==null?void 0:E.seconds)||0)-(((y=M.createdAt)==null?void 0:y.seconds)||0)}));const x=ls(dn,"site_settings","sop_config"),P=await p1(x);P.exists()?l(P.data()):await $g(x,o)}catch(v){console.error(":",v)}i(!1)};b.useEffect(()=>{m()},[]);const I=(v=null)=>{p(v?{...v,keywordsString:v.keywords?v.keywords.join(", "):""}:{title:"",category:o.categories[0]||"",content:"",keywordsString:""}),h(!0)},A=async()=>{if(!d.title||!d.content)return alert("");i(!0);try{const v={title:d.title,category:d.category,content:d.content,keywords:d.keywordsString.split(/[,]/).map(w=>w.trim()).filter(w=>w),updatedAt:new Date};d.id?await QA(ls(dn,"sop_articles",d.id),v):await XA(pl(dn,"sop_articles"),{...v,createdAt:new Date}),h(!1),p(null),await m()}catch(v){alert(": "+v.message)}i(!1)},R=async(v,w)=>{const x={...o,[v]:w};l(x);try{await $g(ls(dn,"site_settings","sop_config"),x)}catch{alert("")}},N=({title:v,dataKey:w,items:x})=>{const[P,M]=b.useState(""),O=()=>{if(P.trim()){if(x.includes(P.trim()))return alert("");R(w,[...x,P.trim()]),M("")}},E=y=>{confirm(` "${y}" `)&&R(w,x.filter(T=>T!==y))};return g.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 mb-4",children:[g.jsx("h4",{className:"font-bold text-slate-700 mb-3",children:v}),g.jsxs("div",{className:"flex gap-2 mb-3",children:[g.jsx("input",{value:P,onChange:y=>M(y.target.value),className:"flex-1 border border-slate-300 rounded px-2 py-1 text-sm",placeholder:`${v}...`}),g.jsx("button",{onClick:O,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm font-bold",children:""})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(y=>g.jsxs("span",{className:"bg-white border border-slate-300 px-2 py-1 rounded text-xs flex items-center gap-1",children:[y,g.jsx("button",{onClick:()=>E(y),className:"text-red-400 hover:text-red-600",children:g.jsx(gl,{className:"w-3 h-3"})})]},y))})]})};return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded-xl shadow-sm border border-slate-100",children:[g.jsxs("div",{className:"flex gap-1",children:[g.jsxs("button",{onClick:()=>e("list"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all ${t==="list"?"bg-blue-100 text-blue-700":"text-slate-500 hover:bg-slate-50"}`,children:[g.jsx(dC,{className:"w-4 h-4"})," SOP "]}),g.jsxs("button",{onClick:()=>e("settings"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all ${t==="settings"?"bg-blue-100 text-blue-700":"text-slate-500 hover:bg-slate-50"}`,children:[g.jsx(gC,{className:"w-4 h-4"})," "]})]}),t==="list"&&g.jsxs("button",{onClick:()=>I(),className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold flex items-center gap-1 shadow-md hover:bg-blue-500",children:[g.jsx(fC,{className:"w-4 h-4"}),"  SOP"]})]}),t==="list"?g.jsx("div",{className:"grid gap-3 max-h-[600px] overflow-y-auto pr-2",children:s&&!u?g.jsx("div",{className:"text-center py-4",children:g.jsx(Ah,{className:"animate-spin inline"})}):n.map(v=>g.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center group",children:[g.jsx("div",{className:"min-w-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-1.5 rounded",children:v.category}),g.jsx("h4",{className:"font-bold text-slate-800 text-sm truncate",children:v.title})]})}),g.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>I(v),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100",children:g.jsx(yC,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>YA(ls(dn,"sop_articles",v.id)).then(m),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100",children:g.jsx(_C,{className:"w-4 h-4"})})]})]},v.id))}):g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[g.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:""}),g.jsx(N,{title:"",dataKey:"categories",items:o.categories}),g.jsx(N,{title:"",dataKey:"quickKeywords",items:o.quickKeywords})]}),u&&d&&g.jsx("div",{className:"fixed inset-0 z-[150] bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[g.jsxs("div",{className:"px-5 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[g.jsx("h3",{className:"font-black text-slate-800",children:d.id?" SOP":" SOP"}),g.jsx("button",{onClick:()=>h(!1),children:g.jsx(gl,{className:"w-6 h-6 text-slate-400 hover:text-slate-600"})})]}),g.jsxs("div",{className:"p-5 space-y-4 overflow-y-auto",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:""}),g.jsx("input",{type:"text",value:d.title,onChange:v=>p({...d,title:v.target.value}),className:"w-full border border-slate-300 rounded-lg p-2.5 text-sm font-bold focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:""}),g.jsx("select",{value:d.category,onChange:v=>p({...d,category:v.target.value}),className:"w-full border border-slate-300 rounded-lg p-2.5 text-sm bg-white",children:o.categories.map(v=>g.jsx("option",{value:v,children:v},v))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:" ()"}),g.jsx("input",{type:"text",value:d.keywordsString,onChange:v=>p({...d,keywordsString:v.target.value}),className:"w-full border border-slate-300 rounded-lg p-2.5 text-sm"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"SOP "}),g.jsx("textarea",{value:d.content,onChange:v=>p({...d,content:v.target.value}),className:"w-full border border-slate-300 rounded-lg p-3 text-sm min-h-[200px] leading-relaxed focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),g.jsxs("div",{className:"p-4 border-t border-slate-100 flex gap-3",children:[g.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 bg-slate-100 hover:bg-slate-200",children:""}),g.jsxs("button",{onClick:A,disabled:s,className:"flex-1 py-3 rounded-xl font-bold text-white bg-blue-600 hover:bg-blue-700 shadow-lg flex justify-center items-center gap-2",children:[s?g.jsx(Ah,{className:"animate-spin w-4 h-4"}):g.jsx(mC,{className:"w-4 h-4"})," "]})]})]})})]})}const IC=[{id:1,area:" ()",ext:"1151",note:""},{id:2,area:"",ext:"1152",note:""},{id:3,area:" ()",ext:"1153",note:""},{id:4,area:"",ext:"1154",note:""},{id:5,area:"",ext:"1157",note:""},{id:6,area:"TPN",ext:"1158",note:""},{id:7,area:"",ext:"1159",note:""},{id:8,area:"",ext:"1063",note:""},{id:9,area:"",ext:"5151",note:""},{id:10,area:" ()",ext:"3253",note:""},{id:11,area:"",ext:"26XX",note:"26+"},{id:12,area:"",ext:"2646",note:"45"}],oc=[{bg:"bg-blue-50",text:"text-blue-700"},{bg:"bg-emerald-50",text:"text-emerald-700"},{bg:"bg-orange-50",text:"text-orange-700"},{bg:"bg-purple-50",text:"text-purple-700"},{bg:"bg-rose-50",text:"text-rose-700"},{bg:"bg-indigo-50",text:"text-indigo-700"},{bg:"bg-cyan-50",text:"text-cyan-700"},{bg:"bg-slate-100",text:"text-slate-700"}];function kC(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function AC(){const[t,e]=b.useState("qa"),[n,r]=b.useState(""),[s,i]=b.useState([]),[o,l]=b.useState({categories:[],quickKeywords:[]}),[u,h]=b.useState(!1),[d,p]=b.useState(null),[m,I]=b.useState(!1),[A,R]=b.useState(null),N=b.useRef(null);b.useEffect(()=>{(async()=>{h(!0);try{const O=(await m1(pl(dn,"sop_articles"))).docs.map(S=>({id:S.id,...S.data()})),E=ls(dn,"site_settings","sop_config"),y=await p1(E);let T={categories:[],quickKeywords:[]};if(y.exists())T=y.data();else{const S=[...new Set(O.map(C=>C.category))];T.categories=S}i(O),l(T)}catch(M){console.error(":",M)}h(!1)})()},[]),b.useEffect(()=>{n&&I(!0),d&&I(!0)},[n,d]),b.useEffect(()=>{A&&n&&N.current&&setTimeout(()=>{N.current.scrollIntoView({behavior:"smooth",block:"center"})},300)},[A,n]);const v=P=>{if(!P)return oc[7];const M=P.split("").reduce((O,E)=>O+E.charCodeAt(0),0);return oc[M%oc.length]},w=b.useMemo(()=>{const P=n.toLowerCase().trim().split(/\s+/).filter(E=>E),O=s.filter(E=>!(P.length>0&&!P.every(T=>E.title.toLowerCase().includes(T)||E.content.toLowerCase().includes(T)||E.keywords&&E.keywords.some(S=>S.toLowerCase().includes(T)))||d&&d!==""&&E.category!==d)).map(E=>{let y="";if(P.length===0)y=E.content.slice(0,60)+"...";else{const T=P[0],S=E.content.toLowerCase().indexOf(T);if(S!==-1){const C=Math.max(0,S-20),D=Math.min(E.content.length,S+60);y="..."+E.content.substring(C,D)+"..."}else y=E.content.slice(0,80)+"..."}return{...E,snippet:y}});return d===""?{type:"grouped",data:O.reduce((y,T)=>{const S=T.category||"";return y[S]||(y[S]=[]),y[S].push(T),y},{})}:{type:"list",data:O}},[n,s,d]),x=()=>g.jsx("div",{className:"space-y-4",children:IC.filter(P=>P.area.includes(n)||P.ext.includes(n)).map(P=>g.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 flex items-center justify-between group",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 text-emerald-600 flex items-center justify-center",children:g.jsx(qg,{className:"w-6 h-6"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:P.area}),P.note&&g.jsx("p",{className:"text-sm text-slate-500",children:P.note})]})]}),g.jsx("span",{className:"text-xl font-black text-emerald-600 tracking-wider",children:P.ext})]},P.id))});return g.jsxs("div",{className:"space-y-4 pb-24",children:[g.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100 space-y-5",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2 pl-1",children:"SOP "}),g.jsxs("div",{className:"relative mt-2",children:[g.jsx(Wg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),g.jsx("input",{type:"text",placeholder:"...",value:n,onChange:P=>r(P.target.value),className:"w-full pl-11 pr-4 py-4 rounded-2xl bg-slate-50 border border-slate-200 text-base font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all"}),n&&g.jsx("button",{onClick:()=>r(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:g.jsx(gl,{className:"w-5 h-5"})})]})]}),t==="qa"&&o.quickKeywords&&o.quickKeywords.length>0&&g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsxs("span",{className:"text-xs text-slate-400 font-bold flex items-center gap-1 self-center",children:[g.jsx(vC,{className:"w-4 h-4"})," :"]}),o.quickKeywords.map(P=>g.jsx("button",{onClick:()=>r(P),className:"px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-sm font-bold transition-colors",children:P},P))]})]}),g.jsxs("div",{className:"flex bg-slate-200/50 p-1.5 rounded-2xl",children:[g.jsxs("button",{onClick:()=>e("qa"),className:`flex-1 flex items-center justify-center gap-2 py-3.5 rounded-xl text-sm font-black transition-all ${t==="qa"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[g.jsx(Ih,{className:"w-5 h-5"})," SOP "]}),g.jsxs("button",{onClick:()=>e("extension"),className:`flex-1 flex items-center justify-center gap-2 py-3.5 rounded-xl text-sm font-black transition-all ${t==="extension"?"bg-white text-emerald-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[g.jsx(qg,{className:"w-5 h-5"})," "]})]}),t==="qa"&&g.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[g.jsx("button",{onClick:()=>p(""),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${d===""?"bg-slate-800 text-white border-slate-800 shadow-md transform scale-105":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"}`,children:""}),o.categories.map(P=>{const M=v(P),O=d===P;return g.jsx("button",{onClick:()=>p(P),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${O?`${M.bg} ${M.text} border-transparent shadow-md transform scale-105`:"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"}`,children:P},P)})]}),t==="qa"?g.jsx("div",{className:"space-y-4",children:u?g.jsxs("div",{className:"flex justify-center py-12 text-slate-400 text-lg font-bold",children:[g.jsx(Ah,{className:"animate-spin mr-3 w-6 h-6"})," ..."]}):m?w.type==="grouped"?Object.keys(w.data).length===0?g.jsx("div",{className:"text-center py-10 text-slate-400 text-base font-bold",children:""}):Object.entries(w.data).map(([P,M])=>{const O=v(P);return g.jsxs("div",{className:"space-y-3",children:[g.jsx("div",{className:`px-4 py-2 rounded-lg inline-block text-sm font-black ${O.bg} ${O.text}`,children:P}),g.jsx("div",{className:"space-y-4",children:M.map(E=>g.jsx(Gg,{item:E,searchTerm:n,colorStyle:O,onClick:()=>R(E)},E.id))})]},P)}):w.data.length>0?g.jsx("div",{className:"space-y-4",children:w.data.map(P=>g.jsx(Gg,{item:P,searchTerm:n,colorStyle:v(P.category),onClick:()=>R(P)},P.id))}):g.jsx("div",{className:"text-center py-12 text-slate-400",children:g.jsx("p",{className:"text-lg font-bold",children:" SOP "})}):g.jsxs("div",{className:"text-center py-16 px-4 opacity-60",children:[g.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-400",children:g.jsx(Wg,{className:"w-10 h-10"})}),g.jsx("p",{className:"text-slate-600 font-bold text-lg",children:""}),g.jsx("p",{className:"text-sm text-slate-400 mt-2",children:" SOP"})]})}):g.jsx(x,{}),A&&g.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col bg-white animate-in slide-in-from-bottom-10 duration-200",children:[g.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center justify-between bg-white/95 backdrop-blur-md sticky top-0 z-10 shadow-sm",children:[g.jsx("h2",{className:"font-black text-2xl text-slate-800 truncate pr-4 leading-tight",children:A.title}),g.jsx("button",{onClick:()=>R(null),className:"p-2.5 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-500 transition-colors",children:g.jsx(gl,{className:"w-8 h-8"})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:g.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-24",children:[g.jsx("div",{className:"flex items-center gap-3",children:g.jsx("span",{className:`text-sm font-bold px-3 py-1.5 rounded-lg shadow-sm ${v(A.category).bg} ${v(A.category).text}`,children:A.category})}),g.jsx("article",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-100 min-h-[50vh]",children:g.jsx("div",{className:"whitespace-pre-wrap leading-loose text-slate-700 font-medium text-lg text-left",children:g.jsx(E1,{content:A.content,searchTerm:n,firstMatchRef:N})})})]})})]})]})}const E1=({content:t,searchTerm:e,firstMatchRef:n=null})=>{if(!e||!e.trim())return t;const r=e.toLowerCase().trim().split(/\s+/).filter(l=>l);if(r.length===0)return t;const s=new RegExp(`(${r.map(kC).join("|")})`,"gi"),i=t.split(s),o=i.findIndex(l=>r.includes(l.toLowerCase()));return g.jsx("span",{children:i.map((l,u)=>r.includes(l.toLowerCase())?g.jsx("span",{ref:n&&u===o?n:null,className:"bg-yellow-300 text-slate-900 font-bold px-1 rounded mx-0.5 inline-block shadow-sm animate-pulse",children:l},u):l)})},Gg=({item:t,searchTerm:e,colorStyle:n,onClick:r})=>g.jsxs("div",{onClick:r,className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm hover:border-blue-300 transition-all cursor-pointer active:scale-[0.98] group",children:[g.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[g.jsx("span",{className:`text-xs px-2.5 py-1 rounded-lg font-bold whitespace-nowrap ${n.bg} ${n.text}`,children:t.category}),g.jsx("h3",{className:"text-lg font-bold text-slate-800 truncate",children:t.title})]}),g.jsx(kh,{className:"w-5 h-5 text-slate-300 group-hover:text-blue-500 transition-colors"})]}),g.jsx("div",{className:"text-base text-slate-600 bg-slate-50 p-4 rounded-2xl border border-slate-100 leading-relaxed whitespace-pre-wrap line-clamp-3 text-left",children:g.jsx(E1,{content:t.snippet,searchTerm:e})})]}),CC=[{id:"leave",title:"",icon:g.jsx(EC,{className:"w-5 h-5 text-rose-500"}),color:"bg-rose-50 border-rose-100",content:g.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[g.jsxs("p",{children:[g.jsx("strong",{className:"text-rose-700",children:""}),"  ",g.jsx("strong",{className:"bg-rose-100 px-1 rounded",children:"D6 "})," "]}),g.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-xs",children:[g.jsxs("li",{children:[g.jsx("strong",{children:"D6"}),"  ()"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"D5"}),"  13:30-16:30 "]}),g.jsxs("li",{children:[g.jsx("strong",{children:"TPN/"})," 16:30-17:30 "]})]})]})},{id:"handover",title:"",icon:g.jsx(pC,{className:"w-5 h-5 text-blue-500"}),color:"bg-blue-50 border-blue-100",content:g.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[g.jsxs("p",{children:[g.jsx("strong",{className:"text-blue-700",children:""})," "]}),g.jsxs("div",{className:"bg-white p-2 rounded border border-blue-100 text-xs",children:[g.jsx("p",{className:"font-bold mb-1",children:" / 5 "}),g.jsxs("p",{children:["DP1TP1  ",g.jsx("span",{className:"text-red-500 font-bold",children:"21:25 "})," "]})]})]})},{id:"meeting",title:"",icon:g.jsx(Ch,{className:"w-5 h-5 text-purple-500"}),color:"bg-purple-50 border-purple-100",content:g.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[g.jsxs("div",{className:"bg-white/50 rounded-lg p-2 border border-purple-100",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-[10px] font-bold bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:""}),g.jsx("span",{className:"text-[10px] text-slate-400",children:"* D5 08:30 "})]}),g.jsx("div",{className:"grid grid-cols-4 gap-1 text-center",children:["D1","D5","D6","D7","D8","D9","TP1","DP2","DP1","D","","TPN"].map(t=>g.jsx("span",{className:"text-xs font-medium text-slate-700 bg-white rounded border border-purple-50 py-1",children:t},t))})]}),g.jsxs("div",{className:"px-2",children:[g.jsx("div",{className:"flex items-center gap-2 mb-1",children:g.jsx("span",{className:"text-[10px] font-bold bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full",children:" ()"})}),g.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:"D2, D3, D4, TD, ED, RD, TS1, SP, A, NN"})]})]})}],Kg={D1:{title:"D1 ",color:"blue",timeline:[{time:" AM",task:" A  / ",desc:""},{time:" PM",task:" /  / ",desc:""}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:" AM",task:" /  / ",desc:"UD"},{time:"11:30",task:" M2",desc:" M2 "},{time:" PM",task:"",desc:"17W"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:" AM",task:" / M2 ",desc:""},{time:" PM",task:"M2  / ",desc:" (17W)"}]},D4:{title:"D4  ()",color:"sky",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:" / M2 ",desc:""},{time:"17:30",task:" A / ",desc:""}]},RD:{title:"RD  ()",color:"amber",timeline:[{time:" AM",task:"Check",desc:""},{time:"12:00",task:"",desc:""},{time:"13:30",task:"",desc:""}]},D5:{title:"D5 ",color:"teal",timeline:[{time:" AM",task:"M2  /  /  ED",desc:""},{time:" PM",task:" /  ED / 17W ",desc:""}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"Check",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:" AM",task:"M2  / ",desc:""},{time:" PM",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:" / ",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:" AM",task:" / A ",desc:" A "},{time:" PM",task:"",desc:""}]},TD:{title:"TD ",color:"slate",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:"",desc:""}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-16:30",task:"",desc:""}]},D:{title:"D ",color:"purple",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:" AM",task:"B  TPN / ",desc:" TPN  B "}]},PSY:{title:"PSY  ()",color:"violet",timeline:[{time:" AM",task:"B  / ",desc:""},{time:" PM",task:" / PSY ",desc:""}]},PRN:{title:"PRN ",color:"gray",timeline:[{time:"",task:" /  / ",desc:""}]}},Rh={D1:{title:"D1 ",color:"blue",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"//",desc:"/()"}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:"07:40-08:30",task:"//",desc:""},{time:"08:30-11:30",task:"UD//",desc:""},{time:"11:30-12:00",task:" M2",desc:" M2 "},{time:"12:30-15:00",task:"",desc:""},{time:"15:00-16:10",task:"17W//",desc:"17"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-11:30",task:"M2 ",desc:" M2 "},{time:"12:00-13:30",task:"M2 ",desc:" M2 "},{time:"13:30-16:30",task:"",desc:""}]},D4:{title:"D4 ",color:"sky",timeline:[{time:"09:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"M2 ",desc:"13:30-14:00  M2 "},{time:"17:30-18:00",task:" A / ",desc:" A "}]},D5:{title:"D5 ",color:"teal",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"12:30-16:30",task:" A ",desc:" A "}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:"08:30-12:30",task:" A / C",desc:" A  C "},{time:"13:30-17:30",task:"",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-09:30",task:"M1 ",desc:" M1 "},{time:"09:30-11:30",task:"",desc:""},{time:"12:00-13:30",task:"",desc:""},{time:"13:30-16:30",task:"",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:"08:00-08:30",task:" A ",desc:" A "},{time:"08:30-12:00",task:" A ",desc:" A "},{time:"12:30-13:30",task:"",desc:""},{time:"13:00-16:30",task:"()",desc:""}]},TP1:{title:"TP1 M2//",color:"rose",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""},{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"W2-W5 ",desc:"16:30-17:30  D1 TP1  A "}]},DP2:{title:"DP2 //M2",color:"violet",timeline:[{time:"08:00-08:30",task:" B ",desc:" B "},{time:"08:30-12:00",task:"+",desc:""},{time:"13:30-16:30",task:"",desc:""},{time:"17:30-20:30",task:"M2 ",desc:" M2 "}]},SP:{title:"SP ",color:"fuchsia",timeline:[{time:"14:00-17:00",task:"/",desc:""},{time:"17:30-21:30",task:"",desc:""},{time:"21:30-",task:"/",desc:""}]},P1:{title:"P1 ",color:"slate",timeline:[{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"",desc:"DP1D5P1D1P1"}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-11:30",task:"",desc:""},{time:"11:30-12:00",task:"",desc:""},{time:"12:00-16:30",task:"",desc:""}]},HD:{title:"HD ",color:"orange",timeline:[{time:"08:00-16:00",task:"",desc:""},{time:"",task:"07:45-08:00 / 16:00-16:15",desc:""}]},A:{title:"A ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:""},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},HA:{title:"HA ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:" A "},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},NN:{title:"NN ",color:"slate",timeline:[{time:"00:00-08:00",task:"",desc:""},{time:"",task:"23:45-00:00 / 08:00-08:15",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:"08:30-12:30",task:"B TPN",desc:" B  TPN () "},{time:"",task:"A ",desc:" A "}]},D:{title:"D ",color:"purple",timeline:[{time:"08:00-12:00",task:"",desc:""},{time:"",task:" / A ",desc:" A "}]},RD:{title:"RD /",color:"orange",timeline:[{time:"08:30-12:00",task:"",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-14:00",task:" (17W)",desc:" 17 "},{time:"14:30-16:00",task:" ER",desc:""},{time:"16:00-16:30",task:"ER ",desc:""},{time:"16:30-17:30",task:"",desc:""}]},PSY:{title:"PSY ",color:"violet",timeline:[{time:"08:00-08:30",task:" D ",desc:" D "},{time:"08:30-12:00",task:"D ",desc:" D  () "},{time:"12:30-13:30",task:"",desc:""},{time:"13:30-16:00",task:"PSY ",desc:""},{time:"16:00-16:30",task:" A ",desc:" A "}]},TS1:{title:"TS1 ",color:"yellow",timeline:[{time:"08:30-12:30",task:"",desc:""},{time:"",task:"",desc:"(A)"}]},TD:{title:"TD ",color:"slate",timeline:[{time:"08:30-12:00",task:"/",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"",desc:"()"}]}};function RC(){const[t,e]=b.useState(new Date),[n,r]=b.useState(null),[s,i]=b.useState(null),[o,l]=b.useState(null),[u,h]=b.useState(!1),[d,p]=b.useState(!1);b.useEffect(()=>{const v=setInterval(()=>e(new Date),6e4);return()=>clearInterval(v)},[]);const m=v=>{if(!v||!v.includes("-"))return!1;const[w,x]=v.split("-"),P=t,M=P.getHours()*60+P.getMinutes(),O=T=>{const[S,C]=T.split(":").map(Number);return S*60+C},E=O(w);let y=O(x);return y<E&&(y+=24*60),M>=E&&M<y},I=s?Rh[s]:null,A=o?Kg[o]:null,R=v=>{i(w=>w===v?null:v)},N=v=>{l(w=>w===v?null:v)};return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[g.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-600",children:g.jsx(iC,{className:"w-5 h-5"})}),g.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),u?g.jsx(ka,{className:"w-5 h-5 text-slate-400"}):g.jsx(kh,{className:"w-5 h-5 text-slate-400"})]}),u&&g.jsx("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:g.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(Rh).map(v=>g.jsx("button",{onClick:()=>R(v),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${s===v?"bg-white border-indigo-200 text-indigo-600 shadow-sm scale-105 ring-2 ring-indigo-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:v},v))})})]}),I&&g.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:g.jsx(v1,{className:"w-6 h-6"})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Shift Duty"}),g.jsx("h4",{className:"font-bold text-slate-800",children:I.title})]})]}),g.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:I.timeline.map((v,w)=>{const x=m(v.time);return g.jsxs("div",{className:`relative transition-all duration-500 ${x?"scale-105 origin-left":""}`,children:[g.jsx("div",{className:`absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm transition-all duration-300 ${x?"ring-4 ring-red-100 scale-110":""}`,style:{backgroundColor:x?"#ef4444":`var(--color-${I.color}-500, #3b82f6)`},children:x&&g.jsx("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-75"})}),g.jsxs("div",{className:`rounded-xl p-3 border transition-all duration-300 ${x?"bg-red-50/50 border-red-100 shadow-sm":"border-transparent"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsxs("span",{className:`text-[10px] font-black px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${x?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:[x&&g.jsx(hC,{className:"w-3 h-3"}),v.time]}),g.jsx("h5",{className:`text-sm font-bold transition-colors ${x?"text-red-900":"text-slate-700"}`,children:v.task})]}),g.jsx("p",{className:`text-xs leading-relaxed pl-1 transition-colors ${x?"text-slate-700 font-medium":"text-slate-500"}`,children:v.desc})]})]},w)})})]}),g.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[g.jsxs("button",{onClick:()=>p(!d),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-600",children:g.jsx(Hg,{className:"w-5 h-5"})}),g.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),d?g.jsx(ka,{className:"w-5 h-5 text-slate-400"}):g.jsx(kh,{className:"w-5 h-5 text-slate-400"})]}),d&&g.jsxs("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:[g.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.keys(Kg).map(v=>g.jsx("button",{onClick:()=>N(v),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${o===v?"bg-white border-amber-200 text-amber-600 shadow-sm scale-105 ring-2 ring-amber-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:v},v))}),A&&g.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-amber-50 text-amber-600",children:g.jsx(Hg,{className:"w-6 h-6"})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Holiday Shift"}),g.jsx("h4",{className:"font-bold text-slate-800",children:A.title})]})]}),g.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:A.timeline.map((v,w)=>g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm",style:{backgroundColor:`var(--color-${A.color}-500, #f59e0b)`}}),g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"text-[10px] font-black text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded",children:v.time}),g.jsx("h5",{className:"text-sm font-bold text-slate-700",children:v.task})]}),g.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:v.desc})]},w))})]})]})]}),g.jsxs("div",{className:"border-t border-slate-100 pt-6 space-y-4",children:[g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[g.jsx(w1,{className:"w-5 h-5 text-slate-400"}),""]})}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:CC.map(v=>{const w=n===v.id;return g.jsxs("div",{className:`rounded-2xl border transition-all duration-300 overflow-hidden ${w?`bg-white shadow-md ${v.color}`:"bg-white border-slate-100"}`,children:[g.jsxs("button",{onClick:()=>r(w?null:v.id),className:"w-full flex items-center justify-between p-4",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`p-2 rounded-xl shadow-sm transition-colors ${w?"bg-white":"bg-slate-50"}`,children:v.icon}),g.jsx("h4",{className:`font-bold text-sm ${w?"text-slate-800":"text-slate-600"}`,children:v.title})]}),w?g.jsx(_1,{className:"w-4 h-4 text-slate-400"}):g.jsx(ka,{className:"w-4 h-4 text-slate-300"})]}),w&&g.jsx("div",{className:"px-4 pb-4 animate-in slide-in-from-top-1",children:g.jsx("div",{className:"pt-2 border-t border-slate-100/50",children:v.content})})]},v.id)})})]})]})}const PC=[{week:1,title:"",goals:["",""," (D)"],note:""},{week:2,title:"",goals:[""," (D3~8)"],note:""},{week:3,title:"",goals:["",""," (DP1, D1P1)"],note:" SOP "},{week:4,title:"",goals:[" ()"," 8-4  (U)"],note:""},{week:5,title:" (UD) I",goals:["UD "," (D2, SP)"],note:" UD "},{week:6,title:" (UD) II",goals:["UD  ()"," (S1~5)"],note:""},{week:7,title:" I",goals:[""," (ED) "],note:" Stat "},{week:8,title:" II",goals:[" ()"," (ED) "],note:""}],NC=[{week:1,title:"",goals:["",""," (D)"],note:"PGY "},{week:2,title:"",goals:[""," (D3~8)"],note:""},{week:3,title:" UD ",goals:[""," (UD) ",""," (DP1, D1P1)"],note:" PGY  3  UD "},{week:4,title:" I",goals:[""," 8-4  (U)"],note:""},{week:5,title:" II",goals:[" ()"," (D2, SP)"],note:""},{week:6,title:"",goals:["",""," (D2, SP)"],note:""},{week:7,title:" ()",goals:[" ()"," (S1~5)"],note:"PGY "},{week:8,title:" ()",goals:[" ()"," (S1~5) "],note:""},{week:9,title:" I",goals:[""," (ED) "],note:"PGY "},{week:10,title:" II",goals:[""," (ED) "],note:" Stat "},{week:11,title:"UD  I",goals:["UD",""," (AN)"],note:" UD "},{week:12,title:"UD  II",goals:["UD",""," (HD, HA, HN)"],note:"PGY "}],Ph=[{id:"outpatient_basic",title:" ()",icon:"User",items:[{id:"op1_1",text:"[] "},{id:"op1_2",text:"[] "},{id:"op1_3",text:"[]  ()"},{id:"op1_4",text:"[] "},{id:"op1_5",text:"[]  HIS  (/)"},{id:"op1_6",text:"[] "},{id:"op1_7",text:"[] "},{id:"op1_8",text:"[]  (/)"},{id:"op1_9",text:"[]  (/)"},{id:"op2_1",text:"[]  ()"},{id:"op2_2",text:"[] "},{id:"op2_3",text:"[]  (/)"},{id:"op2_4",text:"[]  (//)"},{id:"op2_5",text:"[]  (////)"},{id:"op2_6",text:"[]  (//)"},{id:"op2_7",text:"[] "},{id:"op2_8",text:"[] "},{id:"op3_1",text:"[] "},{id:"op3_2",text:"[] "},{id:"op3_3",text:"[]  (//)"},{id:"op3_4",text:"[]  (/)"},{id:"op3_5",text:"[]  (///)"},{id:"op3_6",text:"[] "},{id:"op4_1",text:"[] "},{id:"op4_2",text:"[] "},{id:"op4_3",text:"[] "},{id:"op4_4",text:"[] "}]},{id:"outpatient_adv",title:" ()",icon:"ClipboardCheck",items:[{id:"op5_1",text:"[] "},{id:"op5_2",text:"[]  (///)"},{id:"op5_3",text:"[] "},{id:"op6_1",text:"[] STAT "},{id:"op6_2",text:"[] /"},{id:"op6_3",text:"[] "},{id:"op6_4",text:"[]  (/TPN)"},{id:"op6_5",text:"[] "},{id:"op6_6",text:"[]  (/)"},{id:"op6_7",text:"[]  (//)"},{id:"op7_1",text:"[] "},{id:"op8_1",text:"[]  ()"}]},{id:"inpatient",title:"",icon:"Bed",items:[{id:"ip_1",text:""},{id:"ip_2",text:"[UD] "},{id:"ip_3",text:"[UD]  (/)"},{id:"ip_4",text:"[UD] "},{id:"ip_5",text:"[UD] "},{id:"ip_6",text:"[UD] /"},{id:"ip_7",text:"[UD]  (//)"},{id:"ip_8",text:"[] UD "},{id:"ip_9",text:""},{id:"ip_10",text:" (/)"},{id:"ip_11",text:" (/)"}]},{id:"inventory",title:"",icon:"BookOpen",items:[{id:"inv_1",text:""},{id:"inv_2",text:""},{id:"inv_3",text:""},{id:"inv_4",text:""},{id:"inv_5",text:""},{id:"inv_6",text:""}]},{id:"special",title:" (TPN/)",icon:"Activity",items:[{id:"tpn_1",text:"[TPN]  TPN "},{id:"tpn_2",text:"[TPN] "},{id:"tpn_3",text:"[TPN] "},{id:"chemo_1",text:"[] "},{id:"chemo_2",text:"[] "},{id:"chemo_3",text:"[] "},{id:"chemo_4",text:"[] "},{id:"chemo_5",text:"[] /"},{id:"chemo_6",text:"[] "}]},{id:"admin_consult",title:"",icon:"Zap",items:[{id:"adm_1",text:"[] "},{id:"adm_2",text:"[] "},{id:"adm_3",text:"[] "},{id:"adm_4",text:"[] "},{id:"cns_1",text:"[] //"},{id:"cns_2",text:"[] "},{id:"cns_3",text:"[]  (ADR) "},{id:"cns_4",text:"[] "},{id:"cns_5",text:"[] "}]}];function DC(){const[t,e]=b.useState(()=>localStorage.getItem("pharmacy_start_date")||""),[n,r]=b.useState(()=>localStorage.getItem("pharmacy_is_pgy")==="true"),[s,i]=b.useState(()=>{const M=localStorage.getItem("pharmacy_passport_checked");try{const O=M?JSON.parse(M):{},E=new Date().toISOString().split("T")[0];return Object.keys(O).forEach(y=>{O[y]===!0&&(O[y]=E)}),O}catch{return{}}}),[o,l]=b.useState("progress"),[u,h]=b.useState("outpatient_basic"),[d,p]=b.useState(null);b.useEffect(()=>{localStorage.setItem("pharmacy_start_date",t),p(null)},[t]),b.useEffect(()=>{localStorage.setItem("pharmacy_is_pgy",n)},[n]),b.useEffect(()=>{localStorage.setItem("pharmacy_passport_checked",JSON.stringify(s))},[s]);const m=n?NC:PC,A=(()=>{if(!t)return 1;const M=new Date(t);M.setHours(0,0,0,0);const O=new Date;O.setHours(0,0,0,0);const E=O-M,y=Math.floor(E/(1e3*60*60*24));return y<0?1:Math.floor(y/7)+1})(),R=d||A,N=m.find(M=>M.week===R)||(R>m.length?m[m.length-1]:m[0]),v=()=>{let M=0,O=0;return Ph.forEach(E=>{E.items.forEach(y=>{M++,s[y.id]&&O++})}),M===0?0:Math.round(O/M*100)},w=M=>{i(O=>{if(!!O[M]){const y={...O};return delete y[M],y}else{const y=new Date().toISOString().split("T")[0];return{...O,[M]:y}}})},x=(M,O)=>{i(E=>({...E,[M]:O}))},P={BookOpen:g.jsx(Ih,{className:"w-5 h-5"}),User:g.jsx(xC,{className:"w-5 h-5"}),Bed:g.jsx(sC,{className:"w-5 h-5"}),Zap:g.jsx(TC,{className:"w-5 h-5"}),ClipboardCheck:g.jsx(cC,{className:"w-5 h-5"}),Activity:g.jsx(v1,{className:"w-5 h-5"})};return g.jsxs("div",{className:"space-y-6 pb-20",children:[g.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 p-6 rounded-[2rem] text-white shadow-xl relative overflow-hidden transition-all",children:[g.jsxs("div",{className:"relative z-10",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold",children:""}),g.jsx("p",{className:"text-indigo-200 text-xs",children:"Training Passport"})]}),g.jsx("div",{className:"bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full border border-white/10",children:g.jsxs("span",{className:"text-sm font-black",children:[v(),"% "]})})]}),g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"bg-black/20 p-3 rounded-xl backdrop-blur-md border border-white/10 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(oC,{className:"w-4 h-4 text-indigo-200"}),g.jsx("span",{className:"text-xs font-medium text-indigo-100",children:""})]}),g.jsx("input",{type:"date",value:t,onChange:M=>e(M.target.value),className:"bg-transparent text-sm font-bold text-white focus:outline-none text-right w-32 [color-scheme:dark]"})]}),g.jsxs("div",{className:"bg-black/20 p-1 rounded-xl backdrop-blur-md border border-white/10 flex",children:[g.jsxs("button",{onClick:()=>r(!1),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-xs font-bold transition-all ${n?"text-indigo-200 hover:text-white":"bg-white text-indigo-700 shadow-sm"}`,children:[g.jsx(Ch,{className:"w-3 h-3"}),""]}),g.jsxs("button",{onClick:()=>r(!0),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-xs font-bold transition-all ${n?"bg-amber-400 text-amber-900 shadow-sm":"text-indigo-200 hover:text-white"}`,children:[g.jsx(Ch,{className:"w-3 h-3"}),"PGY "]})]})]})]}),g.jsx(wC,{className:"absolute -right-6 -bottom-6 opacity-10 w-40 h-40 text-yellow-300"})]}),g.jsxs("div",{className:"flex bg-slate-200/50 p-1 rounded-2xl",children:[g.jsx("button",{onClick:()=>l("progress"),className:`flex-1 py-2.5 rounded-xl text-xs font-black transition-all ${o==="progress"?"bg-white text-indigo-600 shadow-sm":"text-slate-400"}`,children:""}),g.jsx("button",{onClick:()=>l("passport"),className:`flex-1 py-2.5 rounded-xl text-xs font-black transition-all ${o==="passport"?"bg-white text-indigo-600 shadow-sm":"text-slate-400"}`,children:""})]}),o==="progress"&&g.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300",children:t?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`p-5 rounded-[2rem] border-2 shadow-sm relative overflow-hidden transition-all duration-300 ${R===A?"bg-white border-indigo-100":"bg-indigo-50 border-indigo-200"}`,children:[g.jsx("div",{className:`absolute top-0 right-0 text-[10px] font-black px-3 py-1 rounded-bl-xl ${R===A?"bg-indigo-100 text-indigo-700":"bg-slate-200 text-slate-500"}`,children:R===A?"CURRENT WEEK":"PREVIEW MODE"}),g.jsx("div",{className:"absolute top-0 left-0",children:g.jsx("span",{className:`text-[9px] font-bold px-3 py-1 rounded-br-xl ${n?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:n?"PGY TRACK":"NORMAL TRACK"})}),g.jsxs("div",{className:"mb-4 mt-2",children:[g.jsx("span",{className:"text-4xl font-black text-indigo-600",children:R}),g.jsx("span",{className:"text-sm font-bold text-slate-400 ml-1",children:""}),g.jsx("h3",{className:"text-lg font-bold text-slate-800 mt-1",children:N?N.title:""})]}),N&&g.jsx("ul",{className:"space-y-3",children:N.goals.map((M,O)=>g.jsxs("li",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-indigo-400 flex-shrink-0"}),g.jsx("span",{className:"text-sm text-slate-600 leading-relaxed",children:M})]},O))}),(N==null?void 0:N.note)&&g.jsxs("div",{className:"mt-4 p-3 bg-amber-50 rounded-xl border border-amber-100 flex gap-2",children:[g.jsx(w1,{className:"w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5"}),g.jsx("p",{className:"text-xs text-amber-700",children:N.note})]}),d!==null&&d!==A&&g.jsxs("button",{onClick:()=>p(null),className:"mt-4 w-full py-2 bg-indigo-600 text-white rounded-xl text-xs font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform",children:[g.jsx(aC,{className:"w-4 h-4"})," ( ",A," )"]})]}),g.jsx("div",{className:"pl-4 border-l-2 border-slate-100 space-y-2 py-2",children:m.map(M=>{const O=M.week===A,E=M.week===R;return g.jsxs("div",{onClick:()=>p(M.week),className:`relative group cursor-pointer p-2 rounded-xl transition-all ${E?"bg-white shadow-sm scale-105 -ml-2 pl-4":"hover:bg-slate-50"}`,children:[g.jsx("div",{className:`absolute left-[-25px] top-5 w-3 h-3 rounded-full border-2 border-white transition-colors ${O?"bg-indigo-500 ring-2 ring-indigo-100":M.week<A?"bg-slate-300":"bg-slate-200"}`}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h4",{className:`font-bold text-sm ${E?"text-indigo-600":"text-slate-600"}`,children:[" ",M.week," ",M.title]}),O&&g.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-600 px-2 py-0.5 rounded-full font-bold",children:"Now"})]})]},M.week)})})]}):g.jsx("div",{className:"text-center py-12 bg-white rounded-3xl border border-dashed border-slate-200",children:g.jsxs("p",{className:"text-slate-400 text-sm",children:["",g.jsx("br",{}),""]})})}),o==="passport"&&g.jsx("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:Ph.map(M=>{const O=u===M.id,E=M.items.length,y=M.items.filter(S=>!!s[S.id]).length,T=E===0?0:Math.round(y/E*100);return g.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden transition-all",children:[g.jsxs("button",{onClick:()=>h(O?null:M.id),className:"w-full flex items-center justify-between p-4",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`p-2 rounded-xl ${T===100?"bg-green-100 text-green-600":"bg-slate-50 text-slate-500"}`,children:P[M.icon]||g.jsx(Ih,{className:"w-5 h-5"})}),g.jsxs("div",{className:"text-left",children:[g.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:M.title}),g.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[g.jsx("div",{className:"w-20 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${T===100?"bg-green-500":"bg-indigo-500"}`,style:{width:`${T}%`}})}),g.jsxs("span",{className:"text-[10px] text-slate-400 font-bold",children:[y,"/",E]})]})]})]}),O?g.jsx(_1,{className:"w-4 h-4 text-slate-300"}):g.jsx(ka,{className:"w-4 h-4 text-slate-300"})]}),O&&g.jsxs("div",{className:"px-4 pb-4 pt-0",children:[g.jsx("div",{className:"h-px bg-slate-50 mb-3"}),g.jsx("div",{className:"space-y-2",children:M.items.map(S=>{const C=!!s[S.id],D=typeof s[S.id]=="string"?s[S.id]:new Date().toISOString().split("T")[0];return g.jsxs("div",{className:`group flex items-start gap-3 p-3 rounded-xl transition-all border ${C?"bg-slate-50/50 border-slate-100":"bg-white border-transparent hover:bg-slate-50"}`,children:[g.jsx("div",{onClick:()=>w(S.id),className:`mt-0.5 flex-shrink-0 cursor-pointer transition-colors ${C?"text-green-500":"text-slate-200 group-hover:text-slate-300"}`,children:C?g.jsx(lC,{className:"w-5 h-5"}):g.jsx(uC,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{onClick:()=>w(S.id),className:`text-sm cursor-pointer transition-all ${C?"text-slate-500 line-through decoration-slate-300":"text-slate-700"}`,children:S.text}),C&&g.jsxs("div",{className:"mt-2 flex items-center gap-2 animate-in fade-in slide-in-from-left-1 duration-200",children:[g.jsx("span",{className:"text-[10px] font-bold bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:""}),g.jsx("input",{type:"date",value:D,onChange:k=>x(S.id,k.target.value),onClick:k=>k.stopPropagation(),className:"bg-transparent text-[11px] font-medium text-slate-500 border-b border-slate-300 focus:border-indigo-500 focus:outline-none w-28"})]})]})]},S.id)})})]})]},M.id)})})]})}const bC=()=>{const[t,e]=b.useState(!1),[n,r]=b.useState(""),s=()=>{n==="123"?e(!0):(alert(""),r(""))};return t?g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsxs("div",{className:"p-4 bg-white shadow-sm mb-6 flex justify-between items-center",children:[g.jsx("h1",{className:"text-xl font-bold text-gray-800",children:""}),g.jsx(Ki,{to:"/",className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-sm",children:""})]}),g.jsx("div",{className:"container mx-auto px-4",children:g.jsx(SC,{})})]}):g.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:g.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-sm",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:""}),g.jsx("div",{className:"mb-4",children:g.jsx("input",{type:"password",value:n,onChange:i=>r(i.target.value),placeholder:"",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:i=>i.key==="Enter"&&s()})}),g.jsx("button",{onClick:s,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition duration-200 mb-4",children:""}),g.jsx("div",{className:"text-center",children:g.jsx(Ki,{to:"/",className:"text-sm text-gray-500 hover:text-gray-700",children:" "})})]})})};function VC(){const[t,e]=b.useState([]),[n,r]=b.useState("lookup"),[s,i]=b.useState(!0);return b.useEffect(()=>{const o=WA(pl(dn,"sop_articles")),l=JA(o,u=>{const h=u.docs.map(d=>({id:d.id,...d.data()}));h.sort((d,p)=>{var A,R;const m=((A=d.createdAt)==null?void 0:A.seconds)||0;return(((R=p.createdAt)==null?void 0:R.seconds)||0)-m}),e(h),i(!1)},u=>{console.error(":",u),i(!1)});return()=>l()},[]),g.jsx(W2,{basename:"/handbook/",children:g.jsx("div",{className:"min-h-screen bg-gray-50",children:g.jsxs(x2,{children:[g.jsx(eh,{path:"/",element:g.jsxs("div",{className:"container mx-auto px-1 py-2 sm:px-4 sm:py-8 max-w-4xl",children:[g.jsxs("header",{className:"mb-2 sm:mb-8 text-center px-2",children:[g.jsx("h1",{className:"text-lg sm:text-3xl font-black text-gray-800 mb-0.5 sm:mb-2 tracking-tight",children:" "}),g.jsx("p",{className:"text-[10px] sm:text-base text-gray-500 font-medium",children:"SOP     "})]}),g.jsxs("div",{className:"flex justify-center space-x-1 sm:space-x-2 mb-2 sm:mb-8 bg-white p-1 sm:p-2 rounded-xl shadow-sm w-[99%] mx-auto border border-gray-100",children:[g.jsx("button",{onClick:()=>r("lookup"),className:`flex-1 sm:flex-none px-1 sm:px-6 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-bold transition-all ${n==="lookup"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:" "}),g.jsx("button",{onClick:()=>r("shift"),className:`flex-1 sm:flex-none px-1 sm:px-6 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-bold transition-all ${n==="shift"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:" "}),g.jsx("button",{onClick:()=>r("passport"),className:`flex-1 sm:flex-none px-1 sm:px-6 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-bold transition-all ${n==="passport"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:" "})]}),g.jsxs("main",{className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border border-gray-100 p-2 sm:p-6 min-h-[60vh]",children:[n==="lookup"&&g.jsx(g.Fragment,{children:s?g.jsx("div",{className:"text-center py-20 text-gray-400 font-bold animate-pulse",children:"... "}):t.length===0?g.jsxs("div",{className:"text-center py-20 text-gray-400",children:[g.jsx("p",{className:"text-lg font-bold",children:" "}),g.jsx("p",{className:"text-sm mt-2",children:" SOP "})]}):g.jsx(AC,{sops:t})}),n==="shift"&&g.jsx(RC,{shifts:Rh}),n==="passport"&&g.jsx(DC,{modules:Ph})]}),g.jsxs("footer",{className:"mt-6 sm:mt-12 py-4 sm:py-6 text-center border-t border-gray-200",children:[g.jsx("p",{className:"text-gray-400 text-[10px] sm:text-sm mb-1 sm:mb-2",children:" 2024 "}),g.jsx(Ki,{to:"/admin",className:"text-[10px] sm:text-xs text-gray-300 hover:text-gray-500 transition-colors",children:" "})]})]})}),g.jsx(eh,{path:"/admin",element:g.jsx(bC,{})})]})})})}av(document.getElementById("root")).render(g.jsx(b.StrictMode,{children:g.jsx(VC,{})}));
