(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var h0={exports:{}},uc={},f0={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ko=Symbol.for("react.element"),P1=Symbol.for("react.portal"),R1=Symbol.for("react.fragment"),j1=Symbol.for("react.strict_mode"),D1=Symbol.for("react.profiler"),V1=Symbol.for("react.provider"),O1=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),L1=Symbol.for("react.suspense"),F1=Symbol.for("react.memo"),U1=Symbol.for("react.lazy"),wm=Symbol.iterator;function z1(t){return t===null||typeof t!="object"?null:(t=wm&&t[wm]||t["@@iterator"],typeof t=="function"?t:null)}var p0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m0=Object.assign,g0={};function _i(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||p0}_i.prototype.isReactComponent={};_i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y0(){}y0.prototype=_i.prototype;function Nh(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||p0}var kh=Nh.prototype=new y0;kh.constructor=Nh;m0(kh,_i.prototype);kh.isPureReactComponent=!0;var bm=Array.isArray,v0=Object.prototype.hasOwnProperty,Sh={current:null},_0={key:!0,ref:!0,__self:!0,__source:!0};function x0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)v0.call(e,r)&&!_0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ko,type:t,key:i,ref:o,props:s,_owner:Sh.current}}function $1(t,e){return{$$typeof:Ko,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ah(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ko}function B1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Em=/\/+/g;function xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B1(""+t.key):e.toString(36)}function Xa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ko:case P1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xu(o,0):r,bm(s)?(n="",t!=null&&(n=t.replace(Em,"$&/")+"/"),Xa(s,e,n,"",function(h){return h})):s!=null&&(Ah(s)&&(s=$1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Em,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",bm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+xu(i,c);o+=Xa(i,e,n,u,s)}else if(u=z1(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+xu(i,c++),o+=Xa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ia(t,e,n){if(t==null)return t;var r=[],s=0;return Xa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function q1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Ya={transition:null},H1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Ya,ReactCurrentOwner:Sh};function w0(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Ia,forEach:function(t,e,n){Ia(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ia(t,function(){e++}),e},toArray:function(t){return Ia(t,function(e){return e})||[]},only:function(t){if(!Ah(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=_i;pe.Fragment=R1;pe.Profiler=D1;pe.PureComponent=Nh;pe.StrictMode=j1;pe.Suspense=L1;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H1;pe.act=w0;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Sh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)v0.call(e,u)&&!_0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Ko,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:O1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V1,_context:t},t.Consumer=t};pe.createElement=x0;pe.createFactory=function(t){var e=x0.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:M1,render:t}};pe.isValidElement=Ah;pe.lazy=function(t){return{$$typeof:U1,_payload:{_status:-1,_result:t},_init:q1}};pe.memo=function(t,e){return{$$typeof:F1,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Ya.transition;Ya.transition={};try{t()}finally{Ya.transition=e}};pe.unstable_act=w0;pe.useCallback=function(t,e){return It.current.useCallback(t,e)};pe.useContext=function(t){return It.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return It.current.useDeferredValue(t)};pe.useEffect=function(t,e){return It.current.useEffect(t,e)};pe.useId=function(){return It.current.useId()};pe.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return It.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};pe.useRef=function(t){return It.current.useRef(t)};pe.useState=function(t){return It.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return It.current.useTransition()};pe.version="18.3.1";f0.exports=pe;var L=f0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1=L,G1=Symbol.for("react.element"),K1=Symbol.for("react.fragment"),Q1=Object.prototype.hasOwnProperty,X1=W1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1={key:!0,ref:!0,__self:!0,__source:!0};function b0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Q1.call(e,r)&&!Y1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:G1,type:t,key:i,ref:o,props:s,_owner:X1.current}}uc.Fragment=K1;uc.jsx=b0;uc.jsxs=b0;h0.exports=uc;var l=h0.exports,E0={exports:{}},$t={},T0={exports:{}},I0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,Q){var U=O.length;O.push(Q);e:for(;0<U;){var ee=U-1>>>1,se=O[ee];if(0<s(se,Q))O[ee]=Q,O[U]=se,U=ee;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var Q=O[0],U=O.pop();if(U!==Q){O[0]=U;e:for(var ee=0,se=O.length,fe=se>>>1;ee<fe;){var Fe=2*(ee+1)-1,le=O[Fe],ke=Fe+1,K=O[ke];if(0>s(le,U))ke<se&&0>s(K,le)?(O[ee]=K,O[ke]=U,ee=ke):(O[ee]=le,O[Fe]=U,ee=Fe);else if(ke<se&&0>s(K,U))O[ee]=K,O[ke]=U,ee=ke;else break e}}return Q}function s(O,Q){var U=O.sortIndex-Q.sortIndex;return U!==0?U:O.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,g=null,m=3,T=!1,A=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(O){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=O)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function j(O){if(k=!1,N(O),!A)if(n(u)!==null)A=!0,W(z);else{var Q=n(h);Q!==null&&Z(j,Q.startTime-O)}}function z(O,Q){A=!1,k&&(k=!1,_(x),x=-1),T=!0;var U=m;try{for(N(Q),g=n(u);g!==null&&(!(g.expirationTime>Q)||O&&!C());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,m=g.priorityLevel;var se=ee(g.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?g.callback=se:g===n(u)&&r(u),N(Q)}else r(u);g=n(u)}if(g!==null)var fe=!0;else{var Fe=n(h);Fe!==null&&Z(j,Fe.startTime-Q),fe=!1}return fe}finally{g=null,m=U,T=!1}}var $=!1,b=null,x=-1,w=5,E=-1;function C(){return!(t.unstable_now()-E<w)}function P(){if(b!==null){var O=t.unstable_now();E=O;var Q=!0;try{Q=b(!0,O)}finally{Q?I():($=!1,b=null)}}else $=!1}var I;if(typeof y=="function")I=function(){y(P)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,D=H.port2;H.port1.onmessage=P,I=function(){D.postMessage(null)}}else I=function(){S(P,0)};function W(O){b=O,$||($=!0,I())}function Z(O,Q){x=S(function(){O(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){A||T||(A=!0,W(z))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var U=m;m=Q;try{return O()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=m;m=O;try{return Q()}finally{m=U}},t.unstable_scheduleCallback=function(O,Q,U){var ee=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ee+U:ee):U=ee,O){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=U+se,O={id:p++,callback:Q,priorityLevel:O,startTime:U,expirationTime:se,sortIndex:-1},U>ee?(O.sortIndex=U,e(h,O),n(u)===null&&O===n(h)&&(k?(_(x),x=-1):k=!0,Z(j,U-ee))):(O.sortIndex=se,e(u,O),A||T||(A=!0,W(z))),O},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(O){var Q=m;return function(){var U=m;m=Q;try{return O.apply(this,arguments)}finally{m=U}}}})(I0);T0.exports=I0;var J1=T0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1=L,zt=J1;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N0=new Set,Eo={};function gs(t,e){ti(t,e),ti(t+"Capture",e)}function ti(t,e){for(Eo[t]=e,t=0;t<e.length;t++)N0.add(e[t])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=Object.prototype.hasOwnProperty,eb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tm={},Im={};function tb(t){return od.call(Im,t)?!0:od.call(Tm,t)?!1:eb.test(t)?Im[t]=!0:(Tm[t]=!0,!1)}function nb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rb(t,e,n,r){if(e===null||typeof e>"u"||nb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ch=/[\-:]([a-z])/g;function Ph(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ch,Ph);at[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ch,Ph);at[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ch,Ph);at[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rh(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rb(e,n,s,r)&&(n=null),r||s===null?tb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qn=Z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Na=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),jh=Symbol.for("react.strict_mode"),ad=Symbol.for("react.profiler"),k0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),ld=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),A0=Symbol.for("react.offscreen"),Nm=Symbol.iterator;function Hi(t){return t===null||typeof t!="object"?null:(t=Nm&&t[Nm]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,wu;function Zi(t){if(wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wu=e&&e[1]||""}return`
`+wu+t}var bu=!1;function Eu(t,e){if(!t||bu)return"";bu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{bu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zi(t):""}function sb(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=Eu(t.type,!1),t;case 11:return t=Eu(t.type.render,!1),t;case 1:return t=Eu(t.type,!0),t;default:return""}}function ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ps:return"Portal";case ad:return"Profiler";case jh:return"StrictMode";case ld:return"Suspense";case cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S0:return(t.displayName||"Context")+".Consumer";case k0:return(t._context.displayName||"Context")+".Provider";case Dh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vh:return e=t.displayName||null,e!==null?e:ud(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return ud(t(e))}catch{}}return null}function ib(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ud(e);case 8:return e===jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ob(t){var e=C0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ka(t){t._valueTracker||(t._valueTracker=ob(t))}function P0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=C0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dd(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function km(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R0(t,e){e=e.checked,e!=null&&Rh(t,"checked",e,!1)}function hd(t,e){R0(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fd(t,e.type,n):e.hasOwnProperty("defaultValue")&&fd(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fd(t,e,n){(e!=="number"||_l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function qs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Am(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(eo(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function j0(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function D0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function md(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?D0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sa,V0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sa=Sa||document.createElement("div"),Sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function To(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ab=["Webkit","ms","Moz","O"];Object.keys(ao).forEach(function(t){ab.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ao[e]=ao[t]})});function O0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ao.hasOwnProperty(t)&&ao[t]?(""+e).trim():e+"px"}function M0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=O0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var lb=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gd(t,e){if(e){if(lb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function yd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vd=null;function Oh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _d=null,Hs=null,Ws=null;function Pm(t){if(t=Yo(t)){if(typeof _d!="function")throw Error(q(280));var e=t.stateNode;e&&(e=mc(e),_d(t.stateNode,t.type,e))}}function L0(t){Hs?Ws?Ws.push(t):Ws=[t]:Hs=t}function F0(){if(Hs){var t=Hs,e=Ws;if(Ws=Hs=null,Pm(t),e)for(t=0;t<e.length;t++)Pm(e[t])}}function U0(t,e){return t(e)}function z0(){}var Tu=!1;function $0(t,e,n){if(Tu)return t(e,n);Tu=!0;try{return U0(t,e,n)}finally{Tu=!1,(Hs!==null||Ws!==null)&&(z0(),F0())}}function Io(t,e){var n=t.stateNode;if(n===null)return null;var r=mc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var xd=!1;if(Ln)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){xd=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{xd=!1}function cb(t,e,n,r,s,i,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var lo=!1,xl=null,wl=!1,wd=null,ub={onError:function(t){lo=!0,xl=t}};function db(t,e,n,r,s,i,o,c,u){lo=!1,xl=null,cb.apply(ub,arguments)}function hb(t,e,n,r,s,i,o,c,u){if(db.apply(this,arguments),lo){if(lo){var h=xl;lo=!1,xl=null}else throw Error(q(198));wl||(wl=!0,wd=h)}}function ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function B0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rm(t){if(ys(t)!==t)throw Error(q(188))}function fb(t){var e=t.alternate;if(!e){if(e=ys(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rm(s),t;if(i===r)return Rm(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function q0(t){return t=fb(t),t!==null?H0(t):null}function H0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=H0(t);if(e!==null)return e;t=t.sibling}return null}var W0=zt.unstable_scheduleCallback,jm=zt.unstable_cancelCallback,pb=zt.unstable_shouldYield,mb=zt.unstable_requestPaint,qe=zt.unstable_now,gb=zt.unstable_getCurrentPriorityLevel,Mh=zt.unstable_ImmediatePriority,G0=zt.unstable_UserBlockingPriority,bl=zt.unstable_NormalPriority,yb=zt.unstable_LowPriority,K0=zt.unstable_IdlePriority,dc=null,mn=null;function vb(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(dc,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:wb,_b=Math.log,xb=Math.LN2;function wb(t){return t>>>=0,t===0?32:31-(_b(t)/xb|0)|0}var Aa=64,Ca=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function El(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=to(c):(i&=o,i!==0&&(r=to(i)))}else o=n&~s,o!==0?r=to(o):i!==0&&(r=to(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-on(e),s=1<<n,r|=t[n],e&=~s;return r}function bb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-on(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=bb(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function bd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q0(){var t=Aa;return Aa<<=1,!(Aa&4194240)&&(Aa=64),t}function Iu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=n}function Tb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-on(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-on(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function X0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Y0,Fh,J0,Z0,ev,Ed=!1,Pa=[],fr=null,pr=null,mr=null,No=new Map,ko=new Map,sr=[],Ib="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dm(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":No.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function Gi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yo(e),e!==null&&Fh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Nb(t,e,n,r,s){switch(e){case"focusin":return fr=Gi(fr,t,e,n,r,s),!0;case"dragenter":return pr=Gi(pr,t,e,n,r,s),!0;case"mouseover":return mr=Gi(mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return No.set(i,Gi(No.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ko.set(i,Gi(ko.get(i)||null,t,e,n,r,s)),!0}return!1}function tv(t){var e=Qr(t.target);if(e!==null){var n=ys(e);if(n!==null){if(e=n.tag,e===13){if(e=B0(n),e!==null){t.blockedOn=e,ev(t.priority,function(){J0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ja(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Td(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vd=r,n.target.dispatchEvent(r),vd=null}else return e=Yo(n),e!==null&&Fh(e),t.blockedOn=n,!1;e.shift()}return!0}function Vm(t,e,n){Ja(t)&&n.delete(e)}function kb(){Ed=!1,fr!==null&&Ja(fr)&&(fr=null),pr!==null&&Ja(pr)&&(pr=null),mr!==null&&Ja(mr)&&(mr=null),No.forEach(Vm),ko.forEach(Vm)}function Ki(t,e){t.blockedOn===e&&(t.blockedOn=null,Ed||(Ed=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,kb)))}function So(t){function e(s){return Ki(s,t)}if(0<Pa.length){Ki(Pa[0],t);for(var n=1;n<Pa.length;n++){var r=Pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&Ki(fr,t),pr!==null&&Ki(pr,t),mr!==null&&Ki(mr,t),No.forEach(e),ko.forEach(e),n=0;n<sr.length;n++)r=sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)tv(n),n.blockedOn===null&&sr.shift()}var Gs=Qn.ReactCurrentBatchConfig,Tl=!0;function Sb(t,e,n,r){var s=Te,i=Gs.transition;Gs.transition=null;try{Te=1,Uh(t,e,n,r)}finally{Te=s,Gs.transition=i}}function Ab(t,e,n,r){var s=Te,i=Gs.transition;Gs.transition=null;try{Te=4,Uh(t,e,n,r)}finally{Te=s,Gs.transition=i}}function Uh(t,e,n,r){if(Tl){var s=Td(t,e,n,r);if(s===null)Vu(t,e,r,Il,n),Dm(t,r);else if(Nb(s,t,e,n,r))r.stopPropagation();else if(Dm(t,r),e&4&&-1<Ib.indexOf(t)){for(;s!==null;){var i=Yo(s);if(i!==null&&Y0(i),i=Td(t,e,n,r),i===null&&Vu(t,e,r,Il,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vu(t,e,r,null,n)}}var Il=null;function Td(t,e,n,r){if(Il=null,t=Oh(r),t=Qr(t),t!==null)if(e=ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=B0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Il=t,null}function nv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gb()){case Mh:return 1;case G0:return 4;case bl:case yb:return 16;case K0:return 536870912;default:return 16}default:return 16}}var cr=null,zh=null,Za=null;function rv(){if(Za)return Za;var t,e=zh,n=e.length,r,s="value"in cr?cr.value:cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Za=s.slice(t,1<r?1-r:void 0)}function el(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ra(){return!0}function Om(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ra:Om,this.isPropagationStopped=Om,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),e}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$h=Bt(xi),Xo=Me({},xi,{view:0,detail:0}),Cb=Bt(Xo),Nu,ku,Qi,hc=Me({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(Nu=t.screenX-Qi.screenX,ku=t.screenY-Qi.screenY):ku=Nu=0,Qi=t),Nu)},movementY:function(t){return"movementY"in t?t.movementY:ku}}),Mm=Bt(hc),Pb=Me({},hc,{dataTransfer:0}),Rb=Bt(Pb),jb=Me({},Xo,{relatedTarget:0}),Su=Bt(jb),Db=Me({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Vb=Bt(Db),Ob=Me({},xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mb=Bt(Ob),Lb=Me({},xi,{data:0}),Lm=Bt(Lb),Fb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ub={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $b(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zb[t])?!!e[t]:!1}function Bh(){return $b}var Bb=Me({},Xo,{key:function(t){if(t.key){var e=Fb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=el(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ub[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bh,charCode:function(t){return t.type==="keypress"?el(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?el(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qb=Bt(Bb),Hb=Me({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fm=Bt(Hb),Wb=Me({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bh}),Gb=Bt(Wb),Kb=Me({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qb=Bt(Kb),Xb=Me({},hc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yb=Bt(Xb),Jb=[9,13,27,32],qh=Ln&&"CompositionEvent"in window,co=null;Ln&&"documentMode"in document&&(co=document.documentMode);var Zb=Ln&&"TextEvent"in window&&!co,sv=Ln&&(!qh||co&&8<co&&11>=co),Um=" ",zm=!1;function iv(t,e){switch(t){case"keyup":return Jb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ov(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function eE(t,e){switch(t){case"compositionend":return ov(e);case"keypress":return e.which!==32?null:(zm=!0,Um);case"textInput":return t=e.data,t===Um&&zm?null:t;default:return null}}function tE(t,e){if(js)return t==="compositionend"||!qh&&iv(t,e)?(t=rv(),Za=zh=cr=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sv&&e.locale!=="ko"?null:e.data;default:return null}}var nE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nE[t.type]:e==="textarea"}function av(t,e,n,r){L0(r),e=Nl(e,"onChange"),0<e.length&&(n=new $h("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uo=null,Ao=null;function rE(t){vv(t,0)}function fc(t){var e=Os(t);if(P0(e))return t}function sE(t,e){if(t==="change")return e}var lv=!1;if(Ln){var Au;if(Ln){var Cu="oninput"in document;if(!Cu){var Bm=document.createElement("div");Bm.setAttribute("oninput","return;"),Cu=typeof Bm.oninput=="function"}Au=Cu}else Au=!1;lv=Au&&(!document.documentMode||9<document.documentMode)}function qm(){uo&&(uo.detachEvent("onpropertychange",cv),Ao=uo=null)}function cv(t){if(t.propertyName==="value"&&fc(Ao)){var e=[];av(e,Ao,t,Oh(t)),$0(rE,e)}}function iE(t,e,n){t==="focusin"?(qm(),uo=e,Ao=n,uo.attachEvent("onpropertychange",cv)):t==="focusout"&&qm()}function oE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fc(Ao)}function aE(t,e){if(t==="click")return fc(e)}function lE(t,e){if(t==="input"||t==="change")return fc(e)}function cE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:cE;function Co(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!od.call(e,s)||!cn(t[s],e[s]))return!1}return!0}function Hm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wm(t,e){var n=Hm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hm(n)}}function uv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dv(){for(var t=window,e=_l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_l(t.document)}return e}function Hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uE(t){var e=dv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uv(n.ownerDocument.documentElement,n)){if(r!==null&&Hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Wm(n,i);var o=Wm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dE=Ln&&"documentMode"in document&&11>=document.documentMode,Ds=null,Id=null,ho=null,Nd=!1;function Gm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nd||Ds==null||Ds!==_l(r)||(r=Ds,"selectionStart"in r&&Hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ho&&Co(ho,r)||(ho=r,r=Nl(Id,"onSelect"),0<r.length&&(e=new $h("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function ja(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vs={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},Pu={},hv={};Ln&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function pc(t){if(Pu[t])return Pu[t];if(!Vs[t])return t;var e=Vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hv)return Pu[t]=e[n];return t}var fv=pc("animationend"),pv=pc("animationiteration"),mv=pc("animationstart"),gv=pc("transitionend"),yv=new Map,Km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){yv.set(t,e),gs(e,[t])}for(var Ru=0;Ru<Km.length;Ru++){var ju=Km[Ru],hE=ju.toLowerCase(),fE=ju[0].toUpperCase()+ju.slice(1);Or(hE,"on"+fE)}Or(fv,"onAnimationEnd");Or(pv,"onAnimationIteration");Or(mv,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(gv,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pE=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Qm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hb(r,e,void 0,t),t.currentTarget=null}function vv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Qm(s,c,h),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Qm(s,c,h),i=u}}}if(wl)throw t=wd,wl=!1,wd=null,t}function Pe(t,e){var n=e[Pd];n===void 0&&(n=e[Pd]=new Set);var r=t+"__bubble";n.has(r)||(_v(e,t,2,!1),n.add(r))}function Du(t,e,n){var r=0;e&&(r|=4),_v(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function Po(t){if(!t[Da]){t[Da]=!0,N0.forEach(function(n){n!=="selectionchange"&&(pE.has(n)||Du(n,!1,t),Du(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Du("selectionchange",!1,e))}}function _v(t,e,n,r){switch(nv(e)){case 1:var s=Sb;break;case 4:s=Ab;break;default:s=Uh}n=s.bind(null,e,n,t),s=void 0,!xd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Qr(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}$0(function(){var h=i,p=Oh(n),g=[];e:{var m=yv.get(t);if(m!==void 0){var T=$h,A=t;switch(t){case"keypress":if(el(n)===0)break e;case"keydown":case"keyup":T=qb;break;case"focusin":A="focus",T=Su;break;case"focusout":A="blur",T=Su;break;case"beforeblur":case"afterblur":T=Su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Rb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Gb;break;case fv:case pv:case mv:T=Vb;break;case gv:T=Qb;break;case"scroll":T=Cb;break;case"wheel":T=Yb;break;case"copy":case"cut":case"paste":T=Mb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Fm}var k=(e&4)!==0,S=!k&&t==="scroll",_=k?m!==null?m+"Capture":null:m;k=[];for(var y=h,N;y!==null;){N=y;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,_!==null&&(j=Io(y,_),j!=null&&k.push(Ro(y,j,N)))),S)break;y=y.return}0<k.length&&(m=new T(m,A,null,n,p),g.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",m&&n!==vd&&(A=n.relatedTarget||n.fromElement)&&(Qr(A)||A[Fn]))break e;if((T||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,T?(A=n.relatedTarget||n.toElement,T=h,A=A?Qr(A):null,A!==null&&(S=ys(A),A!==S||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=h),T!==A)){if(k=Mm,j="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(k=Fm,j="onPointerLeave",_="onPointerEnter",y="pointer"),S=T==null?m:Os(T),N=A==null?m:Os(A),m=new k(j,y+"leave",T,n,p),m.target=S,m.relatedTarget=N,j=null,Qr(p)===h&&(k=new k(_,y+"enter",A,n,p),k.target=N,k.relatedTarget=S,j=k),S=j,T&&A)t:{for(k=T,_=A,y=0,N=k;N;N=Is(N))y++;for(N=0,j=_;j;j=Is(j))N++;for(;0<y-N;)k=Is(k),y--;for(;0<N-y;)_=Is(_),N--;for(;y--;){if(k===_||_!==null&&k===_.alternate)break t;k=Is(k),_=Is(_)}k=null}else k=null;T!==null&&Xm(g,m,T,k,!1),A!==null&&S!==null&&Xm(g,S,A,k,!0)}}e:{if(m=h?Os(h):window,T=m.nodeName&&m.nodeName.toLowerCase(),T==="select"||T==="input"&&m.type==="file")var z=sE;else if($m(m))if(lv)z=lE;else{z=oE;var $=iE}else(T=m.nodeName)&&T.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(z=aE);if(z&&(z=z(t,h))){av(g,z,n,p);break e}$&&$(t,m,h),t==="focusout"&&($=m._wrapperState)&&$.controlled&&m.type==="number"&&fd(m,"number",m.value)}switch($=h?Os(h):window,t){case"focusin":($m($)||$.contentEditable==="true")&&(Ds=$,Id=h,ho=null);break;case"focusout":ho=Id=Ds=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Gm(g,n,p);break;case"selectionchange":if(dE)break;case"keydown":case"keyup":Gm(g,n,p)}var b;if(qh)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else js?iv(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(sv&&n.locale!=="ko"&&(js||x!=="onCompositionStart"?x==="onCompositionEnd"&&js&&(b=rv()):(cr=p,zh="value"in cr?cr.value:cr.textContent,js=!0)),$=Nl(h,x),0<$.length&&(x=new Lm(x,t,null,n,p),g.push({event:x,listeners:$}),b?x.data=b:(b=ov(n),b!==null&&(x.data=b)))),(b=Zb?eE(t,n):tE(t,n))&&(h=Nl(h,"onBeforeInput"),0<h.length&&(p=new Lm("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=b))}vv(g,e)})}function Ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Io(t,n),i!=null&&r.unshift(Ro(t,i,s)),i=Io(t,e),i!=null&&r.push(Ro(t,i,s))),t=t.return}return r}function Is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=Io(n,i),u!=null&&o.unshift(Ro(n,u,c))):s||(u=Io(n,i),u!=null&&o.push(Ro(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mE=/\r\n?/g,gE=/\u0000|\uFFFD/g;function Ym(t){return(typeof t=="string"?t:""+t).replace(mE,`
`).replace(gE,"")}function Va(t,e,n){if(e=Ym(e),Ym(t)!==e&&n)throw Error(q(425))}function kl(){}var kd=null,Sd=null;function Ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,yE=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,vE=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm<"u"?function(t){return Jm.resolve(null).then(t).catch(_E)}:Cd;function _E(t){setTimeout(function(){throw t})}function Ou(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),So(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);So(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wi=Math.random().toString(36).slice(2),pn="__reactFiber$"+wi,jo="__reactProps$"+wi,Fn="__reactContainer$"+wi,Pd="__reactEvents$"+wi,xE="__reactListeners$"+wi,wE="__reactHandles$"+wi;function Qr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fn]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zm(t);t!==null;){if(n=t[pn])return n;t=Zm(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[pn]||t[Fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function mc(t){return t[jo]||null}var Rd=[],Ms=-1;function Mr(t){return{current:t}}function je(t){0>Ms||(t.current=Rd[Ms],Rd[Ms]=null,Ms--)}function Ae(t,e){Ms++,Rd[Ms]=t.current,t.current=e}var Sr={},vt=Mr(Sr),Pt=Mr(!1),os=Sr;function ni(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function Sl(){je(Pt),je(vt)}function eg(t,e,n){if(vt.current!==Sr)throw Error(q(168));Ae(vt,e),Ae(Pt,n)}function xv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,ib(t)||"Unknown",s));return Me({},n,r)}function Al(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,os=vt.current,Ae(vt,t),Ae(Pt,Pt.current),!0}function tg(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=xv(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,je(Pt),je(vt),Ae(vt,t)):je(Pt),Ae(Pt,n)}var Sn=null,gc=!1,Mu=!1;function wv(t){Sn===null?Sn=[t]:Sn.push(t)}function bE(t){gc=!0,wv(t)}function Lr(){if(!Mu&&Sn!==null){Mu=!0;var t=0,e=Te;try{var n=Sn;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,gc=!1}catch(s){throw Sn!==null&&(Sn=Sn.slice(t+1)),W0(Mh,Lr),s}finally{Te=e,Mu=!1}}return null}var Ls=[],Fs=0,Cl=null,Pl=0,qt=[],Ht=0,as=null,Pn=1,Rn="";function Wr(t,e){Ls[Fs++]=Pl,Ls[Fs++]=Cl,Cl=t,Pl=e}function bv(t,e,n){qt[Ht++]=Pn,qt[Ht++]=Rn,qt[Ht++]=as,as=t;var r=Pn;t=Rn;var s=32-on(r)-1;r&=~(1<<s),n+=1;var i=32-on(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-on(e)+s|n<<s|r,Rn=i+t}else Pn=1<<i|n<<s|r,Rn=t}function Wh(t){t.return!==null&&(Wr(t,1),bv(t,1,0))}function Gh(t){for(;t===Cl;)Cl=Ls[--Fs],Ls[Fs]=null,Pl=Ls[--Fs],Ls[Fs]=null;for(;t===as;)as=qt[--Ht],qt[Ht]=null,Rn=qt[--Ht],qt[Ht]=null,Pn=qt[--Ht],qt[Ht]=null}var Ut=null,Lt=null,De=!1,nn=null;function Ev(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ng(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Lt=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:Pn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Lt=null,!0):!1;default:return!1}}function jd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dd(t){if(De){var e=Lt;if(e){var n=e;if(!ng(t,e)){if(jd(t))throw Error(q(418));e=gr(n.nextSibling);var r=Ut;e&&ng(t,e)?Ev(r,n):(t.flags=t.flags&-4097|2,De=!1,Ut=t)}}else{if(jd(t))throw Error(q(418));t.flags=t.flags&-4097|2,De=!1,Ut=t}}}function rg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Oa(t){if(t!==Ut)return!1;if(!De)return rg(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ad(t.type,t.memoizedProps)),e&&(e=Lt)){if(jd(t))throw Tv(),Error(q(418));for(;e;)Ev(t,e),e=gr(e.nextSibling)}if(rg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Ut?gr(t.stateNode.nextSibling):null;return!0}function Tv(){for(var t=Lt;t;)t=gr(t.nextSibling)}function ri(){Lt=Ut=null,De=!1}function Kh(t){nn===null?nn=[t]:nn.push(t)}var EE=Qn.ReactCurrentBatchConfig;function Xi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Ma(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sg(t){var e=t._init;return e(t._payload)}function Iv(t){function e(_,y){if(t){var N=_.deletions;N===null?(_.deletions=[y],_.flags|=16):N.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=xr(_,y),_.index=0,_.sibling=null,_}function i(_,y,N){return _.index=N,t?(N=_.alternate,N!==null?(N=N.index,N<y?(_.flags|=2,y):N):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function c(_,y,N,j){return y===null||y.tag!==6?(y=qu(N,_.mode,j),y.return=_,y):(y=s(y,N),y.return=_,y)}function u(_,y,N,j){var z=N.type;return z===Rs?p(_,y,N.props.children,j,N.key):y!==null&&(y.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===nr&&sg(z)===y.type)?(j=s(y,N.props),j.ref=Xi(_,y,N),j.return=_,j):(j=al(N.type,N.key,N.props,null,_.mode,j),j.ref=Xi(_,y,N),j.return=_,j)}function h(_,y,N,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=Hu(N,_.mode,j),y.return=_,y):(y=s(y,N.children||[]),y.return=_,y)}function p(_,y,N,j,z){return y===null||y.tag!==7?(y=ts(N,_.mode,j,z),y.return=_,y):(y=s(y,N),y.return=_,y)}function g(_,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=qu(""+y,_.mode,N),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Na:return N=al(y.type,y.key,y.props,null,_.mode,N),N.ref=Xi(_,null,y),N.return=_,N;case Ps:return y=Hu(y,_.mode,N),y.return=_,y;case nr:var j=y._init;return g(_,j(y._payload),N)}if(eo(y)||Hi(y))return y=ts(y,_.mode,N,null),y.return=_,y;Ma(_,y)}return null}function m(_,y,N,j){var z=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return z!==null?null:c(_,y,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Na:return N.key===z?u(_,y,N,j):null;case Ps:return N.key===z?h(_,y,N,j):null;case nr:return z=N._init,m(_,y,z(N._payload),j)}if(eo(N)||Hi(N))return z!==null?null:p(_,y,N,j,null);Ma(_,N)}return null}function T(_,y,N,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return _=_.get(N)||null,c(y,_,""+j,z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Na:return _=_.get(j.key===null?N:j.key)||null,u(y,_,j,z);case Ps:return _=_.get(j.key===null?N:j.key)||null,h(y,_,j,z);case nr:var $=j._init;return T(_,y,N,$(j._payload),z)}if(eo(j)||Hi(j))return _=_.get(N)||null,p(y,_,j,z,null);Ma(y,j)}return null}function A(_,y,N,j){for(var z=null,$=null,b=y,x=y=0,w=null;b!==null&&x<N.length;x++){b.index>x?(w=b,b=null):w=b.sibling;var E=m(_,b,N[x],j);if(E===null){b===null&&(b=w);break}t&&b&&E.alternate===null&&e(_,b),y=i(E,y,x),$===null?z=E:$.sibling=E,$=E,b=w}if(x===N.length)return n(_,b),De&&Wr(_,x),z;if(b===null){for(;x<N.length;x++)b=g(_,N[x],j),b!==null&&(y=i(b,y,x),$===null?z=b:$.sibling=b,$=b);return De&&Wr(_,x),z}for(b=r(_,b);x<N.length;x++)w=T(b,_,x,N[x],j),w!==null&&(t&&w.alternate!==null&&b.delete(w.key===null?x:w.key),y=i(w,y,x),$===null?z=w:$.sibling=w,$=w);return t&&b.forEach(function(C){return e(_,C)}),De&&Wr(_,x),z}function k(_,y,N,j){var z=Hi(N);if(typeof z!="function")throw Error(q(150));if(N=z.call(N),N==null)throw Error(q(151));for(var $=z=null,b=y,x=y=0,w=null,E=N.next();b!==null&&!E.done;x++,E=N.next()){b.index>x?(w=b,b=null):w=b.sibling;var C=m(_,b,E.value,j);if(C===null){b===null&&(b=w);break}t&&b&&C.alternate===null&&e(_,b),y=i(C,y,x),$===null?z=C:$.sibling=C,$=C,b=w}if(E.done)return n(_,b),De&&Wr(_,x),z;if(b===null){for(;!E.done;x++,E=N.next())E=g(_,E.value,j),E!==null&&(y=i(E,y,x),$===null?z=E:$.sibling=E,$=E);return De&&Wr(_,x),z}for(b=r(_,b);!E.done;x++,E=N.next())E=T(b,_,x,E.value,j),E!==null&&(t&&E.alternate!==null&&b.delete(E.key===null?x:E.key),y=i(E,y,x),$===null?z=E:$.sibling=E,$=E);return t&&b.forEach(function(P){return e(_,P)}),De&&Wr(_,x),z}function S(_,y,N,j){if(typeof N=="object"&&N!==null&&N.type===Rs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Na:e:{for(var z=N.key,$=y;$!==null;){if($.key===z){if(z=N.type,z===Rs){if($.tag===7){n(_,$.sibling),y=s($,N.props.children),y.return=_,_=y;break e}}else if($.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===nr&&sg(z)===$.type){n(_,$.sibling),y=s($,N.props),y.ref=Xi(_,$,N),y.return=_,_=y;break e}n(_,$);break}else e(_,$);$=$.sibling}N.type===Rs?(y=ts(N.props.children,_.mode,j,N.key),y.return=_,_=y):(j=al(N.type,N.key,N.props,null,_.mode,j),j.ref=Xi(_,y,N),j.return=_,_=j)}return o(_);case Ps:e:{for($=N.key;y!==null;){if(y.key===$)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){n(_,y.sibling),y=s(y,N.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Hu(N,_.mode,j),y.return=_,_=y}return o(_);case nr:return $=N._init,S(_,y,$(N._payload),j)}if(eo(N))return A(_,y,N,j);if(Hi(N))return k(_,y,N,j);Ma(_,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,N),y.return=_,_=y):(n(_,y),y=qu(N,_.mode,j),y.return=_,_=y),o(_)):n(_,y)}return S}var si=Iv(!0),Nv=Iv(!1),Rl=Mr(null),jl=null,Us=null,Qh=null;function Xh(){Qh=Us=jl=null}function Yh(t){var e=Rl.current;je(Rl),t._currentValue=e}function Vd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){jl=t,Qh=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(Qh!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(jl===null)throw Error(q(308));Us=t,jl.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var Xr=null;function Jh(t){Xr===null?Xr=[t]:Xr.push(t)}function kv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Un(t,r)}function Un(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rr=!1;function Zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Un(t,n)}return s=r.interleaved,s===null?(e.next=e,Jh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Un(t,n)}function tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lh(t,n)}}function ig(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dl(t,e,n,r){var s=t.updateQueue;rr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,p=h=u=null,c=i;do{var m=c.lane,T=c.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:T,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var A=t,k=c;switch(m=e,T=n,k.tag){case 1:if(A=k.payload,typeof A=="function"){g=A.call(T,g,m);break e}g=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=k.payload,m=typeof A=="function"?A.call(T,g,m):A,m==null)break e;g=Me({},g,m);break e;case 2:rr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[c]:m.push(c))}else T={eventTime:T,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(h=p=T,u=g):p=p.next=T,o|=m;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;m=c,c=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);cs|=o,t.lanes=o,t.memoizedState=g}}function og(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Jo={},gn=Mr(Jo),Do=Mr(Jo),Vo=Mr(Jo);function Yr(t){if(t===Jo)throw Error(q(174));return t}function ef(t,e){switch(Ae(Vo,e),Ae(Do,t),Ae(gn,Jo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:md(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=md(e,t)}je(gn),Ae(gn,e)}function ii(){je(gn),je(Do),je(Vo)}function Av(t){Yr(Vo.current);var e=Yr(gn.current),n=md(e,t.type);e!==n&&(Ae(Do,t),Ae(gn,n))}function tf(t){Do.current===t&&(je(gn),je(Do))}var Ve=Mr(0);function Vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lu=[];function nf(){for(var t=0;t<Lu.length;t++)Lu[t]._workInProgressVersionPrimary=null;Lu.length=0}var nl=Qn.ReactCurrentDispatcher,Fu=Qn.ReactCurrentBatchConfig,ls=0,Oe=null,Qe=null,Ze=null,Ol=!1,fo=!1,Oo=0,TE=0;function ht(){throw Error(q(321))}function rf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function sf(t,e,n,r,s,i){if(ls=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nl.current=t===null||t.memoizedState===null?SE:AE,t=n(r,s),fo){i=0;do{if(fo=!1,Oo=0,25<=i)throw Error(q(301));i+=1,Ze=Qe=null,e.updateQueue=null,nl.current=CE,t=n(r,s)}while(fo)}if(nl.current=Ml,e=Qe!==null&&Qe.next!==null,ls=0,Ze=Qe=Oe=null,Ol=!1,e)throw Error(q(300));return t}function of(){var t=Oo!==0;return Oo=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function Yt(){if(Qe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=Ze===null?Oe.memoizedState:Ze.next;if(e!==null)Ze=e,Qe=t;else{if(t===null)throw Error(q(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Mo(t,e){return typeof e=="function"?e(t):e}function Uu(t){var e=Yt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,h=i;do{var p=h.lane;if((ls&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=g,o=r):u=u.next=g,Oe.lanes|=p,cs|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=c,cn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,cs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zu(t){var e=Yt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Cv(){}function Pv(t,e){var n=Oe,r=Yt(),s=e(),i=!cn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,af(Dv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Lo(9,jv.bind(null,n,r,s,e),void 0,null),et===null)throw Error(q(349));ls&30||Rv(n,e,s)}return s}function Rv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jv(t,e,n,r){e.value=n,e.getSnapshot=r,Vv(e)&&Ov(t)}function Dv(t,e,n){return n(function(){Vv(e)&&Ov(t)})}function Vv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cn(t,n)}catch{return!0}}function Ov(t){var e=Un(t,1);e!==null&&an(e,t,1,-1)}function ag(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:t},e.queue=t,t=t.dispatch=kE.bind(null,Oe,t),[e.memoizedState,t]}function Lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mv(){return Yt().memoizedState}function rl(t,e,n,r){var s=hn();Oe.flags|=t,s.memoizedState=Lo(1|e,n,void 0,r===void 0?null:r)}function yc(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&rf(r,o.deps)){s.memoizedState=Lo(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=Lo(1|e,n,i,r)}function lg(t,e){return rl(8390656,8,t,e)}function af(t,e){return yc(2048,8,t,e)}function Lv(t,e){return yc(4,2,t,e)}function Fv(t,e){return yc(4,4,t,e)}function Uv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zv(t,e,n){return n=n!=null?n.concat([t]):null,yc(4,4,Uv.bind(null,e,t),n)}function lf(){}function $v(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Bv(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qv(t,e,n){return ls&21?(cn(n,e)||(n=Q0(),Oe.lanes|=n,cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function IE(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Fu.transition;Fu.transition={};try{t(!1),e()}finally{Te=n,Fu.transition=r}}function Hv(){return Yt().memoizedState}function NE(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wv(t))Gv(e,n);else if(n=kv(t,e,n,r),n!==null){var s=Tt();an(n,t,r,s),Kv(n,e,r)}}function kE(t,e,n){var r=_r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wv(t))Gv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,cn(c,o)){var u=e.interleaved;u===null?(s.next=s,Jh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=kv(t,e,s,r),n!==null&&(s=Tt(),an(n,t,r,s),Kv(n,e,r))}}function Wv(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Gv(t,e){fo=Ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lh(t,n)}}var Ml={readContext:Xt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},SE={readContext:Xt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:lg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rl(4194308,4,Uv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return rl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NE.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:ag,useDebugValue:lf,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=ag(!1),e=t[0];return t=IE.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=hn();if(De){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),et===null)throw Error(q(349));ls&30||Rv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,lg(Dv.bind(null,r,i,t),[t]),r.flags|=2048,Lo(9,jv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=et.identifierPrefix;if(De){var n=Rn,r=Pn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AE={readContext:Xt,useCallback:$v,useContext:Xt,useEffect:af,useImperativeHandle:zv,useInsertionEffect:Lv,useLayoutEffect:Fv,useMemo:Bv,useReducer:Uu,useRef:Mv,useState:function(){return Uu(Mo)},useDebugValue:lf,useDeferredValue:function(t){var e=Yt();return qv(e,Qe.memoizedState,t)},useTransition:function(){var t=Uu(Mo)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Cv,useSyncExternalStore:Pv,useId:Hv,unstable_isNewReconciler:!1},CE={readContext:Xt,useCallback:$v,useContext:Xt,useEffect:af,useImperativeHandle:zv,useInsertionEffect:Lv,useLayoutEffect:Fv,useMemo:Bv,useReducer:zu,useRef:Mv,useState:function(){return zu(Mo)},useDebugValue:lf,useDeferredValue:function(t){var e=Yt();return Qe===null?e.memoizedState=t:qv(e,Qe.memoizedState,t)},useTransition:function(){var t=zu(Mo)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Cv,useSyncExternalStore:Pv,useId:Hv,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Od(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vc={isMounted:function(t){return(t=t._reactInternals)?ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=_r(t),i=On(r,s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(an(e,t,s,r),tl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=_r(t),i=On(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(an(e,t,s,r),tl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=_r(t),s=On(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(an(e,t,r,n),tl(e,t,r))}};function cg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Co(n,r)||!Co(s,i):!0}function Qv(t,e,n){var r=!1,s=Sr,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Rt(e)?os:vt.current,r=e.contextTypes,i=(r=r!=null)?ni(t,s):Sr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ug(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vc.enqueueReplaceState(e,e.state,null)}function Md(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Rt(e)?os:vt.current,s.context=ni(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Od(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vc.enqueueReplaceState(s,s.state,null),Dl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,e){try{var n="",r=e;do n+=sb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $u(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ld(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PE=typeof WeakMap=="function"?WeakMap:Map;function Xv(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fl||(Fl=!0,Kd=r),Ld(t,e)},n}function Yv(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ld(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ld(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=HE.bind(null,t,e,n),e.then(t,t))}function hg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var RE=Qn.ReactCurrentOwner,Ct=!1;function bt(t,e,n,r){e.child=t===null?Nv(e,null,n,r):si(e,t.child,n,r)}function pg(t,e,n,r,s){n=n.render;var i=e.ref;return Ks(e,s),r=sf(t,e,n,r,i,s),n=of(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(De&&n&&Wh(e),e.flags|=1,bt(t,e,r,s),e.child)}function mg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jv(t,e,i,r,s)):(t=al(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Co,n(o,r)&&t.ref===e.ref)return zn(t,e,s)}return e.flags|=1,t=xr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Co(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,zn(t,e,s)}return Fd(t,e,n,r,s)}function Zv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae($s,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae($s,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae($s,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae($s,Mt),Mt|=r;return bt(t,e,s,n),e.child}function e_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fd(t,e,n,r,s){var i=Rt(n)?os:vt.current;return i=ni(e,i),Ks(e,s),n=sf(t,e,n,r,i,s),r=of(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(De&&r&&Wh(e),e.flags|=1,bt(t,e,n,s),e.child)}function gg(t,e,n,r,s){if(Rt(n)){var i=!0;Al(e)}else i=!1;if(Ks(e,s),e.stateNode===null)sl(t,e),Qv(e,n,r),Md(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Xt(h):(h=Rt(n)?os:vt.current,h=ni(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&ug(e,o,r,h),rr=!1;var m=e.memoizedState;o.state=m,Dl(e,r,o,s),u=e.memoizedState,c!==r||m!==u||Pt.current||rr?(typeof p=="function"&&(Od(e,n,p,r),u=e.memoizedState),(c=rr||cg(e,n,c,r,m,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Sv(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:en(e.type,c),o.props=h,g=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xt(u):(u=Rt(n)?os:vt.current,u=ni(e,u));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||m!==u)&&ug(e,o,r,u),rr=!1,m=e.memoizedState,o.state=m,Dl(e,r,o,s);var A=e.memoizedState;c!==g||m!==A||Pt.current||rr?(typeof T=="function"&&(Od(e,n,T,r),A=e.memoizedState),(h=rr||cg(e,n,h,r,m,A,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ud(t,e,n,r,i,s)}function Ud(t,e,n,r,s,i){e_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tg(e,n,!1),zn(t,e,i);r=e.stateNode,RE.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=si(e,t.child,null,i),e.child=si(e,null,c,i)):bt(t,e,c,i),e.memoizedState=r.state,s&&tg(e,n,!0),e.child}function t_(t){var e=t.stateNode;e.pendingContext?eg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eg(t,e.context,!1),ef(t,e.containerInfo)}function yg(t,e,n,r,s){return ri(),Kh(s),e.flags|=256,bt(t,e,n,r),e.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function $d(t){return{baseLanes:t,cachePool:null,transitions:null}}function n_(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Ve,s&1),t===null)return Dd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wc(o,r,0,null),t=ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$d(n),e.memoizedState=zd,t):cf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return jE(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=xr(c,i):(i=ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$d(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zd,r}return i=t.child,t=i.sibling,r=xr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cf(t,e){return e=wc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function La(t,e,n,r){return r!==null&&Kh(r),si(e,t.child,null,n),t=cf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=$u(Error(q(422))),La(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wc({mode:"visible",children:r.children},s,0,null),i=ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&si(e,t.child,null,o),e.child.memoizedState=$d(o),e.memoizedState=zd,i);if(!(e.mode&1))return La(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(q(419)),r=$u(i,r,void 0),La(t,e,o,r)}if(c=(o&t.childLanes)!==0,Ct||c){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Un(t,s),an(r,t,s,-1))}return mf(),r=$u(Error(q(421))),La(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=WE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=gr(s.nextSibling),Ut=e,De=!0,nn=null,t!==null&&(qt[Ht++]=Pn,qt[Ht++]=Rn,qt[Ht++]=as,Pn=t.id,Rn=t.overflow,as=e),e=cf(e,r.children),e.flags|=4096,e)}function vg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vd(t.return,e,n)}function Bu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function r_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vg(t,n,e);else if(t.tag===19)vg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bu(e,!0,n,null,i);break;case"together":Bu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DE(t,e,n){switch(e.tag){case 3:t_(e),ri();break;case 5:Av(e);break;case 1:Rt(e.type)&&Al(e);break;case 4:ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(Rl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?n_(t,e,n):(Ae(Ve,Ve.current&1),t=zn(t,e,n),t!==null?t.sibling:null);Ae(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,Zv(t,e,n)}return zn(t,e,n)}var s_,Bd,i_,o_;s_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bd=function(){};i_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Yr(gn.current);var i=null;switch(n){case"input":s=dd(t,s),r=dd(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=pd(t,s),r=pd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kl)}gd(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Eo.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Eo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Pe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};o_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yi(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VE(t,e,n){var r=e.pendingProps;switch(Gh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Rt(e.type)&&Sl(),ft(e),null;case 3:return r=e.stateNode,ii(),je(Pt),je(vt),nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(Yd(nn),nn=null))),Bd(t,e),ft(e),null;case 5:tf(e);var s=Yr(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)i_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ft(e),null}if(t=Yr(gn.current),Oa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pn]=e,r[jo]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<no.length;s++)Pe(no[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":km(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":Am(r,i),Pe("invalid",r)}gd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),s=["children",""+c]):Eo.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":ka(r),Sm(r,i,!0);break;case"textarea":ka(r),Cm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=kl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=D0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[jo]=r,s_(t,e,!1,!1),e.stateNode=t;e:{switch(o=yd(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<no.length;s++)Pe(no[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":km(t,r),s=dd(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":Am(t,r),s=pd(t,r),Pe("invalid",t);break;default:s=r}gd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?M0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&V0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&To(t,u):typeof u=="number"&&To(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Eo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Pe("scroll",t):u!=null&&Rh(t,i,u,o))}switch(n){case"input":ka(t),Sm(t,r,!1);break;case"textarea":ka(t),Cm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?qs(t,!!r.multiple,i,!1):r.defaultValue!=null&&qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=kl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)o_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Yr(Vo.current),Yr(gn.current),Oa(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return ft(e),null;case 13:if(je(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Lt!==null&&e.mode&1&&!(e.flags&128))Tv(),ri(),e.flags|=98560,i=!1;else if(i=Oa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[pn]=e}else ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else nn!==null&&(Yd(nn),nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?Xe===0&&(Xe=3):mf())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return ii(),Bd(t,e),t===null&&Po(e.stateNode.containerInfo),ft(e),null;case 10:return Yh(e.type._context),ft(e),null;case 17:return Rt(e.type)&&Sl(),ft(e),null;case 19:if(je(Ve),i=e.memoizedState,i===null)return ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Yi(i,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vl(t),o!==null){for(e.flags|=128,Yi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>ai&&(e.flags|=128,r=!0,Yi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return ft(e),null}else 2*qe()-i.renderingStartTime>ai&&n!==1073741824&&(e.flags|=128,r=!0,Yi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Ve.current,Ae(Ve,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return pf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function OE(t,e){switch(Gh(e),e.tag){case 1:return Rt(e.type)&&Sl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ii(),je(Pt),je(vt),nf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tf(e),null;case 13:if(je(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ve),null;case 4:return ii(),null;case 10:return Yh(e.type._context),null;case 22:case 23:return pf(),null;case 24:return null;default:return null}}var Fa=!1,gt=!1,ME=typeof WeakSet=="function"?WeakSet:Set,J=null;function zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function qd(t,e,n){try{n()}catch(r){ze(t,e,r)}}var _g=!1;function LE(t,e){if(kd=Tl,t=dv(),Hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,p=0,g=t,m=null;t:for(;;){for(var T;g!==n||s!==0&&g.nodeType!==3||(c=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(T=g.firstChild)!==null;)m=g,g=T;for(;;){if(g===t)break t;if(m===n&&++h===s&&(c=o),m===i&&++p===r&&(u=o),(T=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=T}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sd={focusedElem:t,selectionRange:n},Tl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var k=A.memoizedProps,S=A.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?k:en(e.type,k),S);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){ze(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return A=_g,_g=!1,A}function po(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&qd(e,n,i)}s=s.next}while(s!==r)}}function _c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function a_(t){var e=t.alternate;e!==null&&(t.alternate=null,a_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[jo],delete e[Pd],delete e[xE],delete e[wE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l_(t){return t.tag===5||t.tag===3||t.tag===4}function xg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kl));else if(r!==4&&(t=t.child,t!==null))for(Wd(t,e,n),t=t.sibling;t!==null;)Wd(t,e,n),t=t.sibling}function Gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}var rt=null,tn=!1;function er(t,e,n){for(n=n.child;n!==null;)c_(t,e,n),n=n.sibling}function c_(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(dc,n)}catch{}switch(n.tag){case 5:gt||zs(n,e);case 6:var r=rt,s=tn;rt=null,er(t,e,n),rt=r,tn=s,rt!==null&&(tn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(tn?(t=rt,n=n.stateNode,t.nodeType===8?Ou(t.parentNode,n):t.nodeType===1&&Ou(t,n),So(t)):Ou(rt,n.stateNode));break;case 4:r=rt,s=tn,rt=n.stateNode.containerInfo,tn=!0,er(t,e,n),rt=r,tn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&qd(n,e,o),s=s.next}while(s!==r)}er(t,e,n);break;case 1:if(!gt&&(zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){ze(n,e,c)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,er(t,e,n),gt=r):er(t,e,n);break;default:er(t,e,n)}}function wg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ME),e.forEach(function(r){var s=GE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:rt=c.stateNode,tn=!1;break e;case 3:rt=c.stateNode.containerInfo,tn=!0;break e;case 4:rt=c.stateNode.containerInfo,tn=!0;break e}c=c.return}if(rt===null)throw Error(q(160));c_(i,o,s),rt=null,tn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){ze(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u_(e,t),e=e.sibling}function u_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),dn(t),r&4){try{po(3,t,t.return),_c(3,t)}catch(k){ze(t,t.return,k)}try{po(5,t,t.return)}catch(k){ze(t,t.return,k)}}break;case 1:Zt(e,t),dn(t),r&512&&n!==null&&zs(n,n.return);break;case 5:if(Zt(e,t),dn(t),r&512&&n!==null&&zs(n,n.return),t.flags&32){var s=t.stateNode;try{To(s,"")}catch(k){ze(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&R0(s,i),yd(c,o);var h=yd(c,i);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?M0(s,g):p==="dangerouslySetInnerHTML"?V0(s,g):p==="children"?To(s,g):Rh(s,p,g,h)}switch(c){case"input":hd(s,i);break;case"textarea":j0(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?qs(s,!!i.multiple,T,!1):m!==!!i.multiple&&(i.defaultValue!=null?qs(s,!!i.multiple,i.defaultValue,!0):qs(s,!!i.multiple,i.multiple?[]:"",!1))}s[jo]=i}catch(k){ze(t,t.return,k)}}break;case 6:if(Zt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){ze(t,t.return,k)}}break;case 3:if(Zt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(k){ze(t,t.return,k)}break;case 4:Zt(e,t),dn(t);break;case 13:Zt(e,t),dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hf=qe())),r&4&&wg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(h=gt)||p,Zt(e,t),gt=h):Zt(e,t),dn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(J=t,p=t.child;p!==null;){for(g=J=p;J!==null;){switch(m=J,T=m.child,m.tag){case 0:case 11:case 14:case 15:po(4,m,m.return);break;case 1:zs(m,m.return);var A=m.stateNode;if(typeof A.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(k){ze(r,n,k)}}break;case 5:zs(m,m.return);break;case 22:if(m.memoizedState!==null){Eg(g);continue}}T!==null?(T.return=m,J=T):Eg(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=O0("display",o))}catch(k){ze(t,t.return,k)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(k){ze(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Zt(e,t),dn(t),r&4&&wg(t);break;case 21:break;default:Zt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l_(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(To(s,""),r.flags&=-33);var i=xg(t);Gd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=xg(t);Wd(t,c,o);break;default:throw Error(q(161))}}catch(u){ze(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FE(t,e,n){J=t,d_(t)}function d_(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fa;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||gt;c=Fa;var h=gt;if(Fa=o,(gt=u)&&!h)for(J=s;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?Tg(s):u!==null?(u.return=o,J=u):Tg(s);for(;i!==null;)J=i,d_(i),i=i.sibling;J=s,Fa=c,gt=h}bg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):bg(t)}}function bg(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||_c(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&og(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}og(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&So(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}gt||e.flags&512&&Hd(e)}catch(m){ze(e,e.return,m)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Eg(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Tg(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_c(4,e)}catch(u){ze(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ze(e,s,u)}}var i=e.return;try{Hd(e)}catch(u){ze(e,i,u)}break;case 5:var o=e.return;try{Hd(e)}catch(u){ze(e,o,u)}}}catch(u){ze(e,e.return,u)}if(e===t){J=null;break}var c=e.sibling;if(c!==null){c.return=e.return,J=c;break}J=e.return}}var UE=Math.ceil,Ll=Qn.ReactCurrentDispatcher,uf=Qn.ReactCurrentOwner,Kt=Qn.ReactCurrentBatchConfig,xe=0,et=null,We=null,ot=0,Mt=0,$s=Mr(0),Xe=0,Fo=null,cs=0,xc=0,df=0,mo=null,St=null,hf=0,ai=1/0,kn=null,Fl=!1,Kd=null,vr=null,Ua=!1,ur=null,Ul=0,go=0,Qd=null,il=-1,ol=0;function Tt(){return xe&6?qe():il!==-1?il:il=qe()}function _r(t){return t.mode&1?xe&2&&ot!==0?ot&-ot:EE.transition!==null?(ol===0&&(ol=Q0()),ol):(t=Te,t!==0||(t=window.event,t=t===void 0?16:nv(t.type)),t):1}function an(t,e,n,r){if(50<go)throw go=0,Qd=null,Error(q(185));Qo(t,n,r),(!(xe&2)||t!==et)&&(t===et&&(!(xe&2)&&(xc|=n),Xe===4&&ir(t,ot)),jt(t,r),n===1&&xe===0&&!(e.mode&1)&&(ai=qe()+500,gc&&Lr()))}function jt(t,e){var n=t.callbackNode;Eb(t,e);var r=El(t,t===et?ot:0);if(r===0)n!==null&&jm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jm(n),e===1)t.tag===0?bE(Ig.bind(null,t)):wv(Ig.bind(null,t)),vE(function(){!(xe&6)&&Lr()}),n=null;else{switch(X0(r)){case 1:n=Mh;break;case 4:n=G0;break;case 16:n=bl;break;case 536870912:n=K0;break;default:n=bl}n=__(n,h_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function h_(t,e){if(il=-1,ol=0,xe&6)throw Error(q(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=El(t,t===et?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zl(t,r);else{e=r;var s=xe;xe|=2;var i=p_();(et!==t||ot!==e)&&(kn=null,ai=qe()+500,es(t,e));do try{BE();break}catch(c){f_(t,c)}while(!0);Xh(),Ll.current=i,xe=s,We!==null?e=0:(et=null,ot=0,e=Xe)}if(e!==0){if(e===2&&(s=bd(t),s!==0&&(r=s,e=Xd(t,s))),e===1)throw n=Fo,es(t,0),ir(t,r),jt(t,qe()),n;if(e===6)ir(t,r);else{if(s=t.current.alternate,!(r&30)&&!zE(s)&&(e=zl(t,r),e===2&&(i=bd(t),i!==0&&(r=i,e=Xd(t,i))),e===1))throw n=Fo,es(t,0),ir(t,r),jt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Gr(t,St,kn);break;case 3:if(ir(t,r),(r&130023424)===r&&(e=hf+500-qe(),10<e)){if(El(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Cd(Gr.bind(null,t,St,kn),e);break}Gr(t,St,kn);break;case 4:if(ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-on(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UE(r/1960))-r,10<r){t.timeoutHandle=Cd(Gr.bind(null,t,St,kn),r);break}Gr(t,St,kn);break;case 5:Gr(t,St,kn);break;default:throw Error(q(329))}}}return jt(t,qe()),t.callbackNode===n?h_.bind(null,t):null}function Xd(t,e){var n=mo;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=zl(t,e),t!==2&&(e=St,St=n,e!==null&&Yd(e)),t}function Yd(t){St===null?St=t:St.push.apply(St,t)}function zE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~df,e&=~xc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function Ig(t){if(xe&6)throw Error(q(327));Qs();var e=El(t,0);if(!(e&1))return jt(t,qe()),null;var n=zl(t,e);if(t.tag!==0&&n===2){var r=bd(t);r!==0&&(e=r,n=Xd(t,r))}if(n===1)throw n=Fo,es(t,0),ir(t,e),jt(t,qe()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gr(t,St,kn),jt(t,qe()),null}function ff(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(ai=qe()+500,gc&&Lr())}}function us(t){ur!==null&&ur.tag===0&&!(xe&6)&&Qs();var e=xe;xe|=1;var n=Kt.transition,r=Te;try{if(Kt.transition=null,Te=1,t)return t()}finally{Te=r,Kt.transition=n,xe=e,!(xe&6)&&Lr()}}function pf(){Mt=$s.current,je($s)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yE(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Gh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sl();break;case 3:ii(),je(Pt),je(vt),nf();break;case 5:tf(r);break;case 4:ii();break;case 13:je(Ve);break;case 19:je(Ve);break;case 10:Yh(r.type._context);break;case 22:case 23:pf()}n=n.return}if(et=t,We=t=xr(t.current,null),ot=Mt=e,Xe=0,Fo=null,df=xc=cs=0,St=mo=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xr=null}return t}function f_(t,e){do{var n=We;try{if(Xh(),nl.current=Ml,Ol){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ol=!1}if(ls=0,Ze=Qe=Oe=null,fo=!1,Oo=0,uf.current=null,n===null||n.return===null){Xe=1,Fo=e,We=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=ot,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=c,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=hg(o);if(T!==null){T.flags&=-257,fg(T,o,c,i,e),T.mode&1&&dg(i,h,e),e=T,u=h;var A=e.updateQueue;if(A===null){var k=new Set;k.add(u),e.updateQueue=k}else A.add(u);break e}else{if(!(e&1)){dg(i,h,e),mf();break e}u=Error(q(426))}}else if(De&&c.mode&1){var S=hg(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),fg(S,o,c,i,e),Kh(oi(u,c));break e}}i=u=oi(u,c),Xe!==4&&(Xe=2),mo===null?mo=[i]:mo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=Xv(i,u,e);ig(i,_);break e;case 1:c=u;var y=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(vr===null||!vr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=Yv(i,c,e);ig(i,j);break e}}i=i.return}while(i!==null)}g_(n)}catch(z){e=z,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function p_(){var t=Ll.current;return Ll.current=Ml,t===null?Ml:t}function mf(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),et===null||!(cs&268435455)&&!(xc&268435455)||ir(et,ot)}function zl(t,e){var n=xe;xe|=2;var r=p_();(et!==t||ot!==e)&&(kn=null,es(t,e));do try{$E();break}catch(s){f_(t,s)}while(!0);if(Xh(),xe=n,Ll.current=r,We!==null)throw Error(q(261));return et=null,ot=0,Xe}function $E(){for(;We!==null;)m_(We)}function BE(){for(;We!==null&&!pb();)m_(We)}function m_(t){var e=v_(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?g_(t):We=e,uf.current=null}function g_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OE(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,We=null;return}}else if(n=VE(n,e,Mt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Xe===0&&(Xe=5)}function Gr(t,e,n){var r=Te,s=Kt.transition;try{Kt.transition=null,Te=1,qE(t,e,n,r)}finally{Kt.transition=s,Te=r}return null}function qE(t,e,n,r){do Qs();while(ur!==null);if(xe&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Tb(t,i),t===et&&(We=et=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,__(bl,function(){return Qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=Te;Te=1;var c=xe;xe|=4,uf.current=null,LE(t,n),u_(n,t),uE(Sd),Tl=!!kd,Sd=kd=null,t.current=n,FE(n),mb(),xe=c,Te=o,Kt.transition=i}else t.current=n;if(Ua&&(Ua=!1,ur=t,Ul=s),i=t.pendingLanes,i===0&&(vr=null),vb(n.stateNode),jt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fl)throw Fl=!1,t=Kd,Kd=null,t;return Ul&1&&t.tag!==0&&Qs(),i=t.pendingLanes,i&1?t===Qd?go++:(go=0,Qd=t):go=0,Lr(),null}function Qs(){if(ur!==null){var t=X0(Ul),e=Kt.transition,n=Te;try{if(Kt.transition=null,Te=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,Ul=0,xe&6)throw Error(q(331));var s=xe;for(xe|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(J=h;J!==null;){var p=J;switch(p.tag){case 0:case 11:case 15:po(8,p,i)}var g=p.child;if(g!==null)g.return=p,J=g;else for(;J!==null;){p=J;var m=p.sibling,T=p.return;if(a_(p),p===h){J=null;break}if(m!==null){m.return=T,J=m;break}J=T}}}var A=i.alternate;if(A!==null){var k=A.child;if(k!==null){A.child=null;do{var S=k.sibling;k.sibling=null,k=S}while(k!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:po(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,J=_;break e}J=i.return}}var y=t.current;for(J=y;J!==null;){o=J;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,J=N;else e:for(o=y;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:_c(9,c)}}catch(z){ze(c,c.return,z)}if(c===o){J=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,J=j;break e}J=c.return}}if(xe=s,Lr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(dc,t)}catch{}r=!0}return r}finally{Te=n,Kt.transition=e}}return!1}function Ng(t,e,n){e=oi(n,e),e=Xv(t,e,1),t=yr(t,e,1),e=Tt(),t!==null&&(Qo(t,1,e),jt(t,e))}function ze(t,e,n){if(t.tag===3)Ng(t,t,n);else for(;e!==null;){if(e.tag===3){Ng(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=oi(n,t),t=Yv(e,t,1),e=yr(e,t,1),t=Tt(),e!==null&&(Qo(e,1,t),jt(e,t));break}}e=e.return}}function HE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(ot&n)===n&&(Xe===4||Xe===3&&(ot&130023424)===ot&&500>qe()-hf?es(t,0):df|=n),jt(t,e)}function y_(t,e){e===0&&(t.mode&1?(e=Ca,Ca<<=1,!(Ca&130023424)&&(Ca=4194304)):e=1);var n=Tt();t=Un(t,e),t!==null&&(Qo(t,e,n),jt(t,n))}function WE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y_(t,n)}function GE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),y_(t,n)}var v_;v_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,DE(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,De&&e.flags&1048576&&bv(e,Pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sl(t,e),t=e.pendingProps;var s=ni(e,vt.current);Ks(e,n),s=sf(null,e,r,t,s,n);var i=of();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,Al(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zh(e),s.updater=vc,e.stateNode=s,s._reactInternals=e,Md(e,r,t,n),e=Ud(null,e,r,!0,i,n)):(e.tag=0,De&&i&&Wh(e),bt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QE(r),t=en(r,t),s){case 0:e=Fd(null,e,r,t,n);break e;case 1:e=gg(null,e,r,t,n);break e;case 11:e=pg(null,e,r,t,n);break e;case 14:e=mg(null,e,r,en(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Fd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),gg(t,e,r,s,n);case 3:e:{if(t_(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Sv(t,e),Dl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oi(Error(q(423)),e),e=yg(t,e,r,n,s);break e}else if(r!==s){s=oi(Error(q(424)),e),e=yg(t,e,r,n,s);break e}else for(Lt=gr(e.stateNode.containerInfo.firstChild),Ut=e,De=!0,nn=null,n=Nv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),r===s){e=zn(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return Av(e),t===null&&Dd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ad(r,s)?o=null:i!==null&&Ad(r,i)&&(e.flags|=32),e_(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&Dd(e),null;case 13:return n_(t,e,n);case 4:return ef(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=si(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),pg(t,e,r,s,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(Rl,r._currentValue),r._currentValue=o,i!==null)if(cn(i.value,o)){if(i.children===s.children&&!Pt.current){e=zn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=On(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Vd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Vd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ks(e,n),s=Xt(s),r=r(s),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,s=en(r,e.pendingProps),s=en(r.type,s),mg(t,e,r,s,n);case 15:return Jv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),sl(t,e),e.tag=1,Rt(r)?(t=!0,Al(e)):t=!1,Ks(e,n),Qv(e,r,s),Md(e,r,s,n),Ud(null,e,r,!0,t,n);case 19:return r_(t,e,n);case 22:return Zv(t,e,n)}throw Error(q(156,e.tag))};function __(t,e){return W0(t,e)}function KE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new KE(t,e,n,r)}function gf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QE(t){if(typeof t=="function")return gf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dh)return 11;if(t===Vh)return 14}return 2}function xr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function al(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return ts(n.children,s,i,e);case jh:o=8,s|=8;break;case ad:return t=Gt(12,n,e,s|2),t.elementType=ad,t.lanes=i,t;case ld:return t=Gt(13,n,e,s),t.elementType=ld,t.lanes=i,t;case cd:return t=Gt(19,n,e,s),t.elementType=cd,t.lanes=i,t;case A0:return wc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k0:o=10;break e;case S0:o=9;break e;case Dh:o=11;break e;case Vh:o=14;break e;case nr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Gt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ts(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function wc(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=A0,t.lanes=n,t.stateNode={isHidden:!1},t}function qu(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function Hu(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yf(t,e,n,r,s,i,o,c,u){return t=new XE(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zh(i),t}function YE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function x_(t){if(!t)return Sr;t=t._reactInternals;e:{if(ys(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Rt(n))return xv(t,n,e)}return e}function w_(t,e,n,r,s,i,o,c,u){return t=yf(n,r,!0,t,s,i,o,c,u),t.context=x_(null),n=t.current,r=Tt(),s=_r(n),i=On(r,s),i.callback=e??null,yr(n,i,s),t.current.lanes=s,Qo(t,s,r),jt(t,r),t}function bc(t,e,n,r){var s=e.current,i=Tt(),o=_r(s);return n=x_(n),e.context===null?e.context=n:e.pendingContext=n,e=On(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(an(t,s,o,i),tl(t,s,o)),o}function $l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vf(t,e){kg(t,e),(t=t.alternate)&&kg(t,e)}function JE(){return null}var b_=typeof reportError=="function"?reportError:function(t){console.error(t)};function _f(t){this._internalRoot=t}Ec.prototype.render=_f.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));bc(t,e,null,null)};Ec.prototype.unmount=_f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){bc(null,t,null,null)}),e[Fn]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&tv(t)}};function xf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function ZE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=$l(o);i.call(h)}}var o=w_(e,r,t,0,null,!1,!1,"",Sg);return t._reactRootContainer=o,t[Fn]=o.current,Po(t.nodeType===8?t.parentNode:t),us(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=$l(u);c.call(h)}}var u=yf(t,0,!1,null,null,!1,!1,"",Sg);return t._reactRootContainer=u,t[Fn]=u.current,Po(t.nodeType===8?t.parentNode:t),us(function(){bc(e,u,n,r)}),u}function Ic(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=$l(o);c.call(u)}}bc(e,o,t,s)}else o=ZE(n,e,t,s,r);return $l(o)}Y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(Lh(e,n|1),jt(e,qe()),!(xe&6)&&(ai=qe()+500,Lr()))}break;case 13:us(function(){var r=Un(t,1);if(r!==null){var s=Tt();an(r,t,1,s)}}),vf(t,1)}};Fh=function(t){if(t.tag===13){var e=Un(t,134217728);if(e!==null){var n=Tt();an(e,t,134217728,n)}vf(t,134217728)}};J0=function(t){if(t.tag===13){var e=_r(t),n=Un(t,e);if(n!==null){var r=Tt();an(n,t,e,r)}vf(t,e)}};Z0=function(){return Te};ev=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};_d=function(t,e,n){switch(e){case"input":if(hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=mc(r);if(!s)throw Error(q(90));P0(r),hd(r,s)}}}break;case"textarea":j0(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};U0=ff;z0=us;var eT={usingClientEntryPoint:!1,Events:[Yo,Os,mc,L0,F0,ff]},Ji={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tT={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||JE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{dc=za.inject(tT),mn=za}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eT;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xf(e))throw Error(q(200));return YE(t,e,null,n)};$t.createRoot=function(t,e){if(!xf(t))throw Error(q(299));var n=!1,r="",s=b_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yf(t,1,!1,null,null,n,!1,r,s),t[Fn]=e.current,Po(t.nodeType===8?t.parentNode:t),new _f(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=q0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return us(t)};$t.hydrate=function(t,e,n){if(!Tc(e))throw Error(q(200));return Ic(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!xf(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=b_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=w_(e,null,t,1,n??null,s,!1,i,o),t[Fn]=e.current,Po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ec(e)};$t.render=function(t,e,n){if(!Tc(e))throw Error(q(200));return Ic(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Tc(t))throw Error(q(40));return t._reactRootContainer?(us(function(){Ic(null,null,t,!1,function(){t._reactRootContainer=null,t[Fn]=null})}),!0):!1};$t.unstable_batchedUpdates=ff;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tc(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Ic(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(t){console.error(t)}}E_(),E0.exports=$t;var nT=E0.exports,T_,Ag=nT;T_=Ag.createRoot,Ag.hydrateRoot;const rT=()=>{};var Cg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},sT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},N_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,g=(i&3)<<4|c>>4;let m=(c&15)<<2|h>>6,T=h&63;u||(T=64,o||(m=64)),r.push(n[p],n[g],n[m],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||g==null)throw new iT;const m=i<<2|c>>4;if(r.push(m),h!==64){const T=c<<4&240|h>>2;if(r.push(T),g!==64){const A=h<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oT=function(t){const e=I_(t);return N_.encodeByteArray(e,!0)},Bl=function(t){return oT(t).replace(/\./g,"")},k_=function(t){try{return N_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=()=>aT().__FIREBASE_DEFAULTS__,cT=()=>{if(typeof process>"u"||typeof Cg>"u")return;const t=Cg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&k_(t[1]);return e&&JSON.parse(e)},Nc=()=>{try{return rT()||lT()||cT()||uT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S_=t=>{var e,n;return(n=(e=Nc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dT=t=>{const e=S_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A_=()=>{var t;return(t=Nc())===null||t===void 0?void 0:t.config},C_=t=>{var e;return(e=Nc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bl(JSON.stringify(n)),Bl(JSON.stringify(o)),""].join(".")}const yo={};function pT(){const t={prod:[],emulator:[]};for(const e of Object.keys(yo))yo[e]?t.emulator.push(e):t.prod.push(e);return t}function mT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Pg=!1;function R_(t,e){if(typeof window>"u"||typeof document>"u"||!bi(window.location.host)||yo[t]===e||yo[t]||Pg)return;yo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=pT().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,T){m.setAttribute("width","24"),m.setAttribute("id",T),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Pg=!0,o()},m}function p(m,T){m.setAttribute("id",T),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=mT(r),T=n("text"),A=document.getElementById(T)||document.createElement("span"),k=n("learnmore"),S=document.getElementById(k)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;c(N),p(S,k);const j=h();u(y,_),N.append(y,A,S,j),document.body.appendChild(N)}i?(A.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function yT(){var t;const e=(t=Nc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _T(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wT(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bT(){return!yT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ET(){try{return typeof indexedDB=="object"}catch{return!1}}function TT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="FirebaseError";class Xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IT,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zo.prototype.create)}}class Zo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?NT(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Xn(s,c,r)}}function NT(t,e){return t.replace(kT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kT=/\{\$([^}]+)}/g;function ST(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $n(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Rg(i)&&Rg(o)){if(!$n(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function AT(t,e){const n=new CT(t,e);return n.subscribe.bind(n)}class CT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wu),s.error===void 0&&(s.error=Wu),s.complete===void 0&&(s.complete=Wu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DT(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jT(t){return t===Kr?void 0:t}function DT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const OT={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},MT=ge.INFO,LT={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},FT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=LT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=MT,this._logHandler=FT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const UT=(t,e)=>e.some(n=>t instanceof n);let jg,Dg;function zT(){return jg||(jg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $T(){return Dg||(Dg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j_=new WeakMap,Jd=new WeakMap,D_=new WeakMap,Gu=new WeakMap,bf=new WeakMap;function BT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&j_.set(n,t)}).catch(()=>{}),bf.set(e,t),e}function qT(t){if(Jd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Jd.set(t,e)}let Zd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HT(t){Zd=t(Zd)}function WT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ku(this),e,...n);return D_.set(r,e.sort?e.sort():[e]),wr(r)}:$T().includes(t)?function(...e){return t.apply(Ku(this),e),wr(j_.get(this))}:function(...e){return wr(t.apply(Ku(this),e))}}function GT(t){return typeof t=="function"?WT(t):(t instanceof IDBTransaction&&qT(t),UT(t,zT())?new Proxy(t,Zd):t)}function wr(t){if(t instanceof IDBRequest)return BT(t);if(Gu.has(t))return Gu.get(t);const e=GT(t);return e!==t&&(Gu.set(t,e),bf.set(e,t)),e}const Ku=t=>bf.get(t);function KT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wr(o.result),u.oldVersion,u.newVersion,wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const QT=["get","getKey","getAll","getAllKeys","count"],XT=["put","add","delete","clear"],Qu=new Map;function Vg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qu.get(e))return Qu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=XT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||QT.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Qu.set(e,i),i}HT(t=>({...t,get:(e,n,r)=>Vg(e,n)||t.get(e,n,r),has:(e,n)=>!!Vg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eh="@firebase/app",Og="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new wf("@firebase/app"),ZT="@firebase/app-compat",e2="@firebase/analytics-compat",t2="@firebase/analytics",n2="@firebase/app-check-compat",r2="@firebase/app-check",s2="@firebase/auth",i2="@firebase/auth-compat",o2="@firebase/database",a2="@firebase/data-connect",l2="@firebase/database-compat",c2="@firebase/functions",u2="@firebase/functions-compat",d2="@firebase/installations",h2="@firebase/installations-compat",f2="@firebase/messaging",p2="@firebase/messaging-compat",m2="@firebase/performance",g2="@firebase/performance-compat",y2="@firebase/remote-config",v2="@firebase/remote-config-compat",_2="@firebase/storage",x2="@firebase/storage-compat",w2="@firebase/firestore",b2="@firebase/ai",E2="@firebase/firestore-compat",T2="firebase",I2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="[DEFAULT]",N2={[eh]:"fire-core",[ZT]:"fire-core-compat",[t2]:"fire-analytics",[e2]:"fire-analytics-compat",[r2]:"fire-app-check",[n2]:"fire-app-check-compat",[s2]:"fire-auth",[i2]:"fire-auth-compat",[o2]:"fire-rtdb",[a2]:"fire-data-connect",[l2]:"fire-rtdb-compat",[c2]:"fire-fn",[u2]:"fire-fn-compat",[d2]:"fire-iid",[h2]:"fire-iid-compat",[f2]:"fire-fcm",[p2]:"fire-fcm-compat",[m2]:"fire-perf",[g2]:"fire-perf-compat",[y2]:"fire-rc",[v2]:"fire-rc-compat",[_2]:"fire-gcs",[x2]:"fire-gcs-compat",[w2]:"fire-fst",[E2]:"fire-fst-compat",[b2]:"fire-vertex","fire-js":"fire-js",[T2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Map,k2=new Map,nh=new Map;function Mg(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function li(t){const e=t.name;if(nh.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,t);for(const n of ql.values())Mg(n,t);for(const n of k2.values())Mg(n,t);return!0}function Ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Zo("app","Firebase",S2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=I2;function V_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:th,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw br.create("bad-app-name",{appName:String(s)});if(n||(n=A_()),!n)throw br.create("no-options");const i=ql.get(s);if(i){if($n(n,i.options)&&$n(r,i.config))return i;throw br.create("duplicate-app",{appName:s})}const o=new VT(s);for(const u of nh.values())o.addComponent(u);const c=new A2(n,r,o);return ql.set(s,c),c}function O_(t=th){const e=ql.get(t);if(!e&&t===th&&A_())return V_();if(!e)throw br.create("no-app",{appName:t});return e}function Er(t,e,n){var r;let s=(r=N2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(c.join(" "));return}li(new ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="firebase-heartbeat-database",P2=1,Uo="firebase-heartbeat-store";let Xu=null;function M_(){return Xu||(Xu=KT(C2,P2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw br.create("idb-open",{originalErrorMessage:t.message})})),Xu}async function R2(t){try{const n=(await M_()).transaction(Uo),r=await n.objectStore(Uo).get(L_(t));return await n.done,r}catch(e){if(e instanceof Xn)Bn.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function Lg(t,e){try{const r=(await M_()).transaction(Uo,"readwrite");await r.objectStore(Uo).put(e,L_(t)),await r.done}catch(n){if(n instanceof Xn)Bn.warn(n.message);else{const r=br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(r.message)}}}function L_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=1024,D2=30;class V2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>D2){const o=L2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fg(),{heartbeatsToSend:r,unsentEntries:s}=O2(this._heartbeatsCache.heartbeats),i=Bl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Bn.warn(n),""}}}function Fg(){return new Date().toISOString().substring(0,10)}function O2(t,e=j2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ug(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ug(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ET()?TT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ug(t){return Bl(JSON.stringify({version:2,heartbeats:t})).length}function L2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){li(new ds("platform-logger",e=>new YT(e),"PRIVATE")),li(new ds("heartbeat",e=>new V2(e),"PRIVATE")),Er(eh,Og,t),Er(eh,Og,"esm2017"),Er("fire-js","")}F2("");function Tf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function F_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U2=F_,U_=new Zo("auth","Firebase",F_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new wf("@firebase/auth");function z2(t,...e){Hl.logLevel<=ge.WARN&&Hl.warn(`Auth (${Ei}): ${t}`,...e)}function ll(t,...e){Hl.logLevel<=ge.ERROR&&Hl.error(`Auth (${Ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,...e){throw Nf(t,...e)}function ln(t,...e){return Nf(t,...e)}function If(t,e,n){const r=Object.assign(Object.assign({},U2()),{[e]:n});return new Zo("auth","Firebase",r).create(e,{appName:t.name})}function ns(t){return If(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bn(t,"argument-error"),If(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return U_.create(t,...e)}function oe(t,e,...n){if(!t)throw Nf(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ll(e),new Error(e)}function qn(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B2(){return zg()==="http:"||zg()==="https:"}function zg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B2()||_T()||"connection"in navigator)?navigator.onLine:!0}function H2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=gT()||xT()}get(){return q2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K2=new ta(3e4,6e4);function Sf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ti(t,e,n,r,s={}){return $_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=ea(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return vT()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&bi(t.emulatorConfig.host)&&(h.credentials="include"),z_.fetch()(await B_(t,t.config.apiHost,n,c),h)})}async function $_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},W2),e);try{const s=new X2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $a(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw $a(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw $a(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw $a(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw If(t,p,h);bn(t,p)}}catch(s){if(s instanceof Xn)throw s;bn(t,"network-request-failed",{message:String(s)})}}async function Q2(t,e,n,r,s={}){const i=await Ti(t,e,n,r,s);return"mfaPendingCredential"in i&&bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function B_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?kf(t.config,s):`${t.config.apiScheme}://${s}`;return G2.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class X2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ln(this.auth,"network-request-failed")),K2.get())})}}function $a(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ln(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e){return Ti(t,"POST","/v1/accounts:delete",e)}async function Wl(t,e){return Ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J2(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=Af(r);oe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:vo(Yu(s.auth_time)),issuedAtTime:vo(Yu(s.iat)),expirationTime:vo(Yu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Yu(t){return Number(t)*1e3}function Af(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ll("JWT malformed, contained fewer than 3 sections"),null;try{const s=k_(n);return s?JSON.parse(s):(ll("Failed to decode base64 JWT payload"),null)}catch(s){return ll("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $g(t){const e=Af(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xn&&Z2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vo(this.lastLoginAt),this.creationTime=vo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await zo(t,Wl(n,{idToken:r}));oe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?q_(i.providerUserInfo):[],c=nI(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new sh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function tI(t){const e=tt(t);await Gl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function q_(t){return t.map(e=>{var{providerId:n}=e,r=Tf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(t,e){const n=await $_(t,{},async()=>{const r=ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await B_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&bi(t.emulatorConfig.host)&&(u.credentials="include"),z_.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sI(t,e){return Ti(t,"POST","/v2/accounts:revokeToken",Sf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$g(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=$g(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Xs;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(oe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Tf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await zo(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J2(this,e)}reload(){return tI(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await zo(this,Y2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,h,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(h=n.createdAt)!==null&&h!==void 0?h:void 0,y=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:N,emailVerified:j,isAnonymous:z,providerData:$,stsTokenManager:b}=n;oe(N&&b,e,"internal-error");const x=Xs.fromJSON(this.name,b);oe(typeof N=="string",e,"internal-error"),tr(g,e.name),tr(m,e.name),oe(typeof j=="boolean",e,"internal-error"),oe(typeof z=="boolean",e,"internal-error"),tr(T,e.name),tr(A,e.name),tr(k,e.name),tr(S,e.name),tr(_,e.name),tr(y,e.name);const w=new sn({uid:N,auth:e,email:m,emailVerified:j,displayName:g,isAnonymous:z,photoURL:A,phoneNumber:T,tenantId:k,stsTokenManager:x,createdAt:_,lastLoginAt:y});return $&&Array.isArray($)&&(w.providerData=$.map(E=>Object.assign({},E))),S&&(w._redirectEventId=S),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Xs;s.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];oe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?q_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Xs;c.updateFromIdToken(r);const u=new sn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new sh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map;function Dn(t){qn(t instanceof Function,"Expected a class definition");let e=Bg.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H_.type="NONE";const qg=H_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=cl(this.userKey,s.apiKey,i),this.fullPersistenceKey=cl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wl(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ys(Dn(qg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Dn(qg);const o=cl(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(o);if(p){let g;if(typeof p=="string"){const m=await Wl(e,{idToken:p}).catch(()=>{});if(!m)break;g=await sn._fromGetAccountInfoResponse(e,m,p)}else g=sn._fromJSON(e,p);h!==i&&(c=g),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ys(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ys(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y_(e))return"Blackberry";if(J_(e))return"Webos";if(G_(e))return"Safari";if((e.includes("chrome/")||K_(e))&&!e.includes("edge/"))return"Chrome";if(X_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function W_(t=_t()){return/firefox\//i.test(t)}function G_(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K_(t=_t()){return/crios\//i.test(t)}function Q_(t=_t()){return/iemobile/i.test(t)}function X_(t=_t()){return/android/i.test(t)}function Y_(t=_t()){return/blackberry/i.test(t)}function J_(t=_t()){return/webos/i.test(t)}function Cf(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iI(t=_t()){var e;return Cf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oI(){return wT()&&document.documentMode===10}function Z_(t=_t()){return Cf(t)||X_(t)||J_(t)||Y_(t)||/windows phone/i.test(t)||Q_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t,e=[]){let n;switch(t){case"Browser":n=Hg(_t());break;case"Worker":n=`${Hg(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ei}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(t,e={}){return Ti(t,"GET","/v2/passwordPolicy",Sf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=6;class uI{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wg(this),this.idTokenSubscription=new Wg(this),this.beforeStateQueue=new aI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wl(this,{idToken:e}),r=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(ns(this));const n=e?tt(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lI(this),n=new uI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ex(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&z2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kc(t){return tt(t)}class Wg{constructor(e){this.auth=e,this.observer=null,this.addObserver=AT(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hI(t){Pf=t}function fI(t){return Pf.loadJS(t)}function pI(){return Pf.gapiScript}function mI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e){const n=Ef(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($n(i,e??{}))return s;bn(s,"already-initialized")}return n.initialize({options:e})}function yI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vI(t,e,n){const r=kc(t);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=tx(e),{host:o,port:c}=_I(e),u=c===null?"":`:${c}`,h={url:`${i}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe($n(h,r.config.emulator)&&$n(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,bi(o)?(P_(`${i}//${o}${u}`),R_("Auth",!0)):xI()}function tx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _I(t){const e=tx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Gg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Gg(o)}}}function Gg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return Q2(t,"POST","/v1/accounts:signInWithIdp",Sf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="http://localhost";class hs extends nx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Tf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:wI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ea(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Rf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends na{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return An.credential(n,r)}catch{return null}}}An.GOOGLE_SIGN_IN_METHOD="google.com";An.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends na{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends na{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sn._fromIdTokenResponse(e,r,s),o=Kg(r);return new ci({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kg(r);return new ci({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Xn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kl(e,n,r,s)}}function rx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kl._fromErrorAndOperation(t,i,e,r):i})}async function bI(t,e,n=!1){const r=await zo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ci._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e,n=!1){const{auth:r}=t;if(rn(r.app))return Promise.reject(ns(r));const s="reauthenticate";try{const i=await zo(t,rx(r,s,e,t),n);oe(i.idToken,r,"internal-error");const o=Af(i.idToken);oe(o,r,"internal-error");const{sub:c}=o;return oe(t.uid===c,r,"user-mismatch"),ci._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(t,e,n=!1){if(rn(t.app))return Promise.reject(ns(t));const r="signIn",s=await rx(t,r,e),i=await ci._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function II(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function NI(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function kI(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function SI(t){return tt(t).signOut()}const Ql="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ql,"1"),this.storage.removeItem(Ql),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=1e3,CI=10;class ix extends sx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CI):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ix.type="LOCAL";const PI=ix;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends sx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ox.type="SESSION";const ax=ox;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Sc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),u=await RI(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const h=jf("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function DI(t){yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function VI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MI(){return lx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="firebaseLocalStorageDb",LI=1,Xl="firebaseLocalStorage",ux="fbase_key";class ra{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ac(t,e){return t.transaction([Xl],e?"readwrite":"readonly").objectStore(Xl)}function FI(){const t=indexedDB.deleteDatabase(cx);return new ra(t).toPromise()}function ih(){const t=indexedDB.open(cx,LI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xl,{keyPath:ux})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xl)?e(r):(r.close(),await FI(),e(await ih()))})})}async function Qg(t,e,n){const r=Ac(t,!0).put({[ux]:e,value:n});return new ra(r).toPromise()}async function UI(t,e){const n=Ac(t,!1).get(e),r=await new ra(n).toPromise();return r===void 0?null:r.value}function Xg(t,e){const n=Ac(t,!0).delete(e);return new ra(n).toPromise()}const zI=800,$I=3;class dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ih(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$I)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sc._getInstance(MI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VI(),!this.activeServiceWorker)return;this.sender=new jI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ih();return await Qg(e,Ql,"1"),await Xg(e,Ql),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ac(s,!1).getAll();return new ra(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dx.type="LOCAL";const BI=dx;new ta(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){return e?Dn(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends nx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qI(t){return TI(t.auth,new Df(t),t.bypassAuthState)}function HI(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),EI(n,new Df(t),t.bypassAuthState)}async function WI(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),bI(n,new Df(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qI;case"linkViaPopup":case"linkViaRedirect":return WI;case"reauthViaPopup":case"reauthViaRedirect":return HI;default:bn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new ta(2e3,1e4);async function KI(t,e,n){if(rn(t.app))return Promise.reject(ln(t,"operation-not-supported-in-this-environment"));const r=kc(t);$2(t,e,Rf);const s=hx(r,n);return new Jr(r,"signInViaPopup",e,s).executeNotNull()}class Jr extends fx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GI.get())};e()}}Jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="pendingRedirect",ul=new Map;class XI extends fx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ul.get(this.auth._key());if(!e){try{const r=await YI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ul.set(this.auth._key(),e)}return this.bypassAuthState||ul.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YI(t,e){const n=eN(e),r=ZI(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function JI(t,e){ul.set(t._key(),e)}function ZI(t){return Dn(t._redirectPersistence)}function eN(t){return cl(QI,t.config.apiKey,t.name)}async function tN(t,e,n=!1){if(rn(t.app))return Promise.reject(ns(t));const r=kc(t),s=hx(r,e),o=await new XI(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=10*60*1e3;class rN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!px(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yg(e))}saveEventToCache(e){this.cachedEventUids.add(Yg(e)),this.lastProcessedEventTime=Date.now()}}function Yg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function px({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return px(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t,e={}){return Ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aN=/^https?/;async function lN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iN(t);for(const n of e)try{if(cN(n))return}catch{}bn(t,"unauthorized-domain")}function cN(t){const e=rh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aN.test(n))return!1;if(oN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new ta(3e4,6e4);function Jg(){const t=yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dN(t){return new Promise((e,n)=>{var r,s,i;function o(){Jg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jg(),n(ln(t,"network-request-failed"))},timeout:uN.get()})}if(!((s=(r=yn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=yn().gapi)===null||i===void 0)&&i.load)o();else{const c=mI("iframefcb");return yn()[c]=()=>{gapi.load?o():n(ln(t,"network-request-failed"))},fI(`${pI()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw dl=null,e})}let dl=null;function hN(t){return dl=dl||dN(t),dl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new ta(5e3,15e3),pN="__/auth/iframe",mN="emulator/auth/iframe",gN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vN(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kf(e,mN):`https://${t.config.authDomain}/${pN}`,r={apiKey:e.apiKey,appName:t.name,v:Ei},s=yN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ea(r).slice(1)}`}async function _N(t){const e=await hN(t),n=yn().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:vN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ln(t,"network-request-failed"),c=yn().setTimeout(()=>{i(o)},fN.get());function u(){yn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wN=500,bN=600,EN="_blank",TN="http://localhost";class Zg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IN(t,e,n,r=wN,s=bN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},xN),{width:r.toString(),height:s.toString(),top:i,left:o}),h=_t().toLowerCase();n&&(c=K_(h)?EN:n),W_(h)&&(e=e||TN,u.scrollbars="yes");const p=Object.entries(u).reduce((m,[T,A])=>`${m}${T}=${A},`,"");if(iI(h)&&c!=="_self")return NN(e||"",c),new Zg(null);const g=window.open(e||"",c,p);oe(g,t,"popup-blocked");try{g.focus()}catch{}return new Zg(g)}function NN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="__/auth/handler",SN="emulator/auth/handler",AN=encodeURIComponent("fac");async function ey(t,e,n,r,s,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ei,eventId:s};if(e instanceof Rf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ST(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof na){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${AN}=${encodeURIComponent(u)}`:"";return`${CN(t)}?${ea(c).slice(1)}${h}`}function CN({config:t}){return t.emulator?kf(t,SN):`https://${t.authDomain}/${kN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="webStorageSupport";class PN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ax,this._completeRedirectFn=tN,this._overrideRedirectResult=JI}async _openPopup(e,n,r,s){var i;qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ey(e,n,r,rh(),s);return IN(e,o,jf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ey(e,n,r,rh(),s);return DI(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _N(e),r=new rN(e);return n.register("authEvent",s=>(oe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ju,{type:Ju},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ju];o!==void 0&&n(!!o),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z_()||G_()||Cf()}}const RN=PN;var ty="@firebase/auth",ny="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VN(t){li(new ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ex(t)},h=new dI(r,s,i,u);return yI(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),li(new ds("auth-internal",e=>{const n=kc(e.getProvider("auth").getImmediate());return(r=>new jN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(ty,ny,DN(t)),Er(ty,ny,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=5*60,MN=C_("authIdTokenMaxAge")||ON;let ry=null;const LN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MN)return;const s=n==null?void 0:n.token;ry!==s&&(ry=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function FN(t=O_()){const e=Ef(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gI(t,{popupRedirectResolver:RN,persistence:[BI,PI,ax]}),r=C_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=LN(i.toString());NI(n,o,()=>o(n.currentUser)),II(n,c=>o(c))}}const s=S_("auth");return s&&vI(n,`http://${s}`),n}function UN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ln("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",UN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VN("Browser");var zN="firebase",$N="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(zN,$N,"app");var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,mx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,x){function w(){}w.prototype=x.prototype,b.D=x.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,C,P){for(var I=Array(arguments.length-2),H=2;H<arguments.length;H++)I[H-2]=arguments[H];return x.prototype[C].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,x,w){w||(w=0);var E=Array(16);if(typeof x=="string")for(var C=0;16>C;++C)E[C]=x.charCodeAt(w++)|x.charCodeAt(w++)<<8|x.charCodeAt(w++)<<16|x.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=x[w++]|x[w++]<<8|x[w++]<<16|x[w++]<<24;x=b.g[0],w=b.g[1],C=b.g[2];var P=b.g[3],I=x+(P^w&(C^P))+E[0]+3614090360&4294967295;x=w+(I<<7&4294967295|I>>>25),I=P+(C^x&(w^C))+E[1]+3905402710&4294967295,P=x+(I<<12&4294967295|I>>>20),I=C+(w^P&(x^w))+E[2]+606105819&4294967295,C=P+(I<<17&4294967295|I>>>15),I=w+(x^C&(P^x))+E[3]+3250441966&4294967295,w=C+(I<<22&4294967295|I>>>10),I=x+(P^w&(C^P))+E[4]+4118548399&4294967295,x=w+(I<<7&4294967295|I>>>25),I=P+(C^x&(w^C))+E[5]+1200080426&4294967295,P=x+(I<<12&4294967295|I>>>20),I=C+(w^P&(x^w))+E[6]+2821735955&4294967295,C=P+(I<<17&4294967295|I>>>15),I=w+(x^C&(P^x))+E[7]+4249261313&4294967295,w=C+(I<<22&4294967295|I>>>10),I=x+(P^w&(C^P))+E[8]+1770035416&4294967295,x=w+(I<<7&4294967295|I>>>25),I=P+(C^x&(w^C))+E[9]+2336552879&4294967295,P=x+(I<<12&4294967295|I>>>20),I=C+(w^P&(x^w))+E[10]+4294925233&4294967295,C=P+(I<<17&4294967295|I>>>15),I=w+(x^C&(P^x))+E[11]+2304563134&4294967295,w=C+(I<<22&4294967295|I>>>10),I=x+(P^w&(C^P))+E[12]+1804603682&4294967295,x=w+(I<<7&4294967295|I>>>25),I=P+(C^x&(w^C))+E[13]+4254626195&4294967295,P=x+(I<<12&4294967295|I>>>20),I=C+(w^P&(x^w))+E[14]+2792965006&4294967295,C=P+(I<<17&4294967295|I>>>15),I=w+(x^C&(P^x))+E[15]+1236535329&4294967295,w=C+(I<<22&4294967295|I>>>10),I=x+(C^P&(w^C))+E[1]+4129170786&4294967295,x=w+(I<<5&4294967295|I>>>27),I=P+(w^C&(x^w))+E[6]+3225465664&4294967295,P=x+(I<<9&4294967295|I>>>23),I=C+(x^w&(P^x))+E[11]+643717713&4294967295,C=P+(I<<14&4294967295|I>>>18),I=w+(P^x&(C^P))+E[0]+3921069994&4294967295,w=C+(I<<20&4294967295|I>>>12),I=x+(C^P&(w^C))+E[5]+3593408605&4294967295,x=w+(I<<5&4294967295|I>>>27),I=P+(w^C&(x^w))+E[10]+38016083&4294967295,P=x+(I<<9&4294967295|I>>>23),I=C+(x^w&(P^x))+E[15]+3634488961&4294967295,C=P+(I<<14&4294967295|I>>>18),I=w+(P^x&(C^P))+E[4]+3889429448&4294967295,w=C+(I<<20&4294967295|I>>>12),I=x+(C^P&(w^C))+E[9]+568446438&4294967295,x=w+(I<<5&4294967295|I>>>27),I=P+(w^C&(x^w))+E[14]+3275163606&4294967295,P=x+(I<<9&4294967295|I>>>23),I=C+(x^w&(P^x))+E[3]+4107603335&4294967295,C=P+(I<<14&4294967295|I>>>18),I=w+(P^x&(C^P))+E[8]+1163531501&4294967295,w=C+(I<<20&4294967295|I>>>12),I=x+(C^P&(w^C))+E[13]+2850285829&4294967295,x=w+(I<<5&4294967295|I>>>27),I=P+(w^C&(x^w))+E[2]+4243563512&4294967295,P=x+(I<<9&4294967295|I>>>23),I=C+(x^w&(P^x))+E[7]+1735328473&4294967295,C=P+(I<<14&4294967295|I>>>18),I=w+(P^x&(C^P))+E[12]+2368359562&4294967295,w=C+(I<<20&4294967295|I>>>12),I=x+(w^C^P)+E[5]+4294588738&4294967295,x=w+(I<<4&4294967295|I>>>28),I=P+(x^w^C)+E[8]+2272392833&4294967295,P=x+(I<<11&4294967295|I>>>21),I=C+(P^x^w)+E[11]+1839030562&4294967295,C=P+(I<<16&4294967295|I>>>16),I=w+(C^P^x)+E[14]+4259657740&4294967295,w=C+(I<<23&4294967295|I>>>9),I=x+(w^C^P)+E[1]+2763975236&4294967295,x=w+(I<<4&4294967295|I>>>28),I=P+(x^w^C)+E[4]+1272893353&4294967295,P=x+(I<<11&4294967295|I>>>21),I=C+(P^x^w)+E[7]+4139469664&4294967295,C=P+(I<<16&4294967295|I>>>16),I=w+(C^P^x)+E[10]+3200236656&4294967295,w=C+(I<<23&4294967295|I>>>9),I=x+(w^C^P)+E[13]+681279174&4294967295,x=w+(I<<4&4294967295|I>>>28),I=P+(x^w^C)+E[0]+3936430074&4294967295,P=x+(I<<11&4294967295|I>>>21),I=C+(P^x^w)+E[3]+3572445317&4294967295,C=P+(I<<16&4294967295|I>>>16),I=w+(C^P^x)+E[6]+76029189&4294967295,w=C+(I<<23&4294967295|I>>>9),I=x+(w^C^P)+E[9]+3654602809&4294967295,x=w+(I<<4&4294967295|I>>>28),I=P+(x^w^C)+E[12]+3873151461&4294967295,P=x+(I<<11&4294967295|I>>>21),I=C+(P^x^w)+E[15]+530742520&4294967295,C=P+(I<<16&4294967295|I>>>16),I=w+(C^P^x)+E[2]+3299628645&4294967295,w=C+(I<<23&4294967295|I>>>9),I=x+(C^(w|~P))+E[0]+4096336452&4294967295,x=w+(I<<6&4294967295|I>>>26),I=P+(w^(x|~C))+E[7]+1126891415&4294967295,P=x+(I<<10&4294967295|I>>>22),I=C+(x^(P|~w))+E[14]+2878612391&4294967295,C=P+(I<<15&4294967295|I>>>17),I=w+(P^(C|~x))+E[5]+4237533241&4294967295,w=C+(I<<21&4294967295|I>>>11),I=x+(C^(w|~P))+E[12]+1700485571&4294967295,x=w+(I<<6&4294967295|I>>>26),I=P+(w^(x|~C))+E[3]+2399980690&4294967295,P=x+(I<<10&4294967295|I>>>22),I=C+(x^(P|~w))+E[10]+4293915773&4294967295,C=P+(I<<15&4294967295|I>>>17),I=w+(P^(C|~x))+E[1]+2240044497&4294967295,w=C+(I<<21&4294967295|I>>>11),I=x+(C^(w|~P))+E[8]+1873313359&4294967295,x=w+(I<<6&4294967295|I>>>26),I=P+(w^(x|~C))+E[15]+4264355552&4294967295,P=x+(I<<10&4294967295|I>>>22),I=C+(x^(P|~w))+E[6]+2734768916&4294967295,C=P+(I<<15&4294967295|I>>>17),I=w+(P^(C|~x))+E[13]+1309151649&4294967295,w=C+(I<<21&4294967295|I>>>11),I=x+(C^(w|~P))+E[4]+4149444226&4294967295,x=w+(I<<6&4294967295|I>>>26),I=P+(w^(x|~C))+E[11]+3174756917&4294967295,P=x+(I<<10&4294967295|I>>>22),I=C+(x^(P|~w))+E[2]+718787259&4294967295,C=P+(I<<15&4294967295|I>>>17),I=w+(P^(C|~x))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+x&4294967295,b.g[1]=b.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.u=function(b,x){x===void 0&&(x=b.length);for(var w=x-this.blockSize,E=this.B,C=this.h,P=0;P<x;){if(C==0)for(;P<=w;)s(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<x;)if(E[C++]=b.charCodeAt(P++),C==this.blockSize){s(this,E),C=0;break}}else for(;P<x;)if(E[C++]=b[P++],C==this.blockSize){s(this,E),C=0;break}}this.h=C,this.o+=x},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var x=1;x<b.length-8;++x)b[x]=0;var w=8*this.o;for(x=b.length-8;x<b.length;++x)b[x]=w&255,w/=256;for(this.u(b),b=Array(16),x=w=0;4>x;++x)for(var E=0;32>E;E+=8)b[w++]=this.g[x]>>>E&255;return b};function i(b,x){var w=c;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=x(b)}function o(b,x){this.h=x;for(var w=[],E=!0,C=b.length-1;0<=C;C--){var P=b[C]|0;E&&P==x||(w[C]=P,E=!1)}this.g=w}var c={};function u(b){return-128<=b&&128>b?i(b,function(x){return new o([x|0],0>x?-1:0)}):new o([b|0],0>b?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return S(h(-b));for(var x=[],w=1,E=0;b>=w;E++)x[E]=b/w|0,w*=4294967296;return new o(x,0)}function p(b,x){if(b.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b.charAt(0)=="-")return S(p(b.substring(1),x));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(x,8)),E=g,C=0;C<b.length;C+=8){var P=Math.min(8,b.length-C),I=parseInt(b.substring(C,C+P),x);8>P?(P=h(Math.pow(x,P)),E=E.j(P).add(h(I))):(E=E.j(w),E=E.add(h(I)))}return E}var g=u(0),m=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-S(this).m();for(var b=0,x=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*x,x*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(A(this))return"0";if(k(this))return"-"+S(this).toString(b);for(var x=h(Math.pow(b,6)),w=this,E="";;){var C=j(w,x).g;w=_(w,C.j(x));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=C,A(w))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function A(b){if(b.h!=0)return!1;for(var x=0;x<b.g.length;x++)if(b.g[x]!=0)return!1;return!0}function k(b){return b.h==-1}t.l=function(b){return b=_(this,b),k(b)?-1:A(b)?0:1};function S(b){for(var x=b.g.length,w=[],E=0;E<x;E++)w[E]=~b.g[E];return new o(w,~b.h).add(m)}t.abs=function(){return k(this)?S(this):this},t.add=function(b){for(var x=Math.max(this.g.length,b.g.length),w=[],E=0,C=0;C<=x;C++){var P=E+(this.i(C)&65535)+(b.i(C)&65535),I=(P>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);E=I>>>16,P&=65535,I&=65535,w[C]=I<<16|P}return new o(w,w[w.length-1]&-2147483648?-1:0)};function _(b,x){return b.add(S(x))}t.j=function(b){if(A(this)||A(b))return g;if(k(this))return k(b)?S(this).j(S(b)):S(S(this).j(b));if(k(b))return S(this.j(S(b)));if(0>this.l(T)&&0>b.l(T))return h(this.m()*b.m());for(var x=this.g.length+b.g.length,w=[],E=0;E<2*x;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<b.g.length;C++){var P=this.i(E)>>>16,I=this.i(E)&65535,H=b.i(C)>>>16,D=b.i(C)&65535;w[2*E+2*C]+=I*D,y(w,2*E+2*C),w[2*E+2*C+1]+=P*D,y(w,2*E+2*C+1),w[2*E+2*C+1]+=I*H,y(w,2*E+2*C+1),w[2*E+2*C+2]+=P*H,y(w,2*E+2*C+2)}for(E=0;E<x;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=x;E<2*x;E++)w[E]=0;return new o(w,0)};function y(b,x){for(;(b[x]&65535)!=b[x];)b[x+1]+=b[x]>>>16,b[x]&=65535,x++}function N(b,x){this.g=b,this.h=x}function j(b,x){if(A(x))throw Error("division by zero");if(A(b))return new N(g,g);if(k(b))return x=j(S(b),x),new N(S(x.g),S(x.h));if(k(x))return x=j(b,S(x)),new N(S(x.g),x.h);if(30<b.g.length){if(k(b)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=x;0>=E.l(b);)w=z(w),E=z(E);var C=$(w,1),P=$(E,1);for(E=$(E,2),w=$(w,2);!A(E);){var I=P.add(E);0>=I.l(b)&&(C=C.add(w),P=I),E=$(E,1),w=$(w,1)}return x=_(b,C.j(x)),new N(C,x)}for(C=g;0<=b.l(x);){for(w=Math.max(1,Math.floor(b.m()/x.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),P=h(w),I=P.j(x);k(I)||0<I.l(b);)w-=E,P=h(w),I=P.j(x);A(P)&&(P=m),C=C.add(P),b=_(b,I)}return new N(C,b)}t.A=function(b){return j(this,b).h},t.and=function(b){for(var x=Math.max(this.g.length,b.g.length),w=[],E=0;E<x;E++)w[E]=this.i(E)&b.i(E);return new o(w,this.h&b.h)},t.or=function(b){for(var x=Math.max(this.g.length,b.g.length),w=[],E=0;E<x;E++)w[E]=this.i(E)|b.i(E);return new o(w,this.h|b.h)},t.xor=function(b){for(var x=Math.max(this.g.length,b.g.length),w=[],E=0;E<x;E++)w[E]=this.i(E)^b.i(E);return new o(w,this.h^b.h)};function z(b){for(var x=b.g.length+1,w=[],E=0;E<x;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new o(w,b.h)}function $(b,x){var w=x>>5;x%=32;for(var E=b.g.length-w,C=[],P=0;P<E;P++)C[P]=0<x?b.i(P+w)>>>x|b.i(P+w+1)<<32-x:b.i(P+w);return new o(C,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Tr=o}).apply(typeof sy<"u"?sy:typeof self<"u"?self:typeof window<"u"?window:{});var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gx,ro,yx,hl,oh,vx,_x,xx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ba=="object"&&Ba];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var R=a[v];if(!(R in f))break e;f=f[R]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,v=!1,R={next:function(){if(!v&&f<a.length){var V=f++;return{value:d(V,a[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function g(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),a.apply(d,R)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,m.apply(null,arguments)}function T(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function A(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,R,V){for(var G=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)G[Ne-2]=arguments[Ne];return d.prototype[R].apply(v,G)}}function k(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function S(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const R=a.length||0,V=v.length||0;a.length=R+V;for(let G=0;G<V;G++)a[R+G]=v[G]}else a.push(v)}}class _{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function y(a){return/^[\s\xa0]*$/.test(a)}function N(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var z=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function $(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function b(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function x(a){const d={};for(const f in a)d[f]=a[f];return d}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)a[f]=v[f];for(let V=0;V<w.length;V++)f=w[V],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function C(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function P(a){c.setTimeout(()=>{throw a},0)}function I(){var a=Q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class H{constructor(){this.h=this.g=null}add(d,f){const v=D.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var D=new _(()=>new W,a=>a.reset());class W{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,O=!1,Q=new H,U=()=>{const a=c.Promise.resolve(void 0);Z=()=>{a.then(ee)}};var ee=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){P(f)}var d=D;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}O=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function le(a,d){if(fe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(z){e:{try{j(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ke[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&le.aa.h.call(this)}}A(le,fe);var ke={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),ie=0;function Ee(a,d,f,v,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=R,this.key=++ie,this.da=this.fa=!1}function ve(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function B(a){this.src=a,this.g={},this.h=0}B.prototype.add=function(a,d,f,v,R){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var G=Ie(a,d,v,R);return-1<G?(d=a[G],f||(d.fa=!1)):(d=new Ee(d,this.src,V,!!v,R),d.fa=f,a.push(d)),d};function ne(a,d){var f=d.type;if(f in a.g){var v=a.g[f],R=Array.prototype.indexOf.call(v,d,void 0),V;(V=0<=R)&&Array.prototype.splice.call(v,R,1),V&&(ve(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Ie(a,d,f,v){for(var R=0;R<a.length;++R){var V=a[R];if(!V.da&&V.listener==d&&V.capture==!!f&&V.ha==v)return R}return-1}var de="closure_lm_"+(1e6*Math.random()|0),me={};function Tn(a,d,f,v,R){if(Array.isArray(d)){for(var V=0;V<d.length;V++)Tn(a,d[V],f,v,R);return null}return f=Ip(f),a&&a[K]?a.K(d,f,h(v)?!!v.capture:!1,R):Vt(a,d,f,!1,v,R)}function Vt(a,d,f,v,R,V){if(!d)throw Error("Invalid event type");var G=h(R)?!!R.capture:!!R,Ne=nu(a);if(Ne||(a[de]=Ne=new B(a)),f=Ne.add(d,f,v,G,V),f.proxy)return f;if(v=Pi(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Fe||(R=G),R===void 0&&(R=!1),a.addEventListener(d.toString(),v,R);else if(a.attachEvent)a.attachEvent(Tp(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Pi(){function a(f){return d.call(a.src,a.listener,f)}const d=s1;return a}function Ep(a,d,f,v,R){if(Array.isArray(d))for(var V=0;V<d.length;V++)Ep(a,d[V],f,v,R);else v=h(v)?!!v.capture:!!v,f=Ip(f),a&&a[K]?(a=a.i,d=String(d).toString(),d in a.g&&(V=a.g[d],f=Ie(V,f,v,R),-1<f&&(ve(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[d],a.h--)))):a&&(a=nu(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Ie(d,f,v,R)),(f=-1<a?d[a]:null)&&tu(f))}function tu(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[K])ne(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(Tp(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=nu(d))?(ne(f,a),f.h==0&&(f.src=null,d[de]=null)):ve(a)}}}function Tp(a){return a in me?me[a]:me[a]="on"+a}function s1(a,d){if(a.da)a=!0;else{d=new le(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&tu(a),a=f.call(v,d)}return a}function nu(a){return a=a[de],a instanceof B?a:null}var ru="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ip(a){return typeof a=="function"?a:(a[ru]||(a[ru]=function(d){return a.handleEvent(d)}),a[ru])}function ct(){se.call(this),this.i=new B(this),this.M=this,this.F=null}A(ct,se),ct.prototype[K]=!0,ct.prototype.removeEventListener=function(a,d,f,v){Ep(this,a,d,f,v)};function xt(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new fe(d,a);else if(d instanceof fe)d.target=d.target||a;else{var R=d;d=new fe(v,a),E(d,R)}if(R=!0,f)for(var V=f.length-1;0<=V;V--){var G=d.g=f[V];R=ca(G,v,!0,d)&&R}if(G=d.g=a,R=ca(G,v,!0,d)&&R,R=ca(G,v,!1,d)&&R,f)for(V=0;V<f.length;V++)G=d.g=f[V],R=ca(G,v,!1,d)&&R}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)ve(f[v]);delete a.g[d],a.h--}}this.F=null},ct.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},ct.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function ca(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,V=0;V<d.length;++V){var G=d[V];if(G&&!G.da&&G.capture==f){var Ne=G.listener,nt=G.ha||G.src;G.fa&&ne(a.i,G),R=Ne.call(nt,v)!==!1&&R}}return R&&!v.defaultPrevented}function Np(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function kp(a){a.g=Np(()=>{a.g=null,a.i&&(a.i=!1,kp(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class i1 extends se{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:kp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(a){se.call(this),this.h=a,this.g={}}A(Ri,se);var Sp=[];function Ap(a){$(a.g,function(d,f){this.g.hasOwnProperty(f)&&tu(d)},a),a.g={}}Ri.prototype.N=function(){Ri.aa.N.call(this),Ap(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var su=c.JSON.stringify,o1=c.JSON.parse,a1=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function iu(){}iu.prototype.h=null;function Cp(a){return a.h||(a.h=a.i())}function Pp(){}var ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ou(){fe.call(this,"d")}A(ou,fe);function au(){fe.call(this,"c")}A(au,fe);var $r={},Rp=null;function ua(){return Rp=Rp||new ct}$r.La="serverreachability";function jp(a){fe.call(this,$r.La,a)}A(jp,fe);function Di(a){const d=ua();xt(d,new jp(d))}$r.STAT_EVENT="statevent";function Dp(a,d){fe.call(this,$r.STAT_EVENT,a),this.stat=d}A(Dp,fe);function wt(a){const d=ua();xt(d,new Dp(d,a))}$r.Ma="timingevent";function Vp(a,d){fe.call(this,$r.Ma,a),this.size=d}A(Vp,fe);function Vi(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Oi(){this.g=!0}Oi.prototype.xa=function(){this.g=!1};function l1(a,d,f,v,R,V){a.info(function(){if(a.g)if(V)for(var G="",Ne=V.split("&"),nt=0;nt<Ne.length;nt++){var we=Ne[nt].split("=");if(1<we.length){var ut=we[0];we=we[1];var dt=ut.split("_");G=2<=dt.length&&dt[1]=="type"?G+(ut+"="+we+"&"):G+(ut+"=redacted&")}}else G=null;else G=V;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+d+`
`+f+`
`+G})}function c1(a,d,f,v,R,V,G){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+d+`
`+f+`
`+V+" "+G})}function ws(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+d1(a,f)+(v?" "+v:"")})}function u1(a,d){a.info(function(){return"TIMEOUT: "+d})}Oi.prototype.info=function(){};function d1(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(var G=1;G<R.length;G++)R[G]=""}}}}return su(f)}catch{return d}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Op={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lu;function ha(){}A(ha,iu),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},lu=new ha;function Yn(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new Ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mp}function Mp(){this.i=null,this.g="",this.h=!1}var Lp={},cu={};function uu(a,d,f){a.L=1,a.v=ga(In(d)),a.m=f,a.P=!0,Fp(a,null)}function Fp(a,d){a.F=Date.now(),fa(a),a.A=In(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Zp(f.i,"t",v),a.C=0,f=a.j.J,a.h=new Mp,a.g=ym(a.j,f?d:null,!a.m),0<a.O&&(a.M=new i1(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(Sp[0]=R.toString()),R=Sp);for(var V=0;V<R.length;V++){var G=Tn(f,R[V],v||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=a.H?x(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Di(),l1(a.i,a.u,a.A,a.l,a.R,a.m)}Yn.prototype.ca=function(a){a=a.target;const d=this.M;d&&Nn(a)==3?d.j():this.Y(a)},Yn.prototype.Y=function(a){try{if(a==this.g)e:{const dt=Nn(this.g);var d=this.g.Ba();const Ts=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||om(this.g)))){this.J||dt!=4||d==7||(d==8||0>=Ts?Di(3):Di(2)),du(this);var f=this.g.Z();this.X=f;t:if(Up(this)){var v=om(this.g);a="";var R=v.length,V=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),Mi(this);var G="";break t}this.h.i=new c.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(V&&d==R-1)});v.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,c1(this.i,this.u,this.A,this.l,this.R,dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,nt=this.g;if((Ne=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ne)){var we=Ne;break t}}we=null}if(f=we)ws(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hu(this,f);else{this.o=!1,this.s=3,wt(12),Br(this),Mi(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<G.length;)if(Jt=h1(this,G),Jt==cu){dt==4&&(this.s=4,wt(14),f=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Lp){this.s=4,wt(15),ws(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else ws(this.i,this.l,Jt,null),hu(this,Jt);if(Up(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||G.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)ws(this.i,this.l,G,"[Invalid Chunked Response]"),Br(this),Mi(this);else if(0<G.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),vu(ut),ut.M=!0,wt(11))}}else ws(this.i,this.l,G,null),hu(this,G);dt==4&&Br(this),this.o&&!this.J&&(dt==4?fm(this.j,this):(this.o=!1,fa(this)))}else A1(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Br(this),Mi(this)}}}catch{}finally{}};function Up(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function h1(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?cu:(f=Number(d.substring(f,v)),isNaN(f)?Lp:(v+=1,v+f>d.length?cu:(d=d.slice(v,v+f),a.C=v+f,d)))}Yn.prototype.cancel=function(){this.J=!0,Br(this)};function fa(a){a.S=Date.now()+a.I,zp(a,a.I)}function zp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Vi(m(a.ba,a),d)}function du(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Yn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(u1(this.i,this.A),this.L!=2&&(Di(),wt(17)),Br(this),this.s=2,Mi(this)):zp(this,this.S-a)};function Mi(a){a.j.G==0||a.J||fm(a.j,a)}function Br(a){du(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ap(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function hu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||fu(f.h,a))){if(!a.K&&fu(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ba(f),xa(f);else break e;yu(f),wt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Vi(m(f.Za,f),6e3));if(1>=qp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Hr(f,11)}else if((a.K||f.g==a)&&ba(f),!y(d))for(R=f.Da.g.parse(d),d=0;d<R.length;d++){let we=R[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];const ut=we[3];ut!=null&&(f.la=ut,f.j.info("VER="+f.la));const dt=we[4];dt!=null&&(f.Aa=dt,f.j.info("SVER="+f.Aa));const Ts=we[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(v=1.5*Ts,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Jt=a.g;if(Jt){const Ta=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var V=v.h;V.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(pu(V,V.h),V.h=null))}if(v.D){const _u=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(v.ya=_u,Ce(v.I,v.D,_u))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var G=a;if(v.qa=gm(v,v.J?v.ia:null,v.W),G.K){Hp(v.h,G);var Ne=G,nt=v.L;nt&&(Ne.I=nt),Ne.B&&(du(Ne),fa(Ne)),v.g=G}else dm(v);0<f.i.length&&wa(f)}else we[0]!="stop"&&we[0]!="close"||Hr(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Hr(f,7):gu(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Di(4)}catch{}}var f1=class{constructor(a,d){this.g=a,this.map=d}};function $p(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function qp(a){return a.h?1:a.g?a.g.size:0}function fu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function pu(a,d){a.g?a.g.add(d):a.h=d}function Hp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}$p.prototype.cancel=function(){if(this.i=Wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Wp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return k(a.i)}function p1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function m1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function Gp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=m1(a),v=p1(a),R=v.length,V=0;V<R;V++)d.call(void 0,v[V],f&&f[V],a)}var Kp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),R=null;if(0<=v){var V=a[f].substring(0,v);R=a[f].substring(v+1)}else V=a[f];d(V,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof qr){this.h=a.h,pa(this,a.j),this.o=a.o,this.g=a.g,ma(this,a.s),this.l=a.l;var d=a.i,f=new Ui;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Qp(this,f),this.m=a.m}else a&&(d=String(a).match(Kp))?(this.h=!1,pa(this,d[1]||"",!0),this.o=Li(d[2]||""),this.g=Li(d[3]||"",!0),ma(this,d[4]),this.l=Li(d[5]||"",!0),Qp(this,d[6]||"",!0),this.m=Li(d[7]||"")):(this.h=!1,this.i=new Ui(null,this.h))}qr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Fi(d,Xp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Fi(d,Xp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Fi(f,f.charAt(0)=="/"?_1:v1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Fi(f,w1)),a.join("")};function In(a){return new qr(a)}function pa(a,d,f){a.j=f?Li(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ma(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Qp(a,d,f){d instanceof Ui?(a.i=d,b1(a.i,a.h)):(f||(d=Fi(d,x1)),a.i=new Ui(d,a.h))}function Ce(a,d,f){a.i.set(d,f)}function ga(a){return Ce(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Li(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Fi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,y1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function y1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Xp=/[#\/\?@]/g,v1=/[#\?:]/g,_1=/[#\?]/g,x1=/[#\?@]/g,w1=/#/g;function Ui(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Jn(a){a.g||(a.g=new Map,a.h=0,a.i&&g1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ui.prototype,t.add=function(a,d){Jn(this),this.i=null,a=bs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Yp(a,d){Jn(a),d=bs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Jp(a,d){return Jn(a),d=bs(a,d),a.g.has(d)}t.forEach=function(a,d){Jn(this),this.g.forEach(function(f,v){f.forEach(function(R){a.call(d,R,v,this)},this)},this)},t.na=function(){Jn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const R=a[v];for(let V=0;V<R.length;V++)f.push(d[v])}return f},t.V=function(a){Jn(this);let d=[];if(typeof a=="string")Jp(this,a)&&(d=d.concat(this.g.get(bs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Jn(this),this.i=null,a=bs(this,a),Jp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Zp(a,d,f){Yp(a,d),0<f.length&&(a.i=null,a.g.set(bs(a,d),k(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const V=encodeURIComponent(String(v)),G=this.V(v);for(v=0;v<G.length;v++){var R=V;G[v]!==""&&(R+="="+encodeURIComponent(String(G[v]))),a.push(R)}}return this.i=a.join("&")};function bs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function b1(a,d){d&&!a.j&&(Jn(a),a.i=null,a.g.forEach(function(f,v){var R=v.toLowerCase();v!=R&&(Yp(this,v),Zp(this,R,f))},a)),a.j=d}function E1(a,d){const f=new Oi;if(c.Image){const v=new Image;v.onload=T(Zn,f,"TestLoadImage: loaded",!0,d,v),v.onerror=T(Zn,f,"TestLoadImage: error",!1,d,v),v.onabort=T(Zn,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=T(Zn,f,"TestLoadImage: timeout",!1,d,v),c.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function T1(a,d){const f=new Oi,v=new AbortController,R=setTimeout(()=>{v.abort(),Zn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(R),V.ok?Zn(f,"TestPingServer: ok",!0,d):Zn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Zn(f,"TestPingServer: error",!1,d)})}function Zn(a,d,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function I1(){this.g=new a1}function N1(a,d,f){const v=f||"";try{Gp(a,function(R,V){let G=R;h(R)&&(G=su(R)),d.push(v+V+"="+encodeURIComponent(G))})}catch(R){throw d.push(v+"type="+encodeURIComponent("_badmap")),R}}function ya(a){this.l=a.Ub||null,this.j=a.eb||!1}A(ya,iu),ya.prototype.g=function(){return new va(this.l,this.j)},ya.prototype.i=function(a){return function(){return a}}({});function va(a,d){ct.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(va,ct),t=va.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,$i(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;em(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function em(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?zi(this):$i(this),this.readyState==3&&em(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,zi(this))},t.Qa=function(a){this.g&&(this.response=a,zi(this))},t.ga=function(){this.g&&zi(this)};function zi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,$i(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function $i(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function tm(a){let d="";return $(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function mu(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=tm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ce(a,d,f))}function Ue(a){ct.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ue,ct);var k1=/^https?$/i,S1=["POST","PUT"];t=Ue.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lu.g(),this.v=this.o?Cp(this.o):Cp(lu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){nm(this,V);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),R=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(S1,d,void 0))||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,G]of f)this.g.setRequestHeader(V,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{im(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){nm(this,V)}};function nm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,rm(a),_a(a)}function rm(a){a.A||(a.A=!0,xt(a,"complete"),xt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,xt(this,"complete"),xt(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sm(this):this.bb())},t.bb=function(){sm(this)};function sm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Nn(a)!=4||a.Z()!=2)){if(a.u&&Nn(a)==4)Np(a.Ea,0,a);else if(xt(a,"readystatechange"),Nn(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=G===0){var R=String(a.D).match(Kp)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),v=!k1.test(R?R.toLowerCase():"")}f=v}if(f)xt(a,"complete"),xt(a,"success");else{a.m=6;try{var V=2<Nn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",rm(a)}}finally{_a(a)}}}}function _a(a,d){if(a.g){im(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||xt(a,"ready");try{f.onreadystatechange=v}catch{}}}function im(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Nn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),o1(d)}};function om(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function A1(a){const d={};a=(a.g&&2<=Nn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(y(a[v]))continue;var f=C(a[v]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=d[R]||[];d[R]=V,V.push(f)}b(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function am(a){this.Aa=0,this.i=[],this.j=new Oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bi("baseRetryDelayMs",5e3,a),this.cb=Bi("retryDelaySeedMs",1e4,a),this.Wa=Bi("forwardChannelMaxRetries",2,a),this.wa=Bi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new $p(a&&a.concurrentRequestLimit),this.Da=new I1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=am.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){wt(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=gm(this,null,this.W),wa(this)};function gu(a){if(lm(a),a.G==3){var d=a.U++,f=In(a.I);if(Ce(f,"SID",a.K),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),qi(a,f),d=new Yn(a,a.j,d),d.L=2,d.v=ga(In(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=ym(d.j,null),d.g.ea(d.v)),d.F=Date.now(),fa(d)}mm(a)}function xa(a){a.g&&(vu(a),a.g.cancel(),a.g=null)}function lm(a){xa(a),a.u&&(c.clearTimeout(a.u),a.u=null),ba(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function wa(a){if(!Bp(a.h)&&!a.s){a.s=!0;var d=a.Ga;Z||U(),O||(Z(),O=!0),Q.add(d,a),a.B=0}}function C1(a,d){return qp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Vi(m(a.Ga,a,d),pm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Yn(this,this.j,a);let V=this.o;if(this.S&&(V?(V=x(V),E(V,this.S)):V=this.S),this.m!==null||this.O||(R.H=V,V=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=um(this,R,d),f=In(this.I),Ce(f,"RID",a),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),qi(this,f),V&&(this.O?d="headers="+encodeURIComponent(String(tm(V)))+"&"+d:this.m&&mu(f,this.m,V)),pu(this.h,R),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",d),Ce(f,"SID","null"),R.T=!0,uu(R,f,null)):uu(R,f,d),this.G=2}}else this.G==3&&(a?cm(this,a):this.i.length==0||Bp(this.h)||cm(this))};function cm(a,d){var f;d?f=d.l:f=a.U++;const v=In(a.I);Ce(v,"SID",a.K),Ce(v,"RID",f),Ce(v,"AID",a.T),qi(a,v),a.m&&a.o&&mu(v,a.m,a.o),f=new Yn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=um(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),pu(a.h,f),uu(f,v,d)}function qi(a,d){a.H&&$(a.H,function(f,v){Ce(d,v,f)}),a.l&&Gp({},function(f,v){Ce(d,v,f)})}function um(a,d,f){f=Math.min(a.i.length,f);var v=a.l?m(a.l.Na,a.l,a):null;e:{var R=a.i;let V=-1;for(;;){const G=["count="+f];V==-1?0<f?(V=R[0].g,G.push("ofs="+V)):V=0:G.push("ofs="+V);let Ne=!0;for(let nt=0;nt<f;nt++){let we=R[nt].g;const ut=R[nt].map;if(we-=V,0>we)V=Math.max(0,R[nt].g-100),Ne=!1;else try{N1(ut,G,"req"+we+"_")}catch{v&&v(ut)}}if(Ne){v=G.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function dm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Z||U(),O||(Z(),O=!0),Q.add(d,a),a.v=0}}function yu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Vi(m(a.Fa,a),pm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,hm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Vi(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),xa(this),hm(this))};function vu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function hm(a){a.g=new Yn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=In(a.qa);Ce(d,"RID","rpc"),Ce(d,"SID",a.K),Ce(d,"AID",a.T),Ce(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ce(d,"TO",a.ja),Ce(d,"TYPE","xmlhttp"),qi(a,d),a.m&&a.o&&mu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ga(In(d)),f.m=null,f.P=!0,Fp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,xa(this),yu(this),wt(19))};function ba(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function fm(a,d){var f=null;if(a.g==d){ba(a),vu(a),a.g=null;var v=2}else if(fu(a.h,d))f=d.D,Hp(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var R=a.B;v=ua(),xt(v,new Vp(v,f)),wa(a)}else dm(a);else if(R=d.s,R==3||R==0&&0<d.X||!(v==1&&C1(a,d)||v==2&&yu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),R){case 1:Hr(a,5);break;case 4:Hr(a,10);break;case 3:Hr(a,6);break;default:Hr(a,2)}}}function pm(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Hr(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),v=a.Xa;const R=!v;v=new qr(v||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||pa(v,"https"),ga(v),R?E1(v.toString(),f):T1(v.toString(),f)}else wt(2);a.G=0,a.l&&a.l.sa(d),mm(a),lm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function mm(a){if(a.G=0,a.ka=[],a.l){const d=Wp(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ka,d),S(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function gm(a,d,f){var v=f instanceof qr?In(f):new qr(f);if(v.g!="")d&&(v.g=d+"."+v.g),ma(v,v.s);else{var R=c.location;v=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var V=new qr(null);v&&pa(V,v),d&&(V.g=d),R&&ma(V,R),f&&(V.l=f),v=V}return f=a.D,d=a.ya,f&&d&&Ce(v,f,d),Ce(v,"VER",a.la),qi(a,v),v}function ym(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ue(new ya({eb:f})):new Ue(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vm(){}t=vm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ea(){}Ea.prototype.g=function(a,d){return new Ot(a,d)};function Ot(a,d){ct.call(this),this.g=new am(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!y(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!y(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Es(this)}A(Ot,ct),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){gu(this.g)},Ot.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=su(a),a=f);d.i.push(new f1(d.Ya++,a)),d.G==3&&wa(d)},Ot.prototype.N=function(){this.g.l=null,delete this.j,gu(this.g),delete this.g,Ot.aa.N.call(this)};function _m(a){ou.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(_m,ou);function xm(){au.call(this),this.status=1}A(xm,au);function Es(a){this.g=a}A(Es,vm),Es.prototype.ua=function(){xt(this.g,"a")},Es.prototype.ta=function(a){xt(this.g,new _m(a))},Es.prototype.sa=function(a){xt(this.g,new xm)},Es.prototype.ra=function(){xt(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,xx=function(){return new Ea},_x=function(){return ua()},vx=$r,oh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,hl=da,Op.COMPLETE="complete",yx=Op,Pp.EventType=ji,ji.OPEN="a",ji.CLOSE="b",ji.ERROR="c",ji.MESSAGE="d",ct.prototype.listen=ct.prototype.K,ro=Pp,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,gx=Ue}).apply(typeof Ba<"u"?Ba:typeof self<"u"?self:typeof window<"u"?window:{});const iy="@firebase/firestore",oy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new wf("@firebase/firestore");function ks(){return fs.logLevel}function Y(t,...e){if(fs.logLevel<=ge.DEBUG){const n=e.map(Vf);fs.debug(`Firestore (${Ii}): ${t}`,...n)}}function Hn(t,...e){if(fs.logLevel<=ge.ERROR){const n=e.map(Vf);fs.error(`Firestore (${Ii}): ${t}`,...n)}}function Ar(t,...e){if(fs.logLevel<=ge.WARN){const n=e.map(Vf);fs.warn(`Firestore (${Ii}): ${t}`,...n)}}function Vf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,wx(t,r,n)}function wx(t,e,n){let r=`FIRESTORE (${Ii}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function be(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||wx(e,s,r)}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class qN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HN{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Mn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new bx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class WN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ay{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ay(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ay(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=QN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function ah(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return he(r,s);{const i=Ex(),o=XN(i.encode(ly(t,n)),i.encode(ly(e,n)));return o!==0?o:he(r,s)}}n+=r>65535?2:1}return he(t.length,e.length)}function ly(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function XN(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return he(t[n],e[n]);return he(t.length,e.length)}function ui(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="__name__";class fn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=fn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return he(e.length,n.length)}static compareSegments(e,n){const r=fn.isNumericId(e),s=fn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?fn.extractNumericId(e).compare(fn.extractNumericId(n)):ah(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class Se extends fn{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const YN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends fn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return YN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cy}static keyField(){return new it([cy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new X(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new X(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Se.fromString(e))}static fromName(e){return new te(Se.fromString(e).popFirst(5))}static empty(){return new te(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e,n){if(!n)throw new X(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JN(t,e,n,r){if(e===!0&&r===!0)throw new X(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uy(t){if(!te.isDocumentKey(t))throw new X(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dy(t){if(te.isDocumentKey(t))throw new X(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ix(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cc(t);throw new X(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function sa(t,e){if(!Ix(t))throw new X(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=-62135596800,fy=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fy);return new Re(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hy)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fy}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sa(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:Ke("string",Re._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Re(0,0))}static max(){return new ce(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=-1;function ZN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new Cr(s,te.empty(),e)}function ek(t){return new Cr(t.readTime,t.key,$o)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(ce.min(),te.empty(),$o)}static max(){return new Cr(ce.max(),te.empty(),$o)}}function tk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==nk)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ki(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=-1;function Rc(t){return t==null}function Yl(t){return t===0&&1/t==-1/0}function ik(t){return typeof t=="number"&&Number.isInteger(t)&&!Yl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="";function ok(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=py(e)),e=ak(t.get(n),e);return py(e)}function ak(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Nx:n+="";break;default:n+=i}}return n}function py(t){return t+Nx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qa(this.root,e,this.comparator,!0)}}class qa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gy(this.data.getIterator())}getIteratorFrom(e){return new gy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class gy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new Ye(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ui(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Sx("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const lk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(be(!!t,39018),typeof t=="string"){let e=0;const n=lk.exec(t);if(be(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="server_timestamp",Cx="__type__",Px="__previous_value__",Rx="__local_write_time__";function Lf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Cx])===null||n===void 0?void 0:n.stringValue)===Ax}function jc(t){const e=t.mapValue.fields[Px];return Lf(e)?jc(e):e}function Bo(t){const e=Pr(t.mapValue.fields[Rx].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r,s,i,o,c,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const Jl="(default)";class qo{constructor(e,n){this.projectId=e,this.database=n||Jl}static empty(){return new qo("","")}get isDefaultDatabase(){return this.database===Jl}isEqual(e){return e instanceof qo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__type__",uk="__max__",Ha={mapValue:{}},Dx="__vector__",Zl="value";function jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lf(t)?4:hk(t)?9007199254740991:dk(t)?10:11:re(28295,{value:t})}function En(t,e){if(t===e)return!0;const n=jr(t);if(n!==jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bo(t).isEqual(Bo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Pr(s.timestampValue),c=Pr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Rr(s.bytesValue).isEqual(Rr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),c=Be(i.doubleValue);return o===c?Yl(o)===Yl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ui(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(my(o)!==my(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!En(o[u],c[u])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function Ho(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function di(t,e){if(t===e)return 0;const n=jr(t),r=jr(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Be(i.integerValue||i.doubleValue),u=Be(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return yy(t.timestampValue,e.timestampValue);case 4:return yy(Bo(t),Bo(e));case 5:return ah(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Rr(i),u=Rr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=he(c[h],u[h]);if(p!==0)return p}return he(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=he(Be(i.latitude),Be(o.latitude));return c!==0?c:he(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,h,p;const g=i.fields||{},m=o.fields||{},T=(c=g[Zl])===null||c===void 0?void 0:c.arrayValue,A=(u=m[Zl])===null||u===void 0?void 0:u.arrayValue,k=he(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:vy(T,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ha.mapValue&&o===Ha.mapValue)return 0;if(i===Ha.mapValue)return 1;if(o===Ha.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const m=ah(u[g],p[g]);if(m!==0)return m;const T=di(c[u[g]],h[p[g]]);if(T!==0)return T}return he(u.length,p.length)}(t.mapValue,e.mapValue);default:throw re(23264,{le:n})}}function yy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Pr(t),r=Pr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function vy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=di(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function hi(t){return lh(t)}function lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=lh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${lh(n.fields[o])}`;return s+"}"}(t.mapValue):re(61005,{value:t})}function fl(t){switch(jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jc(t);return e?16+fl(e):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Fr(r.fields,(i,o)=>{s+=i.length+fl(o)}),s}(t.mapValue);default:throw re(13486,{value:t})}}function _y(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ch(t){return!!t&&"integerValue"in t}function Ff(t){return!!t&&"arrayValue"in t}function xy(t){return!!t&&"nullValue"in t}function wy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pl(t){return!!t&&"mapValue"in t}function dk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[jx])===null||n===void 0?void 0:n.stringValue)===Dx}function _o(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_o(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_o(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_o(n)}setAll(e){let n=it.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=_o(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(_o(this.value))}}function Vx(t){const e=[];return Fr(t.fields,(n,r)=>{const s=new it([n]);if(pl(r)){const i=Vx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new yt(e,0,ce.min(),ce.min(),ce.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,ce.min(),ce.min(),At.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,ce.min(),ce.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.position=e,this.inclusive=n}}function by(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ey(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n="asc"){this.field=e,this.dir=n}}function fk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{}class Ge extends Ox{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mk(e,n,r):n==="array-contains"?new vk(e,r):n==="in"?new _k(e,r):n==="not-in"?new xk(e,r):n==="array-contains-any"?new wk(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gk(e,r):new yk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(di(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends Ox{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new un(e,n)}matches(e){return Mx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Mx(t){return t.op==="and"}function Lx(t){return pk(t)&&Mx(t)}function pk(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function uh(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(Lx(t))return t.filters.map(e=>uh(e)).join(",");{const e=t.filters.map(n=>uh(n)).join(",");return`${t.op}(${e})`}}function Fx(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&En(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Fx(o,s.filters[c]),!0):!1}(t,e):void re(19439)}function Ux(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${hi(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(Ux).join(" ,")+"}"}(t):"Filter"}class mk extends Ge{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class gk extends Ge{constructor(e,n){super(e,"in",n),this.keys=zx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yk extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=zx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class vk extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ff(n)&&Ho(n.arrayValue,this.value)}}class _k extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ho(this.value.arrayValue,n)}}class xk extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ho(this.value.arrayValue,n)}}class wk extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ff(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ho(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Pe=null}}function Ty(t,e=null,n=[],r=[],s=null,i=null,o=null){return new bk(t,e,n,r,s,i,o)}function Uf(t){const e=ue(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hi(r)).join(",")),e.Pe=n}return e.Pe}function zf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Fx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ey(t.startAt,e.startAt)&&Ey(t.endAt,e.endAt)}function dh(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ek(t,e,n,r,s,i,o,c){return new Si(t,e,n,r,s,i,o,c)}function Dc(t){return new Si(t)}function Iy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $x(t){return t.collectionGroup!==null}function xo(t){const e=ue(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ye(it.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Wo(i,r))}),n.has(it.keyField().canonicalString())||e.Te.push(new Wo(it.keyField(),r))}return e.Te}function vn(t){const e=ue(t);return e.Ie||(e.Ie=Tk(e,xo(t))),e.Ie}function Tk(t,e){if(t.limitType==="F")return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wo(s.field,i)});const n=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hh(t,e){const n=t.filters.concat([e]);return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fh(t,e,n){return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vc(t,e){return zf(vn(t),vn(e))&&t.limitType===e.limitType}function Bx(t){return`${Uf(vn(t))}|lt:${t.limitType}`}function Ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Ux(s)).join(", ")}]`),Rc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>hi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>hi(s)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of xo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const h=by(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,xo(r),s)||r.endAt&&!function(o,c,u){const h=by(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,xo(r),s))}(t,e)}function Ik(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qx(t){return(e,n)=>{let r=!1;for(const s of xo(t)){const i=Nk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Nk(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),h=c.data.field(i);return u!==null&&h!==null?di(u,h):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return kx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Le(te.comparator);function Wn(){return kk}const Hx=new Le(te.comparator);function so(...t){let e=Hx;for(const n of t)e=e.insert(n.key,n);return e}function Wx(t){let e=Hx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return wo()}function Gx(){return wo()}function wo(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Sk=new Le(te.comparator),Ak=new Ye(te.comparator);function ye(...t){let e=Ak;for(const n of t)e=e.add(n);return e}const Ck=new Ye(he);function Pk(){return Ck}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yl(e)?"-0":e}}function Kx(t){return{integerValue:""+t}}function Rk(t,e){return ik(e)?Kx(e):$f(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function jk(t,e,n){return t instanceof Go?function(s,i){const o={fields:{[Cx]:{stringValue:Ax},[Rx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lf(i)&&(i=jc(i)),i&&(o.fields[Px]=i),{mapValue:o}}(n,e):t instanceof fi?Xx(t,e):t instanceof pi?Yx(t,e):function(s,i){const o=Qx(s,i),c=Ny(o)+Ny(s.Ee);return ch(o)&&ch(s.Ee)?Kx(c):$f(s.serializer,c)}(t,e)}function Dk(t,e,n){return t instanceof fi?Xx(t,e):t instanceof pi?Yx(t,e):n}function Qx(t,e){return t instanceof tc?function(r){return ch(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Go extends Mc{}class fi extends Mc{constructor(e){super(),this.elements=e}}function Xx(t,e){const n=Jx(e);for(const r of t.elements)n.some(s=>En(s,r))||n.push(r);return{arrayValue:{values:n}}}class pi extends Mc{constructor(e){super(),this.elements=e}}function Yx(t,e){let n=Jx(e);for(const r of t.elements)n=n.filter(s=>!En(s,r));return{arrayValue:{values:n}}}class tc extends Mc{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ny(t){return Be(t.integerValue||t.doubleValue)}function Jx(t){return Ff(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.field=e,this.transform=n}}function Vk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fi&&s instanceof fi||r instanceof pi&&s instanceof pi?ui(r.elements,s.elements,En):r instanceof tc&&s instanceof tc?En(r.Ee,s.Ee):r instanceof Go&&s instanceof Go}(t.transform,e.transform)}class Ok{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ml(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lc{}function Zx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qf(t.key,Qt.none()):new ia(t.key,t.data,Qt.none());{const n=t.data,r=At.empty();let s=new Ye(it.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ur(t.key,r,new Ft(s.toArray()),Qt.none())}}function Mk(t,e,n){t instanceof ia?function(s,i,o){const c=s.value.clone(),u=Sy(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(s,i,o){if(!ml(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Sy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(ew(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bo(t,e,n,r){return t instanceof ia?function(i,o,c,u){if(!ml(i.precondition,o))return c;const h=i.value.clone(),p=Ay(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ur?function(i,o,c,u){if(!ml(i.precondition,o))return c;const h=Ay(i.fieldTransforms,u,o),p=o.data;return p.setAll(ew(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,c){return ml(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function Lk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Qx(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function ky(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ui(r,s,(i,o)=>Vk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ia extends Lc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ur extends Lc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ew(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sy(t,e,n){const r=new Map;be(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,Dk(o,c,n[s]))}return r}function Ay(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jk(i,o,e))}return r}class qf extends Lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fk extends Lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Mk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Gx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Zx(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ui(this.mutations,e.mutations,(n,r)=>ky(n,r))&&ui(this.baseMutations,e.baseMutations,(n,r)=>ky(n,r))}}class Hf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return Sk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Hf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,_e;function Bk(t){switch(t){case M.OK:return re(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function tw(t){if(t===void 0)return Hn("GRPC error has no .code"),M.UNKNOWN;switch(t){case He.OK:return M.OK;case He.CANCELLED:return M.CANCELLED;case He.UNKNOWN:return M.UNKNOWN;case He.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case He.INTERNAL:return M.INTERNAL;case He.UNAVAILABLE:return M.UNAVAILABLE;case He.UNAUTHENTICATED:return M.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case He.NOT_FOUND:return M.NOT_FOUND;case He.ALREADY_EXISTS:return M.ALREADY_EXISTS;case He.PERMISSION_DENIED:return M.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case He.ABORTED:return M.ABORTED;case He.OUT_OF_RANGE:return M.OUT_OF_RANGE;case He.UNIMPLEMENTED:return M.UNIMPLEMENTED;case He.DATA_LOSS:return M.DATA_LOSS;default:return re(39323,{code:t})}}(_e=He||(He={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Tr([4294967295,4294967295],0);function Cy(t){const e=Ex().encode(t),n=new mx;return n.update(e),new Uint8Array(n.digest())}function Py(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Tr([n,r],0),new Tr([s,i],0)]}class Wf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new io(`Invalid padding: ${n}`);if(r<0)throw new io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new io(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Tr.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Tr.fromNumber(r)));return s.compare(qk)===1&&(s=new Tr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Cy(e),[r,s]=Py(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Wf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.fe===0)return;const n=Cy(e),[r,s]=Py(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fc(ce.min(),s,new Le(he),Wn(),ye())}}class oa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new oa(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class nw{constructor(e,n){this.targetId=e,this.De=n}}class rw{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ry{constructor(){this.ve=0,this.Ce=jy(),this.Fe=lt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ye(),n=ye(),r=ye();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new oa(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=jy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Hk{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wn(),this.je=Wa(),this.Je=Wa(),this.He=new Le(he)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(dh(i))if(r===0){const o=new te(i.path);this.Xe(n,o,yt.newNoDocument(o,ce.min()))}else be(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const c=this._t(e),u=c?this.ut(c,e,o):1;if(u!==0){this.rt(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Rr(r).toUint8Array()}catch(u){if(u instanceof Sx)return Ar("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Wf(o,s,i)}catch(u){return Ar(u instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const c=this.st(o);if(c){if(i.current&&dh(c.target)){const u=new te(c.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,yt.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=ye();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.st(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Fc(e,n,this.He,this.ze,r);return this.ze=Wn(),this.je=Wa(),this.Je=Wa(),this.He=new Le(he),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ry,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ye(he),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ye(he),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ry),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Wa(){return new Le(te.comparator)}function jy(){return new Le(te.comparator)}const Wk={asc:"ASCENDING",desc:"DESCENDING"},Gk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kk={and:"AND",or:"OR"};class Qk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ph(t,e){return t.useProto3Json||Rc(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Xk(t,e){return nc(t,e.toTimestamp())}function _n(t){return be(!!t,49232),ce.fromTimestamp(function(n){const r=Pr(n);return new Re(r.seconds,r.nanos)}(t))}function Gf(t,e){return mh(t,e).canonicalString()}function mh(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iw(t){const e=Se.fromString(t);return be(uw(e),10190,{key:e.toString()}),e}function gh(t,e){return Gf(t.databaseId,e.path)}function Zu(t,e){const n=iw(e);if(n.get(1)!==t.databaseId.projectId)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(aw(n))}function ow(t,e){return Gf(t.databaseId,e)}function Yk(t){const e=iw(t);return e.length===4?Se.emptyPath():aw(e)}function yh(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aw(t){return be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Dy(t,e,n){return{name:gh(t,e),fields:n.value.mapValue.fields}}function Jk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:re(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(be(p===void 0||typeof p=="string",58123),lt.fromBase64String(p||"")):(be(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),lt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const p=h.code===void 0?M.UNKNOWN:tw(h.code);return new X(p,h.message||"")}(o);n=new rw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zu(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):ce.min(),c=new At({mapValue:{fields:r.document.fields}}),u=yt.newFoundDocument(s,i,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new gl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zu(t,r.document),i=r.readTime?_n(r.readTime):ce.min(),o=yt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new gl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zu(t,r.document),i=r.removedTargetIds||[];n=new gl([],i,s,null)}else{if(!("filter"in e))return re(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $k(s,i),c=r.targetId;n=new nw(c,o)}}return n}function Zk(t,e){let n;if(e instanceof ia)n={update:Dy(t,e.key,e.value)};else if(e instanceof qf)n={delete:gh(t,e.key)};else if(e instanceof Ur)n={update:Dy(t,e.key,e.data),updateMask:lS(e.fieldMask)};else{if(!(e instanceof Fk))return re(16599,{Rt:e.type});n={verify:gh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Go)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof pi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tc)return{fieldPath:o.field.canonicalString(),increment:c.Ee};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Xk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function eS(t,e){return t&&t.length>0?(be(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?_n(s.updateTime):_n(i);return o.isEqual(ce.min())&&(o=_n(i)),new Ok(o,s.transformResults||[])}(n,e))):[]}function tS(t,e){return{documents:[ow(t,e.path)]}}function nS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ow(t,s);const i=function(h){if(h.length!==0)return cw(un.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(m){return{field:As(m.field),direction:iS(m.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=ph(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:s}}function rS(t){let e=Yk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){be(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const m=lw(g);return m instanceof un&&Lx(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(A){return new Wo(Cs(A.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(g){let m;return m=typeof g=="object"?g.value:g,Rc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,T=g.values||[];return new ec(T,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,T=g.values||[];return new ec(T,m)}(n.endAt)),Ek(e,s,o,i,c,"F",u,h)}function sS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cs(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Cs(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cs(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cs(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Cs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>lw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function iS(t){return Wk[t]}function oS(t){return Gk[t]}function aS(t){return Kk[t]}function As(t){return{fieldPath:t.canonicalString()}}function Cs(t){return it.fromServerFormat(t.fieldPath)}function cw(t){return t instanceof Ge?function(n){if(n.op==="=="){if(wy(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(xy(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wy(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(xy(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:oS(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>cw(s));return r.length===1?r[0]:{compositeFilter:{op:aS(n.op),filters:r}}}(t):re(54877,{filter:t})}function lS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r,s,i=ce.min(),o=ce.min(),c=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.gt=e}}function uS(t){const e=rS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Dn=new hS}addToCollectionParentIndex(e,n){return this.Dn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Cr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class hS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dw=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(dw,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new mi(0)}static ur(){return new mi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="LruGarbageCollector",fS=1048576;function My([t,e],[n,r]){const s=he(t,n);return s===0?he(e,r):s}class pS{constructor(e){this.Tr=e,this.buffer=new Ye(My),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();My(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Y(Oy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ki(n)?Y(Oy,"Ignoring IndexedDB error during garbage collection: ",n):await Ni(n)}await this.Rr(3e5)})}}class gS{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Pc.ue);const r=new pS(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Vy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vy):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,c,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,o=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,n))).next(g=>(i=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),ks()<=ge.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g})))}}function yS(t,e){return new gS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bo(r.mutation,s,Ft.empty(),Re.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=Zr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=so();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Wn();const o=wo(),c=function(){return wo()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Ur)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),bo(p.mutation,h,p.mutation.getFieldMask(),Re.now())):o.set(h.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return c.set(h,new _S(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=wo();let s=new Le((o,c)=>o-c),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Ft.empty();p=c.applyToLocalView(h,p),r.set(u,p);const g=(s.get(c.batchId)||ye()).add(u);s=s.insert(c.batchId,g)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,g=Gx();p.forEach(m=>{if(!i.has(m)){const T=Zx(n.get(m),r.get(m));T!==null&&g.set(m,T),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$x(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Zr());let c=$o,u=i;return o.next(h=>F.forEach(h,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(m=>{u=u.insert(p,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ye())).next(p=>({batchId:c,changes:Wx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=so();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=so();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const h=function(g,m){return new Si(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,yt.newInvalidDocument(p)))});let c=so();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&bo(p.mutation,h,Ft.empty(),Re.now()),Oc(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return F.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:uS(s.bundledQuery),readTime:_n(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.overlays=new Le(te.comparator),this.kr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Zr(),i=n.length+1,o=new te(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Zr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Zr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return F.resolve(c)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zk(n,r));let i=this.kr.get(n);i===void 0&&(i=ye(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this.qr=new Ye(Je.Qr),this.$r=new Ye(Je.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Je(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new te(new Se([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new te(new Se([])),r=new Je(n,e),s=new Je(n,e+1);let i=ye();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return te.comparator(e.key,n.key)||he(e.Hr,n.Hr)}static Ur(e,n){return he(e.Hr,n.Hr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ye(Je.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Uk(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Yr=this.Yr.add(new Je(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Mf:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(he);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),F.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Je(new te(i),0);let c=new Ye(he);return this.Yr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Hr)),!0)},o),F.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){be(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return F.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Je(n,0),s=this.Yr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.ni=e,this.docs=function(){return new Le(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wn();const o=n.path,c=new te(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||tk(ek(p),r)<=0||(s.has(p.key)||Oc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}ri(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NS(this)}getSize(e){return F.resolve(this.size)}}class NS extends vS{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.persistence=e,this.ii=new vs(n=>Uf(n),zf),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Kf,this.targetCount=0,this._i=mi.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),F.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new mi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.hr(n),F.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.ai={},this.overlays={},this.ui=new Pc(0),this.ci=!1,this.ci=!0,this.li=new ES,this.referenceDelegate=e(this),this.hi=new kS(this),this.indexManager=new dS,this.remoteDocumentCache=function(s){return new IS(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new cS(n),this.Ti=new wS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new TS(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new SS(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class SS extends rk{constructor(e){super(),this.currentSequenceNumber=e}}class Qf{constructor(e){this.persistence=e,this.Ai=new Kf,this.Ri=null}static Vi(e){return new Qf(e)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,r=>{const s=te.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return F.or([()=>F.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class rc{constructor(e,n){this.persistence=e,this.gi=new vs(r=>ok(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=yS(this,n)}static Vi(e,n){return new rc(e,n)}Ii(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return F.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,ce.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),F.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fl(e.data.value)),n}Sr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return bT()?8:sk(_t())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new AS;return this.ws(e,n,o).next(c=>{if(i.result=c,this.Rs)return this.Ss(e,n,o,c.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ks()<=ge.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(ks()<=ge.DEBUG&&Y("QueryEngine","Query:",Ss(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ks()<=ge.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):F.resolve())}ps(e,n){if(Iy(n))return F.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fh(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ye(...i);return this.gs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,c);return this.Ds(n,h,o,u.readTime)?this.ps(e,fh(n,null,"F")):this.vs(e,h,n,u)}))})))}ys(e,n,r,s){return Iy(n)||s.isEqual(ce.min())?F.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?F.resolve(null):(ks()<=ge.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ss(n)),this.vs(e,o,n,ZN(s,$o)).next(c=>c))})}bs(e,n){let r=new Ye(qx(e));return n.forEach((s,i)=>{Oc(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return ks()<=ge.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Ss(n)),this.gs.getDocumentsMatchingQuery(e,n,Cr.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="LocalStore",PS=3e8;class RS{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Le(he),this.Ms=new vs(i=>Uf(i),zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function jS(t,e,n,r){return new RS(t,e,n,r)}async function fw(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=ye();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:c}))})})}function DS(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,h,p){const g=h.batch,m=g.keys();let T=F.resolve();return m.forEach(A=>{T=T.next(()=>p.getEntry(u,A)).next(k=>{const S=h.docVersions.get(A);be(S!==null,48541),k.version.compareTo(S)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ye();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function pw(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function VS(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach((p,g)=>{const m=s.get(g);if(!m)return;c.push(n.hi.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.hi.addMatchingKeys(i,p.addedDocuments,g)));let T=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(lt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,r)),s=s.insert(g,T),function(k,S,_){return k.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=PS?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,T,p)&&c.push(n.hi.updateTargetData(i,T))});let u=Wn(),h=ye();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(OS(i,o,e.documentUpdates).next(p=>{u=p.Ls,h=p.ks})),!r.isEqual(ce.min())){const p=n.hi.getLastRemoteSnapshotVersion(i).next(g=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return F.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Fs=s,i))}function OS(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wn();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Y(Yf,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function MS(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LS(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function vh(t,e,n){const r=ue(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ki(o))throw o;Y(Yf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Ly(t,e,n){const r=ue(t);let s=ce.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const g=ue(u),m=g.Ms.get(p);return m!==void 0?F.resolve(g.Fs.get(m)):g.hi.getTargetData(h,p)}(r,o,vn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:ye())).next(c=>(FS(r,Ik(e),c),{documents:c,qs:i})))}function FS(t,e,n){let r=t.xs.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Fy{constructor(){this.activeTargetIds=Pk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class US{constructor(){this.Fo=new Fy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="ConnectivityMonitor";class zy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Y(Uy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Y(Uy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=null;function _h(){return Ga===null?Ga=function(){return 268435456+Math.round(2147483648*Math.random())}():Ga++,"0x"+Ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="RestConnection",$S={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BS{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Jl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=_h(),c=this.Go(e,n.toUriEncodedString());Y(ed,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:h}=new URL(c),p=bi(h);return this.jo(e,c,u,r,p).then(g=>(Y(ed,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Ar(ed,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ii}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=$S[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class HS extends BS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=_h();return new Promise((c,u)=>{const h=new gx;h.setWithCredentials(!0),h.listenOnce(yx.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case hl.NO_ERROR:const g=h.getResponseJson();Y(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case hl.TIMEOUT:Y(pt,`RPC '${e}' ${o} timed out`),u(new X(M.DEADLINE_EXCEEDED,"Request time out"));break;case hl.HTTP_ERROR:const m=h.getStatus();if(Y(pt,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T==null?void 0:T.error;if(A&&A.status&&A.message){const k=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(y)>=0?y:M.UNKNOWN}(A.status);u(new X(k,A.message))}else u(new X(M.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new X(M.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{Y(pt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);Y(pt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",p,r,15)})}P_(e,n,r){const s=_h(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xx(),c=_x(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Y(pt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const g=o.createWebChannel(p,u);this.T_(g);let m=!1,T=!1;const A=new qS({Ho:S=>{T?Y(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(m||(Y(pt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),Y(pt,`RPC '${e}' stream ${s} sending:`,S),g.send(S))},Yo:()=>g.close()}),k=(S,_,y)=>{S.listen(_,N=>{try{y(N)}catch(j){setTimeout(()=>{throw j},0)}})};return k(g,ro.EventType.OPEN,()=>{T||(Y(pt,`RPC '${e}' stream ${s} transport opened.`),A.s_())}),k(g,ro.EventType.CLOSE,()=>{T||(T=!0,Y(pt,`RPC '${e}' stream ${s} transport closed`),A.__(),this.I_(g))}),k(g,ro.EventType.ERROR,S=>{T||(T=!0,Ar(pt,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),A.__(new X(M.UNAVAILABLE,"The operation could not be completed")))}),k(g,ro.EventType.MESSAGE,S=>{var _;if(!T){const y=S.data[0];be(!!y,16349);const N=y,j=(N==null?void 0:N.error)||((_=N[0])===null||_===void 0?void 0:_.error);if(j){Y(pt,`RPC '${e}' stream ${s} received error:`,j);const z=j.status;let $=function(w){const E=He[w];if(E!==void 0)return tw(E)}(z),b=j.message;$===void 0&&($=M.INTERNAL,b="Unknown error status: "+z+" with message "+j.message),T=!0,A.__(new X($,b)),g.close()}else Y(pt,`RPC '${e}' stream ${s} received:`,y),A.a_(y)}}),k(c,vx.STAT_EVENT,S=>{S.stat===oh.PROXY?Y(pt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===oh.NOPROXY&&Y(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new Qk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="PersistentStream";class gw{constructor(e,n,r,s,i,o,c,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new mw(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new X(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Y($y,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Y($y,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WS extends gw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Jk(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?_n(o.readTime):ce.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=yh(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=dh(u)?{documents:tS(i,u)}:{query:nS(i,u).Vt},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=sw(i,o.resumeToken);const h=ph(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ce.min())>0){c.readTime=nc(i,o.snapshotVersion.toTimestamp());const h=ph(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=sS(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=yh(this.serializer),n.removeTarget=e,this.k_(n)}}class GS extends gw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=eS(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=yh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Zk(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{}class QS extends KS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,mh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(M.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Jo(e,mh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(M.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class XS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Hn(n),this._a=!1):Y("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="RemoteStore";class YS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{_s(this)&&(Y(ps,"Restarting streams for network reachability change."),await async function(u){const h=ue(u);h.Ia.add(4),await aa(h),h.Aa.set("Unknown"),h.Ia.delete(4),await zc(h)}(this))})}),this.Aa=new XS(r,s)}}async function zc(t){if(_s(t))for(const e of t.da)await e(!0)}async function aa(t){for(const e of t.da)await e(!1)}function yw(t,e){const n=ue(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),tp(n)?ep(n):Ai(n).x_()&&Zf(n,e))}function Jf(t,e){const n=ue(t),r=Ai(n);n.Ta.delete(e),r.x_()&&vw(n,e),n.Ta.size===0&&(r.x_()?r.B_():_s(n)&&n.Aa.set("Unknown"))}function Zf(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ai(t).H_(e)}function vw(t,e){t.Ra.$e(e),Ai(t).Y_(e)}function ep(t){t.Ra=new Hk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ai(t).start(),t.Aa.aa()}function tp(t){return _s(t)&&!Ai(t).M_()&&t.Ta.size>0}function _s(t){return ue(t).Ia.size===0}function _w(t){t.Ra=void 0}async function JS(t){t.Aa.set("Online")}async function ZS(t){t.Ta.forEach((e,n)=>{Zf(t,e)})}async function eA(t,e){_w(t),tp(t)?(t.Aa.la(e),ep(t)):t.Aa.set("Unknown")}async function tA(t,e,n){if(t.Aa.set("Online"),e instanceof rw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ta.delete(c),s.Ra.removeTarget(c))}(t,e)}catch(r){Y(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sc(t,r)}else if(e instanceof gl?t.Ra.Ye(e):e instanceof nw?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ce.min()))try{const r=await pw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Ra.Pt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ta.get(h);p&&i.Ta.set(h,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const p=i.Ta.get(u);if(!p)return;i.Ta.set(u,p.withResumeToken(lt.EMPTY_BYTE_STRING,p.snapshotVersion)),vw(i,u);const g=new dr(p.target,u,h,p.sequenceNumber);Zf(i,g)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Y(ps,"Failed to raise snapshot:",r),await sc(t,r)}}async function sc(t,e,n){if(!ki(e))throw e;t.Ia.add(1),await aa(t),t.Aa.set("Offline"),n||(n=()=>pw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(ps,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await zc(t)})}function xw(t,e){return e().catch(n=>sc(t,n,e))}async function $c(t){const e=ue(t),n=Dr(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mf;for(;nA(e);)try{const s=await MS(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,rA(e,s)}catch(s){await sc(e,s)}ww(e)&&bw(e)}function nA(t){return _s(t)&&t.Pa.length<10}function rA(t,e){t.Pa.push(e);const n=Dr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function ww(t){return _s(t)&&!Dr(t).M_()&&t.Pa.length>0}function bw(t){Dr(t).start()}async function sA(t){Dr(t).na()}async function iA(t){const e=Dr(t);for(const n of t.Pa)e.X_(n.mutations)}async function oA(t,e,n){const r=t.Pa.shift(),s=Hf.from(r,e,n);await xw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $c(t)}async function aA(t,e){e&&Dr(t).Z_&&await async function(r,s){if(function(o){return Bk(o)&&o!==M.ABORTED}(s.code)){const i=r.Pa.shift();Dr(r).N_(),await xw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $c(r)}}(t,e),ww(t)&&bw(t)}async function By(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Y(ps,"RemoteStore received new credentials");const r=_s(n);n.Ia.add(3),await aa(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await zc(n)}async function lA(t,e){const n=ue(t);e?(n.Ia.delete(2),await zc(n)):e||(n.Ia.add(2),await aa(n),n.Aa.set("Unknown"))}function Ai(t){return t.Va||(t.Va=function(n,r,s){const i=ue(n);return i.ia(),new WS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:JS.bind(null,t),e_:ZS.bind(null,t),n_:eA.bind(null,t),J_:tA.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),tp(t)?ep(t):t.Aa.set("Unknown")):(await t.Va.stop(),_w(t))})),t.Va}function Dr(t){return t.ma||(t.ma=function(n,r,s){const i=ue(n);return i.ia(),new GS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:sA.bind(null,t),n_:aA.bind(null,t),ea:iA.bind(null,t),ta:oA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await $c(t)):(await t.ma.stop(),t.Pa.length>0&&(Y(ps,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new np(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),ki(t))return new X(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{static emptySet(e){return new Zs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=so(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.fa=new Le(te.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):re(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class gi{constructor(e,n,r,s,i,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new gi(e,n,Zs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class uA{constructor(){this.queries=Hy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=ue(n),i=s.queries;s.queries=Hy(),i.forEach((o,c)=>{for(const u of c.wa)u.onError(r)})})(this,new X(M.ABORTED,"Firestore shutting down"))}}function Hy(){return new vs(t=>Bx(t),Vc)}async function sp(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new cA,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=rp(o,`Initialization of query '${Ss(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&op(n)}async function ip(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dA(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.wa)c.Ca(s)&&(r=!0);o.ya=s}}r&&op(n)}function hA(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function op(t){t.Da.forEach(e=>{e.next()})}var xh,Wy;(Wy=xh||(xh={})).Fa="default",Wy.Cache="cache";class ap{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=gi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.key=e}}class Tw{constructor(e){this.key=e}}class fA{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ye(),this.mutatedKeys=ye(),this.Xa=qx(e),this.eu=new Zs(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new qy,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const m=s.get(p),T=Oc(this.query,g)?g:null,A=!!m&&this.mutatedKeys.has(m.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let S=!1;m&&T?m.data.isEqual(T.data)?A!==k&&(r.track({type:3,doc:T}),S=!0):this.iu(m,T)||(r.track({type:2,doc:T}),S=!0,(u&&this.Xa(T,u)>0||h&&this.Xa(T,h)<0)&&(c=!0)):!m&&T?(r.track({type:0,doc:T}),S=!0):m&&!T&&(r.track({type:1,doc:m}),S=!0,(u||h)&&(c=!0)),S&&(T?(o=o.add(T),i=k?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{eu:o,ru:r,Ds:c,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((p,g)=>function(T,A){const k=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:S})}};return k(T)-k(A)}(p.type,g.type)||this.Xa(p.doc,g.doc)),this.su(r),s=s!=null&&s;const c=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,h=u!==this.Ya;return this.Ya=u,o.length!==0||h?{snapshot:new gi(this.query,e.eu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ye(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Tw(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Ew(r))}),n}uu(e){this.Ha=e.qs,this.Za=ye();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return gi.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const lp="SyncEngine";class pA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mA{constructor(e){this.key=e,this.lu=!1}}class gA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new vs(c=>Bx(c),Vc),this.Tu=new Map,this.Iu=new Set,this.du=new Le(te.comparator),this.Eu=new Map,this.Au=new Kf,this.Ru={},this.Vu=new Map,this.mu=mi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function yA(t,e,n=!0){const r=Cw(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await Iw(r,e,n,!0),s}async function vA(t,e){const n=Cw(t);await Iw(n,e,!0,!1)}async function Iw(t,e,n,r){const s=await LS(t.localStore,vn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await _A(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&yw(t.remoteStore,s),c}async function _A(t,e,n,r,s){t.gu=(g,m,T)=>async function(k,S,_,y){let N=S.view.nu(_);N.Ds&&(N=await Ly(k.localStore,S.query,!1).then(({documents:b})=>S.view.nu(b,N)));const j=y&&y.targetChanges.get(S.targetId),z=y&&y.targetMismatches.get(S.targetId)!=null,$=S.view.applyChanges(N,k.isPrimaryClient,j,z);return Ky(k,S.targetId,$._u),$.snapshot}(t,g,m,T);const i=await Ly(t.localStore,e,!0),o=new fA(e,i.qs),c=o.nu(i.documents),u=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,u);Ky(t,n,h._u);const p=new pA(e,n,o);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function xA(t,e,n){const r=ue(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Vc(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jf(r.remoteStore,s.targetId),wh(r,s.targetId)}).catch(Ni)):(wh(r,s.targetId),await vh(r.localStore,s.targetId,!0))}async function wA(t,e){const n=ue(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jf(n.remoteStore,r.targetId))}async function bA(t,e,n){const r=AA(t);try{const s=await function(o,c){const u=ue(o),h=Re.now(),p=c.reduce((T,A)=>T.add(A.key),ye());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let A=Wn(),k=ye();return u.Os.getEntries(T,p).next(S=>{A=S,A.forEach((_,y)=>{y.isValidDocument()||(k=k.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,A)).next(S=>{g=S;const _=[];for(const y of c){const N=Lk(y,g.get(y.key).overlayedDocument);N!=null&&_.push(new Ur(y.key,N,Vx(N.value.mapValue),Qt.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,_,c)}).next(S=>{m=S;const _=S.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(T,S.batchId,_)})}).then(()=>({batchId:m.batchId,changes:Wx(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let h=o.Ru[o.currentUser.toKey()];h||(h=new Le(he)),h=h.insert(c,u),o.Ru[o.currentUser.toKey()]=h}(r,s.batchId,n),await la(r,s.changes),await $c(r.remoteStore)}catch(s){const i=rp(s,"Failed to persist write");n.reject(i)}}async function Nw(t,e){const n=ue(t);try{const r=await VS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(be(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?be(o.lu,14607):s.removedDocuments.size>0&&(be(o.lu,42227),o.lu=!1))}),await la(n,r,e)}catch(r){await Ni(r)}}function Gy(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=ue(o);u.onlineState=c;let h=!1;u.queries.forEach((p,g)=>{for(const m of g.wa)m.va(c)&&(h=!0)}),h&&op(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EA(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Le(te.comparator);o=o.insert(i,yt.newNoDocument(i,ce.min()));const c=ye().add(i),u=new Fc(ce.min(),new Map,new Le(he),o,c);await Nw(r,u),r.du=r.du.remove(i),r.Eu.delete(e),cp(r)}else await vh(r.localStore,e,!1).then(()=>wh(r,e,n)).catch(Ni)}async function TA(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await DS(n.localStore,e);Sw(n,r,null),kw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await la(n,s)}catch(s){await Ni(s)}}async function IA(t,e,n){const r=ue(t);try{const s=await function(o,c){const u=ue(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next(g=>(be(g!==null,37113),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);Sw(r,e,n),kw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await la(r,s)}catch(s){await Ni(s)}}function kw(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Sw(t,e,n){const r=ue(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function wh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||Aw(t,r)})}function Aw(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Jf(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),cp(t))}function Ky(t,e,n){for(const r of n)r instanceof Ew?(t.Au.addReference(r.key,e),NA(t,r)):r instanceof Tw?(Y(lp,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||Aw(t,r.key)):re(19791,{yu:r})}function NA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Y(lp,"New document in limbo: "+n),t.Iu.add(r),cp(t))}function cp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new te(Se.fromString(e)),r=t.mu.next();t.Eu.set(r,new mA(n)),t.du=t.du.insert(n,r),yw(t.remoteStore,new dr(vn(Dc(n.path)),r,"TargetPurposeLimboResolution",Pc.ue))}}async function la(t,e,n){const r=ue(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{o.push(r.gu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=Xf.Es(u.targetId,h);i.push(g)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,h){const p=ue(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(h,m=>F.forEach(m.Is,T=>p.persistence.referenceDelegate.addReference(g,m.targetId,T)).next(()=>F.forEach(m.ds,T=>p.persistence.referenceDelegate.removeReference(g,m.targetId,T)))))}catch(g){if(!ki(g))throw g;Y(Yf,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const T=p.Fs.get(m),A=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(A);p.Fs=p.Fs.insert(m,k)}}}(r.localStore,i))}async function kA(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Y(lp,"User change. New user:",e.toKey());const r=await fw(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(c=>{c.forEach(u=>{u.reject(new X(M.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await la(n,r.Bs)}}function SA(t,e){const n=ue(t),r=n.Eu.get(e);if(r&&r.lu)return ye().add(r.key);{let s=ye();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const c=n.Pu.get(o);s=s.unionWith(c.view.tu)}return s}}function Cw(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EA.bind(null,e),e.hu.J_=dA.bind(null,e.eventManager),e.hu.pu=hA.bind(null,e.eventManager),e}function AA(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IA.bind(null,e),e}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return jS(this.persistence,new CS,e.initialUser,this.serializer)}Du(e){return new hw(Qf.Vi,this.serializer)}bu(e){return new US}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class CA extends ic{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){be(this.persistence.referenceDelegate instanceof rc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mS(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new hw(r=>rc.Vi(r,n),this.serializer)}}class bh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kA.bind(null,this.syncEngine),await lA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uA}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),r=function(i){return new HS(i)}(e.databaseInfo);return function(i,o,c,u){return new QS(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new YS(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Gy(this.syncEngine,n,0),function(){return zy.C()?new zy:new zS}())}createSyncEngine(e,n){return function(s,i,o,c,u,h,p){const g=new gA(s,i,o,c,u,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ue(s);Y(ps,"RemoteStore shutting down."),i.Ia.add(5),await aa(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bh.provider={build:()=>new bh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class PA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y(Vr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(Vr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nd(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await fw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Ar("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Y("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Ar("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Qy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RA(t);Y(Vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>By(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>By(e.remoteStore,s)),t._onlineComponents=e}async function RA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Vr,"Using user provided OfflineComponentProvider");try{await nd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ar("Error using user provided cache. Falling back to memory cache: "+n),await nd(t,new ic)}}else Y(Vr,"Using default OfflineComponentProvider"),await nd(t,new CA(void 0));return t._offlineComponents}async function Pw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Vr,"Using user provided OnlineComponentProvider"),await Qy(t,t._uninitializedComponentsProvider._online)):(Y(Vr,"Using default OnlineComponentProvider"),await Qy(t,new bh))),t._onlineComponents}function jA(t){return Pw(t).then(e=>e.syncEngine)}async function oc(t){const e=await Pw(t),n=e.eventManager;return n.onListen=yA.bind(null,e.syncEngine),n.onUnlisten=xA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wA.bind(null,e.syncEngine),n}function DA(t,e,n={}){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new up({next:m=>{p.Ou(),o.enqueueAndForget(()=>ip(i,g));const T=m.docs.has(c);!T&&m.fromCache?h.reject(new X(M.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&m.fromCache&&u&&u.source==="server"?h.reject(new X(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new ap(Dc(c.path),p,{includeMetadataChanges:!0,ka:!0});return sp(i,g)}(await oc(t),t.asyncQueue,e,n,r)),r.promise}function VA(t,e,n={}){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,h){const p=new up({next:m=>{p.Ou(),o.enqueueAndForget(()=>ip(i,g)),m.fromCache&&u.source==="server"?h.reject(new X(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new ap(c,p,{includeMetadataChanges:!0,ka:!0});return sp(i,g)}(await oc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firestore.googleapis.com",Yy=!0;class Jy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jw,this.ssl=Yy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Yy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fS)throw new X(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BN;switch(r.type){case"firstParty":return new GN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xy.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Xy.delete(n),r.terminate())}(this),Promise.resolve()}}function OA(t,e,n,r={}){var s;t=Dt(t,Bc);const i=bi(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(P_(`https://${u}`),R_("Firestore",!0)),o.host!==jw&&o.host!==u&&Ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!$n(h,c)&&(t._setSettings(h),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=mt.MOCK_USER;else{p=fT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new X(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new mt(m)}t._authCredentials=new qN(new bx(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sa(n,$e._jsonSchema))return new $e(e,r||null,new te(Se.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Ke("string",$e._jsonSchemaVersion),referencePath:Ke("string")};class Ir extends zr{constructor(e,n,r){super(e,n,Dc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new te(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function rs(t,e,...n){if(t=tt(t),Tx("collection","path",e),t instanceof Bc){const r=Se.fromString(e,...n);return dy(r),new Ir(t,null,r)}{if(!(t instanceof $e||t instanceof Ir))throw new X(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return dy(r),new Ir(t.firestore,null,r)}}function Vn(t,e,...n){if(t=tt(t),arguments.length===1&&(e=Of.newId()),Tx("doc","path",e),t instanceof Bc){const r=Se.fromString(e,...n);return uy(r),new $e(t,null,new te(r))}{if(!(t instanceof $e||t instanceof Ir))throw new X(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return uy(r),new $e(t.firestore,t instanceof Ir?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="AsyncQueue";class e0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new mw(this,"async_queue_retry"),this.oc=()=>{const r=td();r&&Y(Zy,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=td();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Mn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ki(e))throw e;Y(Zy,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Hn("INTERNAL UNHANDLED ERROR: ",t0(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=np.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&re(47125,{hc:t0(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function t0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Gn extends Bc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e0(e),this._firestoreClient=void 0,await e}}}function MA(t,e){const n=typeof t=="object"?t:O_(),r=typeof t=="string"?t:Jl,s=Ef(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dT("firestore");i&&OA(s,...i)}return s}function qc(t){if(t._terminated)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LA(t),t._firestoreClient}function LA(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,h,p){return new ck(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Rw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new PA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wt(lt.fromBase64String(e))}catch(n){throw new X(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wt(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sa(e,Wt._jsonSchema))return Wt.fromBase64String(e.bytes)}}Wt._jsonSchemaVersion="firestore/bytes/1.0",Wt._jsonSchema={type:Ke("string",Wt._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xn._jsonSchemaVersion}}static fromJSON(e){if(sa(e,xn._jsonSchema))return new xn(e.latitude,e.longitude)}}xn._jsonSchemaVersion="firestore/geoPoint/1.0",xn._jsonSchema={type:Ke("string",xn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sa(e,wn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new wn(e.vectorValues);throw new X(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wn._jsonSchemaVersion="firestore/vectorValue/1.0",wn._jsonSchema={type:Ke("string",wn._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=/^__.*__$/;class UA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new ia(e,this.data,n,this.fieldTransforms)}}class Dw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:t})}}class Wc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Wc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ac(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Vw(this.Ec)&&FA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class zA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uc(e)}Dc(e,n,r,s=!1){return new Wc({Ec:e,methodName:n,bc:r,path:it.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new zA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ow(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);pp("Data must be an object, but it was:",o,r);const c=Lw(r,o);let u,h;if(i.merge)u=new Ft(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const m=Eh(e,g,n);if(!o.contains(m))throw new X(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Uw(p,m)||p.push(m)}u=new Ft(p),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new UA(new At(c),u,h)}class Kc extends Ci{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}function Mw(t,e,n){return new Wc({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dp extends Ci{_toFieldTransform(e){return new Bf(e.path,new Go)}isEqual(e){return e instanceof dp}}class hp extends Ci{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Mw(this,e,!0),r=this.vc.map(i=>xs(i,n)),s=new fi(r);return new Bf(e.path,s)}isEqual(e){return e instanceof hp&&$n(this.vc,e.vc)}}class fp extends Ci{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Mw(this,e,!0),r=this.vc.map(i=>xs(i,n)),s=new pi(r);return new Bf(e.path,s)}isEqual(e){return e instanceof fp&&$n(this.vc,e.vc)}}function $A(t,e,n,r){const s=t.Dc(1,e,n);pp("Data must be an object, but it was:",s,r);const i=[],o=At.empty();Fr(r,(u,h)=>{const p=mp(e,u,n);h=tt(h);const g=s.gc(p);if(h instanceof Kc)i.push(p);else{const m=xs(h,g);m!=null&&(i.push(p),o.set(p,m))}});const c=new Ft(i);return new Dw(o,c,s.fieldTransforms)}function BA(t,e,n,r,s,i){const o=t.Dc(1,e,n),c=[Eh(e,r,n)],u=[s];if(i.length%2!=0)throw new X(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(Eh(e,i[m])),u.push(i[m+1]);const h=[],p=At.empty();for(let m=c.length-1;m>=0;--m)if(!Uw(h,c[m])){const T=c[m];let A=u[m];A=tt(A);const k=o.gc(T);if(A instanceof Kc)h.push(T);else{const S=xs(A,k);S!=null&&(h.push(T),p.set(T,S))}}const g=new Ft(h);return new Dw(p,g,o.fieldTransforms)}function qA(t,e,n,r=!1){return xs(n,t.Dc(r?4:3,e))}function xs(t,e){if(Fw(t=tt(t)))return pp("Unsupported field value:",e,t),Lw(t,e);if(t instanceof Ci)return function(r,s){if(!Vw(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=xs(c,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Rk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Re.fromDate(r);return{timestampValue:nc(s.serializer,i)}}if(r instanceof Re){const i=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nc(s.serializer,i)}}if(r instanceof xn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wt)return{bytesValue:sw(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof wn)return function(o,c){return{mapValue:{fields:{[jx]:{stringValue:Dx},[Zl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return $f(c.serializer,h)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Cc(r)}`)}(t,e)}function Lw(t,e){const n={};return kx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(r,s)=>{const i=xs(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Fw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof xn||t instanceof Wt||t instanceof $e||t instanceof Ci||t instanceof wn)}function pp(t,e,n){if(!Fw(n)||!Ix(n)){const r=Cc(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Eh(t,e,n){if((e=tt(e))instanceof Hc)return e._internalPath;if(typeof e=="string")return mp(t,e);throw ac("Field path arguments must be of type string or ",t,!1,void 0,n)}const HA=new RegExp("[~\\*/\\[\\]]");function mp(t,e,n){if(e.search(HA)>=0)throw ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hc(...e.split("."))._internalPath}catch{throw ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ac(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new X(M.INVALID_ARGUMENT,c+t+u)}function Uw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WA extends zw{data(){return super.data()}}function Qc(t,e){return typeof e=="string"?mp(t,e):e instanceof Hc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gp{}class Bw extends gp{}function yp(t,e,...n){let r=[];e instanceof gp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof vp).length,c=i.filter(u=>u instanceof Xc).length;if(o>1||o>0&&c>0)throw new X(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Xc extends Bw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xc(e,n,r)}_apply(e){const n=this._parse(e);return qw(e._query,n),new zr(e.firestore,e.converter,hh(e._query,n))}_parse(e){const n=Gc(e.firestore);return function(i,o,c,u,h,p,g){let m;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new X(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){s0(g,p);const A=[];for(const k of g)A.push(r0(u,i,k));m={arrayValue:{values:A}}}else m=r0(u,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||s0(g,p),m=qA(c,o,g,p==="in"||p==="not-in");return Ge.create(h,p,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GA(t,e,n){const r=e,s=Qc("where",t);return Xc._create(s,r,n)}class vp extends gp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)qw(o,u),o=hh(o,u)}(e._query,n),new zr(e.firestore,e.converter,hh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _p extends Bw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _p(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new X(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wo(i,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Si(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function KA(t,e="asc"){const n=e,r=Qc("orderBy",t);return _p._create(r,n)}function r0(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new X(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$x(e)&&n.indexOf("/")!==-1)throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!te.isDocumentKey(r))throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _y(t,new te(r))}if(n instanceof $e)return _y(t,n._key);throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cc(n)}.`)}function s0(t,e){if(!Array.isArray(t)||t.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qw(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QA{convertValue(e,n="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Zl].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Be(o.doubleValue));return new wn(i)}convertGeoPoint(e){return new xn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bo(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);be(uw(r),9688,{name:e});const s=new qo(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ss extends zw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:Ke("string",ss._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class yl extends ss{data(e={}){return super.data(e)}}class is{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new oo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yl(this._firestore,this._userDataWriter,r.key,r,new oo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new yl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new yl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:XA(c.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Of.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){t=Dt(t,$e);const e=Dt(t.firestore,Gn);return DA(qc(e),t._key).then(n=>Kw(e,t,n))}is._jsonSchemaVersion="firestore/querySnapshot/1.0",is._jsonSchema={type:Ke("string",is._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class xp extends QA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function YA(t){t=Dt(t,zr);const e=Dt(t.firestore,Gn),n=qc(e),r=new xp(e);return $w(t._query),VA(n,t._query).then(s=>new is(e,r,t,s))}function Gw(t,e,n){t=Dt(t,$e);const r=Dt(t.firestore,Gn),s=Hw(t.converter,e);return Yc(r,[Ow(Gc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qt.none())])}function ei(t,e,n,...r){t=Dt(t,$e);const s=Dt(t.firestore,Gn),i=Gc(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof Hc?BA(i,"updateDoc",t._key,e,n,r):$A(i,"updateDoc",t._key,e),Yc(s,[o.toMutation(t._key,Qt.exists(!0))])}function JA(t){return Yc(Dt(t.firestore,Gn),[new qf(t._key,Qt.none())])}function ZA(t,e){const n=Dt(t.firestore,Gn),r=Vn(t),s=Hw(t.converter,e);return Yc(n,[Ow(Gc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function Bs(t,...e){var n,r,s;t=tt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||n0(e[o])||(i=e[o++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(n0(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,p;if(t instanceof $e)h=Dt(t.firestore,Gn),p=Dc(t._key.path),u={next:g=>{e[o]&&e[o](Kw(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Dt(t,zr);h=Dt(g.firestore,Gn),p=g._query;const m=new xp(h);u={next:T=>{e[o]&&e[o](new is(h,m,g,T))},error:e[o+1],complete:e[o+2]},$w(t._query)}return function(m,T,A,k){const S=new up(k),_=new ap(T,S,A);return m.asyncQueue.enqueueAndForget(async()=>sp(await oc(m),_)),()=>{S.Ou(),m.asyncQueue.enqueueAndForget(async()=>ip(await oc(m),_))}}(qc(h),p,c,u)}function Yc(t,e){return function(r,s){const i=new Mn;return r.asyncQueue.enqueueAndForget(async()=>bA(await jA(r),s,i)),i.promise}(qc(t),e)}function Kw(t,e,n){const r=n.docs.get(e._key),s=new xp(t);return new ss(t,s,e._key,r,new oo(n.hasPendingWrites,n.fromCache),e.converter)}function i0(){return new dp("serverTimestamp")}function eC(...t){return new hp("arrayUnion",t)}function tC(...t){return new fp("arrayRemove",t)}(function(e,n=!0){(function(s){Ii=s})(Ei),li(new ds("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Gn(new HN(r.getProvider("auth-internal")),new KN(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qo(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Er(iy,oy,e),Er(iy,oy,"esm2017")})();const nC={apiKey:"AIzaSyB9wTEF80N6gQC82A2OLuIij4k4TIxCIlc",authDomain:"fengyuan-handbook.firebaseapp.com",projectId:"fengyuan-handbook",storageBucket:"fengyuan-handbook.firebasestorage.app",messagingSenderId:"611897296630",appId:"1:611897296630:web:24958a6cf6cce57633ced7"},Qw=V_(nC),rd=FN(Qw),Et=MA(Qw);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xw=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...c},u)=>L.createElement("svg",{ref:u,...sC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Xw("lucide",s),...c},[...o.map(([h,p])=>L.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(t,e)=>{const n=L.forwardRef(({className:r,...s},i)=>L.createElement(iC,{ref:i,iconNode:e,className:Xw(`lucide-${rC(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=ae("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=ae("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ae("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=ae("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ae("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=ae("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ae("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=ae("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ae("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ae("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=ae("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ae("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ae("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=ae("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ae("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ae("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ae("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=ae("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),c0=[{id:1,title:"",category:"",link:"#",type:"pdf"},{id:2,title:"(UD)",category:"",link:"#",type:"pdf"},{id:3,title:"",category:"",link:"#",type:"pdf"},{id:4,title:" (High Alert) ",category:"",link:"#",type:"pdf"}],kC=[{id:1,area:" ()",ext:"1151",note:""},{id:2,area:"",ext:"1152",note:""},{id:3,area:" ()",ext:"1153",note:""},{id:4,area:"",ext:"1154",note:""},{id:5,area:"",ext:"1157",note:""},{id:6,area:"TPN",ext:"1158",note:""},{id:7,area:"",ext:"1159",note:""},{id:8,area:"",ext:"1063",note:""},{id:9,area:"",ext:"5151",note:""},{id:10,area:" ()",ext:"3253",note:""},{id:11,area:"",ext:"26XX",note:"26+"},{id:12,area:"",ext:"2646",note:"45"}],SC=["","","","","","",""],AC=()=>{const[t,e]=L.useState(""),[n,r]=L.useState("sop"),[s,i]=L.useState(Array.isArray(c0)?c0.map(k=>({...k,source:"local",id:`local_${k.id}`})):[]),[o,c]=L.useState(SC),[u,h]=L.useState(!0),[p,g]=L.useState(null);L.useEffect(()=>{const k=yp(rs(Et,"sop_articles")),S=Bs(k,_=>{const y=[];_.forEach(N=>{y.push({id:N.id,...N.data()})}),y.length>0&&i(y),h(!1)},_=>{console.error(":",_),h(!1)});return()=>S()},[]),L.useEffect(()=>{(async()=>{try{const S=Vn(Et,"site_settings","sop_config"),_=await Ww(S);if(_.exists()){const y=_.data();y.quickKeywords&&Array.isArray(y.quickKeywords)&&c(y.quickKeywords)}}catch(S){console.error(":",S)}})()},[]);const m=k=>{if(!k)return"bg-gray-100 text-gray-600";const S={:"bg-orange-100 text-orange-800",:"bg-rose-100 text-rose-800",:"bg-red-100 text-red-800",:"bg-stone-100 text-stone-800",:"bg-amber-100 text-amber-800",:"bg-yellow-100 text-yellow-800",:"bg-pink-100 text-pink-800",:"bg-lime-100 text-lime-800",:"bg-emerald-100 text-emerald-800",:"bg-warmGray-100 text-warmGray-800"};if(S[k])return S[k];const _=["bg-orange-200 text-orange-900","bg-amber-200 text-amber-900","bg-yellow-200 text-yellow-900","bg-rose-200 text-rose-900","bg-pink-200 text-pink-900","bg-red-200 text-red-900","bg-stone-200 text-stone-900","bg-lime-200 text-lime-900","bg-fuchsia-100 text-fuchsia-800","bg-violet-100 text-violet-800","bg-indigo-100 text-indigo-800","bg-teal-100 text-teal-800"];let y=0;for(let j=0;j<k.length;j++)y=k.charCodeAt(j)+((y<<5)-y);const N=Math.abs(y)%_.length;return _[N]},T=kC.filter(k=>k.area.includes(t)||k.ext.includes(t)||k.note.includes(t)),A=s.filter(k=>{var S,_;return((S=k.title)==null?void 0:S.toLowerCase().includes(t.toLowerCase()))||((_=k.category)==null?void 0:_.includes(t))}).sort((k,S)=>(k.category||"").localeCompare(S.category||""));return l.jsxs("div",{className:"space-y-0 sm:space-y-6",children:[" ",l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-xl md:shadow-sm md:border border-gray-100",children:[l.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(cc,{className:"w-5 h-5 md:w-6 md:h-6 text-orange-500"}),""]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(cc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"SOP ...",value:t,onChange:k=>e(k.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 outline-none text-base md:text-lg shadow-inner bg-gray-50 md:bg-white"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:"text-sm text-gray-500 flex items-center mr-1",children:""}),o.map((k,S)=>l.jsx("button",{onClick:()=>e(k),className:"px-3 py-1 bg-orange-50 hover:bg-orange-100 text-orange-700 hover:text-orange-900 rounded-full text-xs transition-colors border border-orange-100",children:k},`${k}-${S}`)),t&&l.jsx("button",{onClick:()=>e(""),className:"px-3 py-1 bg-gray-100 text-gray-500 hover:bg-gray-200 rounded-full text-xs transition-colors border border-gray-200 ml-auto",children:""})]})]}),l.jsxs("div",{className:"flex border-b border-gray-200 bg-white md:rounded-t-xl px-0 md:px-2 pt-2 sticky top-16 z-40 shadow-sm md:shadow-none",children:[l.jsxs("button",{onClick:()=>r("sop"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 transition-all relative top-[1px] md:rounded-t-lg ${n==="sop"?"text-orange-600 bg-orange-50 border-b-2 border-orange-500 md:border-b-0 md:border-x md:border-t md:border-orange-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(hr,{className:"w-4 h-4"})," SOP  (",A.length,")"]}),l.jsxs("button",{onClick:()=>r("extension"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 transition-all relative top-[1px] md:rounded-t-lg ${n==="extension"?"text-green-600 bg-green-50 border-b-2 border-green-500 md:border-b-0 md:border-x md:border-t md:border-green-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(vC,{className:"w-4 h-4"}),"  (",T.length,")"]})]}),l.jsxs("div",{className:"min-h-[300px] bg-gray-50 p-2 md:bg-transparent md:p-0",children:[n==="sop"&&l.jsx("div",{className:"space-y-4 animate-fade-in",children:u?l.jsx("p",{className:"text-gray-500 text-center py-4",children:"..."}):A.length===0?l.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-lg border border-dashed border-gray-200",children:""}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 md:gap-4",children:A.map(k=>l.jsxs("div",{onClick:()=>{k.content&&k.content.trim()!==""?g(k):k.attachmentUrl?window.open(k.attachmentUrl,"_blank"):alert(" SOP ")},className:"group relative bg-white p-4 md:p-5 rounded-lg md:rounded-xl shadow-sm md:border border-gray-100 hover:border-orange-300 hover:shadow-md transition-all cursor-pointer overflow-hidden text-left",children:[l.jsx("div",{className:`absolute top-0 left-0 px-3 py-1 text-xs font-bold rounded-br-lg ${m(k.category)}`,children:k.category||""}),l.jsxs("div",{className:"mt-6 flex items-start justify-between",children:[l.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-orange-600 leading-snug line-clamp-2",children:k.title}),l.jsx("div",{className:"flex-shrink-0 ml-3 text-gray-400 group-hover:text-orange-500",children:k.content?l.jsx(hr,{className:"w-5 h-5"}):l.jsx(lc,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"mt-3 flex items-center justify-end text-xs text-gray-400 h-5",children:k.attachmentUrl&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium bg-orange-50 px-2 py-0.5 rounded-full border border-orange-100",children:[l.jsx(e1,{className:"w-3 h-3"})," "]})})]},k.id))})}),n==="extension"&&l.jsx("div",{className:"space-y-4 animate-fade-in",children:T.length===0?l.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-lg border border-dashed border-gray-200",children:""}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 md:gap-3",children:T.map((k,S)=>l.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex flex-col justify-center text-center hover:border-green-400 transition-colors",children:[l.jsx("span",{className:"text-gray-500 text-xs mb-1 font-medium",children:k.area}),l.jsx("span",{className:"text-xl font-mono font-bold text-green-700 tracking-wider",children:k.ext}),k.note&&l.jsx("span",{className:"text-[10px] text-gray-400 mt-1 bg-gray-50 px-1 rounded inline-block mx-auto",children:k.note})]},S))})})]}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>g(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col animate-fade-in text-left",onClick:k=>k.stopPropagation(),children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.title}),l.jsx("button",{onClick:()=>g(null),className:"p-1 rounded-full hover:bg-gray-200 text-gray-500 transition-colors",children:l.jsx(ms,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto whitespace-pre-wrap leading-relaxed text-gray-700 text-lg",children:p.content||""}),l.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center",children:[l.jsx("span",{className:`text-xs px-2 py-1 rounded ${m(p.category)}`,children:p.category}),l.jsxs("div",{className:"flex gap-2",children:[p.attachmentUrl&&l.jsxs("a",{href:p.attachmentUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg text-sm hover:bg-orange-100 transition-colors flex items-center gap-1 font-medium",children:[l.jsx(lc,{className:"w-4 h-4"})," /"]}),l.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700 transition-colors",children:""})]})]})]})})]})},CC=()=>{const[t,e]=L.useState("All"),[n,r]=L.useState([]),[s,i]=L.useState(!0);L.useEffect(()=>{const h=yp(rs(Et,"training_videos"),KA("createdAt","desc")),p=Bs(h,g=>{const m=g.docs.map(T=>({id:T.id,...T.data()}));r(m),i(!1)},g=>{console.error("Error fetching videos:",g),i(!1)});return()=>p()},[]);const o=h=>{var g,m,T;if(!h)return null;let p="";try{if(h.includes("youtube.com/watch?v="))p=(g=h.split("v=")[1])==null?void 0:g.split("&")[0];else if(h.includes("youtu.be/"))p=(m=h.split("youtu.be/")[1])==null?void 0:m.split("?")[0];else{if(h.includes("youtube.com/embed/"))return h;h.includes("m.youtube.com/watch?v=")&&(p=(T=h.split("v=")[1])==null?void 0:T.split("&")[0])}}catch{return null}return p?`https://www.youtube.com/embed/${p}`:null},c=["All",...new Set(n.map(h=>h.category).filter(Boolean))],u=t==="All"?n:n.filter(h=>h.category===t);return l.jsxs("div",{className:"bg-transparent md:bg-white md:rounded-lg md:shadow-md p-0 md:p-6",children:[l.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-4 md:mb-6 flex items-center px-4 md:px-0 pt-4 md:pt-0",children:[l.jsx("span",{className:"bg-purple-100 text-purple-600 p-2 rounded-lg mr-3",children:l.jsx(dC,{className:"w-5 h-5 md:w-6 md:h-6"})}),""]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 md:mb-6 scrollbar-hide px-4 md:px-0",children:c.map(h=>l.jsx("button",{onClick:()=>e(h),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${t===h?"bg-purple-600 text-white shadow-md":"bg-white md:bg-gray-100 text-gray-600 border border-gray-200 md:border-transparent hover:bg-gray-200"}`,children:h},h))}),s?l.jsxs("div",{className:"text-center py-12 text-gray-500 flex flex-col items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mb-2"}),"..."]}):u.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 md:gap-6",children:u.map(h=>{const p=o(h.url);return l.jsxs("div",{className:"group bg-white border-t border-b md:border border-gray-100 md:rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 flex flex-col",children:[l.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:p?l.jsx("iframe",{src:p,title:h.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):l.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-800 text-white flex-col p-4 text-center",children:[l.jsx(NC,{className:"w-12 h-12 mb-3 text-gray-400"}),l.jsx("p",{className:"mb-3 font-medium text-sm",children:""}),l.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm flex items-center gap-2 transition-colors",children:[l.jsx(lc,{className:"w-4 h-4"})," "]})]})}),l.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[l.jsx("div",{className:"flex justify-between items-start mb-2",children:l.jsx("h3",{className:"font-bold text-gray-800 line-clamp-2 group-hover:text-purple-600 transition-colors text-lg leading-snug",children:h.title})}),l.jsx("div",{className:"flex items-center gap-2 mb-3",children:l.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-md font-medium",children:h.category||""})}),h.description&&l.jsx("p",{className:"text-sm text-gray-500 line-clamp-3 mb-4 flex-grow",children:h.description}),p&&l.jsx("div",{className:"pt-3 mt-auto border-t border-gray-50 flex justify-end",children:l.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-400 hover:text-purple-600 flex items-center gap-1",children:[l.jsx(lc,{className:"w-3 h-3"})," "]})})]})]},h.id)})}):l.jsx("div",{className:"text-center py-16 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 mx-4 md:mx-0",children:l.jsx("p",{className:"text-gray-500 font-medium",children:""})})]})},PC=[{id:"leave",title:"",icon:l.jsx(IC,{className:"w-5 h-5 text-rose-500"}),color:"bg-rose-50 border-rose-100",content:l.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-rose-700",children:""}),"  ",l.jsx("strong",{className:"bg-rose-100 px-1 rounded",children:"D6 "})," "]}),l.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-xs",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"D6"}),"  ()"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"D5"}),"  13:30-16:30 "]}),l.jsxs("li",{children:[l.jsx("strong",{children:"TPN/"})," 16:30-17:30 "]})]})]})},{id:"handover",title:"",icon:l.jsx(_C,{className:"w-5 h-5 text-blue-500"}),color:"bg-blue-50 border-blue-100",content:l.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-blue-700",children:""})," "]}),l.jsxs("div",{className:"bg-white p-2 rounded border border-blue-100 text-xs",children:[l.jsx("p",{className:"font-bold mb-1",children:" / 5 "}),l.jsxs("p",{children:["DP1TP1  ",l.jsx("span",{className:"text-red-500 font-bold",children:"21:25 "})," "]})]})]})},{id:"meeting",title:"",icon:l.jsx(n1,{className:"w-5 h-5 text-purple-500"}),color:"bg-purple-50 border-purple-100",content:l.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"bg-white/50 rounded-lg p-2 border border-purple-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-[10px] font-bold bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:""}),l.jsx("span",{className:"text-[10px] text-slate-400",children:"* D5 08:30 "})]}),l.jsx("div",{className:"grid grid-cols-4 gap-1 text-center",children:["D1","D5","D6","D7","D8","D9","TP1","DP2","DP1","D","","TPN"].map(t=>l.jsx("span",{className:"text-xs font-medium text-slate-700 bg-white rounded border border-purple-50 py-1",children:t},t))})]}),l.jsxs("div",{className:"px-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-1",children:l.jsx("span",{className:"text-[10px] font-bold bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full",children:" ()"})}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:"D2, D3, D4, TD, ED, RD, TS1, SP, A, NN"})]})]})}],u0={D1:{title:"D1 ",color:"blue",timeline:[{time:" AM",task:" A  / ",desc:""},{time:" PM",task:" /  / ",desc:""}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:" AM",task:" /  / ",desc:"UD"},{time:"11:30",task:" M2",desc:" M2 "},{time:" PM",task:"",desc:"17W"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:" AM",task:" / M2 ",desc:""},{time:" PM",task:"M2  / ",desc:" (17W)"}]},D4:{title:"D4  ()",color:"sky",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:" / M2 ",desc:""},{time:"17:30",task:" A / ",desc:""}]},RD:{title:"RD  ()",color:"amber",timeline:[{time:" AM",task:"Check",desc:""},{time:"12:00",task:"",desc:""},{time:"13:30",task:"",desc:""}]},D5:{title:"D5 ",color:"teal",timeline:[{time:" AM",task:"M2  /  /  ED",desc:""},{time:" PM",task:" /  ED / 17W ",desc:""}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"Check",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:" AM",task:"M2  / ",desc:""},{time:" PM",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:" / ",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:" AM",task:" / A ",desc:" A "},{time:" PM",task:"",desc:""}]},TD:{title:"TD ",color:"slate",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:"",desc:""}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-16:30",task:"",desc:""}]},D:{title:"D ",color:"purple",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:" AM",task:"B  TPN / ",desc:" TPN  B "}]},PSY:{title:"PSY  ()",color:"violet",timeline:[{time:" AM",task:"B  / ",desc:""},{time:" PM",task:" / PSY ",desc:""}]},PRN:{title:"PRN ",color:"gray",timeline:[{time:"",task:" /  / ",desc:""}]}},d0={D1:{title:"D1 ",color:"blue",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"//",desc:"/()"}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:"07:40-08:30",task:"//",desc:""},{time:"08:30-11:30",task:"UD//",desc:""},{time:"11:30-12:00",task:" M2",desc:" M2 "},{time:"12:30-15:00",task:"",desc:""},{time:"15:00-16:10",task:"17W//",desc:"17"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-11:30",task:"M2 ",desc:" M2 "},{time:"12:00-13:30",task:"M2 ",desc:" M2 "},{time:"13:30-16:30",task:"",desc:""}]},D4:{title:"D4 ",color:"sky",timeline:[{time:"09:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"M2 ",desc:"13:30-14:00  M2 "},{time:"17:30-18:00",task:" A / ",desc:" A "}]},D5:{title:"D5 ",color:"teal",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"12:30-16:30",task:" A ",desc:" A "}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:"08:30-12:30",task:" A / C",desc:" A  C "},{time:"13:30-17:30",task:"",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-09:30",task:"M1 ",desc:" M1 "},{time:"09:30-11:30",task:"",desc:""},{time:"12:00-13:30",task:"",desc:""},{time:"13:30-16:30",task:"",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:"08:00-08:30",task:" A ",desc:" A "},{time:"08:30-12:00",task:" A ",desc:" A "},{time:"12:30-13:30",task:"",desc:""},{time:"13:00-16:30",task:"()",desc:""}]},TP1:{title:"TP1 M2//",color:"rose",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""},{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"W2-W5 ",desc:"16:30-17:30  D1 TP1  A "}]},DP2:{title:"DP2 //M2",color:"violet",timeline:[{time:"08:00-08:30",task:" B ",desc:" B "},{time:"08:30-12:00",task:"+",desc:""},{time:"13:30-16:30",task:"",desc:""},{time:"17:30-20:30",task:"M2 ",desc:" M2 "}]},SP:{title:"SP ",color:"fuchsia",timeline:[{time:"14:00-17:00",task:"/",desc:""},{time:"17:30-21:30",task:"",desc:""},{time:"21:30-",task:"/",desc:""}]},P1:{title:"P1 ",color:"slate",timeline:[{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"",desc:"DP1D5P1D1P1"}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-11:30",task:"",desc:""},{time:"11:30-12:00",task:"",desc:""},{time:"12:00-16:30",task:"",desc:""}]},HD:{title:"HD ",color:"orange",timeline:[{time:"08:00-16:00",task:"",desc:""},{time:"",task:"07:45-08:00 / 16:00-16:15",desc:""}]},A:{title:"A ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:""},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},HA:{title:"HA ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:" A "},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},NN:{title:"NN ",color:"slate",timeline:[{time:"00:00-08:00",task:"",desc:""},{time:"",task:"23:45-00:00 / 08:00-08:15",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:"08:30-12:30",task:"B TPN",desc:" B  TPN () "},{time:"",task:"A ",desc:" A "}]},D:{title:"D ",color:"purple",timeline:[{time:"08:00-12:00",task:"",desc:""},{time:"",task:" / A ",desc:" A "}]},RD:{title:"RD /",color:"orange",timeline:[{time:"08:30-12:00",task:"",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-14:00",task:" (17W)",desc:" 17 "},{time:"14:30-16:00",task:" ER",desc:""},{time:"16:00-16:30",task:"ER ",desc:""},{time:"16:30-17:30",task:"",desc:""}]},PSY:{title:"PSY ",color:"violet",timeline:[{time:"08:00-08:30",task:" D ",desc:" D "},{time:"08:30-12:00",task:"D ",desc:" D  () "},{time:"12:30-13:30",task:"",desc:""},{time:"13:30-16:00",task:"PSY ",desc:""},{time:"16:00-16:30",task:" A ",desc:" A "}]},TS1:{title:"TS1 ",color:"yellow",timeline:[{time:"08:30-12:30",task:"",desc:""},{time:"",task:"",desc:"(A)"}]},TD:{title:"TD ",color:"slate",timeline:[{time:"08:30-12:00",task:"/",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"",desc:"()"}]}};function RC(){const[t,e]=L.useState(new Date),[n,r]=L.useState(null),[s,i]=L.useState(null),[o,c]=L.useState(null),[u,h]=L.useState(!1),[p,g]=L.useState(!1);L.useEffect(()=>{const _=setInterval(()=>e(new Date),6e4);return()=>clearInterval(_)},[]);const m=_=>{if(!_||!_.includes("-"))return!1;const[y,N]=_.split("-"),j=t,z=j.getHours()*60+j.getMinutes(),$=w=>{const[E,C]=w.split(":").map(Number);return E*60+C},b=$(y);let x=$(N);return x<b&&(x+=24*60),z>=b&&z<x},T=s?d0[s]:null,A=o?u0[o]:null,k=_=>{i(y=>y===_?null:_)},S=_=>{c(y=>y===_?null:_)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[l.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-600",children:l.jsx(oC,{className:"w-5 h-5"})}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),u?l.jsx(vl,{className:"w-5 h-5 text-slate-400"}):l.jsx(yi,{className:"w-5 h-5 text-slate-400"})]}),u&&l.jsx("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(d0).map(_=>l.jsx("button",{onClick:()=>k(_),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${s===_?"bg-white border-indigo-200 text-indigo-600 shadow-sm scale-105 ring-2 ring-indigo-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:_},_))})})]}),T&&l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:l.jsx(Yw,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Shift Duty"}),l.jsx("h4",{className:"font-bold text-slate-800",children:T.title})]})]}),l.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:T.timeline.map((_,y)=>{const N=m(_.time);return l.jsxs("div",{className:`relative transition-all duration-500 ${N?"scale-105 origin-left":""}`,children:[l.jsx("div",{className:`absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm transition-all duration-300 ${N?"ring-4 ring-red-100 scale-110":""}`,style:{backgroundColor:N?"#ef4444":`var(--color-${T.color}-500, #3b82f6)`},children:N&&l.jsx("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-75"})}),l.jsxs("div",{className:`rounded-xl p-3 border transition-all duration-300 ${N?"bg-red-50/50 border-red-100 shadow-sm":"border-transparent"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsxs("span",{className:`text-[10px] font-black px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${N?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:[N&&l.jsx(Zw,{className:"w-3 h-3"}),_.time]}),l.jsx("h5",{className:`text-sm font-bold transition-colors ${N?"text-red-900":"text-slate-700"}`,children:_.task})]}),l.jsx("p",{className:`text-xs leading-relaxed pl-1 transition-colors ${N?"text-slate-700 font-medium":"text-slate-500"}`,children:_.desc})]})]},y)})})]}),l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[l.jsxs("button",{onClick:()=>g(!p),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-600",children:l.jsx(o0,{className:"w-5 h-5"})}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),p?l.jsx(vl,{className:"w-5 h-5 text-slate-400"}):l.jsx(yi,{className:"w-5 h-5 text-slate-400"})]}),p&&l.jsxs("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:[l.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.keys(u0).map(_=>l.jsx("button",{onClick:()=>S(_),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${o===_?"bg-white border-amber-200 text-amber-600 shadow-sm scale-105 ring-2 ring-amber-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:_},_))}),A&&l.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-amber-50 text-amber-600",children:l.jsx(o0,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Holiday Shift"}),l.jsx("h4",{className:"font-bold text-slate-800",children:A.title})]})]}),l.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:A.timeline.map((_,y)=>l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm",style:{backgroundColor:`var(--color-${A.color}-500, #f59e0b)`}}),l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-[10px] font-black text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded",children:_.time}),l.jsx("h5",{className:"text-sm font-bold text-slate-700",children:_.task})]}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:_.desc})]},y))})]})]})]}),l.jsxs("div",{className:"border-t border-slate-100 pt-6 space-y-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[l.jsx(vi,{className:"w-5 h-5 text-slate-400"}),""]})}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:PC.map(_=>{const y=n===_.id;return l.jsxs("div",{className:`rounded-2xl border transition-all duration-300 overflow-hidden ${y?`bg-white shadow-md ${_.color}`:"bg-white border-slate-100"}`,children:[l.jsxs("button",{onClick:()=>r(y?null:_.id),className:"w-full flex items-center justify-between p-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-xl shadow-sm transition-colors ${y?"bg-white":"bg-slate-50"}`,children:_.icon}),l.jsx("h4",{className:`font-bold text-sm ${y?"text-slate-800":"text-slate-600"}`,children:_.title})]}),y?l.jsx(lC,{className:"w-4 h-4 text-slate-400"}):l.jsx(vl,{className:"w-4 h-4 text-slate-300"})]}),y&&l.jsx("div",{className:"px-4 pb-4 animate-in slide-in-from-top-1",children:l.jsx("div",{className:"pt-2 border-t border-slate-100/50",children:_.content})})]},_.id)})})]})]})}const Ka={form_title:" ",version:"1140906",sections:[{id:"section_background",title:"",description:"",fields:[{id:"edu_university",label:"",type:"text",required:!0},{id:"edu_system",label:"",type:"radio",options:["4","5","6"],required:!0},{id:"edu_uni_grad_year",label:"- ()",type:"number",placeholder:": 110",width:"50%",required:!0},{id:"edu_uni_grad_month",label:"-",type:"number",placeholder:"1~12",width:"50%",required:!0},{id:"edu_grad_school",label:"",type:"text",required:!1},{id:"edu_grad_degree",label:"",type:"radio",options:["","",""],required:!1},{id:"edu_grad_year",label:"- ()",type:"number",placeholder:": 112",width:"50%",required:!1},{id:"edu_grad_month",label:"-",type:"number",placeholder:"1~12",width:"50%",required:!1},{id:"lang_english",label:" ()",type:"radio",options:["","","",""],has_other_text:!0,required:!0}]},{id:"section_work_experience",title:"",description:" ()",is_dynamic_list:!0,add_button_text:"",fields:[{id:"work_org",label:"/",type:"text",col_span:4},{id:"start_year",label:"-",type:"number",placeholder:"110",col_span:2},{id:"start_month",label:"-",type:"number",placeholder:"1",col_span:2},{id:"end_year",label:"-",type:"number",placeholder:"112",col_span:2},{id:"end_month",label:"-",type:"number",placeholder:"12",col_span:2}]},{id:"section_learning_history",title:"",description:" ()",fields:[{id:"history_outpatient",label:"1. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","","","","",""],has_other_text:!0}]},{id:"history_inpatient",label:"2. UD",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","","","","",""],has_other_text:!0}]},{id:"history_consult",label:"3. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","EBM","",""],has_other_text:!0}]},{id:"history_management",label:"4. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","",""],has_other_text:!0}]},{id:"history_special",label:"5. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","TPN",""],has_other_text:!0}]},{id:"history_clinical",label:"6. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","ADR","",""],has_other_text:!0}]},{id:"history_other",label:"",type:"group",sub_fields:[{id:"content",label:"",type:"text"},{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""}]}]},{id:"section_assessment",title:"",description:" ()",access_control:"teacher_admin",sub_sections:[{title:"A. ",fields:[{id:"assess_interview",label:"",type:"score_radio",options:["","",""]},{id:"assess_written_test",label:"",type:"score_radio",options:["","",""]},{id:"assess_ksa",label:"KSA",type:"score_radio",options:["","",""]}]},{title:"B. ",layout:"table",columns:["","",""],rows:[{id:"plan_dispensing",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"7",value:6},{label:"",input_type:"number"}]}},{id:"plan_clinical",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"2",value:6},{label:"",input_type:"number"}]}},{id:"plan_consult",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"2",value:3},{label:"",input_type:"number"}]}},{id:"plan_manage",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"1",value:1},{label:"",input_type:"number"}]}},{id:"plan_tcm",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:1},{label:"",input_type:"number"}]}},{id:"plan_care",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:3},{label:"",input_type:"number"}]}},{id:"plan_special",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:3},{label:"",input_type:"number"}]}}]}]}]},jC=({studentEmail:t,studentName:e,userRole:n,currentUserEmail:r,currentUserName:s,gasApiUrl:i})=>{const[o,c]=L.useState("menu"),[u,h]=L.useState({}),[p,g]=L.useState("draft"),[m,T]=L.useState(!1),[A,k]=L.useState(!1),[S,_]=L.useState(null),[y,N]=L.useState({teacherName:"",teacherDate:"",adminName:"",adminDate:""}),j=n==="admin",z=n==="teacher",$=n==="student",b=p==="approved"||p==="assessed"&&!j||p==="submitted"&&$;L.useEffect(()=>{t&&x()},[o,t]),L.useEffect(()=>{const D=new Date().toISOString().split("T")[0];z&&p==="submitted"&&!y.teacherName&&N(W=>({...W,teacherName:s||"",teacherDate:D})),j&&p==="assessed"&&!y.adminName&&N(W=>({...W,adminName:s||"",adminDate:D}))},[n,z,j,p,s]);const x=async()=>{T(!0);try{const W=await(await fetch(`${i}?type=getAssessment&studentEmail=${t}&formType=pre_training`)).json(),Z=W.formData||{};h(Z),g(W.status||"draft"),_(W.updatedAt?new Date(W.updatedAt):null),N({teacherName:Z.sign_teacher_name||"",teacherDate:Z.sign_teacher_date||"",adminName:Z.sign_admin_name||"",adminDate:Z.sign_admin_date||""})}catch(D){console.error("",D)}T(!1)},w=async D=>{k(!0);const W=D||p,Z=new Date().toISOString().split("T")[0];let O={...u};if(D==="submitted"&&(O.sign_student_date=Z),D==="assessed"){if(!y.teacherDate){alert(""),k(!1);return}O.sign_teacher_name=s,O.sign_teacher_date=y.teacherDate}if(D==="approved"){if(!y.adminDate){alert(""),k(!1);return}O.sign_admin_name=s,O.sign_admin_date=y.adminDate}const Q={type:"saveAssessment",formType:"pre_training",studentEmail:t,studentName:e,formData:O,status:W,updatedBy:r};try{await fetch(i,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(Q)}),g(W),h(O),_(new Date);let U="";D==="submitted"&&(U=""),D==="assessed"&&(U=""),D==="approved"&&(U=""),alert(U),(D==="approved"||D==="submitted"||D==="assessed")&&c("menu")}catch(U){console.error("",U),alert("")}k(!1)},E=(D,W,Z)=>{b||h(O=>({...O,[D]:{...O[D],[W]:Z}}))},C=(D,W,Z,O)=>{var ee;if(b)return;const U=[...((ee=u[D])==null?void 0:ee.list)||[]];U[W]||(U[W]={}),U[W][Z]=O,h(se=>({...se,[D]:{...se[D],list:U}}))},P=D=>{var Z;if(b)return;const W=((Z=u[D])==null?void 0:Z.list)||[];h(O=>({...O,[D]:{...O[D],list:[...W,{}]}}))},I=(D,W)=>{var Q;if(b)return;const O=(((Q=u[D])==null?void 0:Q.list)||[]).filter((U,ee)=>ee!==W);h(U=>({...U,[D]:{...U[D],list:O}}))},H=(D,W,Z,O,Q)=>{var se,fe;const U=b||Q,ee=D.width?{width:D.width}:{width:"100%"};switch(D.type){case"text":case"number":return l.jsx("input",{type:D.type,style:ee,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",value:Z||"",onChange:le=>O(D.id,le.target.value),disabled:U,placeholder:D.placeholder});case"textarea":return l.jsx("textarea",{style:ee,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",rows:3,value:Z||"",onChange:le=>O(D.id,le.target.value),disabled:U});case"radio":return l.jsxs("div",{className:"flex flex-wrap gap-4",children:[D.options.map(le=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${W}_${D.id}`,value:le,checked:Z===le,onChange:ke=>O(D.id,ke.target.value),disabled:U,className:"w-4 h-4 text-indigo-600"}),l.jsx("span",{className:"text-gray-700",children:le})]},le)),D.has_other_text&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"radio",name:`${W}_${D.id}`,value:"",checked:Z==="",onChange:le=>O(D.id,""),disabled:U}),l.jsx("span",{className:"text-gray-700",children:":"}),l.jsx("input",{type:"text",className:"border-b border-gray-300 focus:border-indigo-500 outline-none px-1 disabled:bg-transparent",disabled:U||Z!=="",value:((se=u[W])==null?void 0:se[`${D.id}_other`])||"",onChange:le=>O(`${D.id}_other`,le.target.value)})]})]});case"score_radio":return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-bold text-gray-600",children:":"}),l.jsx("input",{type:"number",placeholder:"0-100",className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100 text-center",value:((fe=u[W])==null?void 0:fe[`${D.id}_score`])||"",onChange:le=>O(`${D.id}_score`,le.target.value),disabled:U})]}),l.jsx("div",{className:"flex flex-wrap gap-4",children:D.options.map(le=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${W}_${D.id}`,value:le,checked:Z===le,onChange:ke=>O(D.id,ke.target.value),disabled:U,className:"w-4 h-4 text-indigo-600"}),l.jsx("span",{className:"text-gray-700",children:le})]},le))})]});case"checkbox":const Fe=Array.isArray(Z)?Z:[];return l.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:D.options.map(le=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",value:le,checked:Fe.includes(le),disabled:U,onChange:ke=>{const K=ke.target.checked?[...Fe,le]:Fe.filter(ie=>ie!==le);O(D.id,K)},className:"w-4 h-4 text-indigo-600 rounded"}),l.jsx("span",{className:"text-gray-700",children:le})]},le))});default:return null}};if(o==="menu"){const D=["submitted","assessed","approved"].includes(p),W=["assessed","approved"].includes(p),Z=p==="approved";return l.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-4 flex items-center gap-2",children:[l.jsx(wp,{className:"w-5 h-5 text-indigo-600"}),""]}),l.jsxs("div",{onClick:()=>c("form"),className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md hover:border-indigo-300 transition-all cursor-pointer overflow-hidden group",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 group-hover:bg-indigo-50 transition-colors",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-indigo-600",children:""}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["",Ka.version]})]}),l.jsx(yi,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600"})]}),l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${D?"bg-green-500":"bg-gray-300"}`}),l.jsx("span",{children:""}),u.sign_student_date&&l.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:u.sign_student_date})]}),l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${D?"bg-green-100 text-green-700":p==="draft"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-400"}`,children:D?"":""})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-gray-50 pt-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${W?"bg-green-500":"bg-gray-300"}`}),l.jsx("span",{children:""}),u.sign_teacher_name&&l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-bold text-xs",children:["[",u.sign_teacher_name,"]"]}),l.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:u.sign_teacher_date})]})]}),l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${W?"bg-green-100 text-green-700":D&&!W?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-400"}`,children:W?"":D?"":"--"})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-gray-50 pt-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${Z?"bg-green-500":"bg-gray-300"}`}),l.jsx("span",{children:""}),u.sign_admin_name&&l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-bold text-xs",children:["[",u.sign_admin_name,"]"]}),l.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:u.sign_admin_date})]})]}),l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${Z?"bg-green-100 text-green-700":W&&!Z?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-400"}`,children:Z?"":W?"":"--"})]})]})]})]})}return m?l.jsxs("div",{className:"p-8 text-center text-gray-500 flex justify-center",children:[l.jsx(Nr,{className:"animate-spin mr-2"})," ..."]}):l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-12 animate-in slide-in-from-right-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsxs("button",{onClick:()=>c("menu"),className:"flex items-center gap-1 text-gray-500 hover:text-indigo-600 font-bold text-sm bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx(Jw,{className:"w-4 h-4"})," "]}),l.jsx("span",{className:"text-gray-300",children:"|"}),l.jsxs("span",{className:"text-gray-700 font-medium",children:[e," "]})]}),l.jsxs("div",{className:`p-4 rounded-lg flex justify-between items-center ${p==="approved"?"bg-green-50 border border-green-200 text-green-800":p==="assessed"?"bg-purple-50 border border-purple-200 text-purple-800":p==="submitted"?"bg-blue-50 border border-blue-200 text-blue-800":"bg-gray-50 border border-gray-200 text-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[p==="approved"?l.jsx(Th,{className:"w-5 h-5"}):l.jsx(pC,{className:"w-5 h-5"}),l.jsxs("span",{className:"font-bold",children:["",p==="draft"&&" ()",p==="submitted"&&" ()",p==="assessed"&&" ()",p==="approved"&&" ()"]})]}),S&&l.jsxs("span",{className:"text-xs opacity-70",children:["",S.toLocaleString()]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"bg-indigo-600 px-6 py-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:Ka.form_title}),l.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["",Ka.version]})]}),l.jsx("div",{className:"p-6 md:p-8 space-y-10",children:Ka.sections.map(D=>{var Z;const W=D.access_control==="teacher_admin"&&$;return l.jsxs("div",{className:"border-b border-gray-100 pb-8 last:border-0 last:pb-0",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:D.title}),D.description&&l.jsx("p",{className:"text-sm text-gray-500 mb-6",children:D.description}),W&&l.jsxs("div",{className:"bg-gray-100 text-gray-500 p-3 rounded mb-4 text-sm flex items-center gap-2",children:[l.jsx(Th,{className:"w-4 h-4"})," "]}),D.fields&&!D.is_dynamic_list&&l.jsx("div",{className:"grid grid-cols-1 gap-6",children:D.fields.map(O=>{var Q;return O.type==="group"?l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsx("label",{className:"font-bold text-gray-700 block mb-3",children:O.label}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.sub_fields.map(U=>{var ee;return l.jsxs("div",{className:U.type==="checkbox"?"md:col-span-2":"",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:U.label}),H(U,D.id,(ee=u[D.id])==null?void 0:ee[`${O.id}_${U.id}`],(se,fe)=>E(D.id,`${O.id}_${se}`,fe),W)]},U.id)})})]},O.id):l.jsxs("div",{style:{display:O.width?"inline-block":"block",width:O.width?O.width:"100%",paddingRight:"1rem"},children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[O.label," ",O.required&&l.jsx("span",{className:"text-red-500",children:"*"})]}),H(O,D.id,(Q=u[D.id])==null?void 0:Q[O.id],(U,ee)=>E(D.id,U,ee),W)]},O.id)})}),D.is_dynamic_list&&l.jsxs("div",{className:"space-y-4",children:[(((Z=u[D.id])==null?void 0:Z.list)||[]).map((O,Q)=>l.jsxs("div",{className:"relative p-4 border border-gray-200 rounded-lg bg-gray-50 grid grid-cols-1 md:grid-cols-12 gap-4",children:[D.fields.map(U=>l.jsxs("div",{className:`md:col-span-${U.col_span||12} col-span-12`,children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:U.label}),H(U,D.id,O[U.id],(ee,se)=>C(D.id,Q,ee,se),W)]},U.id)),!b&&!W&&l.jsx("button",{onClick:()=>I(D.id,Q),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500",children:l.jsx(EC,{className:"w-4 h-4"})})]},Q)),!b&&!W&&l.jsxs("button",{onClick:()=>P(D.id),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-500 hover:text-indigo-600 font-bold flex items-center justify-center gap-2 transition-colors",children:[l.jsx(bp,{className:"w-5 h-5"})," ",D.add_button_text]})]}),D.sub_sections&&l.jsx("div",{className:"space-y-8",children:D.sub_sections.map((O,Q)=>l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[l.jsx("h4",{className:"font-bold text-indigo-700 mb-4 pb-2 border-b border-gray-100",children:O.title}),O.fields&&l.jsx("div",{className:"space-y-4",children:O.fields.map(U=>{var ee;return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[l.jsxs("label",{className:"text-sm font-bold text-gray-700 min-w-[80px]",children:[U.label,":"]}),l.jsx("div",{className:"flex-1",children:H(U,D.id,(ee=u[D.id])==null?void 0:ee[U.id],(se,fe)=>E(D.id,se,fe),W)})]},U.id)})}),O.layout==="table"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-gray-50 text-gray-700 font-bold border-b border-gray-200",children:l.jsx("tr",{children:O.columns.map(U=>l.jsx("th",{className:"p-3",children:U},U))})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:O.rows.map(U=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-3 font-medium text-gray-800",children:U.unit}),l.jsx("td",{className:"p-3",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:U.assessment.options.map(ee=>{var se;return l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${U.id}_assess`,value:ee,checked:((se=u[D.id])==null?void 0:se[`${U.id}_assess`])===ee,onChange:fe=>E(D.id,`${U.id}_assess`,fe.target.value),disabled:b||W,className:"text-indigo-600"}),l.jsx("span",{children:ee})]},ee)})})}),l.jsx("td",{className:"p-3",children:l.jsx("div",{className:"flex flex-col gap-2",children:U.planning.options.map((ee,se)=>{var fe,Fe,le;return l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:`${U.id}_plan`,value:ee.label,checked:((fe=u[D.id])==null?void 0:fe[`${U.id}_plan`])===ee.label,onChange:ke=>E(D.id,`${U.id}_plan`,ke.target.value),disabled:b||W,className:"text-indigo-600"}),l.jsx("span",{children:ee.label}),ee.input_type==="number"&&l.jsx("input",{type:"number",className:"w-16 border-b border-gray-300 text-center focus:border-indigo-500 outline-none p-0 disabled:bg-transparent",disabled:b||W||((Fe=u[D.id])==null?void 0:Fe[`${U.id}_plan`])!==ee.label,value:((le=u[D.id])==null?void 0:le[`${U.id}_plan_custom`])||"",onChange:ke=>E(D.id,`${U.id}_plan_custom`,ke.target.value)})]},se)})})})]},U.id))})]})})]},Q))})]},D.id)})}),l.jsxs("div",{className:"bg-gray-50 border-t border-gray-200",children:[p==="submitted"&&(z||j)&&l.jsxs("div",{className:"px-6 py-4 bg-blue-50 border-b border-blue-100",children:[l.jsxs("h4",{className:"font-bold text-blue-800 mb-3 flex items-center gap-2",children:[l.jsx(Kn,{className:"w-4 h-4"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1",children:""}),l.jsx("input",{type:"text",value:y.teacherName,disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100 cursor-not-allowed"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1",children:""}),l.jsx("input",{type:"date",value:y.teacherDate,onChange:D=>N({...y,teacherDate:D.target.value}),className:"w-full px-3 py-2 border rounded-md"})]})]})]}),p==="assessed"&&j&&l.jsxs("div",{className:"px-6 py-4 bg-purple-50 border-b border-purple-100",children:[l.jsxs("h4",{className:"font-bold text-purple-800 mb-3 flex items-center gap-2",children:[l.jsx(Zc,{className:"w-4 h-4"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-purple-600 mb-1",children:""}),l.jsx("input",{type:"text",value:y.adminName,disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100 cursor-not-allowed"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-purple-600 mb-1",children:""}),l.jsx("input",{type:"date",value:y.adminDate,onChange:D=>N({...y,adminDate:D.target.value}),className:"w-full px-3 py-2 border rounded-md"})]})]})]}),l.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3",children:[!b&&l.jsxs("button",{onClick:()=>w(p),disabled:A,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium flex items-center gap-2",children:[A?l.jsx(Nr,{className:"w-4 h-4 animate-spin"}):l.jsx(eu,{className:"w-4 h-4"})," "]}),p==="draft"&&$&&l.jsxs("button",{onClick:()=>{window.confirm("")&&w("submitted")},disabled:A,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium flex items-center gap-2",children:[l.jsx(Cn,{className:"w-4 h-4"})," "]}),p==="submitted"&&(z||j)&&l.jsxs("button",{onClick:()=>{window.confirm("")&&w("assessed")},disabled:A,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2",children:[l.jsx(Cn,{className:"w-4 h-4"})," "]}),p==="assessed"&&j&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>w("submitted"),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium",children:""}),l.jsxs("button",{onClick:()=>{window.confirm("")&&w("approved")},disabled:A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium flex items-center gap-2",children:[l.jsx(Cn,{className:"w-4 h-4"})," "]})]}),p==="approved"&&l.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-2",children:[l.jsx(Cn,{className:"w-5 h-5"})," "]})]})]})]})]})},r1=[{value:"2a",label:"Level 2a: "},{value:"2b",label:"Level 2b: "},{value:"3a",label:"Level 3a: "},{value:"3b",label:"Level 3b: "},{value:"3c",label:"Level 3c: "},{value:"4",label:"Level 4: "},{value:"5",label:"Level 5: "}],Ih=[{value:"unobserved",label:""},{value:"below_expectation",label:""},{value:"meet_expectation",label:""},{value:"exceed_expectation",label:""}],DC=[{id:"EPA_01",title:"EPA 1. ",description:"",check_items:["","","",""]},{id:"EPA_02",title:"EPA 2. ",description:"",check_items:["","","",""]},{id:"EPA_03",title:"EPA 3. ",description:"",check_items:["","","",""]},{id:"EPA_04",title:"EPA 4. ",description:"",check_items:["","","",""]},{id:"EPA_05",title:"EPA 5. ",description:"",check_items:["","","","",""]},{id:"EPA_06",title:"EPA 6. (TDM)",description:"(TDM)",check_items:["","","",""]},{id:"EPA_07",title:"EPA 7. ",description:"",check_items:["","","",""]},{id:"EPA_08",title:"EPA 8. ",description:"",check_items:["","","","",""]}],VC=({epa:t,studentName:e,teacherName:n,onClose:r,onSubmit:s,isSubmitting:i})=>{const[o,c]=L.useState(new Date().toISOString().split("T")[0]),[u,h]=L.useState(""),[p,g]=L.useState({}),[m,T]=L.useState(""),A=(S,_)=>{g(y=>({...y,[S]:_}))},k=()=>{if(!u)return alert("");if(!t.check_items.every(y=>p[y]))return alert("");const _={epa_id:t.id,epa_title:t.title,date:o,level:u,checklist:p,feedback_content:m,teacher_name:n||"Unknown Teacher"};s(_)};return l.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4 animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"px-6 py-4 border-b bg-gray-50 flex justify-between items-center flex-shrink-0",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[l.jsx("span",{className:"bg-indigo-600 text-white text-xs px-2 py-1 rounded",children:""}),t.title]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Kn,{className:"w-4 h-4"})," ",e]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Kn,{className:"w-4 h-4"})," ",n]})]})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:l.jsx(ms,{className:"w-6 h-6 text-gray-500"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[l.jsx("section",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Jc,{className:"w-4 h-4 text-indigo-600"})," ()"]}),l.jsx("input",{type:"date",value:o,onChange:S=>c(S.target.value),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none font-medium text-gray-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),l.jsx("p",{className:"text-sm text-gray-600 bg-white p-3 rounded-lg border border-blue-200",children:t.description})]})]})}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:r1.map(S=>l.jsxs("label",{className:`relative flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all ${u===S.value?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[l.jsx("input",{type:"radio",name:"trust_level",value:S.value,checked:u===S.value,onChange:()=>h(S.value),className:"w-5 h-5 text-indigo-600 border-gray-300 focus:ring-indigo-500"}),l.jsx("span",{className:"ml-3 font-medium text-gray-800",children:S.label.split(":")[0]}),l.jsxs("span",{className:"ml-2 text-gray-600 text-sm",children:[" - ",S.label.split(":")[1]]})]},S.value))})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),l.jsx("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-gray-100 text-gray-700 font-bold border-b",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-1/3",children:""}),Ih.map(S=>l.jsx("th",{className:"p-4 text-center text-xs w-[16%]",children:S.label},S.value))]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:t.check_items.map((S,_)=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"p-4 font-medium text-gray-800",children:S}),Ih.map(y=>l.jsx("td",{className:"p-4 text-center",children:l.jsx("input",{type:"radio",name:`check_${_}`,checked:p[S]===y.value,onChange:()=>A(S,y.value),className:"w-4 h-4 text-indigo-600 cursor-pointer"})},y.value))]},_))})]})})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),l.jsx("textarea",{className:"w-full h-32 p-4 border rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none resize-none text-gray-700 bg-gray-50",placeholder:"...",value:m,onChange:S=>T(S.target.value)})]})]}),l.jsxs("div",{className:"p-4 border-t bg-white flex justify-end gap-3 flex-shrink-0",children:[l.jsx("button",{onClick:r,className:"px-6 py-2.5 rounded-lg border text-gray-600 font-bold hover:bg-gray-50 transition-colors",children:""}),l.jsx("button",{onClick:k,disabled:i,className:"px-8 py-2.5 rounded-lg bg-indigo-600 text-white font-bold hover:bg-indigo-700 shadow-lg disabled:opacity-50 flex items-center gap-2",children:i?"...":l.jsxs(l.Fragment,{children:[l.jsx(eu,{className:"w-5 h-5"})," "]})})]})]})})},OC=({studentEmail:t,studentName:e,isTeacher:n,userProfile:r,apiUrl:s})=>{const[i,o]=L.useState(null),[c,u]=L.useState(!1),[h,p]=L.useState(!1),[g,m]=L.useState([]),[T,A]=L.useState(!1),[k,S]=L.useState(!1),_=async()=>{if(t){A(!0);try{const z=await(await fetch(`${s}?action=get_epa_records&student_email=${t}`)).json();Array.isArray(z)?m(z):m([])}catch(j){console.error("Failed to fetch EPA records:",j),m([])}finally{A(!1)}}};L.useEffect(()=>{_()},[t]);const y=async j=>{S(!0);try{await fetch(s,{method:"POST",body:JSON.stringify({action:"save_epa_record",student_email:t,...j})}),alert(""),p(!1),u(!0),_()}catch{alert("")}finally{S(!1)}},N=async(j,z)=>{S(!0);try{const b=await(await fetch(s,{method:"POST",body:JSON.stringify({action:"save_trainee_feedback",record_id:j,reflection:z.reflection,satisfaction:z.satisfaction})})).json();if(b.status==="success")alert(""),u(!1),_();else throw new Error(b.message||"")}catch($){console.error($),alert("")}finally{S(!1)}};return l.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[l.jsxs("div",{className:"flex justify-between items-center border-b pb-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(hr,{className:"w-6 h-6 text-indigo-600"}),"EPA "]}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["",l.jsx("span",{className:"font-medium text-gray-700",children:e||""})]})]}),T&&l.jsxs("span",{className:"text-indigo-600 flex items-center gap-2 text-sm",children:[l.jsx(Nr,{className:"w-4 h-4 animate-spin"})," ..."]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:DC.map(j=>{const z=Array.isArray(g)?g.filter(x=>x.epa_id===j.id):[],$=z.length>0?z[0]:null;z.length;const b=$&&!$.evaluation.satisfaction_score&&!n;return l.jsxs("div",{onClick:()=>{o(j),u(!0)},className:"bg-white border rounded-xl p-5 hover:shadow-lg transition-all cursor-pointer group relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold rounded",children:j.id}),b&&l.jsx("span",{className:"animate-pulse bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded-full border border-red-200",children:" "})]}),l.jsx("h3",{className:"font-bold text-gray-800 mb-2 group-hover:text-indigo-600",children:j.title.replace(`${j.id}. `,"")}),l.jsxs("div",{className:"pt-3 border-t flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-gray-400",children:""}),l.jsx("span",{className:`text-sm font-bold ${$?"text-green-600":"text-gray-300"}`,children:$?$.evaluation.level:""})]}),l.jsx(yi,{className:"w-5 h-5 text-gray-300 group-hover:text-indigo-500 transition-all"})]})]},j.id)})}),c&&i&&l.jsx(MC,{epa:i,records:Array.isArray(g)?g.filter(j=>j.epa_id===i.id):[],onClose:()=>u(!1),onOpenForm:()=>{u(!1),p(!0)},onSaveFeedback:N,isTeacher:n,studentName:e}),h&&i&&l.jsx(VC,{epa:i,studentName:e,teacherName:(r==null?void 0:r.displayName)||"Teacher",onClose:()=>p(!1),onSubmit:y,isSubmitting:k})]})},MC=({epa:t,records:e,onClose:n,onOpenForm:r,onSaveFeedback:s,isTeacher:i,studentName:o})=>{var k;const[c,u]=L.useState(null),[h,p]=L.useState(""),[g,m]=L.useState(0);L.useEffect(()=>{e.length>0&&u(e[0].record_id)},[e]);const T=e.find(S=>S.record_id===c),A=S=>{const _=Ih.find(y=>y.value===S);return _?_.label:""};return l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-gray-50",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:t.title}),l.jsxs("p",{className:"text-sm text-gray-500",children:["",o]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[i&&l.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm font-medium",children:[l.jsx(bp,{className:"w-4 h-4"})," "]}),l.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-200 rounded-full text-gray-500",children:""})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsxs("div",{className:"w-1/3 border-r bg-gray-50 overflow-y-auto p-4",children:[l.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-3",children:[" (",e.length,")"]}),l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-10 text-gray-400 text-sm",children:""}):e.map(S=>l.jsxs("button",{onClick:()=>u(S.record_id),className:`w-full text-left p-3 rounded-lg border transition-all ${c===S.record_id?"bg-white border-indigo-500 ring-1 ring-indigo-500":"bg-white border-gray-200 hover:border-indigo-300"}`,children:[l.jsxs("div",{className:"flex justify-between font-bold text-gray-800 text-sm",children:[S.evaluation.date,l.jsxs("span",{className:"text-indigo-600",children:["Level ",S.evaluation.level]})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[l.jsx(Kn,{className:"w-3 h-3"})," ",S.teacher_name]})]},S.record_id))})]}),l.jsx("div",{className:"w-2/3 overflow-y-auto p-8 bg-white",children:T?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("section",{children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),l.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-100",children:[l.jsxs("span",{className:"text-2xl font-bold text-indigo-700",children:["Level ",T.evaluation.level]}),l.jsx("p",{className:"text-sm text-indigo-600 mt-1",children:(k=r1.find(S=>S.value===T.evaluation.level))==null?void 0:k.label})]})]}),l.jsxs("section",{children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),l.jsx("div",{className:"space-y-2 border rounded-lg overflow-hidden",children:Object.entries(T.evaluation.checklist).map(([S,_],y)=>l.jsxs("div",{className:"flex items-center justify-between text-sm p-3 bg-white border-b last:border-0 hover:bg-gray-50",children:[l.jsx("span",{className:"text-gray-700 font-medium",children:S}),l.jsxs("div",{className:"flex items-center gap-2",children:[_==="meet_expectation"||_==="exceed_expectation"?l.jsx(Zc,{className:"w-4 h-4 text-green-500"}):l.jsx(vi,{className:"w-4 h-4 text-orange-500"}),l.jsx("span",{className:`text-xs ${_.includes("meet")?"text-green-700":"text-gray-500"}`,children:A(_)})]})]},y))})]}),l.jsxs("section",{children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),l.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded border whitespace-pre-line",children:T.evaluation.feedback_content||""})]}),l.jsxs("section",{className:"pt-6 border-t mt-6",children:[l.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-4 flex items-center justify-between",children:l.jsx("span",{children:""})}),T.feedback_satisfaction>0?l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 space-y-2",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:"text-green-700 font-bold",children:["",T.feedback_satisfaction," / 9"]})}),l.jsxs("div",{className:"text-sm text-gray-700",children:[l.jsx("span",{className:"font-bold block mb-1",children:""}),T.feedback_reflection||""]})]}):i?l.jsx("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-300 text-gray-400 text-sm italic",children:""}):l.jsxs("div",{className:"bg-orange-50 p-5 rounded-xl border border-orange-100 space-y-4",children:[l.jsx("h5",{className:"text-sm font-bold text-orange-800",children:" "}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:" (1-9)"}),l.jsx("div",{className:"flex gap-1 flex-wrap",children:[1,2,3,4,5,6,7,8,9].map(S=>l.jsx("button",{onClick:()=>m(S),className:`w-8 h-8 rounded-full text-sm font-bold border ${g===S?"bg-orange-500 text-white border-orange-600":"bg-white text-gray-500 border-gray-300"}`,children:S},S))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:""}),l.jsx("textarea",{className:"w-full h-20 p-3 text-sm border rounded-lg focus:ring-2 focus:ring-orange-300 outline-none",placeholder:"...",value:h,onChange:S=>p(S.target.value)})]}),l.jsx("button",{onClick:()=>s(T.record_id,{satisfaction:g,reflection:h}),disabled:g===0,className:"w-full py-2 bg-orange-600 text-white rounded-lg font-bold text-sm hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g===0?"":""})]})]})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[l.jsx(cc,{className:"w-12 h-12 mb-3 opacity-20"}),l.jsx("p",{children:""})]})})]})]})})},Qa=[{id:"dops_op_dispensing",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ",type:"score_5"},{id:"item_2",label:"2.  ()",type:"score_5"},{id:"item_3",label:"3.  (5)",type:"score_5"},{id:"item_4",label:"4.  ()",type:"score_5"},{id:"item_5",label:"5. 1-3",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_ud_cart",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ()",type:"score_5"},{id:"item_2",label:"2. ()",type:"score_5"},{id:"item_3",label:"3. ()",type:"score_5"},{id:"item_4",label:"4. ()",type:"score_5"},{id:"item_5",label:"5. ()",type:"score_5"},{id:"item_6",label:"6. ()",type:"score_5"},{id:"item_7",label:"7. ()",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_op_delivery",title:" DOPS",version:"113.11",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ",type:"score_5"},{id:"item_2",label:"2. ",type:"score_5"},{id:"item_3",label:"3. ",type:"score_5"},{id:"item_4",label:"4. ",type:"score_5"},{id:"item_5",label:"5. ()",type:"score_5"},{id:"item_6",label:"6. ",type:"score_5"},{id:"item_7",label:"7. ",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_op_verification",title:" DOPS",version:"113.11",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. ",type:"score_5"},{id:"item_2",label:"2. ",type:"score_5"},{id:"item_3",label:"3. ",type:"score_5"},{id:"item_4",label:"4. ",type:"score_5"},{id:"item_5",label:"5. ",type:"score_5"},{id:"item_6",label:"6. ",type:"score_5"},{id:"item_7",label:"7. ",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_patient_counseling",title:" DOPS",version:"114.04",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1.  ()",type:"score_5"},{id:"item_2",label:"2.  ()",type:"score_5"},{id:"item_3",label:"3.  ()",type:"score_5"},{id:"item_4",label:"4.  ()",type:"score_5"},{id:"item_5",label:"5.  ()",type:"score_5"},{id:"item_6",label:"6.  ()",type:"score_5"},{id:"item_7",label:"7.  ()",type:"score_5"},{id:"item_8",label:"8.  ()",type:"score_5"},{id:"item_9",label:"9.  ()",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_provider_counseling",title:" DOPS",version:"114.04",description:"",sections:[{id:"sec_skills",title:"",fields:[{id:"item_1",label:"1. : EMR",type:"score_5"},{id:"item_2",label:"2. : ,",type:"score_5"},{id:"item_3",label:"3. : ,",type:"score_5"},{id:"item_4",label:"4. : ,",type:"score_5"},{id:"item_5",label:"5. : ",type:"score_5"},{id:"item_6",label:"6. SOAP",type:"score_5"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_tcm",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills_1",title:"1. ",fields:[{id:"item_1_1",label:"(1) ",type:"yes_no"},{id:"item_1_2",label:"(2) ",type:"yes_no"},{id:"item_1_3",label:"(3) ",type:"yes_no"}]},{id:"sec_skills_2",title:"2. ",fields:[{id:"item_2_1",label:"(1) ",type:"yes_no"},{id:"item_2_2",label:"(2) ",type:"yes_no"},{id:"item_2_3",label:"(3) ",type:"yes_no"}]},{id:"sec_skills_3",title:"3. ",fields:[{id:"item_3_1",label:"(1) ",type:"yes_no"},{id:"item_3_2",label:"(2) ",type:"yes_no"},{id:"item_3_3",label:"(3) ",type:"yes_no"},{id:"item_3_4",label:"(4) ",type:"yes_no"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_chemo_env",title:" DOPS",version:"113.03",description:"",sections:[{id:"sec_skills_1",title:"1. (BSC)",fields:[{id:"item_1_1",label:"(1) (70%)",type:"yes_no"},{id:"item_1_2",label:"(2) 70%",type:"yes_no"}]},{id:"sec_skills_2",title:"2. ",fields:[{id:"item_2_1",label:"(1) ",type:"yes_no"},{id:"item_2_2",label:"(2) ",type:"yes_no"},{id:"item_2_3",label:"(3) 70%",type:"yes_no"},{id:"item_2_4",label:"(4) ",type:"yes_no"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]},{id:"dops_chemo_ppe",title:" DOPS",version:"113.03",description:"(PPE)",sections:[{id:"sec_skills_1",title:"1. (PPE)",fields:[{id:"item_1_1",label:"(1) ",type:"yes_no"},{id:"item_1_2",label:"(2) ",type:"yes_no"},{id:"item_1_3",label:"(3) ",type:"yes_no"},{id:"item_1_4",label:"(4) ",type:"yes_no"},{id:"item_1_5",label:"(5) ",type:"yes_no"},{id:"item_1_6",label:"(6) ",type:"yes_no"}]},{id:"sec_skills_2",title:"2. (PPE)",fields:[{id:"item_2_1",label:"(1) ",type:"yes_no"},{id:"item_2_2",label:"(2) ",type:"yes_no"},{id:"item_2_3",label:"(3) ",type:"yes_no"},{id:"item_2_4",label:"(4) ",type:"yes_no"},{id:"item_2_5",label:"(5) PPE",type:"yes_no"},{id:"item_2_6",label:"(6) ",type:"yes_no"}]},{id:"sec_global",title:"",fields:[{id:"global_rating",label:" (1-10)",type:"score_10"}]},{id:"sec_feedback",title:"",fields:[{id:"feedback_teacher_good",label:"",type:"textarea"},{id:"feedback_teacher_improve",label:"",type:"textarea"},{id:"feedback_student_thoughts",label:"",type:"textarea"},{id:"feedback_student_improve",label:"",type:"textarea"}]}]}],LC=({studentEmail:t,studentName:e,userRole:n,currentUserEmail:r,currentUserName:s,gasApiUrl:i})=>{const[o,c]=L.useState("menu"),[u,h]=L.useState(null),[p,g]=L.useState([]),[m,T]=L.useState(null),[A,k]=L.useState({}),[S,_]=L.useState(""),[y,N]=L.useState("draft"),[j,z]=L.useState(!1),[$,b]=L.useState(!1),[x,w]=L.useState(!1),[E,C]=L.useState(!1),[P,I]=L.useState({}),[H,D]=L.useState({teacherName:"",teacherDate:"",adminName:"",adminDate:""}),W=n==="admin",Z=n==="teacher",O=n==="student",Q=Qa.find(B=>B.id===u),U=(Z||W)&&y==="draft",ee=O&&y==="teacher_graded",se=y==="completed"||y==="needs_improvement";L.useEffect(()=>{o==="menu"&&t&&fe()},[o,t]),L.useEffect(()=>{o==="form"&&u&&t&&Fe()},[o,u,t]),L.useEffect(()=>{if(m&&p.length>0){const B=p.find(ne=>ne.instanceId===m);B&&(k(B.formData||{}),N(B.status||"draft"),_(B.formData.evaluation_date||B.timestamp.split("T")[0]),D({teacherName:B.formData.sign_teacher_name||"",teacherDate:B.formData.sign_teacher_date||"",adminName:B.formData.sign_admin_name||"",adminDate:B.formData.sign_admin_date||""}))}},[m,p]),L.useEffect(()=>{Z&&y==="submitted"&&!H.teacherName&&D(B=>({...B,teacherName:s||""})),W&&y==="assessed"&&!H.adminName&&D(B=>({...B,adminName:s||""}))},[n,Z,W,y,s]);const fe=async()=>{z(!0);try{const B=Qa.map(de=>fetch(`${i}?type=getDOPSList&studentEmail=${t}&dopsId=${de.id}`).then(me=>me.json()).then(me=>{var Vt;const Tn=me.records||[];if(Tn.length>0){const Pi=Tn[0];return{id:de.id,status:Pi.status,updatedAt:Pi.timestamp,score:(Vt=Pi.formData)==null?void 0:Vt.global_rating}}return{id:de.id,status:"draft",score:null}}).catch(()=>({id:de.id,status:"draft"}))),ne=await Promise.all(B),Ie={};ne.forEach(de=>{Ie[de.id]=de}),I(Ie)}catch(B){console.error("",B)}z(!1)},Fe=async()=>{w(!0);try{const Ie=(await(await fetch(`${i}?type=getDOPSList&studentEmail=${t}&dopsId=${u}`)).json()).records||[];g(Ie),Ie.length>0?(!m||!Ie.find(de=>de.instanceId===m))&&T(Ie[0].instanceId):le()}catch(B){console.error("",B)}w(!1)},le=()=>{const B="NEW_"+new Date().getTime(),ne=new Date().toISOString().split("T")[0],Ie={instanceId:B,status:"draft",timestamp:new Date().toISOString(),formData:{evaluation_date:ne},teacherSign:"",studentSign:""};g(de=>[Ie,...de]),T(B),_(ne),k({evaluation_date:ne}),N("draft"),D({teacherName:"",teacherDate:"",adminName:"",adminDate:""})},ke=async B=>{C(!0);let ne=B||y;const Ie=new Date().toISOString().split("T")[0];let de={...A,evaluation_date:S};if(B==="teacher_graded"){if(!de.global_rating){alert(""),C(!1);return}de.sign_teacher_name=s,de.sign_teacher_date=S}let me="";if(B==="completed"){if(!de.feedback_student_thoughts){alert(""),C(!1);return}de.sign_student_name=s,de.sign_student_date=Ie;const Vt=parseInt(de.global_rating||0,10);Vt<=6?(ne="needs_improvement",me="6()1"):Vt===7?(ne="needs_improvement",me="71"):(ne="completed",me="8()")}const Tn={type:"saveDOPS",dopsId:u,instanceId:m.startsWith("NEW_")?null:m,studentEmail:t,studentName:e,formData:de,status:ne,updatedBy:r,teacherSign:de.sign_teacher_name,studentSign:de.sign_student_name};try{await fetch(i,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(Tn)}),alert(B==="completed"?me:""),await Fe()}catch{alert("")}C(!1)},K=(B,ne)=>{se||k(Ie=>({...Ie,[B]:ne}))},ie=B=>{const ne=A[B.id];let Ie=!1;B.id.startsWith("feedback_student")?Ie=ee:(B.id.startsWith("feedback_teacher"),Ie=U);const de=!Ie;return B.type==="score_5"?l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["5 ()","4 ()","3 ()","2 ()","1 ()","N/A"].map((me,Tn)=>{const Vt=me.split(" ")[0];return l.jsxs("label",{className:`flex items-center gap-1 px-3 py-2 border rounded-lg cursor-pointer transition-colors text-sm ${ne===Vt?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"} ${de?"opacity-60 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:B.id,value:Vt,checked:ne===Vt,onChange:()=>K(B.id,Vt),disabled:de,className:"hidden"}),me]},Tn)})}):B.type==="score_10"?l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:[1,2,3,4,5,6,7,8,9,10].map(me=>l.jsxs("label",{className:`w-8 h-8 flex items-center justify-center rounded-full border cursor-pointer font-bold text-sm transition-colors ${ne==me?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"} ${de?"opacity-60 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:B.id,value:me,checked:ne==me,onChange:()=>K(B.id,me),disabled:de,className:"hidden"}),me]},me))}):B.type==="yes_no"?l.jsx("div",{className:"flex gap-4 mt-1",children:["",""].map(me=>l.jsxs("label",{className:`flex items-center gap-2 px-4 py-2 border rounded-lg cursor-pointer transition-colors text-sm font-medium ${ne===me?me===""?"bg-green-100 text-green-800 border-green-300":"bg-red-100 text-red-800 border-red-300":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"} ${de?"opacity-60 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:B.id,value:me,checked:ne===me,onChange:()=>K(B.id,me),disabled:de,className:"hidden"}),me===""?l.jsx(aC,{className:"w-4 h-4"}):l.jsx(ms,{className:"w-4 h-4"}),me]},me))}):B.type==="textarea"?l.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100 min-h-[80px]",value:ne||"",onChange:me=>K(B.id,me.target.value),disabled:de,placeholder:Ie?"...":"()"}):null},Ee=({status:B})=>{switch(B){case"completed":return l.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-bold flex items-center gap-1",children:[l.jsx(Cn,{className:"w-3 h-3"})," "]});case"needs_improvement":return l.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold flex items-center gap-1",children:[l.jsx(vi,{className:"w-3 h-3"})," "]});case"teacher_graded":return l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold flex items-center gap-1",children:[l.jsx(Kn,{className:"w-3 h-3"})," "]});default:return l.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 rounded text-xs font-bold",children:""})}},ve=()=>{const B=parseInt(A.global_rating||0,10);return B>=8?l.jsx("div",{className:"flex justify-between items-center p-4 rounded-lg border bg-green-50 border-green-200 text-green-800",children:l.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold",children:[l.jsx(Cn,{className:"w-6 h-6"})," "]})}):B===7?l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 rounded-lg border bg-orange-50 border-orange-200 text-orange-800 gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold",children:[l.jsx(sd,{className:"w-6 h-6"})," 1"]}),(Z||W)&&l.jsxs("button",{onClick:le,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-bold text-sm flex items-center gap-2 whitespace-nowrap",children:[l.jsx(l0,{className:"w-4 h-4"})," "]})]}):l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 rounded-lg border bg-red-50 border-red-200 text-red-800 gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold",children:[l.jsx(sd,{className:"w-6 h-6"})," 1"]}),(Z||W)&&l.jsxs("button",{onClick:le,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-bold text-sm flex items-center gap-2 whitespace-nowrap",children:[l.jsx(l0,{className:"w-4 h-4"})," "]})]})};return o==="menu"?l.jsxs("div",{className:"animate-in fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-700 flex items-center gap-2",children:[l.jsx(Zc,{className:"w-6 h-6 text-indigo-600"})," DOPS "]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[" ",Qa.length," "]})]}),j?l.jsxs("div",{className:"py-12 text-center text-gray-400",children:[l.jsx(Nr,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),"..."]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Qa.map(B=>{const ne=P[B.id]||{status:"draft",score:null,updatedAt:null};return l.jsxs("button",{onClick:()=>{h(B.id),c("form")},className:"flex flex-col text-left bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md hover:border-indigo-400 transition-all group relative overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg group-hover:bg-indigo-100 transition-colors",children:l.jsx(wp,{className:"w-6 h-6 text-indigo-600"})}),l.jsxs("div",{className:"flex flex-col items-end gap-1",children:[l.jsx(Ee,{status:ne.status}),ne.score&&l.jsxs("span",{className:`flex items-center gap-1 text-xs font-bold px-2 py-0.5 rounded border ${parseInt(ne.score)>=8?"text-green-600 bg-green-50 border-green-100":"text-red-600 bg-red-50 border-red-100"}`,children:[l.jsx(bC,{className:"w-3 h-3 fill-current"})," ",ne.score," "]})]})]}),l.jsx("h4",{className:"font-bold text-gray-800 text-base mb-1 group-hover:text-indigo-600 transition-colors",children:B.title}),l.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 mb-4 h-8",children:B.description}),l.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-50 flex justify-between items-center w-full",children:[l.jsx("span",{className:"text-[10px] text-gray-400",children:ne.updatedAt?`: ${new Date(ne.updatedAt).toLocaleDateString()}`:""}),l.jsx(yi,{className:"w-4 h-4 text-gray-300 group-hover:text-indigo-500 group-hover:translate-x-1 transition-all"})]})]},B.id)})})]}):$?l.jsxs("div",{className:"p-8 text-center text-gray-500 flex justify-center",children:[l.jsx(Nr,{className:"animate-spin mr-2"})," ..."]}):l.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 pb-12 animate-in slide-in-from-right-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsxs("button",{onClick:()=>c("menu"),className:"flex items-center gap-1 text-gray-500 hover:text-indigo-600 font-bold text-sm bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx(Jw,{className:"w-4 h-4"})," "]}),l.jsx("span",{className:"text-gray-300",children:"|"}),l.jsxs("span",{className:"text-gray-700 font-medium",children:[e," - ",Q==null?void 0:Q.title]})]}),l.jsxs("div",{className:"grid grid-cols-12 gap-6 items-start",children:[l.jsxs("div",{className:"col-span-12 md:col-span-3 bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm sticky top-4",children:[l.jsxs("div",{className:"p-3 bg-gray-50 border-b border-gray-200 font-bold text-gray-700 flex justify-between items-center",children:["",(Z||W)&&l.jsx("button",{onClick:le,className:"p-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",title:"",children:l.jsx(bp,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:x?l.jsx("div",{className:"p-4 text-center text-gray-400",children:l.jsx(Nr,{className:"w-5 h-5 animate-spin mx-auto"})}):p.length===0?l.jsx("div",{className:"p-4 text-center text-sm text-gray-400",children:""}):p.map(B=>{var ne;return l.jsxs("button",{onClick:()=>T(B.instanceId),className:`w-full text-left p-3 border-b border-gray-100 hover:bg-gray-50 transition-colors ${m===B.instanceId?"bg-indigo-50 border-l-4 border-l-indigo-600":""}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:"font-bold text-sm text-gray-800",children:B.formData.evaluation_date||B.timestamp.split("T")[0]}),((ne=B.formData)==null?void 0:ne.global_rating)&&l.jsxs("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded ${parseInt(B.formData.global_rating)>=8?"text-green-600 bg-green-50":"text-red-600 bg-red-50"}`,children:[B.formData.global_rating,""]})]}),l.jsx("div",{className:"flex justify-between items-center mt-1",children:l.jsx(Ee,{status:B.status})})]},B.instanceId)})})]}),l.jsxs("div",{className:"col-span-12 md:col-span-9 space-y-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold",children:[l.jsx(Jc,{className:"w-5 h-5"})," "]}),l.jsx("input",{type:"date",value:S,onChange:B=>{U&&(_(B.target.value),k(ne=>({...ne,evaluation_date:B.target.value})))},disabled:!U,className:"border border-gray-300 rounded px-3 py-1 text-sm outline-none focus:border-indigo-500 disabled:bg-gray-100"}),(m==null?void 0:m.startsWith("NEW_"))&&l.jsx("span",{className:"text-xs text-orange-500 font-bold ml-auto",children:"* "})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[l.jsxs("div",{className:`px-6 py-4 flex justify-between items-center ${y==="needs_improvement"?"bg-red-600":y==="completed"?"bg-green-600":"bg-indigo-600"}`,children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:Q==null?void 0:Q.title}),l.jsxs("div",{className:"text-white/90 text-sm flex items-center gap-2",children:[y==="needs_improvement"&&l.jsxs(l.Fragment,{children:[l.jsx(sd,{className:"w-4 h-4"})," "]}),y==="completed"&&l.jsxs(l.Fragment,{children:[l.jsx(Cn,{className:"w-4 h-4"})," "]}),l.jsx("span",{className:"opacity-70",children:"|"}),"v",Q==null?void 0:Q.version]})]}),l.jsx("div",{className:"p-6 md:p-8 space-y-10",children:Q==null?void 0:Q.sections.map(B=>l.jsxs("div",{className:"border-b border-gray-100 pb-8 last:border-0 last:pb-0",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 bg-gray-50 p-2 rounded border-l-4 border-indigo-500",children:B.title}),l.jsx("div",{className:"space-y-6",children:B.fields.map(ne=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:ne.label}),ie(ne)]},ne.id))})]},B.id))}),l.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:[y==="draft"&&(Z||W)&&l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>ke("draft"),disabled:E,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg",children:""}),l.jsxs("button",{onClick:()=>{window.confirm("")&&ke("teacher_graded")},disabled:E,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg flex items-center gap-2",children:[l.jsx(Cn,{className:"w-4 h-4"})," "]})]}),y==="teacher_graded"&&O&&l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 p-3 rounded text-blue-800 text-sm",children:[l.jsx(vi,{className:"w-5 h-5 mt-0.5"}),l.jsx("div",{children:l.jsx("p",{className:"font-bold",children:""})})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>ke("teacher_graded"),disabled:E,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg",children:""}),l.jsxs("button",{onClick:()=>{window.confirm("?")&&ke("completed")},disabled:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg flex items-center gap-2",children:[l.jsx(Cn,{className:"w-4 h-4"})," "]})]})]}),(y==="completed"||y==="needs_improvement")&&l.jsxs("div",{className:"space-y-4",children:[l.jsx(ve,{}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 pt-2 border-t border-gray-200",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{children:["",A.sign_teacher_name," (",A.evaluation_date,")"]}),l.jsxs("span",{children:["",A.sign_student_name," (",A.evaluation_date,")"]})]}),y==="completed"&&l.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[l.jsx(Th,{className:"w-4 h-4"})," "]})]})]})]})]})]})]})]})},Ns="https://script.google.com/macros/s/AKfycbw3-nakNBi0t3W3_-XtQmztYqq9qAj0ZOaGpXKZG41eZfhYjNfIM5xuVXwzSLa1_X3hfA/exec",FC=({user:t,userRole:e,userProfile:n})=>{const[r,s]=L.useState([]),i=["teacher","admin"].includes(e),[o,c]=L.useState(i?"":t==null?void 0:t.email),[u,h]=L.useState(t==null?void 0:t.displayName),[p,g]=L.useState(""),[m,T]=L.useState("records"),[A,k]=L.useState("pre_training"),[S,_]=L.useState({items:[],records:{},periods:{}}),[y,N]=L.useState({}),[j,z]=L.useState(!1),[$,b]=L.useState({}),[x,w]=L.useState(null),[E,C]=L.useState(!1),[P,I]=L.useState({itemId:"",itemName:"",status:"pass",date:"",note:""}),[H,D]=L.useState(!1),[W,Z]=L.useState(null);L.useEffect(()=>{i&&(async()=>{try{const ie=yp(rs(Et,"users"),GA("role","==","student")),ve=(await YA(ie)).docs.map(B=>B.data());if(s(ve),ve.length>0){const B=ve.some(ne=>ne.email===o);(!o||!B)&&c(ve[0].email)}}catch(ie){console.error(":",ie)}})()},[e]),L.useEffect(()=>{if(i){if(r.length>0&&o){const K=r.find(ie=>ie.email===o);K&&(h(K.displayName||K.email),g(K.arrivalDate||""))}}else h((n==null?void 0:n.displayName)||t.displayName),g((n==null?void 0:n.arrivalDate)||"")},[o,r,e,n,t]),L.useEffect(()=>{o&&m==="records"&&O(o)},[o,m]);const O=async K=>{if(w(null),!!K){z(!0);try{const Ee=await(await fetch(`${Ns}?type=getData&studentEmail=${K}`)).json();if(Ee.status==="error")throw new Error(Ee.message);if(_(Ee),N(Ee.periods||{}),Ee.items&&Ee.items.length>0){const ve=Ee.items[0].category_id;Object.keys($).length===0&&b(B=>({...B,[ve]:!0}))}}catch(ie){console.error(":",ie),w("")}z(!1)}},Q=K=>{if(!i)return;const ie=new Date().toISOString().split("T")[0];I({itemId:K.id,itemName:K.sub_item||K.title,status:"pass",date:ie,note:""}),C(!0)},U=async()=>{D(!0);const K=(n==null?void 0:n.displayName)||t.displayName||t.email.split("@")[0];try{await fetch(Ns,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({type:"saveEval",studentEmail:o,itemId:P.itemId,status:P.status,assessDate:P.date,teacherName:K,note:P.note})}),await O(o),C(!1),alert("")}catch{alert("")}D(!1)},ee=(K,ie,Ee)=>{N(ve=>({...ve,[K]:{...ve[K],[ie]:Ee}}))},se=async K=>{Z(K);const ie=y[K];try{await fetch(Ns,{method:"POST",body:JSON.stringify({type:"savePeriod",studentEmail:o,categoryId:K,startDate:(ie==null?void 0:ie.startDate)||"",endDate:(ie==null?void 0:ie.endDate)||"",updatedBy:(n==null?void 0:n.displayName)||t.displayName})}),await O(o)}catch{alert("")}Z(null)},fe=K=>{b(ie=>({...ie,[K]:!ie[K]}))},Fe=(S.items||[]).reduce((K,ie)=>(K[ie.category_id]||(K[ie.category_id]={id:ie.category_id,title:ie.category_name,items:[]}),K[ie.category_id].items.push(ie),K),{}),le=(K,ie=!1)=>{const Ee=S.records[K.id]||{},ve=Ee.status;return l.jsxs("div",{className:`p-3 pl-4 flex flex-col sm:flex-row sm:items-center justify-between gap-2 hover:bg-gray-50 border-b border-gray-50 last:border-0 ${ie?"bg-white":""}`,children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`text-sm flex items-start gap-2 ${ie?"font-bold text-gray-700":"font-medium text-gray-800"}`,children:[l.jsx("span",{className:"mt-1",children:ie?l.jsx(wp,{className:"w-4 h-4 text-gray-500"}):l.jsx(cC,{className:"w-2 h-2 text-gray-300 fill-gray-300 mt-1"})}),K.sub_item||K.title]}),Ee.teacher&&l.jsxs("p",{className:"text-xs text-green-600 mt-1 ml-6 flex items-center gap-1",children:[l.jsx(TC,{className:"w-3 h-3"})," ",Ee.teacher," (",new Date(Ee.date).toLocaleDateString(),")",Ee.note&&l.jsxs("span",{className:"text-gray-400",children:[" - ",Ee.note]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-6 sm:ml-0",children:[ve==="pass"&&l.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold flex items-center gap-1",children:[l.jsx(Zc,{className:"w-3 h-3"})," "]}),ve==="improve"&&l.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold flex items-center gap-1",children:[l.jsx(vi,{className:"w-3 h-3"})," "]}),i&&l.jsx("button",{onClick:()=>Q(K),className:"px-3 py-1 border border-indigo-200 text-indigo-600 hover:bg-indigo-50 rounded-md text-xs font-bold transition-colors",children:ve?"":""})]})]},K.id)},ke=K=>{const ie={},Ee=[];return K.forEach(ve=>{ie[ve.title]||(ie[ve.title]=[],Ee.push(ve.title)),ie[ve.title].push(ve)}),Ee.map((ve,B)=>{const ne=ie[ve],Ie=ne.length>1||ne[0]&&ne[0].sub_item;return l.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:[Ie&&l.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-bold text-gray-700 text-sm flex items-center gap-2",children:[l.jsx(fC,{className:"w-4 h-4 text-gray-500"}),ve]}),l.jsx("div",{className:"bg-white",children:ne.map(de=>le(de,!Ie))})]},B)})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-xl shadow-sm border border-gray-100",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:l.jsx(hr,{className:"w-6 h-6 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:""}),l.jsx("p",{className:"text-xs text-gray-500",children:i?"":""})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[i?l.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200",children:[l.jsx(Kn,{className:"w-4 h-4 text-gray-400"}),l.jsx("select",{value:o,onChange:K=>c(K.target.value),className:"bg-transparent text-sm font-bold text-gray-700 outline-none min-w-[150px]",children:r.length>0?r.map(K=>l.jsx("option",{value:K.email,children:K.displayName||K.email},K.email)):l.jsx("option",{disabled:!0,children:"..."})})]}):l.jsxs("div",{className:"px-4 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-bold flex items-center gap-2",children:[l.jsx(Kn,{className:"w-4 h-4"})," ",u]}),p&&l.jsxs("div",{className:"px-4 py-1.5 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium flex items-center gap-2",children:[l.jsx(Jc,{className:"w-3.5 h-3.5"})," ",p]})]})]}),l.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[l.jsxs("button",{onClick:()=>T("records"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold transition-all border-b-2 ${m==="records"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(uC,{className:"w-4 h-4"}),""]}),l.jsxs("button",{onClick:()=>T("assessment"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold transition-all border-b-2 ${m==="assessment"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(hC,{className:"w-4 h-4"}),""]})]}),x&&l.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4 rounded text-red-700 text-sm font-bold flex items-center gap-2",children:[l.jsx(vi,{className:"w-5 h-5"})," ",x]}),m==="records"?l.jsx("div",{className:"space-y-4",children:j?l.jsxs("div",{className:"text-center py-12 text-gray-400 flex flex-col items-center",children:[l.jsx(Nr,{className:"w-8 h-8 animate-spin mb-2"}),l.jsx("p",{children:"..."})]}):Object.values(Fe).length>0?Object.values(Fe).map(K=>{const ie=$[K.id],Ee=K.items.length>0?Math.round(K.items.filter(de=>{var me;return((me=S.records[de.id])==null?void 0:me.status)==="pass"}).length/K.items.length*100):0,ve=S.periods[K.id]||{},B=y[K.id]||ve,ne=W===K.id,Ie=B.startDate!==ve.startDate||B.endDate!==ve.endDate;return l.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white",children:[l.jsxs("div",{className:"p-4 bg-gray-50 flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[l.jsxs("button",{onClick:()=>fe(K.id),className:"flex items-center gap-3 hover:text-indigo-600 transition-colors text-left flex-1",children:[ie?l.jsx(vl,{className:"w-5 h-5 text-gray-400"}):l.jsx(yi,{className:"w-5 h-5 text-gray-400"}),l.jsx("div",{children:l.jsx("span",{className:"font-bold text-gray-700 block sm:inline",children:K.title})}),l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${Ee===100?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:[Ee,"%"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm bg-white p-1.5 rounded-lg border border-gray-200 shadow-sm self-start sm:self-auto",children:[l.jsx(Zw,{className:"w-3.5 h-3.5 text-gray-400"}),i?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"date",className:"bg-transparent w-24 sm:w-auto outline-none",value:B.startDate||"",onChange:de=>ee(K.id,"startDate",de.target.value)}),l.jsx("span",{className:"text-gray-300",children:""}),l.jsx("input",{type:"date",className:"bg-transparent w-24 sm:w-auto outline-none",value:B.endDate||"",onChange:de=>ee(K.id,"endDate",de.target.value)}),(Ie||ne)&&l.jsx("button",{onClick:()=>se(K.id),disabled:ne,className:"ml-1 p-1 rounded-full bg-indigo-100 text-indigo-600",children:ne?l.jsx(Nr,{className:"w-3 h-3 animate-spin"}):l.jsx(eu,{className:"w-3 h-3"})})]}):l.jsxs("span",{children:[ve.startDate||"--","  ",ve.endDate||"--"]})]})]}),ie&&l.jsx("div",{className:"bg-white p-3 border-t border-gray-100",children:ke(K.items)})]},K.id)}):l.jsx("div",{className:"text-center py-8 text-gray-400 border border-dashed rounded-lg bg-gray-50",children:" "})}):l.jsxs("div",{className:"animate-in fade-in duration-300",children:[l.jsx("div",{className:"mb-6 overflow-x-auto pb-2 scrollbar-hide",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>k("pre_training"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${A==="pre_training"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[l.jsx(yC,{className:"w-4 h-4"}),""]}),l.jsxs("button",{onClick:()=>k("epa"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${A==="epa"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[l.jsx(Yw,{className:"w-4 h-4"}),"EPA "]}),l.jsxs("button",{onClick:()=>k("dops"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${A==="dops"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[l.jsx(wC,{className:"w-4 h-4"}),"DOPS "]})]})}),A==="pre_training"?l.jsx(jC,{studentEmail:o,studentName:u,userRole:e,currentUserEmail:t==null?void 0:t.email,currentUserName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName),gasApiUrl:Ns}):A==="epa"?l.jsx(OC,{studentEmail:o,studentName:u,isTeacher:i,userProfile:n,apiUrl:Ns}):l.jsx(LC,{studentEmail:o,studentName:u,userRole:e,currentUserEmail:t==null?void 0:t.email,currentUserName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName),gasApiUrl:Ns})]})]}),E&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>C(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden",onClick:K=>K.stopPropagation(),children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[l.jsx("h3",{className:"font-bold text-gray-800",children:""}),l.jsx("button",{onClick:()=>C(!1),children:l.jsx(ms,{className:"w-5 h-5 text-gray-400"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),l.jsx("p",{className:"font-bold",children:P.itemName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),l.jsx("input",{type:"date",value:P.date,onChange:K=>I({...P,date:K.target.value}),className:"w-full border rounded p-2"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>I({...P,status:"pass"}),className:`flex-1 py-2 rounded border font-bold ${P.status==="pass"?"bg-green-100 text-green-700":"bg-white"}`,children:""}),l.jsx("button",{onClick:()=>I({...P,status:"improve"}),className:`flex-1 py-2 rounded border font-bold ${P.status==="improve"?"bg-orange-100 text-orange-700":"bg-white"}`,children:""})]}),l.jsx("button",{onClick:U,disabled:H,className:"w-full py-2 bg-indigo-600 text-white rounded font-bold",children:H?"...":""})]})]})})]})},UC=({editData:t=null,onCancelEdit:e,onSuccess:n,settings:r={quickKeywords:[],categories:[]}})=>{const[s,i]=L.useState(!1),[o,c]=L.useState("sop"),[u,h]=L.useState({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""}),p=r.quickKeywords||[],g=r.categories||[];L.useEffect(()=>{t?(c(t.type||"sop"),h({title:t.title||"",category:t.category||"",content:t.content||"",url:t.url||"",attachmentUrl:t.attachmentUrl||"",keywords:t.keywords||[],description:t.description||""})):h({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""})},[t]);const m=k=>{h({...u,[k.target.name]:k.target.value})},T=k=>{h(S=>{const _=S.keywords||[];return _.includes(k)?{...S,keywords:_.filter(y=>y!==k)}:{...S,keywords:[..._,k]}})},A=async k=>{k.preventDefault(),i(!0);try{if(!u.title||!u.category){alert(""),i(!1);return}if(o==="video"&&!u.url){alert(""),i(!1);return}const S={title:u.title,category:u.category,keywords:u.keywords,description:u.description,updatedAt:i0()};o==="sop"?(S.content=u.content,S.attachmentUrl=u.attachmentUrl):S.url=u.url;const _=o==="sop"?"sop_articles":"training_videos";t?(await ei(Vn(Et,_,t.id),S),alert(`${o==="sop"?"SOP":""} `)):(S.createdAt=i0(),await ZA(rs(Et,_),S),alert(`${o==="sop"?"SOP":""} `)),h({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""}),n&&n()}catch(S){console.error("Error saving document: ",S),alert("")}finally{i(!1)}};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:t?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-indigo-600 mr-2",children:""})," ",o==="sop"?"SOP ":""]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-green-600 mr-2",children:""}),""]})}),t&&l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-3 py-1 bg-gray-100 rounded-md",children:""})]}),l.jsxs("form",{onSubmit:A,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("label",{className:`flex-1 flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${o==="sop"?"border-blue-500 bg-blue-50 text-blue-700 font-bold":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:"resourceType",value:"sop",checked:o==="sop",onChange:()=>c("sop"),disabled:!!t,className:"hidden"})," SOP "]}),l.jsxs("label",{className:`flex-1 flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${o==="video"?"border-purple-500 bg-purple-50 text-purple-700 font-bold":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx("input",{type:"radio",name:"resourceType",value:"video",checked:o==="video",onChange:()=>c("video"),disabled:!!t,className:"hidden"})," "]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("input",{type:"text",name:"title",value:u.title,onChange:m,placeholder:o==="sop"?"":"",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("div",{className:"relative",children:l.jsxs("select",{name:"category",value:u.category,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none bg-white",required:!0,children:[l.jsx("option",{value:"",disabled:!0,children:""}),g.length>0?g.map((k,S)=>l.jsx("option",{value:k,children:k},S)):l.jsx("option",{value:"",children:" ()"})]})})]})]}),o==="sop"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"SOP "}),l.jsx("textarea",{name:"content",value:u.content,onChange:m,rows:"5",placeholder:"SOP...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-gray-700 font-bold mb-2",children:["SOP  ",l.jsx("span",{className:"text-gray-400 font-normal text-sm",children:"()"})]}),l.jsx("input",{type:"url",name:"attachmentUrl",value:u.attachmentUrl,onChange:m,placeholder:"Google Drive PDF ...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-600"})]})]}),o==="video"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("input",{type:"url",name:"url",value:u.url,onChange:m,placeholder:"https://...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:" ()"}),l.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg border border-gray-100",children:p.length>0?p.map((k,S)=>l.jsx("button",{type:"button",onClick:()=>T(k),className:`px-3 py-1 rounded-full text-sm transition-colors border ${u.keywords.includes(k)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:border-blue-400"}`,children:k},S)):l.jsx("span",{className:"text-gray-400 text-sm",children:""})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),l.jsx("input",{type:"text",name:"description",value:u.description,onChange:m,placeholder:"...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),l.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 rounded-lg font-bold text-lg text-white shadow-lg ${o==="sop"?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"}`,children:s?"...":t?"":""})]})]})},id=["amanhung0419@gmail.com","admin@example.com"],zC=({user:t})=>{var P,I;const[e,n]=L.useState("resources"),[r,s]=L.useState([]),[i,o]=L.useState([]),[c,u]=L.useState([]),[h,p]=L.useState({quickKeywords:[],categories:[]}),[g,m]=L.useState(null),[T,A]=L.useState(null),[k,S]=L.useState(null),[_,y]=L.useState({displayName:"",arrivalDate:"",role:"student"}),[N,j]=L.useState(""),[z,$]=L.useState("");L.useEffect(()=>{const H=Bs(rs(Et,"sop_articles"),D=>{const W=D.docs.map(Z=>({id:Z.id,...Z.data()}));s(W)});return()=>H()},[]),L.useEffect(()=>{const H=Bs(rs(Et,"training_videos"),D=>{const W=D.docs.map(Z=>({id:Z.id,...Z.data()}));o(W)});return()=>H()},[]),L.useEffect(()=>{const H=Vn(Et,"site_settings","sop_config"),D=Bs(H,W=>{W.exists()?p(W.data()):Gw(H,{quickKeywords:[],categories:[]})});return()=>D()},[]),L.useEffect(()=>{const H=Bs(rs(Et,"users"),D=>{const W=D.docs.map(Z=>({id:Z.id,...Z.data()}));u(W)});return()=>H()},[]);const b=async(H,D)=>{if(window.confirm(""))try{await JA(Vn(Et,H,D)),T&&T.id===D&&A(null)}catch{alert("")}},x=(H,D)=>{A({...H,type:D}),window.scrollTo({top:0,behavior:"smooth"})},w=async(H,D,W)=>{var O;if(!W.trim())return;const Z=Vn(Et,"site_settings","sop_config");try{if(D==="add"){if((O=h[H])!=null&&O.includes(W))return alert("");await ei(Z,{[H]:eC(W)})}else D==="remove"&&window.confirm(` "${W}"?`)&&await ei(Z,{[H]:tC(W)})}catch{alert("")}},E=H=>{S(H),y({displayName:H.displayName||"",arrivalDate:H.arrivalDate||"",role:H.role||"student"})},C=async H=>{if(H.preventDefault(),!!k){if(id.includes(k.email)&&_.role!=="teacher"){alert("()");return}try{await ei(Vn(Et,"users",k.id),{displayName:_.displayName,arrivalDate:_.arrivalDate,role:_.role}),S(null),alert("")}catch(D){console.error(D),alert("")}}};return l.jsxs("div",{className:"bg-gray-50 min-h-screen p-0 md:p-6",children:[l.jsxs("div",{className:"max-w-6xl mx-auto space-y-4 md:space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center bg-white p-4 md:p-6 md:rounded-lg shadow-sm border-b md:border-0 border-gray-100",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800",children:""}),l.jsxs("p",{className:"text-gray-500 text-xs md:text-sm mt-1",children:["",r.length," SOP, ",i.length," , ",c.length," "]})]}),l.jsxs("div",{className:"space-x-2",children:[l.jsx("button",{onClick:()=>n("resources"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-sm font-medium transition-colors ${e==="resources"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:""}),l.jsx("button",{onClick:()=>n("settings"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-sm font-medium transition-colors ${e==="settings"?"bg-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:""})]})]}),g&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded text-red-700 font-bold mx-4 md:mx-0",children:g}),e==="resources"&&l.jsxs("div",{className:"space-y-4 md:space-y-8",children:[l.jsx(UC,{editData:T,onCancelEdit:()=>A(null),onSuccess:()=>A(null),settings:h}),l.jsxs("div",{className:"bg-white md:rounded-lg shadow-sm overflow-hidden border-t md:border-t-0 border-gray-100",children:[l.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-gray-100 bg-blue-50 flex justify-between items-center",children:l.jsxs("h3",{className:"font-bold text-blue-800 text-sm md:text-base",children:["SOP  (",r.length,")"]})}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[l.jsx("thead",{className:"bg-gray-50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:r.map(H=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 md:px-6 py-4",children:H.title}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:l.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:H.category})}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:H.attachmentUrl?l.jsxs("a",{href:H.attachmentUrl,target:"_blank",rel:"noreferrer",className:"text-blue-500 flex items-center gap-1",children:[l.jsx(e1,{className:"w-3 h-3"}),""]}):"-"}),l.jsxs("td",{className:"px-4 md:px-6 py-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>x(H,"sop"),className:"text-indigo-600 font-medium text-xs md:text-sm",children:""}),l.jsx("button",{onClick:()=>b("sop_articles",H.id),className:"text-red-600 font-medium text-xs md:text-sm",children:""})]})]},H.id))})]})})]}),l.jsxs("div",{className:"bg-white md:rounded-lg shadow-sm overflow-hidden border-t md:border-t-0 border-gray-100",children:[l.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-gray-100 bg-purple-50 flex justify-between items-center",children:l.jsxs("h3",{className:"font-bold text-purple-800 text-sm md:text-base",children:[" (",i.length,")"]})}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[l.jsx("thead",{className:"bg-gray-50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map(H=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 md:px-6 py-4",children:H.title}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:l.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:H.category})}),l.jsxs("td",{className:"px-4 md:px-6 py-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>x(H,"video"),className:"text-indigo-600 font-medium text-xs md:text-sm",children:""}),l.jsx("button",{onClick:()=>b("training_videos",H.id),className:"text-red-600 font-medium text-xs md:text-sm",children:""})]})]},H.id))})]})})]})]}),e==="settings"&&l.jsxs("div",{className:"space-y-4 md:space-y-8",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-8",children:[l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm",children:[l.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4",children:" "}),l.jsxs("div",{className:"flex gap-2 mb-6",children:[l.jsx("input",{type:"text",value:N,onChange:H=>j(H.target.value),placeholder:"...",className:"flex-1 px-4 py-2 border rounded-lg text-sm"}),l.jsx("button",{onClick:()=>{w("quickKeywords","add",N),j("")},className:"bg-teal-600 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(P=h.quickKeywords)==null?void 0:P.map((H,D)=>l.jsxs("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs md:text-sm flex items-center",children:[H,l.jsx("button",{onClick:()=>w("quickKeywords","remove",H),className:"ml-2 text-gray-400 hover:text-red-500",children:""})]},D))})]}),l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm",children:[l.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4",children:" "}),l.jsxs("div",{className:"flex gap-2 mb-6",children:[l.jsx("input",{type:"text",value:z,onChange:H=>$(H.target.value),placeholder:"...",className:"flex-1 px-4 py-2 border rounded-lg text-sm"}),l.jsx("button",{onClick:()=>{w("categories","add",z),$("")},className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),l.jsx("div",{className:"flex flex-col gap-2",children:(I=h.categories)==null?void 0:I.map((H,D)=>l.jsxs("div",{className:"flex justify-between bg-blue-50 px-3 py-2 rounded-lg text-sm",children:[l.jsx("span",{className:"text-blue-800",children:H}),l.jsx("button",{onClick:()=>w("categories","remove",H),className:"text-red-400 hover:text-red-600",children:""})]},D))})]})]}),l.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm border-t md:border border-gray-200",children:[l.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(n1,{className:"w-5 h-5 text-indigo-600"})," "]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[l.jsx("thead",{className:"bg-gray-50 text-gray-600 uppercase border-b border-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),l.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:c.map(H=>{const D=H.role==="teacher",W=id.includes(H.email);return l.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${W?"bg-indigo-50/50":""}`,children:[l.jsxs("td",{className:"px-4 md:px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-2 font-medium text-gray-900",children:[l.jsx("img",{src:H.photoURL||"https://via.placeholder.com/32",alt:"",className:"w-6 h-6 rounded-full"}),H.displayName||"",W&&l.jsx(a0,{className:"w-3 h-3 text-amber-500"})]}),l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:H.email})]}),l.jsx("td",{className:"px-4 md:px-6 py-4 text-gray-600 font-mono",children:H.arrivalDate||"-"}),l.jsx("td",{className:"px-4 md:px-6 py-4",children:W?l.jsx("span",{className:"inline-flex items-center gap-1 bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-bold border border-purple-200",children:""}):D?l.jsx("span",{className:"inline-flex items-center gap-1 bg-emerald-100 text-emerald-800 px-2 py-1 rounded-full text-xs font-bold",children:""}):l.jsx("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:"PGY "})}),l.jsx("td",{className:"px-4 md:px-6 py-4 text-right",children:l.jsxs("button",{onClick:()=>E(H),className:"px-3 py-1 bg-gray-100 hover:bg-indigo-50 text-indigo-600 rounded-md text-xs font-medium border border-gray-200 flex items-center gap-1 ml-auto",children:[l.jsx(t1,{className:"w-3 h-3"})," ",l.jsx("span",{className:"hidden sm:inline",children:""})]})})]},H.id)})})]})})]})]})]}),k&&l.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>S(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:""}),l.jsx("button",{onClick:()=>S(null),children:l.jsx(ms,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Email ()"}),l.jsx("input",{type:"text",value:k.email,disabled:!0,className:"w-full px-4 py-2 border bg-gray-100 rounded-lg text-gray-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsx("input",{type:"text",value:_.displayName,onChange:H=>y({..._,displayName:H.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsx("input",{type:"date",value:_.arrivalDate,onChange:H=>y({..._,arrivalDate:H.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>y({..._,role:"student"}),className:`flex-1 py-2 rounded-lg border text-sm font-bold ${_.role==="student"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200"}`,children:"PGY "}),l.jsx("button",{type:"button",onClick:()=>y({..._,role:"teacher"}),className:`flex-1 py-2 rounded-lg border text-sm font-bold ${_.role==="teacher"?"bg-emerald-600 text-white border-emerald-600":"bg-white text-gray-600 border-gray-200"}`,children:""})]}),id.includes(k.email)&&l.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium flex items-center gap-1",children:[l.jsx(a0,{className:"w-3 h-3"})," "]})]}),l.jsx("div",{className:"pt-4",children:l.jsx("button",{type:"submit",className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700",children:""})})]})]})})]})};function $C(){const[t,e]=L.useState(null),[n,r]=L.useState(null),[s,i]=L.useState("student"),[o,c]=L.useState("lookup"),[u,h]=L.useState(!1),[p,g]=L.useState(!0),[m,T]=L.useState(!1),[A,k]=L.useState({displayName:"",arrivalDate:""}),S=["teacher","admin"].includes(s),_=async()=>{try{const w=new An;w.setCustomParameters({prompt:"select_account"});const E=await KI(rd,w);console.log(":",E.user.email)}catch(w){console.error(":",w),alert(`: ${w.message}`)}},y=async()=>{try{await SI(rd),e(null),r(null),i("student"),c("lookup")}catch(w){console.error("Logout failed:",w)}},N=["obm0304@gmail.com","@gmail.com"];L.useEffect(()=>{const w=kI(rd,async E=>{if(g(!0),E){e(E);const C=Vn(Et,"users",E.uid);try{const P=await Ww(C);let I="student";if(P.exists()){const H=P.data();I=H.role||"student",N.includes(E.email)&&I!=="admin"&&(I="admin",await ei(C,{role:"admin"}),console.log("")),r(H)}else{N.includes(E.email)&&(I="admin");const H={email:E.email,displayName:E.displayName,photoURL:E.photoURL,role:I,arrivalDate:"",createdAt:new Date().toISOString()};await Gw(C,H),r(H)}i(I)}catch(P){console.error("Error fetching user data:",P)}}else e(null),r(null),i("student");g(!1)});return()=>w()},[]);const j=()=>{k({displayName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||"",arrivalDate:(n==null?void 0:n.arrivalDate)||""}),T(!0),h(!1)},z=async w=>{if(w.preventDefault(),!!t)try{const E=Vn(Et,"users",t.uid);await ei(E,{displayName:A.displayName,arrivalDate:A.arrivalDate}),r(C=>({...C,displayName:A.displayName,arrivalDate:A.arrivalDate})),T(!1),alert("")}catch(E){console.error(":",E),alert("")}},$=()=>s==="admin"?"":s==="teacher"?"":"PGY ",b=()=>s==="admin"?"text-purple-600 font-bold":s==="teacher"?"text-emerald-600 font-bold":"text-gray-500";if(p)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"..."})]})});if(!t)return l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 p-4",children:[l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-indigo-50",children:[l.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(hr,{className:"w-10 h-10 text-indigo-600"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:""}),l.jsxs("p",{className:"text-gray-500 mb-8",children:["",l.jsx("br",{})," SOP"]}),l.jsxs("button",{onClick:_,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md",children:[l.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-6 h-6",alt:"Google"})," Google "]})]}),l.jsxs("p",{className:"mt-8 text-sm text-gray-400",children:[" ",new Date().getFullYear()," Pharmacy Department Training System"]})]});const x=(n==null?void 0:n.displayName)||t.displayName;return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("nav",{className:"bg-white shadow-sm sticky top-0 z-50 border-b border-indigo-100",children:[l.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between h-16",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:l.jsx(hr,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-gray-800 hidden sm:block",children:""}),l.jsx("h1",{className:"text-xl font-bold text-gray-800 sm:hidden",children:"P.T.S"})]})]}),l.jsx("div",{className:"hidden md:flex items-center gap-1",children:[{id:"lookup",label:"SOP ",icon:cc},{id:"video",label:"",icon:hr},{id:"shift",label:"",icon:hr},{id:"passport",label:"",icon:Kn},...S?[{id:"admin",label:"",icon:xC}]:[]].map(w=>l.jsxs("button",{onClick:()=>c(w.id),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${o===w.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[w.icon&&l.jsx(w.icon,{className:"w-4 h-4"}),w.label]},w.id))}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"hidden sm:flex items-center gap-3 pl-4 border-l border-gray-200",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:x}),l.jsx("p",{className:`text-xs ${b()}`,children:$()})]}),l.jsx("div",{className:"relative group cursor-pointer",children:l.jsx("img",{src:t.photoURL,alt:x,className:`w-9 h-9 rounded-full border-2 ${S?"border-emerald-400":"border-gray-200"}`,onClick:()=>h(!u)})})]}),l.jsx("button",{onClick:()=>h(!u),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md",children:u?l.jsx(ms,{className:"w-6 h-6"}):l.jsx(gC,{className:"w-6 h-6"})})]})]})}),u&&l.jsxs("div",{className:"absolute right-0 top-16 w-full md:w-64 bg-white shadow-lg border-b border-gray-100 md:rounded-bl-xl z-50 animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"px-4 py-3 border-b border-gray-100 md:hidden",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:t.photoURL,alt:"Avatar",className:"w-10 h-10 rounded-full"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-800",children:x}),l.jsx("p",{className:`text-xs ${b()}`,children:$()})]})]})}),l.jsxs("div",{className:"p-2 space-y-1",children:[l.jsx("div",{className:"md:hidden space-y-1 pb-2 mb-2 border-b border-gray-100",children:[{id:"lookup",label:"SOP "},{id:"video",label:""},{id:"shift",label:""},{id:"passport",label:""},...S?[{id:"admin",label:""}]:[]].map(w=>l.jsx("button",{onClick:()=>{c(w.id),h(!1)},className:`block w-full text-left px-3 py-2 rounded-md text-base font-medium ${o===w.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:w.label},w.id))}),l.jsxs("button",{onClick:j,className:"w-full text-left px-3 py-2 text-gray-700 font-medium flex items-center gap-2 hover:bg-indigo-50 hover:text-indigo-600 rounded-md transition-colors",children:[l.jsx(Kn,{className:"w-4 h-4"})," "]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{onClick:y,className:"w-full text-left px-3 py-2 text-red-600 font-medium flex items-center gap-2 hover:bg-red-50 rounded-md transition-colors",children:[l.jsx(mC,{className:"w-4 h-4"})," "]})]})]})]}),m&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>T(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(t1,{className:"w-5 h-5 text-indigo-600"})," "]}),l.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:l.jsx(ms,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" ()"}),l.jsx("input",{type:"text",value:A.displayName,onChange:w=>k({...A,displayName:w.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:""})]}),s==="student"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Jc,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"date",value:A.arrivalDate,onChange:w=>k({...A,arrivalDate:w.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),l.jsxs("div",{className:"pt-4 flex gap-3",children:[l.jsx("button",{type:"button",onClick:()=>T(!1),className:"flex-1 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:""}),l.jsxs("button",{type:"submit",className:"flex-1 py-2 text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg font-medium flex justify-center items-center gap-2",children:[l.jsx(eu,{className:"w-4 h-4"})," "]})]})]})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-0 sm:px-6 lg:px-8 py-0 sm:py-8",children:[o==="lookup"&&l.jsx(AC,{}),o==="video"&&l.jsx(CC,{}),o==="shift"&&l.jsx(RC,{}),o==="passport"&&l.jsx(FC,{user:t,userRole:s,userProfile:n}),o==="admin"&&S&&l.jsx(zC,{user:t})]})]})}T_(document.getElementById("root")).render(l.jsx(L.StrictMode,{children:l.jsx($C,{})}));
