(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var i0={exports:{}},ou={},o0={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo=Symbol.for("react.element"),k1=Symbol.for("react.portal"),N1=Symbol.for("react.fragment"),A1=Symbol.for("react.strict_mode"),C1=Symbol.for("react.profiler"),P1=Symbol.for("react.provider"),R1=Symbol.for("react.context"),j1=Symbol.for("react.forward_ref"),D1=Symbol.for("react.suspense"),V1=Symbol.for("react.memo"),O1=Symbol.for("react.lazy"),pm=Symbol.iterator;function M1(t){return t===null||typeof t!="object"?null:(t=pm&&t[pm]||t["@@iterator"],typeof t=="function"?t:null)}var a0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l0=Object.assign,u0={};function di(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||a0}di.prototype.isReactComponent={};di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c0(){}c0.prototype=di.prototype;function vh(t,e,n){this.props=t,this.context=e,this.refs=u0,this.updater=n||a0}var _h=vh.prototype=new c0;_h.constructor=vh;l0(_h,di.prototype);_h.isPureReactComponent=!0;var mm=Array.isArray,d0=Object.prototype.hasOwnProperty,xh={current:null},h0={key:!0,ref:!0,__self:!0,__source:!0};function f0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)d0.call(e,r)&&!h0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Bo,type:t,key:i,ref:o,props:s,_owner:xh.current}}function L1(t,e){return{$$typeof:Bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bo}function F1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gm=/\/+/g;function pc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?F1(""+t.key):e.toString(36)}function Ha(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bo:case k1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pc(o,0):r,mm(s)?(n="",t!=null&&(n=t.replace(gm,"$&/")+"/"),Ha(s,e,n,"",function(h){return h})):s!=null&&(wh(s)&&(s=L1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",mm(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+pc(i,l);o+=Ha(i,e,n,c,s)}else if(c=M1(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+pc(i,l++),o+=Ha(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xa(t,e,n){if(t==null)return t;var r=[],s=0;return Ha(t,r,"","",function(i){return e.call(n,i,s++)}),r}function U1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Wa={transition:null},z1={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:xh};function p0(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:xa,forEach:function(t,e,n){xa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xa(t,function(){e++}),e},toArray:function(t){return xa(t,function(e){return e})||[]},only:function(t){if(!wh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=di;ce.Fragment=N1;ce.Profiler=C1;ce.PureComponent=vh;ce.StrictMode=A1;ce.Suspense=D1;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z1;ce.act=p0;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=l0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)d0.call(e,c)&&!h0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Bo,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:R1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:P1,_context:t},t.Consumer=t};ce.createElement=f0;ce.createFactory=function(t){var e=f0.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:j1,render:t}};ce.isValidElement=wh;ce.lazy=function(t){return{$$typeof:O1,_payload:{_status:-1,_result:t},_init:U1}};ce.memo=function(t,e){return{$$typeof:V1,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Wa.transition;Wa.transition={};try{t()}finally{Wa.transition=e}};ce.unstable_act=p0;ce.useCallback=function(t,e){return wt.current.useCallback(t,e)};ce.useContext=function(t){return wt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return wt.current.useEffect(t,e)};ce.useId=function(){return wt.current.useId()};ce.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return wt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};ce.useRef=function(t){return wt.current.useRef(t)};ce.useState=function(t){return wt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return wt.current.useTransition()};ce.version="18.3.1";o0.exports=ce;var $=o0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=$,B1=Symbol.for("react.element"),q1=Symbol.for("react.fragment"),H1=Object.prototype.hasOwnProperty,W1=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G1={key:!0,ref:!0,__self:!0,__source:!0};function m0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)H1.call(e,r)&&!G1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:B1,type:t,key:i,ref:o,props:s,_owner:W1.current}}ou.Fragment=q1;ou.jsx=m0;ou.jsxs=m0;i0.exports=ou;var u=i0.exports,g0={exports:{}},Lt={},y0={exports:{}},v0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,Y){var z=O.length;O.push(Y);e:for(;0<z;){var Z=z-1>>>1,re=O[Z];if(0<s(re,Y))O[Z]=Y,O[z]=re,z=Z;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var Y=O[0],z=O.pop();if(z!==Y){O[0]=z;e:for(var Z=0,re=O.length,fe=re>>>1;Z<fe;){var Be=2*(Z+1)-1,le=O[Be],Oe=Be+1,W=O[Oe];if(0>s(le,z))Oe<re&&0>s(W,le)?(O[Z]=W,O[Oe]=z,Z=Oe):(O[Z]=le,O[Be]=z,Z=Be);else if(Oe<re&&0>s(W,z))O[Z]=W,O[Oe]=z,Z=Oe;else break e}}return Y}function s(O,Y){var z=O.sortIndex-Y.sortIndex;return z!==0?z:O.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,g=3,b=!1,A=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(O){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=O)r(h),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(h)}}function j(O){if(k=!1,I(O),!A)if(n(c)!==null)A=!0,G(F);else{var Y=n(h);Y!==null&&J(j,Y.startTime-O)}}function F(O,Y){A=!1,k&&(k=!1,x(y),y=-1),b=!0;var z=g;try{for(I(Y),m=n(c);m!==null&&(!(m.expirationTime>Y)||O&&!C());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,g=m.priorityLevel;var re=Z(m.expirationTime<=Y);Y=t.unstable_now(),typeof re=="function"?m.callback=re:m===n(c)&&r(c),I(Y)}else r(c);m=n(c)}if(m!==null)var fe=!0;else{var Be=n(h);Be!==null&&J(j,Be.startTime-Y),fe=!1}return fe}finally{m=null,g=z,b=!1}}var U=!1,E=null,y=-1,w=5,T=-1;function C(){return!(t.unstable_now()-T<w)}function P(){if(E!==null){var O=t.unstable_now();T=O;var Y=!0;try{Y=E(!0,O)}finally{Y?S():(U=!1,E=null)}}else U=!1}var S;if(typeof _=="function")S=function(){_(P)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,V=q.port2;q.port1.onmessage=P,S=function(){V.postMessage(null)}}else S=function(){N(P,0)};function G(O){E=O,U||(U=!0,S())}function J(O,Y){y=N(function(){O(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){A||b||(A=!0,G(F))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var z=g;g=Y;try{return O()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,Y){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=g;g=O;try{return Y()}finally{g=z}},t.unstable_scheduleCallback=function(O,Y,z){var Z=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=z+re,O={id:p++,callback:Y,priorityLevel:O,startTime:z,expirationTime:re,sortIndex:-1},z>Z?(O.sortIndex=z,e(h,O),n(c)===null&&O===n(h)&&(k?(x(y),y=-1):k=!0,J(j,z-Z))):(O.sortIndex=re,e(c,O),A||b||(A=!0,G(F))),O},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(O){var Y=g;return function(){var z=g;g=Y;try{return O.apply(this,arguments)}finally{g=z}}}})(v0);y0.exports=v0;var K1=y0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1=$,Mt=K1;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _0=new Set,go={};function cs(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(go[t]=e,t=0;t<e.length;t++)_0.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=Object.prototype.hasOwnProperty,X1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ym={},vm={};function Y1(t){return Zc.call(vm,t)?!0:Zc.call(ym,t)?!1:X1.test(t)?vm[t]=!0:(ym[t]=!0,!1)}function J1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Z1(t,e,n,r){if(e===null||typeof e>"u"||J1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eh=/[\-:]([a-z])/g;function Th(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eh,Th);rt[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eh,Th);rt[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eh,Th);rt[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function bh(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Z1(e,n,s,r)&&(n=null),r||s===null?Y1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=Q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wa=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),Ih=Symbol.for("react.strict_mode"),ed=Symbol.for("react.profiler"),x0=Symbol.for("react.provider"),w0=Symbol.for("react.context"),Sh=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),nd=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),E0=Symbol.for("react.offscreen"),_m=Symbol.iterator;function Oi(t){return t===null||typeof t!="object"?null:(t=_m&&t[_m]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,mc;function Hi(t){if(mc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mc=e&&e[1]||""}return`
`+mc+t}var gc=!1;function yc(t,e){if(!t||gc)return"";gc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{gc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hi(t):""}function eE(t){switch(t.tag){case 5:return Hi(t.type);case 16:return Hi("Lazy");case 13:return Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 2:case 15:return t=yc(t.type,!1),t;case 11:return t=yc(t.type.render,!1),t;case 1:return t=yc(t.type,!0),t;default:return""}}function rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ss:return"Fragment";case Is:return"Portal";case ed:return"Profiler";case Ih:return"StrictMode";case td:return"Suspense";case nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w0:return(t.displayName||"Context")+".Consumer";case x0:return(t._context.displayName||"Context")+".Provider";case Sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kh:return e=t.displayName||null,e!==null?e:rd(t.type)||"Memo";case Yn:e=t._payload,t=t._init;try{return rd(t(e))}catch{}}return null}function tE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rd(e);case 8:return e===Ih?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function T0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nE(t){var e=T0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ea(t){t._valueTracker||(t._valueTracker=nE(t))}function b0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=T0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sd(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I0(t,e){e=e.checked,e!=null&&bh(t,"checked",e,!1)}function id(t,e){I0(t,e);var n=wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?od(t,e.type,n):e.hasOwnProperty("defaultValue")&&od(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function od(t,e,n){(e!=="number"||pl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wi=Array.isArray;function Ls(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ad(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Wi(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function S0(t,e){var n=wr(e.value),r=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ld(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ta,N0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ta=Ta||document.createElement("div"),Ta.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ta.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rE=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(t){rE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zi[e]=Zi[t]})});function A0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zi.hasOwnProperty(t)&&Zi[t]?(""+e).trim():e+"px"}function C0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=A0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var sE=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ud(t,e){if(e){if(sE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function cd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dd=null;function Nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hd=null,Fs=null,Us=null;function bm(t){if(t=Wo(t)){if(typeof hd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=du(e),hd(t.stateNode,t.type,e))}}function P0(t){Fs?Us?Us.push(t):Us=[t]:Fs=t}function R0(){if(Fs){var t=Fs,e=Us;if(Us=Fs=null,bm(t),e)for(t=0;t<e.length;t++)bm(e[t])}}function j0(t,e){return t(e)}function D0(){}var vc=!1;function V0(t,e,n){if(vc)return t(e,n);vc=!0;try{return j0(t,e,n)}finally{vc=!1,(Fs!==null||Us!==null)&&(D0(),R0())}}function vo(t,e){var n=t.stateNode;if(n===null)return null;var r=du(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var fd=!1;if(jn)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){fd=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{fd=!1}function iE(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var eo=!1,ml=null,gl=!1,pd=null,oE={onError:function(t){eo=!0,ml=t}};function aE(t,e,n,r,s,i,o,l,c){eo=!1,ml=null,iE.apply(oE,arguments)}function lE(t,e,n,r,s,i,o,l,c){if(aE.apply(this,arguments),eo){if(eo){var h=ml;eo=!1,ml=null}else throw Error(B(198));gl||(gl=!0,pd=h)}}function ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function O0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Im(t){if(ds(t)!==t)throw Error(B(188))}function uE(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Im(s),t;if(i===r)return Im(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function M0(t){return t=uE(t),t!==null?L0(t):null}function L0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=L0(t);if(e!==null)return e;t=t.sibling}return null}var F0=Mt.unstable_scheduleCallback,Sm=Mt.unstable_cancelCallback,cE=Mt.unstable_shouldYield,dE=Mt.unstable_requestPaint,Le=Mt.unstable_now,hE=Mt.unstable_getCurrentPriorityLevel,Ah=Mt.unstable_ImmediatePriority,U0=Mt.unstable_UserBlockingPriority,yl=Mt.unstable_NormalPriority,fE=Mt.unstable_LowPriority,z0=Mt.unstable_IdlePriority,au=null,hn=null;function pE(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(au,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:yE,mE=Math.log,gE=Math.LN2;function yE(t){return t>>>=0,t===0?32:31-(mE(t)/gE|0)|0}var ba=64,Ia=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Gi(l):(i&=o,i!==0&&(r=Gi(i)))}else o=n&~s,o!==0?r=Gi(o):i!==0&&(r=Gi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function vE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _E(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=vE(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function md(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $0(){var t=ba;return ba<<=1,!(ba&4194240)&&(ba=64),t}function _c(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function xE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ch(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function B0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var q0,Ph,H0,W0,G0,gd=!1,Sa=[],lr=null,ur=null,cr=null,_o=new Map,xo=new Map,Zn=[],wE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function km(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":_o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(e.pointerId)}}function Li(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wo(e),e!==null&&Ph(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function EE(t,e,n,r,s){switch(e){case"focusin":return lr=Li(lr,t,e,n,r,s),!0;case"dragenter":return ur=Li(ur,t,e,n,r,s),!0;case"mouseover":return cr=Li(cr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _o.set(i,Li(_o.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xo.set(i,Li(xo.get(i)||null,t,e,n,r,s)),!0}return!1}function K0(t){var e=qr(t.target);if(e!==null){var n=ds(e);if(n!==null){if(e=n.tag,e===13){if(e=O0(n),e!==null){t.blockedOn=e,G0(t.priority,function(){H0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dd=r,n.target.dispatchEvent(r),dd=null}else return e=Wo(n),e!==null&&Ph(e),t.blockedOn=n,!1;e.shift()}return!0}function Nm(t,e,n){Ga(t)&&n.delete(e)}function TE(){gd=!1,lr!==null&&Ga(lr)&&(lr=null),ur!==null&&Ga(ur)&&(ur=null),cr!==null&&Ga(cr)&&(cr=null),_o.forEach(Nm),xo.forEach(Nm)}function Fi(t,e){t.blockedOn===e&&(t.blockedOn=null,gd||(gd=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,TE)))}function wo(t){function e(s){return Fi(s,t)}if(0<Sa.length){Fi(Sa[0],t);for(var n=1;n<Sa.length;n++){var r=Sa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(lr!==null&&Fi(lr,t),ur!==null&&Fi(ur,t),cr!==null&&Fi(cr,t),_o.forEach(e),xo.forEach(e),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)K0(n),n.blockedOn===null&&Zn.shift()}var zs=Bn.ReactCurrentBatchConfig,_l=!0;function bE(t,e,n,r){var s=_e,i=zs.transition;zs.transition=null;try{_e=1,Rh(t,e,n,r)}finally{_e=s,zs.transition=i}}function IE(t,e,n,r){var s=_e,i=zs.transition;zs.transition=null;try{_e=4,Rh(t,e,n,r)}finally{_e=s,zs.transition=i}}function Rh(t,e,n,r){if(_l){var s=yd(t,e,n,r);if(s===null)Ac(t,e,r,xl,n),km(t,r);else if(EE(s,t,e,n,r))r.stopPropagation();else if(km(t,r),e&4&&-1<wE.indexOf(t)){for(;s!==null;){var i=Wo(s);if(i!==null&&q0(i),i=yd(t,e,n,r),i===null&&Ac(t,e,r,xl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ac(t,e,r,null,n)}}var xl=null;function yd(t,e,n,r){if(xl=null,t=Nh(r),t=qr(t),t!==null)if(e=ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=O0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xl=t,null}function Q0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hE()){case Ah:return 1;case U0:return 4;case yl:case fE:return 16;case z0:return 536870912;default:return 16}default:return 16}}var sr=null,jh=null,Ka=null;function X0(){if(Ka)return Ka;var t,e=jh,n=e.length,r,s="value"in sr?sr.value:sr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ka=s.slice(t,1<r?1-r:void 0)}function Qa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ka(){return!0}function Am(){return!1}function Ft(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ka:Am,this.isPropagationStopped=Am,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),e}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=Ft(hi),Ho=Pe({},hi,{view:0,detail:0}),SE=Ft(Ho),xc,wc,Ui,lu=Pe({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(xc=t.screenX-Ui.screenX,wc=t.screenY-Ui.screenY):wc=xc=0,Ui=t),xc)},movementY:function(t){return"movementY"in t?t.movementY:wc}}),Cm=Ft(lu),kE=Pe({},lu,{dataTransfer:0}),NE=Ft(kE),AE=Pe({},Ho,{relatedTarget:0}),Ec=Ft(AE),CE=Pe({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=Ft(CE),RE=Pe({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jE=Ft(RE),DE=Pe({},hi,{data:0}),Pm=Ft(DE),VE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ME={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ME[t])?!!e[t]:!1}function Vh(){return LE}var FE=Pe({},Ho,{key:function(t){if(t.key){var e=VE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vh,charCode:function(t){return t.type==="keypress"?Qa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UE=Ft(FE),zE=Pe({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rm=Ft(zE),$E=Pe({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vh}),BE=Ft($E),qE=Pe({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),HE=Ft(qE),WE=Pe({},lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GE=Ft(WE),KE=[9,13,27,32],Oh=jn&&"CompositionEvent"in window,to=null;jn&&"documentMode"in document&&(to=document.documentMode);var QE=jn&&"TextEvent"in window&&!to,Y0=jn&&(!Oh||to&&8<to&&11>=to),jm=" ",Dm=!1;function J0(t,e){switch(t){case"keyup":return KE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function XE(t,e){switch(t){case"compositionend":return Z0(e);case"keypress":return e.which!==32?null:(Dm=!0,jm);case"textInput":return t=e.data,t===jm&&Dm?null:t;default:return null}}function YE(t,e){if(ks)return t==="compositionend"||!Oh&&J0(t,e)?(t=X0(),Ka=jh=sr=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y0&&e.locale!=="ko"?null:e.data;default:return null}}var JE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JE[t.type]:e==="textarea"}function ev(t,e,n,r){P0(r),e=wl(e,"onChange"),0<e.length&&(n=new Dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,Eo=null;function ZE(t){dv(t,0)}function uu(t){var e=Cs(t);if(b0(e))return t}function eT(t,e){if(t==="change")return e}var tv=!1;if(jn){var Tc;if(jn){var bc="oninput"in document;if(!bc){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),bc=typeof Om.oninput=="function"}Tc=bc}else Tc=!1;tv=Tc&&(!document.documentMode||9<document.documentMode)}function Mm(){no&&(no.detachEvent("onpropertychange",nv),Eo=no=null)}function nv(t){if(t.propertyName==="value"&&uu(Eo)){var e=[];ev(e,Eo,t,Nh(t)),V0(ZE,e)}}function tT(t,e,n){t==="focusin"?(Mm(),no=e,Eo=n,no.attachEvent("onpropertychange",nv)):t==="focusout"&&Mm()}function nT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uu(Eo)}function rT(t,e){if(t==="click")return uu(e)}function sT(t,e){if(t==="input"||t==="change")return uu(e)}function iT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:iT;function To(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zc.call(e,s)||!on(t[s],e[s]))return!1}return!0}function Lm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fm(t,e){var n=Lm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lm(n)}}function rv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sv(){for(var t=window,e=pl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pl(t.document)}return e}function Mh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oT(t){var e=sv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rv(n.ownerDocument.documentElement,n)){if(r!==null&&Mh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Fm(n,i);var o=Fm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aT=jn&&"documentMode"in document&&11>=document.documentMode,Ns=null,vd=null,ro=null,_d=!1;function Um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_d||Ns==null||Ns!==pl(r)||(r=Ns,"selectionStart"in r&&Mh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&To(ro,r)||(ro=r,r=wl(vd,"onSelect"),0<r.length&&(e=new Dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ns)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},Ic={},iv={};jn&&(iv=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function cu(t){if(Ic[t])return Ic[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iv)return Ic[t]=e[n];return t}var ov=cu("animationend"),av=cu("animationiteration"),lv=cu("animationstart"),uv=cu("transitionend"),cv=new Map,zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){cv.set(t,e),cs(e,[t])}for(var Sc=0;Sc<zm.length;Sc++){var kc=zm[Sc],lT=kc.toLowerCase(),uT=kc[0].toUpperCase()+kc.slice(1);Pr(lT,"on"+uT)}Pr(ov,"onAnimationEnd");Pr(av,"onAnimationIteration");Pr(lv,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(uv,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function $m(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lE(r,e,void 0,t),t.currentTarget=null}function dv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;$m(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;$m(s,l,h),i=c}}}if(gl)throw t=pd,gl=!1,pd=null,t}function Ie(t,e){var n=e[bd];n===void 0&&(n=e[bd]=new Set);var r=t+"__bubble";n.has(r)||(hv(e,t,2,!1),n.add(r))}function Nc(t,e,n){var r=0;e&&(r|=4),hv(n,t,r,e)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function bo(t){if(!t[Aa]){t[Aa]=!0,_0.forEach(function(n){n!=="selectionchange"&&(cT.has(n)||Nc(n,!1,t),Nc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Aa]||(e[Aa]=!0,Nc("selectionchange",!1,e))}}function hv(t,e,n,r){switch(Q0(e)){case 1:var s=bE;break;case 4:s=IE;break;default:s=Rh}n=s.bind(null,e,n,t),s=void 0,!fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ac(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=qr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}V0(function(){var h=i,p=Nh(n),m=[];e:{var g=cv.get(t);if(g!==void 0){var b=Dh,A=t;switch(t){case"keypress":if(Qa(n)===0)break e;case"keydown":case"keyup":b=UE;break;case"focusin":A="focus",b=Ec;break;case"focusout":A="blur",b=Ec;break;case"beforeblur":case"afterblur":b=Ec;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=NE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=BE;break;case ov:case av:case lv:b=PE;break;case uv:b=HE;break;case"scroll":b=SE;break;case"wheel":b=GE;break;case"copy":case"cut":case"paste":b=jE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Rm}var k=(e&4)!==0,N=!k&&t==="scroll",x=k?g!==null?g+"Capture":null:g;k=[];for(var _=h,I;_!==null;){I=_;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,x!==null&&(j=vo(_,x),j!=null&&k.push(Io(_,j,I)))),N)break;_=_.return}0<k.length&&(g=new b(g,A,null,n,p),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",g&&n!==dd&&(A=n.relatedTarget||n.fromElement)&&(qr(A)||A[Dn]))break e;if((b||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,b?(A=n.relatedTarget||n.toElement,b=h,A=A?qr(A):null,A!==null&&(N=ds(A),A!==N||A.tag!==5&&A.tag!==6)&&(A=null)):(b=null,A=h),b!==A)){if(k=Cm,j="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=Rm,j="onPointerLeave",x="onPointerEnter",_="pointer"),N=b==null?g:Cs(b),I=A==null?g:Cs(A),g=new k(j,_+"leave",b,n,p),g.target=N,g.relatedTarget=I,j=null,qr(p)===h&&(k=new k(x,_+"enter",A,n,p),k.target=I,k.relatedTarget=N,j=k),N=j,b&&A)t:{for(k=b,x=A,_=0,I=k;I;I=xs(I))_++;for(I=0,j=x;j;j=xs(j))I++;for(;0<_-I;)k=xs(k),_--;for(;0<I-_;)x=xs(x),I--;for(;_--;){if(k===x||x!==null&&k===x.alternate)break t;k=xs(k),x=xs(x)}k=null}else k=null;b!==null&&Bm(m,g,b,k,!1),A!==null&&N!==null&&Bm(m,N,A,k,!0)}}e:{if(g=h?Cs(h):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var F=eT;else if(Vm(g))if(tv)F=sT;else{F=nT;var U=tT}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=rT);if(F&&(F=F(t,h))){ev(m,F,n,p);break e}U&&U(t,g,h),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&od(g,"number",g.value)}switch(U=h?Cs(h):window,t){case"focusin":(Vm(U)||U.contentEditable==="true")&&(Ns=U,vd=h,ro=null);break;case"focusout":ro=vd=Ns=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,Um(m,n,p);break;case"selectionchange":if(aT)break;case"keydown":case"keyup":Um(m,n,p)}var E;if(Oh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ks?J0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Y0&&n.locale!=="ko"&&(ks||y!=="onCompositionStart"?y==="onCompositionEnd"&&ks&&(E=X0()):(sr=p,jh="value"in sr?sr.value:sr.textContent,ks=!0)),U=wl(h,y),0<U.length&&(y=new Pm(y,t,null,n,p),m.push({event:y,listeners:U}),E?y.data=E:(E=Z0(n),E!==null&&(y.data=E)))),(E=QE?XE(t,n):YE(t,n))&&(h=wl(h,"onBeforeInput"),0<h.length&&(p=new Pm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}dv(m,e)})}function Io(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vo(t,n),i!=null&&r.unshift(Io(t,i,s)),i=vo(t,e),i!=null&&r.push(Io(t,i,s))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=vo(n,i),c!=null&&o.unshift(Io(n,c,l))):s||(c=vo(n,i),c!=null&&o.push(Io(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dT=/\r\n?/g,hT=/\u0000|\uFFFD/g;function qm(t){return(typeof t=="string"?t:""+t).replace(dT,`
`).replace(hT,"")}function Ca(t,e,n){if(e=qm(e),qm(t)!==e&&n)throw Error(B(425))}function El(){}var xd=null,wd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Td=typeof setTimeout=="function"?setTimeout:void 0,fT=typeof clearTimeout=="function"?clearTimeout:void 0,Hm=typeof Promise=="function"?Promise:void 0,pT=typeof queueMicrotask=="function"?queueMicrotask:typeof Hm<"u"?function(t){return Hm.resolve(null).then(t).catch(mT)}:Td;function mT(t){setTimeout(function(){throw t})}function Cc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wo(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fi=Math.random().toString(36).slice(2),dn="__reactFiber$"+fi,So="__reactProps$"+fi,Dn="__reactContainer$"+fi,bd="__reactEvents$"+fi,gT="__reactListeners$"+fi,yT="__reactHandles$"+fi;function qr(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dn]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wm(t);t!==null;){if(n=t[dn])return n;t=Wm(t)}return e}t=n,n=t.parentNode}return null}function Wo(t){return t=t[dn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function du(t){return t[So]||null}var Id=[],Ps=-1;function Rr(t){return{current:t}}function ke(t){0>Ps||(t.current=Id[Ps],Id[Ps]=null,Ps--)}function Te(t,e){Ps++,Id[Ps]=t.current,t.current=e}var Er={},pt=Rr(Er),Nt=Rr(!1),ts=Er;function Qs(t,e){var n=t.type.contextTypes;if(!n)return Er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function Tl(){ke(Nt),ke(pt)}function Gm(t,e,n){if(pt.current!==Er)throw Error(B(168));Te(pt,e),Te(Nt,n)}function fv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,tE(t)||"Unknown",s));return Pe({},n,r)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,ts=pt.current,Te(pt,t),Te(Nt,Nt.current),!0}function Km(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=fv(t,e,ts),r.__reactInternalMemoizedMergedChildContext=t,ke(Nt),ke(pt),Te(pt,t)):ke(Nt),Te(Nt,n)}var bn=null,hu=!1,Pc=!1;function pv(t){bn===null?bn=[t]:bn.push(t)}function vT(t){hu=!0,pv(t)}function jr(){if(!Pc&&bn!==null){Pc=!0;var t=0,e=_e;try{var n=bn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bn=null,hu=!1}catch(s){throw bn!==null&&(bn=bn.slice(t+1)),F0(Ah,jr),s}finally{_e=e,Pc=!1}}return null}var Rs=[],js=0,Il=null,Sl=0,Ut=[],zt=0,ns=null,Sn=1,kn="";function zr(t,e){Rs[js++]=Sl,Rs[js++]=Il,Il=t,Sl=e}function mv(t,e,n){Ut[zt++]=Sn,Ut[zt++]=kn,Ut[zt++]=ns,ns=t;var r=Sn;t=kn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sn=1<<32-nn(e)+s|n<<s|r,kn=i+t}else Sn=1<<i|n<<s|r,kn=t}function Lh(t){t.return!==null&&(zr(t,1),mv(t,1,0))}function Fh(t){for(;t===Il;)Il=Rs[--js],Rs[js]=null,Sl=Rs[--js],Rs[js]=null;for(;t===ns;)ns=Ut[--zt],Ut[zt]=null,kn=Ut[--zt],Ut[zt]=null,Sn=Ut[--zt],Ut[zt]=null}var Ot=null,Dt=null,Ne=!1,Zt=null;function gv(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Dt=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:Sn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Dt=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kd(t){if(Ne){var e=Dt;if(e){var n=e;if(!Qm(t,e)){if(Sd(t))throw Error(B(418));e=dr(n.nextSibling);var r=Ot;e&&Qm(t,e)?gv(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Ot=t)}}else{if(Sd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ne=!1,Ot=t}}}function Xm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function Pa(t){if(t!==Ot)return!1;if(!Ne)return Xm(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Dt)){if(Sd(t))throw yv(),Error(B(418));for(;e;)gv(t,e),e=dr(e.nextSibling)}if(Xm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Ot?dr(t.stateNode.nextSibling):null;return!0}function yv(){for(var t=Dt;t;)t=dr(t.nextSibling)}function Xs(){Dt=Ot=null,Ne=!1}function Uh(t){Zt===null?Zt=[t]:Zt.push(t)}var _T=Bn.ReactCurrentBatchConfig;function zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ra(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ym(t){var e=t._init;return e(t._payload)}function vv(t){function e(x,_){if(t){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=mr(x,_),x.index=0,x.sibling=null,x}function i(x,_,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,I,j){return _===null||_.tag!==6?(_=Lc(I,x.mode,j),_.return=x,_):(_=s(_,I),_.return=x,_)}function c(x,_,I,j){var F=I.type;return F===Ss?p(x,_,I.props.children,j,I.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Yn&&Ym(F)===_.type)?(j=s(_,I.props),j.ref=zi(x,_,I),j.return=x,j):(j=nl(I.type,I.key,I.props,null,x.mode,j),j.ref=zi(x,_,I),j.return=x,j)}function h(x,_,I,j){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=Fc(I,x.mode,j),_.return=x,_):(_=s(_,I.children||[]),_.return=x,_)}function p(x,_,I,j,F){return _===null||_.tag!==7?(_=Xr(I,x.mode,j,F),_.return=x,_):(_=s(_,I),_.return=x,_)}function m(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Lc(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case wa:return I=nl(_.type,_.key,_.props,null,x.mode,I),I.ref=zi(x,null,_),I.return=x,I;case Is:return _=Fc(_,x.mode,I),_.return=x,_;case Yn:var j=_._init;return m(x,j(_._payload),I)}if(Wi(_)||Oi(_))return _=Xr(_,x.mode,I,null),_.return=x,_;Ra(x,_)}return null}function g(x,_,I,j){var F=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:l(x,_,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case wa:return I.key===F?c(x,_,I,j):null;case Is:return I.key===F?h(x,_,I,j):null;case Yn:return F=I._init,g(x,_,F(I._payload),j)}if(Wi(I)||Oi(I))return F!==null?null:p(x,_,I,j,null);Ra(x,I)}return null}function b(x,_,I,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(I)||null,l(_,x,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case wa:return x=x.get(j.key===null?I:j.key)||null,c(_,x,j,F);case Is:return x=x.get(j.key===null?I:j.key)||null,h(_,x,j,F);case Yn:var U=j._init;return b(x,_,I,U(j._payload),F)}if(Wi(j)||Oi(j))return x=x.get(I)||null,p(_,x,j,F,null);Ra(_,j)}return null}function A(x,_,I,j){for(var F=null,U=null,E=_,y=_=0,w=null;E!==null&&y<I.length;y++){E.index>y?(w=E,E=null):w=E.sibling;var T=g(x,E,I[y],j);if(T===null){E===null&&(E=w);break}t&&E&&T.alternate===null&&e(x,E),_=i(T,_,y),U===null?F=T:U.sibling=T,U=T,E=w}if(y===I.length)return n(x,E),Ne&&zr(x,y),F;if(E===null){for(;y<I.length;y++)E=m(x,I[y],j),E!==null&&(_=i(E,_,y),U===null?F=E:U.sibling=E,U=E);return Ne&&zr(x,y),F}for(E=r(x,E);y<I.length;y++)w=b(E,x,y,I[y],j),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),_=i(w,_,y),U===null?F=w:U.sibling=w,U=w);return t&&E.forEach(function(C){return e(x,C)}),Ne&&zr(x,y),F}function k(x,_,I,j){var F=Oi(I);if(typeof F!="function")throw Error(B(150));if(I=F.call(I),I==null)throw Error(B(151));for(var U=F=null,E=_,y=_=0,w=null,T=I.next();E!==null&&!T.done;y++,T=I.next()){E.index>y?(w=E,E=null):w=E.sibling;var C=g(x,E,T.value,j);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(x,E),_=i(C,_,y),U===null?F=C:U.sibling=C,U=C,E=w}if(T.done)return n(x,E),Ne&&zr(x,y),F;if(E===null){for(;!T.done;y++,T=I.next())T=m(x,T.value,j),T!==null&&(_=i(T,_,y),U===null?F=T:U.sibling=T,U=T);return Ne&&zr(x,y),F}for(E=r(x,E);!T.done;y++,T=I.next())T=b(E,x,y,T.value,j),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),_=i(T,_,y),U===null?F=T:U.sibling=T,U=T);return t&&E.forEach(function(P){return e(x,P)}),Ne&&zr(x,y),F}function N(x,_,I,j){if(typeof I=="object"&&I!==null&&I.type===Ss&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case wa:e:{for(var F=I.key,U=_;U!==null;){if(U.key===F){if(F=I.type,F===Ss){if(U.tag===7){n(x,U.sibling),_=s(U,I.props.children),_.return=x,x=_;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Yn&&Ym(F)===U.type){n(x,U.sibling),_=s(U,I.props),_.ref=zi(x,U,I),_.return=x,x=_;break e}n(x,U);break}else e(x,U);U=U.sibling}I.type===Ss?(_=Xr(I.props.children,x.mode,j,I.key),_.return=x,x=_):(j=nl(I.type,I.key,I.props,null,x.mode,j),j.ref=zi(x,_,I),j.return=x,x=j)}return o(x);case Is:e:{for(U=I.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(x,_.sibling),_=s(_,I.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Fc(I,x.mode,j),_.return=x,x=_}return o(x);case Yn:return U=I._init,N(x,_,U(I._payload),j)}if(Wi(I))return A(x,_,I,j);if(Oi(I))return k(x,_,I,j);Ra(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,I),_.return=x,x=_):(n(x,_),_=Lc(I,x.mode,j),_.return=x,x=_),o(x)):n(x,_)}return N}var Ys=vv(!0),_v=vv(!1),kl=Rr(null),Nl=null,Ds=null,zh=null;function $h(){zh=Ds=Nl=null}function Bh(t){var e=kl.current;ke(kl),t._currentValue=e}function Nd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $s(t,e){Nl=t,zh=Ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(zh!==t)if(t={context:t,memoizedValue:e,next:null},Ds===null){if(Nl===null)throw Error(B(308));Ds=t,Nl.dependencies={lanes:0,firstContext:t}}else Ds=Ds.next=t;return e}var Hr=null;function qh(t){Hr===null?Hr=[t]:Hr.push(t)}function xv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jn=!1;function Hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,qh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function Xa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ch(t,n)}}function Jm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Al(t,e,n,r){var s=t.updateQueue;Jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,l=i;do{var g=l.lane,b=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,k=l;switch(g=e,b=n,k.tag){case 1:if(A=k.payload,typeof A=="function"){m=A.call(b,m,g);break e}m=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=k.payload,g=typeof A=="function"?A.call(b,m,g):A,g==null)break e;m=Pe({},m,g);break e;case 2:Jn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else b={eventTime:b,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=b,c=m):p=p.next=b,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ss|=o,t.lanes=o,t.memoizedState=m}}function Zm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Go={},fn=Rr(Go),ko=Rr(Go),No=Rr(Go);function Wr(t){if(t===Go)throw Error(B(174));return t}function Wh(t,e){switch(Te(No,e),Te(ko,t),Te(fn,Go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ld(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ld(e,t)}ke(fn),Te(fn,e)}function Js(){ke(fn),ke(ko),ke(No)}function Ev(t){Wr(No.current);var e=Wr(fn.current),n=ld(e,t.type);e!==n&&(Te(ko,t),Te(fn,n))}function Gh(t){ko.current===t&&(ke(fn),ke(ko))}var Ae=Rr(0);function Cl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rc=[];function Kh(){for(var t=0;t<Rc.length;t++)Rc[t]._workInProgressVersionPrimary=null;Rc.length=0}var Ya=Bn.ReactCurrentDispatcher,jc=Bn.ReactCurrentBatchConfig,rs=0,Ce=null,qe=null,Ke=null,Pl=!1,so=!1,Ao=0,xT=0;function lt(){throw Error(B(321))}function Qh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Xh(t,e,n,r,s,i){if(rs=i,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ya.current=t===null||t.memoizedState===null?bT:IT,t=n(r,s),so){i=0;do{if(so=!1,Ao=0,25<=i)throw Error(B(301));i+=1,Ke=qe=null,e.updateQueue=null,Ya.current=ST,t=n(r,s)}while(so)}if(Ya.current=Rl,e=qe!==null&&qe.next!==null,rs=0,Ke=qe=Ce=null,Pl=!1,e)throw Error(B(300));return t}function Yh(){var t=Ao!==0;return Ao=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Ce.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Gt(){if(qe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ke===null?Ce.memoizedState:Ke.next;if(e!==null)Ke=e,qe=t;else{if(t===null)throw Error(B(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ke===null?Ce.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function Co(t,e){return typeof e=="function"?e(t):e}function Dc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var p=h.lane;if((rs&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Ce.lanes|=p,ss|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,on(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ce.lanes|=i,ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Tv(){}function bv(t,e){var n=Ce,r=Gt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,Jh(kv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Po(9,Sv.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(B(349));rs&30||Iv(n,e,s)}return s}function Iv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sv(t,e,n,r){e.value=n,e.getSnapshot=r,Nv(e)&&Av(t)}function kv(t,e,n){return n(function(){Nv(e)&&Av(t)})}function Nv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function Av(t){var e=Vn(t,1);e!==null&&rn(e,t,1,-1)}function eg(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=TT.bind(null,Ce,t),[e.memoizedState,t]}function Po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Cv(){return Gt().memoizedState}function Ja(t,e,n,r){var s=un();Ce.flags|=t,s.memoizedState=Po(1|e,n,void 0,r===void 0?null:r)}function fu(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Qh(r,o.deps)){s.memoizedState=Po(e,n,i,r);return}}Ce.flags|=t,s.memoizedState=Po(1|e,n,i,r)}function tg(t,e){return Ja(8390656,8,t,e)}function Jh(t,e){return fu(2048,8,t,e)}function Pv(t,e){return fu(4,2,t,e)}function Rv(t,e){return fu(4,4,t,e)}function jv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dv(t,e,n){return n=n!=null?n.concat([t]):null,fu(4,4,jv.bind(null,e,t),n)}function Zh(){}function Vv(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ov(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mv(t,e,n){return rs&21?(on(n,e)||(n=$0(),Ce.lanes|=n,ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function wT(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=jc.transition;jc.transition={};try{t(!1),e()}finally{_e=n,jc.transition=r}}function Lv(){return Gt().memoizedState}function ET(t,e,n){var r=pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fv(t))Uv(e,n);else if(n=xv(t,e,n,r),n!==null){var s=xt();rn(n,t,r,s),zv(n,e,r)}}function TT(t,e,n){var r=pr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fv(t))Uv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,on(l,o)){var c=e.interleaved;c===null?(s.next=s,qh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=xv(t,e,s,r),n!==null&&(s=xt(),rn(n,t,r,s),zv(n,e,r))}}function Fv(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function Uv(t,e){so=Pl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ch(t,n)}}var Rl={readContext:Wt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},bT={readContext:Wt,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:tg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ja(4194308,4,jv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ja(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ET.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:eg,useDebugValue:Zh,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=eg(!1),e=t[0];return t=wT.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,s=un();if(Ne){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Qe===null)throw Error(B(349));rs&30||Iv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tg(kv.bind(null,r,i,t),[t]),r.flags|=2048,Po(9,Sv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=un(),e=Qe.identifierPrefix;if(Ne){var n=kn,r=Sn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ao++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IT={readContext:Wt,useCallback:Vv,useContext:Wt,useEffect:Jh,useImperativeHandle:Dv,useInsertionEffect:Pv,useLayoutEffect:Rv,useMemo:Ov,useReducer:Dc,useRef:Cv,useState:function(){return Dc(Co)},useDebugValue:Zh,useDeferredValue:function(t){var e=Gt();return Mv(e,qe.memoizedState,t)},useTransition:function(){var t=Dc(Co)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Tv,useSyncExternalStore:bv,useId:Lv,unstable_isNewReconciler:!1},ST={readContext:Wt,useCallback:Vv,useContext:Wt,useEffect:Jh,useImperativeHandle:Dv,useInsertionEffect:Pv,useLayoutEffect:Rv,useMemo:Ov,useReducer:Vc,useRef:Cv,useState:function(){return Vc(Co)},useDebugValue:Zh,useDeferredValue:function(t){var e=Gt();return qe===null?e.memoizedState=t:Mv(e,qe.memoizedState,t)},useTransition:function(){var t=Vc(Co)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Tv,useSyncExternalStore:bv,useId:Lv,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ad(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pu={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=pr(t),i=Pn(r,s);i.payload=e,n!=null&&(i.callback=n),e=hr(t,i,s),e!==null&&(rn(e,t,s,r),Xa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=pr(t),i=Pn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hr(t,i,s),e!==null&&(rn(e,t,s,r),Xa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=pr(t),s=Pn(n,r);s.tag=2,e!=null&&(s.callback=e),e=hr(t,s,r),e!==null&&(rn(e,t,r,n),Xa(e,t,r))}};function ng(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(s,i):!0}function $v(t,e,n){var r=!1,s=Er,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=At(e)?ts:pt.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):Er),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pu.enqueueReplaceState(e,e.state,null)}function Cd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=At(e)?ts:pt.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ad(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pu.enqueueReplaceState(s,s.state,null),Al(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=eE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Oc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function Bv(t,e,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dl||(Dl=!0,zd=r),Pd(t,e)},n}function qv(t,e,n){n=Pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Pd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Pd(t,e),typeof r!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zT.bind(null,t,e,n),e.then(t,t))}function ig(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function og(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pn(-1,1),e.tag=2,hr(n,e,1))),n.lanes|=1),t)}var NT=Bn.ReactCurrentOwner,kt=!1;function vt(t,e,n,r){e.child=t===null?_v(e,null,n,r):Ys(e,t.child,n,r)}function ag(t,e,n,r,s){n=n.render;var i=e.ref;return $s(e,s),r=Xh(t,e,n,r,i,s),n=Yh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(Ne&&n&&Lh(e),e.flags|=1,vt(t,e,r,s),e.child)}function lg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!lf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Hv(t,e,i,r,s)):(t=nl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&t.ref===e.ref)return On(t,e,s)}return e.flags|=1,t=mr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Hv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(To(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,On(t,e,s)}return Rd(t,e,n,r,s)}function Wv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Os,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Os,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Os,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Os,jt),jt|=r;return vt(t,e,s,n),e.child}function Gv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,n,r,s){var i=At(n)?ts:pt.current;return i=Qs(e,i),$s(e,s),n=Xh(t,e,n,r,i,s),r=Yh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(Ne&&r&&Lh(e),e.flags|=1,vt(t,e,n,s),e.child)}function ug(t,e,n,r,s){if(At(n)){var i=!0;bl(e)}else i=!1;if($s(e,s),e.stateNode===null)Za(t,e),$v(e,n,r),Cd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Wt(h):(h=At(n)?ts:pt.current,h=Qs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&rg(e,o,r,h),Jn=!1;var g=e.memoizedState;o.state=g,Al(e,r,o,s),c=e.memoizedState,l!==r||g!==c||Nt.current||Jn?(typeof p=="function"&&(Ad(e,n,p,r),c=e.memoizedState),(l=Jn||ng(e,n,l,r,g,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Yt(e.type,l),o.props=h,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wt(c):(c=At(n)?ts:pt.current,c=Qs(e,c));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&rg(e,o,r,c),Jn=!1,g=e.memoizedState,o.state=g,Al(e,r,o,s);var A=e.memoizedState;l!==m||g!==A||Nt.current||Jn?(typeof b=="function"&&(Ad(e,n,b,r),A=e.memoizedState),(h=Jn||ng(e,n,h,r,g,A,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return jd(t,e,n,r,i,s)}function jd(t,e,n,r,s,i){Gv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Km(e,n,!1),On(t,e,i);r=e.stateNode,NT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,l,i)):vt(t,e,l,i),e.memoizedState=r.state,s&&Km(e,n,!0),e.child}function Kv(t){var e=t.stateNode;e.pendingContext?Gm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gm(t,e.context,!1),Wh(t,e.containerInfo)}function cg(t,e,n,r,s){return Xs(),Uh(s),e.flags|=256,vt(t,e,n,r),e.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Vd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qv(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Ae,s&1),t===null)return kd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yu(o,r,0,null),t=Xr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vd(n),e.memoizedState=Dd,t):ef(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return AT(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=mr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=mr(l,i):(i=Xr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Vd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dd,r}return i=t.child,t=i.sibling,r=mr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ef(t,e){return e=yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ja(t,e,n,r){return r!==null&&Uh(r),Ys(e,t.child,null,n),t=ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Oc(Error(B(422))),ja(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=yu({mode:"visible",children:r.children},s,0,null),i=Xr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=Vd(o),e.memoizedState=Dd,i);if(!(e.mode&1))return ja(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=Oc(i,r,void 0),ja(t,e,o,r)}if(l=(o&t.childLanes)!==0,kt||l){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(t,s),rn(r,t,s,-1))}return af(),r=Oc(Error(B(421))),ja(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$T.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=dr(s.nextSibling),Ot=e,Ne=!0,Zt=null,t!==null&&(Ut[zt++]=Sn,Ut[zt++]=kn,Ut[zt++]=ns,Sn=t.id,kn=t.overflow,ns=e),e=ef(e,r.children),e.flags|=4096,e)}function dg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nd(t.return,e,n)}function Mc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dg(t,n,e);else if(t.tag===19)dg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Mc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Mc(e,!0,n,null,i);break;case"together":Mc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Za(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CT(t,e,n){switch(e.tag){case 3:Kv(e),Xs();break;case 5:Ev(e);break;case 1:At(e.type)&&bl(e);break;case 4:Wh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(kl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?Qv(t,e,n):(Te(Ae,Ae.current&1),t=On(t,e,n),t!==null?t.sibling:null);Te(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Wv(t,e,n)}return On(t,e,n)}var Yv,Od,Jv,Zv;Yv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Od=function(){};Jv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wr(fn.current);var i=null;switch(n){case"input":s=sd(t,s),r=sd(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=ad(t,s),r=ad(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=El)}ud(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(go.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(go.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ie("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Zv=function(t,e,n,r){n!==r&&(e.flags|=4)};function $i(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PT(t,e,n){var r=e.pendingProps;switch(Fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return At(e.type)&&Tl(),ut(e),null;case 3:return r=e.stateNode,Js(),ke(Nt),ke(pt),Kh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(qd(Zt),Zt=null))),Od(t,e),ut(e),null;case 5:Gh(e);var s=Wr(No.current);if(n=e.type,t!==null&&e.stateNode!=null)Jv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ut(e),null}if(t=Wr(fn.current),Pa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[dn]=e,r[So]=i,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(s=0;s<Ki.length;s++)Ie(Ki[s],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":xm(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":Em(r,i),Ie("invalid",r)}ud(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ca(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ca(r.textContent,l,t),s=["children",""+l]):go.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Ea(r),wm(r,i,!0);break;case"textarea":Ea(r),Tm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=El)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dn]=e,t[So]=r,Yv(t,e,!1,!1),e.stateNode=t;e:{switch(o=cd(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),s=r;break;case"iframe":case"object":case"embed":Ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ki.length;s++)Ie(Ki[s],t);s=r;break;case"source":Ie("error",t),s=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),s=r;break;case"details":Ie("toggle",t),s=r;break;case"input":xm(t,r),s=sd(t,r),Ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":Em(t,r),s=ad(t,r),Ie("invalid",t);break;default:s=r}ud(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?C0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&N0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yo(t,c):typeof c=="number"&&yo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(go.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ie("scroll",t):c!=null&&bh(t,i,c,o))}switch(n){case"input":Ea(t),wm(t,r,!1);break;case"textarea":Ea(t),Tm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ls(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ls(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=El)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)Zv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Wr(No.current),Wr(fn.current),Pa(e)){if(r=e.stateNode,n=e.memoizedProps,r[dn]=e,(i=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:Ca(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ca(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=e,e.stateNode=r}return ut(e),null;case 13:if(ke(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Dt!==null&&e.mode&1&&!(e.flags&128))yv(),Xs(),e.flags|=98560,i=!1;else if(i=Pa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[dn]=e}else Xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else Zt!==null&&(qd(Zt),Zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?He===0&&(He=3):af())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Js(),Od(t,e),t===null&&bo(e.stateNode.containerInfo),ut(e),null;case 10:return Bh(e.type._context),ut(e),null;case 17:return At(e.type)&&Tl(),ut(e),null;case 19:if(ke(Ae),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$i(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cl(t),o!==null){for(e.flags|=128,$i(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Le()>ei&&(e.flags|=128,r=!0,$i(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return ut(e),null}else 2*Le()-i.renderingStartTime>ei&&n!==1073741824&&(e.flags|=128,r=!0,$i(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Le(),e.sibling=null,n=Ae.current,Te(Ae,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function RT(t,e){switch(Fh(e),e.tag){case 1:return At(e.type)&&Tl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),ke(Nt),ke(pt),Kh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gh(e),null;case 13:if(ke(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ae),null;case 4:return Js(),null;case 10:return Bh(e.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var Da=!1,ht=!1,jT=typeof WeakSet=="function"?WeakSet:Set,X=null;function Vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Md(t,e,n){try{n()}catch(r){De(t,e,r)}}var hg=!1;function DT(t,e){if(xd=_l,t=sv(),Mh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var b;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)g=m,m=b;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++p===r&&(c=o),(b=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=b}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:t,selectionRange:n},_l=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var k=A.memoizedProps,N=A.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?k:Yt(e.type,k),N);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(j){De(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return A=hg,hg=!1,A}function io(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Md(e,n,i)}s=s.next}while(s!==r)}}function mu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ld(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function e_(t){var e=t.alternate;e!==null&&(t.alternate=null,e_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[So],delete e[bd],delete e[gT],delete e[yT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function t_(t){return t.tag===5||t.tag===3||t.tag===4}function fg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||t_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=El));else if(r!==4&&(t=t.child,t!==null))for(Fd(t,e,n),t=t.sibling;t!==null;)Fd(t,e,n),t=t.sibling}function Ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ud(t,e,n),t=t.sibling;t!==null;)Ud(t,e,n),t=t.sibling}var Ze=null,Jt=!1;function Qn(t,e,n){for(n=n.child;n!==null;)n_(t,e,n),n=n.sibling}function n_(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(au,n)}catch{}switch(n.tag){case 5:ht||Vs(n,e);case 6:var r=Ze,s=Jt;Ze=null,Qn(t,e,n),Ze=r,Jt=s,Ze!==null&&(Jt?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Jt?(t=Ze,n=n.stateNode,t.nodeType===8?Cc(t.parentNode,n):t.nodeType===1&&Cc(t,n),wo(t)):Cc(Ze,n.stateNode));break;case 4:r=Ze,s=Jt,Ze=n.stateNode.containerInfo,Jt=!0,Qn(t,e,n),Ze=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Md(n,e,o),s=s.next}while(s!==r)}Qn(t,e,n);break;case 1:if(!ht&&(Vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}Qn(t,e,n);break;case 21:Qn(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Qn(t,e,n),ht=r):Qn(t,e,n);break;default:Qn(t,e,n)}}function pg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jT),e.forEach(function(r){var s=BT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,Jt=!1;break e;case 3:Ze=l.stateNode.containerInfo,Jt=!0;break e;case 4:Ze=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(Ze===null)throw Error(B(160));n_(i,o,s),Ze=null,Jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){De(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)r_(e,t),e=e.sibling}function r_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),ln(t),r&4){try{io(3,t,t.return),mu(3,t)}catch(k){De(t,t.return,k)}try{io(5,t,t.return)}catch(k){De(t,t.return,k)}}break;case 1:Xt(e,t),ln(t),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(Xt(e,t),ln(t),r&512&&n!==null&&Vs(n,n.return),t.flags&32){var s=t.stateNode;try{yo(s,"")}catch(k){De(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&I0(s,i),cd(l,o);var h=cd(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?C0(s,m):p==="dangerouslySetInnerHTML"?N0(s,m):p==="children"?yo(s,m):bh(s,p,m,h)}switch(l){case"input":id(s,i);break;case"textarea":S0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?Ls(s,!!i.multiple,b,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ls(s,!!i.multiple,i.defaultValue,!0):Ls(s,!!i.multiple,i.multiple?[]:"",!1))}s[So]=i}catch(k){De(t,t.return,k)}}break;case 6:if(Xt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){De(t,t.return,k)}}break;case 3:if(Xt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(k){De(t,t.return,k)}break;case 4:Xt(e,t),ln(t);break;case 13:Xt(e,t),ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rf=Le())),r&4&&pg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(h=ht)||p,Xt(e,t),ht=h):Xt(e,t),ln(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(X=t,p=t.child;p!==null;){for(m=X=p;X!==null;){switch(g=X,b=g.child,g.tag){case 0:case 11:case 14:case 15:io(4,g,g.return);break;case 1:Vs(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(k){De(r,n,k)}}break;case 5:Vs(g,g.return);break;case 22:if(g.memoizedState!==null){gg(m);continue}}b!==null?(b.return=g,X=b):gg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=A0("display",o))}catch(k){De(t,t.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(k){De(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Xt(e,t),ln(t),r&4&&pg(t);break;case 21:break;default:Xt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(t_(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yo(s,""),r.flags&=-33);var i=fg(t);Ud(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=fg(t);Fd(t,l,o);break;default:throw Error(B(161))}}catch(c){De(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VT(t,e,n){X=t,s_(t)}function s_(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Da;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ht;l=Da;var h=ht;if(Da=o,(ht=c)&&!h)for(X=s;X!==null;)o=X,c=o.child,o.tag===22&&o.memoizedState!==null?yg(s):c!==null?(c.return=o,X=c):yg(s);for(;i!==null;)X=i,s_(i),i=i.sibling;X=s,Da=l,ht=h}mg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):mg(t)}}function mg(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||mu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&wo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ht||e.flags&512&&Ld(e)}catch(g){De(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function gg(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function yg(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mu(4,e)}catch(c){De(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){De(e,s,c)}}var i=e.return;try{Ld(e)}catch(c){De(e,i,c)}break;case 5:var o=e.return;try{Ld(e)}catch(c){De(e,o,c)}}}catch(c){De(e,e.return,c)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var OT=Math.ceil,jl=Bn.ReactCurrentDispatcher,tf=Bn.ReactCurrentOwner,qt=Bn.ReactCurrentBatchConfig,ge=0,Qe=null,Ue=null,nt=0,jt=0,Os=Rr(0),He=0,Ro=null,ss=0,gu=0,nf=0,oo=null,It=null,rf=0,ei=1/0,Tn=null,Dl=!1,zd=null,fr=null,Va=!1,ir=null,Vl=0,ao=0,$d=null,el=-1,tl=0;function xt(){return ge&6?Le():el!==-1?el:el=Le()}function pr(t){return t.mode&1?ge&2&&nt!==0?nt&-nt:_T.transition!==null?(tl===0&&(tl=$0()),tl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Q0(t.type)),t):1}function rn(t,e,n,r){if(50<ao)throw ao=0,$d=null,Error(B(185));qo(t,n,r),(!(ge&2)||t!==Qe)&&(t===Qe&&(!(ge&2)&&(gu|=n),He===4&&er(t,nt)),Ct(t,r),n===1&&ge===0&&!(e.mode&1)&&(ei=Le()+500,hu&&jr()))}function Ct(t,e){var n=t.callbackNode;_E(t,e);var r=vl(t,t===Qe?nt:0);if(r===0)n!==null&&Sm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sm(n),e===1)t.tag===0?vT(vg.bind(null,t)):pv(vg.bind(null,t)),pT(function(){!(ge&6)&&jr()}),n=null;else{switch(B0(r)){case 1:n=Ah;break;case 4:n=U0;break;case 16:n=yl;break;case 536870912:n=z0;break;default:n=yl}n=h_(n,i_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function i_(t,e){if(el=-1,tl=0,ge&6)throw Error(B(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=vl(t,t===Qe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ol(t,r);else{e=r;var s=ge;ge|=2;var i=a_();(Qe!==t||nt!==e)&&(Tn=null,ei=Le()+500,Qr(t,e));do try{FT();break}catch(l){o_(t,l)}while(!0);$h(),jl.current=i,ge=s,Ue!==null?e=0:(Qe=null,nt=0,e=He)}if(e!==0){if(e===2&&(s=md(t),s!==0&&(r=s,e=Bd(t,s))),e===1)throw n=Ro,Qr(t,0),er(t,r),Ct(t,Le()),n;if(e===6)er(t,r);else{if(s=t.current.alternate,!(r&30)&&!MT(s)&&(e=Ol(t,r),e===2&&(i=md(t),i!==0&&(r=i,e=Bd(t,i))),e===1))throw n=Ro,Qr(t,0),er(t,r),Ct(t,Le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:$r(t,It,Tn);break;case 3:if(er(t,r),(r&130023424)===r&&(e=rf+500-Le(),10<e)){if(vl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Td($r.bind(null,t,It,Tn),e);break}$r(t,It,Tn);break;case 4:if(er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OT(r/1960))-r,10<r){t.timeoutHandle=Td($r.bind(null,t,It,Tn),r);break}$r(t,It,Tn);break;case 5:$r(t,It,Tn);break;default:throw Error(B(329))}}}return Ct(t,Le()),t.callbackNode===n?i_.bind(null,t):null}function Bd(t,e){var n=oo;return t.current.memoizedState.isDehydrated&&(Qr(t,e).flags|=256),t=Ol(t,e),t!==2&&(e=It,It=n,e!==null&&qd(e)),t}function qd(t){It===null?It=t:It.push.apply(It,t)}function MT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~nf,e&=~gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function vg(t){if(ge&6)throw Error(B(327));Bs();var e=vl(t,0);if(!(e&1))return Ct(t,Le()),null;var n=Ol(t,e);if(t.tag!==0&&n===2){var r=md(t);r!==0&&(e=r,n=Bd(t,r))}if(n===1)throw n=Ro,Qr(t,0),er(t,e),Ct(t,Le()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,It,Tn),Ct(t,Le()),null}function sf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(ei=Le()+500,hu&&jr())}}function is(t){ir!==null&&ir.tag===0&&!(ge&6)&&Bs();var e=ge;ge|=1;var n=qt.transition,r=_e;try{if(qt.transition=null,_e=1,t)return t()}finally{_e=r,qt.transition=n,ge=e,!(ge&6)&&jr()}}function of(){jt=Os.current,ke(Os)}function Qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fT(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Fh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tl();break;case 3:Js(),ke(Nt),ke(pt),Kh();break;case 5:Gh(r);break;case 4:Js();break;case 13:ke(Ae);break;case 19:ke(Ae);break;case 10:Bh(r.type._context);break;case 22:case 23:of()}n=n.return}if(Qe=t,Ue=t=mr(t.current,null),nt=jt=e,He=0,Ro=null,nf=gu=ss=0,It=oo=null,Hr!==null){for(e=0;e<Hr.length;e++)if(n=Hr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Hr=null}return t}function o_(t,e){do{var n=Ue;try{if($h(),Ya.current=Rl,Pl){for(var r=Ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pl=!1}if(rs=0,Ke=qe=Ce=null,so=!1,Ao=0,tf.current=null,n===null||n.return===null){He=1,Ro=e,Ue=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=ig(o);if(b!==null){b.flags&=-257,og(b,o,l,i,e),b.mode&1&&sg(i,h,e),e=b,c=h;var A=e.updateQueue;if(A===null){var k=new Set;k.add(c),e.updateQueue=k}else A.add(c);break e}else{if(!(e&1)){sg(i,h,e),af();break e}c=Error(B(426))}}else if(Ne&&l.mode&1){var N=ig(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),og(N,o,l,i,e),Uh(Zs(c,l));break e}}i=c=Zs(c,l),He!==4&&(He=2),oo===null?oo=[i]:oo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Bv(i,c,e);Jm(i,x);break e;case 1:l=c;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(fr===null||!fr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=qv(i,l,e);Jm(i,j);break e}}i=i.return}while(i!==null)}u_(n)}catch(F){e=F,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function a_(){var t=jl.current;return jl.current=Rl,t===null?Rl:t}function af(){(He===0||He===3||He===2)&&(He=4),Qe===null||!(ss&268435455)&&!(gu&268435455)||er(Qe,nt)}function Ol(t,e){var n=ge;ge|=2;var r=a_();(Qe!==t||nt!==e)&&(Tn=null,Qr(t,e));do try{LT();break}catch(s){o_(t,s)}while(!0);if($h(),ge=n,jl.current=r,Ue!==null)throw Error(B(261));return Qe=null,nt=0,He}function LT(){for(;Ue!==null;)l_(Ue)}function FT(){for(;Ue!==null&&!cE();)l_(Ue)}function l_(t){var e=d_(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?u_(t):Ue=e,tf.current=null}function u_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RT(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ue=null;return}}else if(n=PT(n,e,jt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);He===0&&(He=5)}function $r(t,e,n){var r=_e,s=qt.transition;try{qt.transition=null,_e=1,UT(t,e,n,r)}finally{qt.transition=s,_e=r}return null}function UT(t,e,n,r){do Bs();while(ir!==null);if(ge&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(xE(t,i),t===Qe&&(Ue=Qe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Va||(Va=!0,h_(yl,function(){return Bs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=_e;_e=1;var l=ge;ge|=4,tf.current=null,DT(t,n),r_(n,t),oT(wd),_l=!!xd,wd=xd=null,t.current=n,VT(n),dE(),ge=l,_e=o,qt.transition=i}else t.current=n;if(Va&&(Va=!1,ir=t,Vl=s),i=t.pendingLanes,i===0&&(fr=null),pE(n.stateNode),Ct(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dl)throw Dl=!1,t=zd,zd=null,t;return Vl&1&&t.tag!==0&&Bs(),i=t.pendingLanes,i&1?t===$d?ao++:(ao=0,$d=t):ao=0,jr(),null}function Bs(){if(ir!==null){var t=B0(Vl),e=qt.transition,n=_e;try{if(qt.transition=null,_e=16>t?16:t,ir===null)var r=!1;else{if(t=ir,ir=null,Vl=0,ge&6)throw Error(B(331));var s=ge;for(ge|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(X=h;X!==null;){var p=X;switch(p.tag){case 0:case 11:case 15:io(8,p,i)}var m=p.child;if(m!==null)m.return=p,X=m;else for(;X!==null;){p=X;var g=p.sibling,b=p.return;if(e_(p),p===h){X=null;break}if(g!==null){g.return=b,X=g;break}X=b}}}var A=i.alternate;if(A!==null){var k=A.child;if(k!==null){A.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:io(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,X=x;break e}X=i.return}}var _=t.current;for(X=_;X!==null;){o=X;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,X=I;else e:for(o=_;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mu(9,l)}}catch(F){De(l,l.return,F)}if(l===o){X=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,X=j;break e}X=l.return}}if(ge=s,jr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(au,t)}catch{}r=!0}return r}finally{_e=n,qt.transition=e}}return!1}function _g(t,e,n){e=Zs(n,e),e=Bv(t,e,1),t=hr(t,e,1),e=xt(),t!==null&&(qo(t,1,e),Ct(t,e))}function De(t,e,n){if(t.tag===3)_g(t,t,n);else for(;e!==null;){if(e.tag===3){_g(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fr===null||!fr.has(r))){t=Zs(n,t),t=qv(e,t,1),e=hr(e,t,1),t=xt(),e!==null&&(qo(e,1,t),Ct(e,t));break}}e=e.return}}function zT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(nt&n)===n&&(He===4||He===3&&(nt&130023424)===nt&&500>Le()-rf?Qr(t,0):nf|=n),Ct(t,e)}function c_(t,e){e===0&&(t.mode&1?(e=Ia,Ia<<=1,!(Ia&130023424)&&(Ia=4194304)):e=1);var n=xt();t=Vn(t,e),t!==null&&(qo(t,e,n),Ct(t,n))}function $T(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),c_(t,n)}function BT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),c_(t,n)}var d_;d_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,CT(t,e,n);kt=!!(t.flags&131072)}else kt=!1,Ne&&e.flags&1048576&&mv(e,Sl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Za(t,e),t=e.pendingProps;var s=Qs(e,pt.current);$s(e,n),s=Xh(null,e,r,t,s,n);var i=Yh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,bl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hh(e),s.updater=pu,e.stateNode=s,s._reactInternals=e,Cd(e,r,t,n),e=jd(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&Lh(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Za(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=HT(r),t=Yt(r,t),s){case 0:e=Rd(null,e,r,t,n);break e;case 1:e=ug(null,e,r,t,n);break e;case 11:e=ag(null,e,r,t,n);break e;case 14:e=lg(null,e,r,Yt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Rd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),ug(t,e,r,s,n);case 3:e:{if(Kv(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wv(t,e),Al(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zs(Error(B(423)),e),e=cg(t,e,r,n,s);break e}else if(r!==s){s=Zs(Error(B(424)),e),e=cg(t,e,r,n,s);break e}else for(Dt=dr(e.stateNode.containerInfo.firstChild),Ot=e,Ne=!0,Zt=null,n=_v(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xs(),r===s){e=On(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return Ev(e),t===null&&kd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ed(r,s)?o=null:i!==null&&Ed(r,i)&&(e.flags|=32),Gv(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&kd(e),null;case 13:return Qv(t,e,n);case 4:return Wh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),ag(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(kl,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!Nt.current){e=On(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Pn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Nd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$s(e,n),s=Wt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Yt(r,e.pendingProps),s=Yt(r.type,s),lg(t,e,r,s,n);case 15:return Hv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Za(t,e),e.tag=1,At(r)?(t=!0,bl(e)):t=!1,$s(e,n),$v(e,r,s),Cd(e,r,s,n),jd(null,e,r,!0,t,n);case 19:return Xv(t,e,n);case 22:return Wv(t,e,n)}throw Error(B(156,e.tag))};function h_(t,e){return F0(t,e)}function qT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new qT(t,e,n,r)}function lf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HT(t){if(typeof t=="function")return lf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sh)return 11;if(t===kh)return 14}return 2}function mr(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")lf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ss:return Xr(n.children,s,i,e);case Ih:o=8,s|=8;break;case ed:return t=Bt(12,n,e,s|2),t.elementType=ed,t.lanes=i,t;case td:return t=Bt(13,n,e,s),t.elementType=td,t.lanes=i,t;case nd:return t=Bt(19,n,e,s),t.elementType=nd,t.lanes=i,t;case E0:return yu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x0:o=10;break e;case w0:o=9;break e;case Sh:o=11;break e;case kh:o=14;break e;case Yn:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Bt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xr(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function yu(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=E0,t.lanes=n,t.stateNode={isHidden:!1},t}function Lc(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function Fc(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_c(0),this.expirationTimes=_c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_c(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uf(t,e,n,r,s,i,o,l,c){return t=new WT(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hh(i),t}function GT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function f_(t){if(!t)return Er;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(At(n))return fv(t,n,e)}return e}function p_(t,e,n,r,s,i,o,l,c){return t=uf(n,r,!0,t,s,i,o,l,c),t.context=f_(null),n=t.current,r=xt(),s=pr(n),i=Pn(r,s),i.callback=e??null,hr(n,i,s),t.current.lanes=s,qo(t,s,r),Ct(t,r),t}function vu(t,e,n,r){var s=e.current,i=xt(),o=pr(s);return n=f_(n),e.context===null?e.context=n:e.pendingContext=n,e=Pn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hr(s,e,o),t!==null&&(rn(t,s,o,i),Xa(t,s,o)),o}function Ml(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cf(t,e){xg(t,e),(t=t.alternate)&&xg(t,e)}function KT(){return null}var m_=typeof reportError=="function"?reportError:function(t){console.error(t)};function df(t){this._internalRoot=t}_u.prototype.render=df.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));vu(t,e,null,null)};_u.prototype.unmount=df.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;is(function(){vu(null,t,null,null)}),e[Dn]=null}};function _u(t){this._internalRoot=t}_u.prototype.unstable_scheduleHydration=function(t){if(t){var e=W0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zn.length&&e!==0&&e<Zn[n].priority;n++);Zn.splice(n,0,t),n===0&&K0(t)}};function hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wg(){}function QT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Ml(o);i.call(h)}}var o=p_(e,r,t,0,null,!1,!1,"",wg);return t._reactRootContainer=o,t[Dn]=o.current,bo(t.nodeType===8?t.parentNode:t),is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Ml(c);l.call(h)}}var c=uf(t,0,!1,null,null,!1,!1,"",wg);return t._reactRootContainer=c,t[Dn]=c.current,bo(t.nodeType===8?t.parentNode:t),is(function(){vu(e,c,n,r)}),c}function wu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ml(o);l.call(c)}}vu(e,o,t,s)}else o=QT(n,e,t,s,r);return Ml(o)}q0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gi(e.pendingLanes);n!==0&&(Ch(e,n|1),Ct(e,Le()),!(ge&6)&&(ei=Le()+500,jr()))}break;case 13:is(function(){var r=Vn(t,1);if(r!==null){var s=xt();rn(r,t,1,s)}}),cf(t,1)}};Ph=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=xt();rn(e,t,134217728,n)}cf(t,134217728)}};H0=function(t){if(t.tag===13){var e=pr(t),n=Vn(t,e);if(n!==null){var r=xt();rn(n,t,e,r)}cf(t,e)}};W0=function(){return _e};G0=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};hd=function(t,e,n){switch(e){case"input":if(id(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=du(r);if(!s)throw Error(B(90));b0(r),id(r,s)}}}break;case"textarea":S0(t,n);break;case"select":e=n.value,e!=null&&Ls(t,!!n.multiple,e,!1)}};j0=sf;D0=is;var XT={usingClientEntryPoint:!1,Events:[Wo,Cs,du,P0,R0,sf]},Bi={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YT={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=M0(t),t===null?null:t.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||KT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oa.isDisabled&&Oa.supportsFiber)try{au=Oa.inject(YT),hn=Oa}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XT;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hf(e))throw Error(B(200));return GT(t,e,null,n)};Lt.createRoot=function(t,e){if(!hf(t))throw Error(B(299));var n=!1,r="",s=m_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=uf(t,1,!1,null,null,n,!1,r,s),t[Dn]=e.current,bo(t.nodeType===8?t.parentNode:t),new df(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=M0(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return is(t)};Lt.hydrate=function(t,e,n){if(!xu(e))throw Error(B(200));return wu(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!hf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=m_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=p_(e,null,t,1,n??null,s,!1,i,o),t[Dn]=e.current,bo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _u(e)};Lt.render=function(t,e,n){if(!xu(e))throw Error(B(200));return wu(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!xu(t))throw Error(B(40));return t._reactRootContainer?(is(function(){wu(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};Lt.unstable_batchedUpdates=sf;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return wu(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function g_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g_)}catch(t){console.error(t)}}g_(),g0.exports=Lt;var JT=g0.exports,y_,Eg=JT;y_=Eg.createRoot,Eg.hydrateRoot;const ZT=()=>{};var Tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},eb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},__={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,b=h&63;c||(b=64,o||(g=64)),r.push(n[p],n[m],n[g],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new tb;const g=i<<2|l>>4;if(r.push(g),h!==64){const b=l<<4&240|h>>2;if(r.push(b),m!==64){const A=h<<6&192|m;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nb=function(t){const e=v_(t);return __.encodeByteArray(e,!0)},Ll=function(t){return nb(t).replace(/\./g,"")},x_=function(t){try{return __.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=()=>rb().__FIREBASE_DEFAULTS__,ib=()=>{if(typeof process>"u"||typeof Tg>"u")return;const t=Tg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ob=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x_(t[1]);return e&&JSON.parse(e)},Eu=()=>{try{return ZT()||sb()||ib()||ob()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w_=t=>{var e,n;return(n=(e=Eu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ab=t=>{const e=w_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},E_=()=>{var t;return(t=Eu())===null||t===void 0?void 0:t.config},T_=t=>{var e;return(e=Eu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function b_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ll(JSON.stringify(n)),Ll(JSON.stringify(o)),""].join(".")}const lo={};function cb(){const t={prod:[],emulator:[]};for(const e of Object.keys(lo))lo[e]?t.emulator.push(e):t.prod.push(e);return t}function db(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bg=!1;function I_(t,e){if(typeof window>"u"||typeof document>"u"||!pi(window.location.host)||lo[t]===e||lo[t]||bg)return;lo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=cb().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,b){g.setAttribute("width","24"),g.setAttribute("id",b),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{bg=!0,o()},g}function p(g,b){g.setAttribute("id",b),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=db(r),b=n("text"),A=document.getElementById(b)||document.createElement("span"),k=n("learnmore"),N=document.getElementById(k)||document.createElement("a"),x=n("preprendIcon"),_=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;l(I),p(N,k);const j=h();c(_,x),I.append(_,A,N,j),document.body.appendChild(I)}i?(A.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function fb(){var t;const e=(t=Eu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yb(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vb(){return!fb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _b(){try{return typeof indexedDB=="object"}catch{return!1}}function xb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wb,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ko.prototype.create)}}class Ko{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Eb(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new qn(s,l,r)}}function Eb(t,e){return t.replace(Tb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Tb=/\{\$([^}]+)}/g;function bb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ig(i)&&Ig(o)){if(!Mn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ig(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ib(t,e){const n=new Sb(t,e);return n.subscribe.bind(n)}class Sb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kb(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Uc),s.error===void 0&&(s.error=Uc),s.complete===void 0&&(s.complete=Uc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class os{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cb(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ab(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ab(t){return t===Br?void 0:t}function Cb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Nb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const Rb={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},jb=de.INFO,Db={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},Vb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Db[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ff{constructor(e){this.name=e,this._logLevel=jb,this._logHandler=Vb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const Ob=(t,e)=>e.some(n=>t instanceof n);let Sg,kg;function Mb(){return Sg||(Sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lb(){return kg||(kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S_=new WeakMap,Hd=new WeakMap,k_=new WeakMap,zc=new WeakMap,pf=new WeakMap;function Fb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&S_.set(n,t)}).catch(()=>{}),pf.set(e,t),e}function Ub(t){if(Hd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Hd.set(t,e)}let Wd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||k_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zb(t){Wd=t(Wd)}function $b(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($c(this),e,...n);return k_.set(r,e.sort?e.sort():[e]),gr(r)}:Lb().includes(t)?function(...e){return t.apply($c(this),e),gr(S_.get(this))}:function(...e){return gr(t.apply($c(this),e))}}function Bb(t){return typeof t=="function"?$b(t):(t instanceof IDBTransaction&&Ub(t),Ob(t,Mb())?new Proxy(t,Wd):t)}function gr(t){if(t instanceof IDBRequest)return Fb(t);if(zc.has(t))return zc.get(t);const e=Bb(t);return e!==t&&(zc.set(t,e),pf.set(e,t)),e}const $c=t=>pf.get(t);function qb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=gr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(gr(o.result),c.oldVersion,c.newVersion,gr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Hb=["get","getKey","getAll","getAllKeys","count"],Wb=["put","add","delete","clear"],Bc=new Map;function Ng(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bc.get(e))return Bc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Wb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Hb.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return Bc.set(e,i),i}zb(t=>({...t,get:(e,n,r)=>Ng(e,n)||t.get(e,n,r),has:(e,n)=>!!Ng(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Kb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gd="@firebase/app",Ag="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new ff("@firebase/app"),Qb="@firebase/app-compat",Xb="@firebase/analytics-compat",Yb="@firebase/analytics",Jb="@firebase/app-check-compat",Zb="@firebase/app-check",eI="@firebase/auth",tI="@firebase/auth-compat",nI="@firebase/database",rI="@firebase/data-connect",sI="@firebase/database-compat",iI="@firebase/functions",oI="@firebase/functions-compat",aI="@firebase/installations",lI="@firebase/installations-compat",uI="@firebase/messaging",cI="@firebase/messaging-compat",dI="@firebase/performance",hI="@firebase/performance-compat",fI="@firebase/remote-config",pI="@firebase/remote-config-compat",mI="@firebase/storage",gI="@firebase/storage-compat",yI="@firebase/firestore",vI="@firebase/ai",_I="@firebase/firestore-compat",xI="firebase",wI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="[DEFAULT]",EI={[Gd]:"fire-core",[Qb]:"fire-core-compat",[Yb]:"fire-analytics",[Xb]:"fire-analytics-compat",[Zb]:"fire-app-check",[Jb]:"fire-app-check-compat",[eI]:"fire-auth",[tI]:"fire-auth-compat",[nI]:"fire-rtdb",[rI]:"fire-data-connect",[sI]:"fire-rtdb-compat",[iI]:"fire-fn",[oI]:"fire-fn-compat",[aI]:"fire-iid",[lI]:"fire-iid-compat",[uI]:"fire-fcm",[cI]:"fire-fcm-compat",[dI]:"fire-perf",[hI]:"fire-perf-compat",[fI]:"fire-rc",[pI]:"fire-rc-compat",[mI]:"fire-gcs",[gI]:"fire-gcs-compat",[yI]:"fire-fst",[_I]:"fire-fst-compat",[vI]:"fire-vertex","fire-js":"fire-js",[xI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,TI=new Map,Qd=new Map;function Cg(t,e){try{t.container.addComponent(e)}catch(n){Ln.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ti(t){const e=t.name;if(Qd.has(e))return Ln.debug(`There were multiple attempts to register component ${e}.`),!1;Qd.set(e,t);for(const n of Fl.values())Cg(n,t);for(const n of TI.values())Cg(n,t);return!0}function mf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Ko("app","Firebase",bI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=wI;function N_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kd,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=E_()),!n)throw yr.create("no-options");const i=Fl.get(s);if(i){if(Mn(n,i.options)&&Mn(r,i.config))return i;throw yr.create("duplicate-app",{appName:s})}const o=new Pb(s);for(const c of Qd.values())o.addComponent(c);const l=new II(n,r,o);return Fl.set(s,l),l}function A_(t=Kd){const e=Fl.get(t);if(!e&&t===Kd&&E_())return N_();if(!e)throw yr.create("no-app",{appName:t});return e}function vr(t,e,n){var r;let s=(r=EI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ln.warn(l.join(" "));return}ti(new os(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="firebase-heartbeat-database",kI=1,jo="firebase-heartbeat-store";let qc=null;function C_(){return qc||(qc=qb(SI,kI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jo)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),qc}async function NI(t){try{const n=(await C_()).transaction(jo),r=await n.objectStore(jo).get(P_(t));return await n.done,r}catch(e){if(e instanceof qn)Ln.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ln.warn(n.message)}}}async function Pg(t,e){try{const r=(await C_()).transaction(jo,"readwrite");await r.objectStore(jo).put(e,P_(t)),await r.done}catch(n){if(n instanceof qn)Ln.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function P_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=1024,CI=30;class PI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>CI){const o=DI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ln.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rg(),{heartbeatsToSend:r,unsentEntries:s}=RI(this._heartbeatsCache.heartbeats),i=Ll(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ln.warn(n),""}}}function Rg(){return new Date().toISOString().substring(0,10)}function RI(t,e=AI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),jg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _b()?xb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jg(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}function DI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){ti(new os("platform-logger",e=>new Gb(e),"PRIVATE")),ti(new os("heartbeat",e=>new PI(e),"PRIVATE")),vr(Gd,Ag,t),vr(Gd,Ag,"esm2017"),vr("fire-js","")}VI("");function gf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function R_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OI=R_,j_=new Ko("auth","Firebase",R_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new ff("@firebase/auth");function MI(t,...e){Ul.logLevel<=de.WARN&&Ul.warn(`Auth (${mi}): ${t}`,...e)}function rl(t,...e){Ul.logLevel<=de.ERROR&&Ul.error(`Auth (${mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,...e){throw vf(t,...e)}function sn(t,...e){return vf(t,...e)}function yf(t,e,n){const r=Object.assign(Object.assign({},OI()),{[e]:n});return new Ko("auth","Firebase",r).create(e,{appName:t.name})}function Yr(t){return yf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LI(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&_n(t,"argument-error"),yf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j_.create(t,...e)}function ne(t,e,...n){if(!t)throw vf(e,...n)}function Nn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rl(e),new Error(e)}function Fn(t,e){t||Nn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FI(){return Dg()==="http:"||Dg()==="https:"}function Dg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FI()||mb()||"connection"in navigator)?navigator.onLine:!0}function zI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=hb()||gb()}get(){return UI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t,e){Fn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qI=new Xo(3e4,6e4);function xf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gi(t,e,n,r,s={}){return V_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Qo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return pb()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&pi(t.emulatorConfig.host)&&(h.credentials="include"),D_.fetch()(await O_(t,t.config.apiHost,n,l),h)})}async function V_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$I),e);try{const s=new WI(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ma(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ma(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ma(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ma(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yf(t,p,h);_n(t,p)}}catch(s){if(s instanceof qn)throw s;_n(t,"network-request-failed",{message:String(s)})}}async function HI(t,e,n,r,s={}){const i=await gi(t,e,n,r,s);return"mfaPendingCredential"in i&&_n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function O_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?_f(t.config,s):`${t.config.apiScheme}://${s}`;return BI.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class WI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sn(this.auth,"network-request-failed")),qI.get())})}}function Ma(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=sn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(t,e){return gi(t,"POST","/v1/accounts:delete",e)}async function zl(t,e){return gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KI(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),s=wf(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:uo(Hc(s.auth_time)),issuedAtTime:uo(Hc(s.iat)),expirationTime:uo(Hc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Hc(t){return Number(t)*1e3}function wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rl("JWT malformed, contained fewer than 3 sections"),null;try{const s=x_(n);return s?JSON.parse(s):(rl("Failed to decode base64 JWT payload"),null)}catch(s){return rl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Vg(t){const e=wf(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&QI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uo(this.lastLoginAt),this.creationTime=uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Do(t,zl(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?M_(i.providerUserInfo):[],l=JI(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Yd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function YI(t){const e=Xe(t);await $l(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function M_(t){return t.map(e=>{var{providerId:n}=e,r=gf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(t,e){const n=await V_(t,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await O_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&pi(t.emulatorConfig.host)&&(c.credentials="include"),D_.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function e2(t,e){return gi(t,"POST","/v2/accounts:revokeToken",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Vg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await ZI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new qs;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qs,this.toJSON())}_performRefresh(){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=gf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Yd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Do(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KI(this,e)}reload(){return YI(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $l(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await Do(this,GI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,b=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:j,isAnonymous:F,providerData:U,stsTokenManager:E}=n;ne(I&&E,e,"internal-error");const y=qs.fromJSON(this.name,E);ne(typeof I=="string",e,"internal-error"),Xn(m,e.name),Xn(g,e.name),ne(typeof j=="boolean",e,"internal-error"),ne(typeof F=="boolean",e,"internal-error"),Xn(b,e.name),Xn(A,e.name),Xn(k,e.name),Xn(N,e.name),Xn(x,e.name),Xn(_,e.name);const w=new tn({uid:I,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:F,photoURL:A,phoneNumber:b,tenantId:k,stsTokenManager:y,createdAt:x,lastLoginAt:_});return U&&Array.isArray(U)&&(w.providerData=U.map(T=>Object.assign({},T))),N&&(w._redirectEventId=N),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new qs;s.updateFromServerResponse(n);const i=new tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $l(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?M_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new qs;l.updateFromIdToken(r);const c=new tn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Yd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=new Map;function An(t){Fn(t instanceof Function,"Expected a class definition");let e=Og.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Og.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}L_.type="NONE";const Mg=L_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=sl(this.userKey,s.apiKey,i),this.fullPersistenceKey=sl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zl(this.auth,{idToken:e}).catch(()=>{});return n?tn._fromGetAccountInfoResponse(this.auth,n,e):null}return tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hs(An(Mg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||An(Mg);const o=sl(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){let m;if(typeof p=="string"){const g=await zl(e,{idToken:p}).catch(()=>{});if(!g)break;m=await tn._fromGetAccountInfoResponse(e,g,p)}else m=tn._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Hs(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Hs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q_(e))return"Blackberry";if(H_(e))return"Webos";if(U_(e))return"Safari";if((e.includes("chrome/")||z_(e))&&!e.includes("edge/"))return"Chrome";if(B_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function F_(t=mt()){return/firefox\//i.test(t)}function U_(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z_(t=mt()){return/crios\//i.test(t)}function $_(t=mt()){return/iemobile/i.test(t)}function B_(t=mt()){return/android/i.test(t)}function q_(t=mt()){return/blackberry/i.test(t)}function H_(t=mt()){return/webos/i.test(t)}function Ef(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function t2(t=mt()){var e;return Ef(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function n2(){return yb()&&document.documentMode===10}function W_(t=mt()){return Ef(t)||B_(t)||H_(t)||q_(t)||/windows phone/i.test(t)||$_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t,e=[]){let n;switch(t){case"Browser":n=Lg(mt());break;case"Worker":n=`${Lg(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(t,e={}){return gi(t,"GET","/v2/passwordPolicy",xf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=6;class o2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:i2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fg(this),this.idTokenSubscription=new Fg(this),this.beforeStateQueue=new r2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=An(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zl(this,{idToken:e}),r=await tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(en(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $l(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Yr(this));const n=e?Xe(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await s2(this),n=new o2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ko("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await e2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&An(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[An(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Tu(t){return Xe(t)}class Fg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ib(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l2(t){Tf=t}function u2(t){return Tf.loadJS(t)}function c2(){return Tf.gapiScript}function d2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t,e){const n=mf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Mn(i,e??{}))return s;_n(s,"already-initialized")}return n.initialize({options:e})}function f2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(An);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function p2(t,e,n){const r=Tu(t);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=K_(e),{host:o,port:l}=m2(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},p=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Mn(h,r.config.emulator)&&Mn(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,pi(o)?(b_(`${i}//${o}${c}`),I_("Auth",!0)):g2()}function K_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function m2(t){const e=K_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ug(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ug(o)}}}function Ug(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function g2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,n){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e){return HI(t,"POST","/v1/accounts:signInWithIdp",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="http://localhost";class as extends Q_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=gf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new as(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ws(e,n)}buildRequest(){const e={requestUri:y2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends bf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Yo{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends Yo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return as._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return In.credential(n,r)}catch{return null}}}In.GOOGLE_SIGN_IN_METHOD="google.com";In.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Yo{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Yo{constructor(){super("twitter.com")}static credential(e,n){return as._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await tn._fromIdTokenResponse(e,r,s),o=zg(r);return new ni({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zg(r);return new ni({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Bl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Bl(e,n,r,s)}}function X_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Bl._fromErrorAndOperation(t,i,e,r):i})}async function v2(t,e,n=!1){const r=await Do(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ni._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e,n=!1){const{auth:r}=t;if(en(r.app))return Promise.reject(Yr(r));const s="reauthenticate";try{const i=await Do(t,X_(r,s,e,t),n);ne(i.idToken,r,"internal-error");const o=wf(i.idToken);ne(o,r,"internal-error");const{sub:l}=o;return ne(t.uid===l,r,"user-mismatch"),ni._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e,n=!1){if(en(t.app))return Promise.reject(Yr(t));const r="signIn",s=await X_(t,r,e),i=await ni._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function w2(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function E2(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function T2(t,e,n,r){return Xe(t).onAuthStateChanged(e,n,r)}function b2(t){return Xe(t).signOut()}const ql="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ql,"1"),this.storage.removeItem(ql),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=1e3,S2=10;class J_ extends Y_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);n2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,S2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},I2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}J_.type="LOCAL";const k2=J_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_ extends Y_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Z_.type="SESSION";const ex=Z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await N2(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=If("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return window}function C2(t){pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function P2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function j2(){return tx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="firebaseLocalStorageDb",D2=1,Hl="firebaseLocalStorage",rx="fbase_key";class Jo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Iu(t,e){return t.transaction([Hl],e?"readwrite":"readonly").objectStore(Hl)}function V2(){const t=indexedDB.deleteDatabase(nx);return new Jo(t).toPromise()}function Jd(){const t=indexedDB.open(nx,D2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hl,{keyPath:rx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hl)?e(r):(r.close(),await V2(),e(await Jd()))})})}async function $g(t,e,n){const r=Iu(t,!0).put({[rx]:e,value:n});return new Jo(r).toPromise()}async function O2(t,e){const n=Iu(t,!1).get(e),r=await new Jo(n).toPromise();return r===void 0?null:r.value}function Bg(t,e){const n=Iu(t,!0).delete(e);return new Jo(n).toPromise()}const M2=800,L2=3;class sx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>L2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bu._getInstance(j2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await P2(),!this.activeServiceWorker)return;this.sender=new A2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jd();return await $g(e,ql,"1"),await Bg(e,ql),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$g(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>O2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Iu(s,!1).getAll();return new Jo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sx.type="LOCAL";const F2=sx;new Xo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e){return e?An(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Q_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U2(t){return x2(t.auth,new Sf(t),t.bypassAuthState)}function z2(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),_2(n,new Sf(t),t.bypassAuthState)}async function $2(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),v2(n,new Sf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U2;case"linkViaPopup":case"linkViaRedirect":return $2;case"reauthViaPopup":case"reauthViaRedirect":return z2;default:_n(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new Xo(2e3,1e4);async function q2(t,e,n){if(en(t.app))return Promise.reject(sn(t,"operation-not-supported-in-this-environment"));const r=Tu(t);LI(t,e,bf);const s=ix(r,n);return new Gr(r,"signInViaPopup",e,s).executeNotNull()}class Gr extends ox{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Gr.currentPopupAction&&Gr.currentPopupAction.cancel(),Gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const e=If();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B2.get())};e()}}Gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="pendingRedirect",il=new Map;class W2 extends ox{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=il.get(this.auth._key());if(!e){try{const r=await G2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}il.set(this.auth._key(),e)}return this.bypassAuthState||il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G2(t,e){const n=X2(e),r=Q2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function K2(t,e){il.set(t._key(),e)}function Q2(t){return An(t._redirectPersistence)}function X2(t){return sl(H2,t.config.apiKey,t.name)}async function Y2(t,e,n=!1){if(en(t.app))return Promise.reject(Yr(t));const r=Tu(t),s=ix(r,e),o=await new W2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=10*60*1e3;class Z2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ax(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J2&&this.cachedEventUids.clear(),this.cachedEventUids.has(qg(e))}saveEventToCache(e){this.cachedEventUids.add(qg(e)),this.lastProcessedEventTime=Date.now()}}function qg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ax({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ax(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e={}){return gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rS=/^https?/;async function sS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tS(t);for(const n of e)try{if(iS(n))return}catch{}_n(t,"unauthorized-domain")}function iS(t){const e=Xd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rS.test(n))return!1;if(nS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Xo(3e4,6e4);function Hg(){const t=pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aS(t){return new Promise((e,n)=>{var r,s,i;function o(){Hg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hg(),n(sn(t,"network-request-failed"))},timeout:oS.get()})}if(!((s=(r=pn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=pn().gapi)===null||i===void 0)&&i.load)o();else{const l=d2("iframefcb");return pn()[l]=()=>{gapi.load?o():n(sn(t,"network-request-failed"))},u2(`${c2()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ol=null,e})}let ol=null;function lS(t){return ol=ol||aS(t),ol}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=new Xo(5e3,15e3),cS="__/auth/iframe",dS="emulator/auth/iframe",hS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pS(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_f(e,dS):`https://${t.config.authDomain}/${cS}`,r={apiKey:e.apiKey,appName:t.name,v:mi},s=fS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qo(r).slice(1)}`}async function mS(t){const e=await lS(t),n=pn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:pS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=sn(t,"network-request-failed"),l=pn().setTimeout(()=>{i(o)},uS.get());function c(){pn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yS=500,vS=600,_S="_blank",xS="http://localhost";class Wg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wS(t,e,n,r=yS,s=vS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},gS),{width:r.toString(),height:s.toString(),top:i,left:o}),h=mt().toLowerCase();n&&(l=z_(h)?_S:n),F_(h)&&(e=e||xS,c.scrollbars="yes");const p=Object.entries(c).reduce((g,[b,A])=>`${g}${b}=${A},`,"");if(t2(h)&&l!=="_self")return ES(e||"",l),new Wg(null);const m=window.open(e||"",l,p);ne(m,t,"popup-blocked");try{m.focus()}catch{}return new Wg(m)}function ES(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="__/auth/handler",bS="emulator/auth/handler",IS=encodeURIComponent("fac");async function Gg(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mi,eventId:s};if(e instanceof bf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Yo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${IS}=${encodeURIComponent(c)}`:"";return`${SS(t)}?${Qo(l).slice(1)}${h}`}function SS({config:t}){return t.emulator?_f(t,bS):`https://${t.authDomain}/${TS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="webStorageSupport";class kS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ex,this._completeRedirectFn=Y2,this._overrideRedirectResult=K2}async _openPopup(e,n,r,s){var i;Fn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Gg(e,n,r,Xd(),s);return wS(e,o,If())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gg(e,n,r,Xd(),s);return C2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Fn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mS(e),r=new Z2(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wc,{type:Wc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Wc];o!==void 0&&n(!!o),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W_()||U_()||Ef()}}const NS=kS;var Kg="@firebase/auth",Qg="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PS(t){ti(new os("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G_(t)},h=new a2(r,s,i,c);return f2(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ti(new os("auth-internal",e=>{const n=Tu(e.getProvider("auth").getImmediate());return(r=>new AS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(Kg,Qg,CS(t)),vr(Kg,Qg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=5*60,jS=T_("authIdTokenMaxAge")||RS;let Xg=null;const DS=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jS)return;const s=n==null?void 0:n.token;Xg!==s&&(Xg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VS(t=A_()){const e=mf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=h2(t,{popupRedirectResolver:NS,persistence:[F2,k2,ex]}),r=T_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=DS(i.toString());E2(n,o,()=>o(n.currentUser)),w2(n,l=>o(l))}}const s=w_("auth");return s&&p2(n,`http://${s}`),n}function OS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}l2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",OS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PS("Browser");var MS="firebase",LS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(MS,LS,"app");var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _r,lx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function w(){}w.prototype=y.prototype,E.D=y.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(T,C,P){for(var S=Array(arguments.length-2),q=2;q<arguments.length;q++)S[q-2]=arguments[q];return y.prototype[C].apply(T,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,w){w||(w=0);var T=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)T[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;16>C;++C)T[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=E.g[0],w=E.g[1],C=E.g[2];var P=E.g[3],S=y+(P^w&(C^P))+T[0]+3614090360&4294967295;y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+T[1]+3905402710&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+T[2]+606105819&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+T[3]+3250441966&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+T[4]+4118548399&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+T[5]+1200080426&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+T[6]+2821735955&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+T[7]+4249261313&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+T[8]+1770035416&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+T[9]+2336552879&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+T[10]+4294925233&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+T[11]+2304563134&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+T[12]+1804603682&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+T[13]+4254626195&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+T[14]+2792965006&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+T[15]+1236535329&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(C^P&(w^C))+T[1]+4129170786&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+T[6]+3225465664&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+T[11]+643717713&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+T[0]+3921069994&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+T[5]+3593408605&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+T[10]+38016083&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+T[15]+3634488961&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+T[4]+3889429448&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+T[9]+568446438&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+T[14]+3275163606&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+T[3]+4107603335&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+T[8]+1163531501&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+T[13]+2850285829&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+T[2]+4243563512&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+T[7]+1735328473&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+T[12]+2368359562&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(w^C^P)+T[5]+4294588738&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+T[8]+2272392833&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+T[11]+1839030562&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+T[14]+4259657740&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+T[1]+2763975236&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+T[4]+1272893353&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+T[7]+4139469664&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+T[10]+3200236656&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+T[13]+681279174&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+T[0]+3936430074&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+T[3]+3572445317&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+T[6]+76029189&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+T[9]+3654602809&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+T[12]+3873151461&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+T[15]+530742520&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+T[2]+3299628645&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(C^(w|~P))+T[0]+4096336452&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+T[7]+1126891415&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+T[14]+2878612391&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+T[5]+4237533241&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+T[12]+1700485571&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+T[3]+2399980690&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+T[10]+4293915773&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+T[1]+2240044497&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+T[8]+1873313359&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+T[15]+4264355552&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+T[6]+2734768916&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+T[13]+1309151649&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+T[4]+4149444226&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+T[11]+3174756917&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+T[2]+718787259&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var w=y-this.blockSize,T=this.B,C=this.h,P=0;P<y;){if(C==0)for(;P<=w;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(T[C++]=E.charCodeAt(P++),C==this.blockSize){s(this,T),C=0;break}}else for(;P<y;)if(T[C++]=E[P++],C==this.blockSize){s(this,T),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var w=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=w&255,w/=256;for(this.u(E),E=Array(16),y=w=0;4>y;++y)for(var T=0;32>T;T+=8)E[w++]=this.g[y]>>>T&255;return E};function i(E,y){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=y(E)}function o(E,y){this.h=y;for(var w=[],T=!0,C=E.length-1;0<=C;C--){var P=E[C]|0;T&&P==y||(w[C]=P,T=!1)}this.g=w}var l={};function c(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return N(h(-E));for(var y=[],w=1,T=0;E>=w;T++)y[T]=E/w|0,w*=4294967296;return new o(y,0)}function p(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return N(p(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(y,8)),T=m,C=0;C<E.length;C+=8){var P=Math.min(8,E.length-C),S=parseInt(E.substring(C,C+P),y);8>P?(P=h(Math.pow(y,P)),T=T.j(P).add(h(S))):(T=T.j(w),T=T.add(h(S)))}return T}var m=c(0),g=c(1),b=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-N(this).m();for(var E=0,y=1,w=0;w<this.g.length;w++){var T=this.i(w);E+=(0<=T?T:4294967296+T)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(k(this))return"-"+N(this).toString(E);for(var y=h(Math.pow(E,6)),w=this,T="";;){var C=j(w,y).g;w=x(w,C.j(y));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,A(w))return P+T;for(;6>P.length;)P="0"+P;T=P+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function k(E){return E.h==-1}t.l=function(E){return E=x(this,E),k(E)?-1:A(E)?0:1};function N(E){for(var y=E.g.length,w=[],T=0;T<y;T++)w[T]=~E.g[T];return new o(w,~E.h).add(g)}t.abs=function(){return k(this)?N(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0,C=0;C<=y;C++){var P=T+(this.i(C)&65535)+(E.i(C)&65535),S=(P>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);T=S>>>16,P&=65535,S&=65535,w[C]=S<<16|P}return new o(w,w[w.length-1]&-2147483648?-1:0)};function x(E,y){return E.add(N(y))}t.j=function(E){if(A(this)||A(E))return m;if(k(this))return k(E)?N(this).j(N(E)):N(N(this).j(E));if(k(E))return N(this.j(N(E)));if(0>this.l(b)&&0>E.l(b))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,w=[],T=0;T<2*y;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<E.g.length;C++){var P=this.i(T)>>>16,S=this.i(T)&65535,q=E.i(C)>>>16,V=E.i(C)&65535;w[2*T+2*C]+=S*V,_(w,2*T+2*C),w[2*T+2*C+1]+=P*V,_(w,2*T+2*C+1),w[2*T+2*C+1]+=S*q,_(w,2*T+2*C+1),w[2*T+2*C+2]+=P*q,_(w,2*T+2*C+2)}for(T=0;T<y;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=y;T<2*y;T++)w[T]=0;return new o(w,0)};function _(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function I(E,y){this.g=E,this.h=y}function j(E,y){if(A(y))throw Error("division by zero");if(A(E))return new I(m,m);if(k(E))return y=j(N(E),y),new I(N(y.g),N(y.h));if(k(y))return y=j(E,N(y)),new I(N(y.g),y.h);if(30<E.g.length){if(k(E)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=y;0>=T.l(E);)w=F(w),T=F(T);var C=U(w,1),P=U(T,1);for(T=U(T,2),w=U(w,2);!A(T);){var S=P.add(T);0>=S.l(E)&&(C=C.add(w),P=S),T=U(T,1),w=U(w,1)}return y=x(E,C.j(y)),new I(C,y)}for(C=m;0<=E.l(y);){for(w=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),P=h(w),S=P.j(y);k(S)||0<S.l(E);)w-=T,P=h(w),S=P.j(y);A(P)&&(P=g),C=C.add(P),E=x(E,S)}return new I(C,E)}t.A=function(E){return j(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)&E.i(T);return new o(w,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)|E.i(T);return new o(w,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)^E.i(T);return new o(w,this.h^E.h)};function F(E){for(var y=E.g.length+1,w=[],T=0;T<y;T++)w[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(w,E.h)}function U(E,y){var w=y>>5;y%=32;for(var T=E.g.length-w,C=[],P=0;P<T;P++)C[P]=0<y?E.i(P+w)>>>y|E.i(P+w+1)<<32-y:E.i(P+w);return new o(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,_r=o}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});var La=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ux,Qi,cx,al,Zd,dx,hx,fx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof La=="object"&&La];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var R=a[v];if(!(R in f))break e;f=f[R]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,v=!1,R={next:function(){if(!v&&f<a.length){var D=f++;return{value:d(D,a[D]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),a.apply(d,R)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function b(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function A(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,R,D){for(var H=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)H[xe-2]=arguments[xe];return d.prototype[R].apply(v,H)}}function k(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function N(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(c(v)){const R=a.length||0,D=v.length||0;a.length=R+D;for(let H=0;H<D;H++)a[R+H]=v[H]}else a.push(v)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var F=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function U(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function E(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)a[f]=v[f];for(let D=0;D<w.length;D++)f=w[D],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function C(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function P(a){l.setTimeout(()=>{throw a},0)}function S(){var a=Y;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class q{constructor(){this.h=this.g=null}add(d,f){const v=V.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var V=new x(()=>new G,a=>a.reset());class G{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let J,O=!1,Y=new q,z=()=>{const a=l.Promise.resolve(void 0);J=()=>{a.then(Z)}};var Z=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(f){P(f)}var d=V;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}O=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function le(a,d){if(fe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(F){e:{try{j(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Oe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&le.aa.h.call(this)}}A(le,fe);var Oe={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),se=0;function we(a,d,f,v,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=R,this.key=++se,this.da=this.fa=!1}function me(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ye(a){this.src=a,this.g={},this.h=0}Ye.prototype.add=function(a,d,f,v,R){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var H=Hn(a,d,v,R);return-1<H?(d=a[H],f||(d.fa=!1)):(d=new we(d,this.src,D,!!v,R),d.fa=f,a.push(d)),d};function Tt(a,d){var f=d.type;if(f in a.g){var v=a.g[f],R=Array.prototype.indexOf.call(v,d,void 0),D;(D=0<=R)&&Array.prototype.splice.call(v,R,1),D&&(me(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Hn(a,d,f,v){for(var R=0;R<a.length;++R){var D=a[R];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==v)return R}return-1}var Kt="closure_lm_"+(1e6*Math.random()|0),ms={};function mp(a,d,f,v,R){if(Array.isArray(d)){for(var D=0;D<d.length;D++)mp(a,d[D],f,v,R);return null}return f=vp(f),a&&a[W]?a.K(d,f,h(v)?!!v.capture:!1,R):Jw(a,d,f,!1,v,R)}function Jw(a,d,f,v,R,D){if(!d)throw Error("Invalid event type");var H=h(R)?!!R.capture:!!R,xe=Xu(a);if(xe||(a[Kt]=xe=new Ye(a)),f=xe.add(d,f,v,H,D),f.proxy)return f;if(v=Zw(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Be||(R=H),R===void 0&&(R=!1),a.addEventListener(d.toString(),v,R);else if(a.attachEvent)a.attachEvent(yp(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Zw(){function a(f){return d.call(a.src,a.listener,f)}const d=e1;return a}function gp(a,d,f,v,R){if(Array.isArray(d))for(var D=0;D<d.length;D++)gp(a,d[D],f,v,R);else v=h(v)?!!v.capture:!!v,f=vp(f),a&&a[W]?(a=a.i,d=String(d).toString(),d in a.g&&(D=a.g[d],f=Hn(D,f,v,R),-1<f&&(me(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[d],a.h--)))):a&&(a=Xu(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Hn(d,f,v,R)),(f=-1<a?d[a]:null)&&Qu(f))}function Qu(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[W])Tt(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(yp(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=Xu(d))?(Tt(f,a),f.h==0&&(f.src=null,d[Kt]=null)):me(a)}}}function yp(a){return a in ms?ms[a]:ms[a]="on"+a}function e1(a,d){if(a.da)a=!0;else{d=new le(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&Qu(a),a=f.call(v,d)}return a}function Xu(a){return a=a[Kt],a instanceof Ye?a:null}var Yu="__closure_events_fn_"+(1e9*Math.random()>>>0);function vp(a){return typeof a=="function"?a:(a[Yu]||(a[Yu]=function(d){return a.handleEvent(d)}),a[Yu])}function it(){re.call(this),this.i=new Ye(this),this.M=this,this.F=null}A(it,re),it.prototype[W]=!0,it.prototype.removeEventListener=function(a,d,f,v){gp(this,a,d,f,v)};function gt(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new fe(d,a);else if(d instanceof fe)d.target=d.target||a;else{var R=d;d=new fe(v,a),T(d,R)}if(R=!0,f)for(var D=f.length-1;0<=D;D--){var H=d.g=f[D];R=sa(H,v,!0,d)&&R}if(H=d.g=a,R=sa(H,v,!0,d)&&R,R=sa(H,v,!1,d)&&R,f)for(D=0;D<f.length;D++)H=d.g=f[D],R=sa(H,v,!1,d)&&R}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)me(f[v]);delete a.g[d],a.h--}}this.F=null},it.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},it.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function sa(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,D=0;D<d.length;++D){var H=d[D];if(H&&!H.da&&H.capture==f){var xe=H.listener,Je=H.ha||H.src;H.fa&&Tt(a.i,H),R=xe.call(Je,v)!==!1&&R}}return R&&!v.defaultPrevented}function _p(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function xp(a){a.g=_p(()=>{a.g=null,a.i&&(a.i=!1,xp(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class t1 extends re{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:xp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(a){re.call(this),this.h=a,this.g={}}A(Ti,re);var wp=[];function Ep(a){U(a.g,function(d,f){this.g.hasOwnProperty(f)&&Qu(d)},a),a.g={}}Ti.prototype.N=function(){Ti.aa.N.call(this),Ep(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ju=l.JSON.stringify,n1=l.JSON.parse,r1=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Zu(){}Zu.prototype.h=null;function Tp(a){return a.h||(a.h=a.i())}function bp(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ec(){fe.call(this,"d")}A(ec,fe);function tc(){fe.call(this,"c")}A(tc,fe);var Mr={},Ip=null;function ia(){return Ip=Ip||new it}Mr.La="serverreachability";function Sp(a){fe.call(this,Mr.La,a)}A(Sp,fe);function Ii(a){const d=ia();gt(d,new Sp(d))}Mr.STAT_EVENT="statevent";function kp(a,d){fe.call(this,Mr.STAT_EVENT,a),this.stat=d}A(kp,fe);function yt(a){const d=ia();gt(d,new kp(d,a))}Mr.Ma="timingevent";function Np(a,d){fe.call(this,Mr.Ma,a),this.size=d}A(Np,fe);function Si(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function ki(){this.g=!0}ki.prototype.xa=function(){this.g=!1};function s1(a,d,f,v,R,D){a.info(function(){if(a.g)if(D)for(var H="",xe=D.split("&"),Je=0;Je<xe.length;Je++){var ye=xe[Je].split("=");if(1<ye.length){var ot=ye[0];ye=ye[1];var at=ot.split("_");H=2<=at.length&&at[1]=="type"?H+(ot+"="+ye+"&"):H+(ot+"=redacted&")}}else H=null;else H=D;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+d+`
`+f+`
`+H})}function i1(a,d,f,v,R,D,H){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+d+`
`+f+`
`+D+" "+H})}function gs(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+a1(a,f)+(v?" "+v:"")})}function o1(a,d){a.info(function(){return"TIMEOUT: "+d})}ki.prototype.info=function(){};function a1(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var D=R[0];if(D!="noop"&&D!="stop"&&D!="close")for(var H=1;H<R.length;H++)R[H]=""}}}}return Ju(f)}catch{return d}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ap={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nc;function aa(){}A(aa,Zu),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},nc=new aa;function Wn(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new Ti(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cp}function Cp(){this.i=null,this.g="",this.h=!1}var Pp={},rc={};function sc(a,d,f){a.L=1,a.v=da(wn(d)),a.m=f,a.P=!0,Rp(a,null)}function Rp(a,d){a.F=Date.now(),la(a),a.A=wn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Wp(f.i,"t",v),a.C=0,f=a.j.J,a.h=new Cp,a.g=cm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new t1(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(wp[0]=R.toString()),R=wp);for(var D=0;D<R.length;D++){var H=mp(f,R[D],v||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ii(),s1(a.i,a.u,a.A,a.l,a.R,a.m)}Wn.prototype.ca=function(a){a=a.target;const d=this.M;d&&En(a)==3?d.j():this.Y(a)},Wn.prototype.Y=function(a){try{if(a==this.g)e:{const at=En(this.g);var d=this.g.Ba();const _s=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||Zp(this.g)))){this.J||at!=4||d==7||(d==8||0>=_s?Ii(3):Ii(2)),ic(this);var f=this.g.Z();this.X=f;t:if(jp(this)){var v=Zp(this.g);a="";var R=v.length,D=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),Ni(this);var H="";break t}this.h.i=new l.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(D&&d==R-1)});v.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=f==200,i1(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,Je=this.g;if((xe=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(xe)){var ye=xe;break t}}ye=null}if(f=ye)gs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,f);else{this.o=!1,this.s=3,yt(12),Lr(this),Ni(this);break e}}if(this.P){f=!0;let Qt;for(;!this.J&&this.C<H.length;)if(Qt=l1(this,H),Qt==rc){at==4&&(this.s=4,yt(14),f=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Pp){this.s=4,yt(15),gs(this.i,this.l,H,"[Invalid Chunk]"),f=!1;break}else gs(this.i,this.l,Qt,null),oc(this,Qt);if(jp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||H.length!=0||this.h.h||(this.s=1,yt(16),f=!1),this.o=this.o&&f,!f)gs(this.i,this.l,H,"[Invalid Chunked Response]"),Lr(this),Ni(this);else if(0<H.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),hc(ot),ot.M=!0,yt(11))}}else gs(this.i,this.l,H,null),oc(this,H);at==4&&Lr(this),this.o&&!this.J&&(at==4?om(this.j,this):(this.o=!1,la(this)))}else I1(this.g),f==400&&0<H.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Lr(this),Ni(this)}}}catch{}finally{}};function jp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function l1(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?rc:(f=Number(d.substring(f,v)),isNaN(f)?Pp:(v+=1,v+f>d.length?rc:(d=d.slice(v,v+f),a.C=v+f,d)))}Wn.prototype.cancel=function(){this.J=!0,Lr(this)};function la(a){a.S=Date.now()+a.I,Dp(a,a.I)}function Dp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Si(g(a.ba,a),d)}function ic(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Wn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(o1(this.i,this.A),this.L!=2&&(Ii(),yt(17)),Lr(this),this.s=2,Ni(this)):Dp(this,this.S-a)};function Ni(a){a.j.G==0||a.J||om(a.j,a)}function Lr(a){ic(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ep(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function oc(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||ac(f.h,a))){if(!a.K&&ac(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ya(f),ma(f);else break e;dc(f),yt(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Si(g(f.Za,f),6e3));if(1>=Mp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ur(f,11)}else if((a.K||f.g==a)&&ya(f),!_(d))for(R=f.Da.g.parse(d),d=0;d<R.length;d++){let ye=R[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];const ot=ye[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));const at=ye[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));const _s=ye[5];_s!=null&&typeof _s=="number"&&0<_s&&(v=1.5*_s,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Qt=a.g;if(Qt){const _a=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var D=v.h;D.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(lc(D,D.h),D.h=null))}if(v.D){const fc=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;fc&&(v.ya=fc,be(v.I,v.D,fc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var H=a;if(v.qa=um(v,v.J?v.ia:null,v.W),H.K){Lp(v.h,H);var xe=H,Je=v.L;Je&&(xe.I=Je),xe.B&&(ic(xe),la(xe)),v.g=H}else sm(v);0<f.i.length&&ga(f)}else ye[0]!="stop"&&ye[0]!="close"||Ur(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Ur(f,7):cc(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Ii(4)}catch{}}var u1=class{constructor(a,d){this.g=a,this.map=d}};function Vp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Op(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Mp(a){return a.h?1:a.g?a.g.size:0}function ac(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function lc(a,d){a.g?a.g.add(d):a.h=d}function Lp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Vp.prototype.cancel=function(){if(this.i=Fp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Fp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return k(a.i)}function c1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function d1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function Up(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=d1(a),v=c1(a),R=v.length,D=0;D<R;D++)d.call(void 0,v[D],f&&f[D],a)}var zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function h1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),R=null;if(0<=v){var D=a[f].substring(0,v);R=a[f].substring(v+1)}else D=a[f];d(D,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Fr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Fr){this.h=a.h,ua(this,a.j),this.o=a.o,this.g=a.g,ca(this,a.s),this.l=a.l;var d=a.i,f=new Pi;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),$p(this,f),this.m=a.m}else a&&(d=String(a).match(zp))?(this.h=!1,ua(this,d[1]||"",!0),this.o=Ai(d[2]||""),this.g=Ai(d[3]||"",!0),ca(this,d[4]),this.l=Ai(d[5]||"",!0),$p(this,d[6]||"",!0),this.m=Ai(d[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}Fr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ci(d,Bp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ci(d,Bp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ci(f,f.charAt(0)=="/"?m1:p1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ci(f,y1)),a.join("")};function wn(a){return new Fr(a)}function ua(a,d,f){a.j=f?Ai(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ca(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function $p(a,d,f){d instanceof Pi?(a.i=d,v1(a.i,a.h)):(f||(d=Ci(d,g1)),a.i=new Pi(d,a.h))}function be(a,d,f){a.i.set(d,f)}function da(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ai(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ci(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,f1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function f1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bp=/[#\/\?@]/g,p1=/[#\?:]/g,m1=/[#\?]/g,g1=/[#\?@]/g,y1=/#/g;function Pi(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Gn(a){a.g||(a.g=new Map,a.h=0,a.i&&h1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Pi.prototype,t.add=function(a,d){Gn(this),this.i=null,a=ys(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function qp(a,d){Gn(a),d=ys(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Hp(a,d){return Gn(a),d=ys(a,d),a.g.has(d)}t.forEach=function(a,d){Gn(this),this.g.forEach(function(f,v){f.forEach(function(R){a.call(d,R,v,this)},this)},this)},t.na=function(){Gn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const R=a[v];for(let D=0;D<R.length;D++)f.push(d[v])}return f},t.V=function(a){Gn(this);let d=[];if(typeof a=="string")Hp(this,a)&&(d=d.concat(this.g.get(ys(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Gn(this),this.i=null,a=ys(this,a),Hp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Wp(a,d,f){qp(a,d),0<f.length&&(a.i=null,a.g.set(ys(a,d),k(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const D=encodeURIComponent(String(v)),H=this.V(v);for(v=0;v<H.length;v++){var R=D;H[v]!==""&&(R+="="+encodeURIComponent(String(H[v]))),a.push(R)}}return this.i=a.join("&")};function ys(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function v1(a,d){d&&!a.j&&(Gn(a),a.i=null,a.g.forEach(function(f,v){var R=v.toLowerCase();v!=R&&(qp(this,v),Wp(this,R,f))},a)),a.j=d}function _1(a,d){const f=new ki;if(l.Image){const v=new Image;v.onload=b(Kn,f,"TestLoadImage: loaded",!0,d,v),v.onerror=b(Kn,f,"TestLoadImage: error",!1,d,v),v.onabort=b(Kn,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=b(Kn,f,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function x1(a,d){const f=new ki,v=new AbortController,R=setTimeout(()=>{v.abort(),Kn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(R),D.ok?Kn(f,"TestPingServer: ok",!0,d):Kn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Kn(f,"TestPingServer: error",!1,d)})}function Kn(a,d,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function w1(){this.g=new r1}function E1(a,d,f){const v=f||"";try{Up(a,function(R,D){let H=R;h(R)&&(H=Ju(R)),d.push(v+D+"="+encodeURIComponent(H))})}catch(R){throw d.push(v+"type="+encodeURIComponent("_badmap")),R}}function ha(a){this.l=a.Ub||null,this.j=a.eb||!1}A(ha,Zu),ha.prototype.g=function(){return new fa(this.l,this.j)},ha.prototype.i=function(a){return function(){return a}}({});function fa(a,d){it.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(fa,it),t=fa.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,ji(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ri(this):ji(this),this.readyState==3&&Gp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ri(this))},t.Qa=function(a){this.g&&(this.response=a,Ri(this))},t.ga=function(){this.g&&Ri(this)};function Ri(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ji(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function ji(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Kp(a){let d="";return U(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function uc(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Kp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):be(a,d,f))}function je(a){it.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(je,it);var T1=/^https?$/i,b1=["POST","PUT"];t=je.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nc.g(),this.v=this.o?Tp(this.o):Tp(nc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Qp(this,D);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())f.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),R=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(b1,d,void 0))||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,H]of f)this.g.setRequestHeader(D,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jp(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Qp(this,D)}};function Qp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Xp(a),pa(a)}function Xp(a){a.A||(a.A=!0,gt(a,"complete"),gt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,gt(this,"complete"),gt(this,"abort"),pa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pa(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yp(this):this.bb())},t.bb=function(){Yp(this)};function Yp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||En(a)!=4||a.Z()!=2)){if(a.u&&En(a)==4)_p(a.Ea,0,a);else if(gt(a,"readystatechange"),En(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=H===0){var R=String(a.D).match(zp)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),v=!T1.test(R?R.toLowerCase():"")}f=v}if(f)gt(a,"complete"),gt(a,"success");else{a.m=6;try{var D=2<En(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Xp(a)}}finally{pa(a)}}}}function pa(a,d){if(a.g){Jp(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||gt(a,"ready");try{f.onreadystatechange=v}catch{}}}function Jp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function En(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),n1(d)}};function Zp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function I1(a){const d={};a=(a.g&&2<=En(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=C(a[v]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[R]||[];d[R]=D,D.push(f)}E(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function em(a){this.Aa=0,this.i=[],this.j=new ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Di("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Di("baseRetryDelayMs",5e3,a),this.cb=Di("retryDelaySeedMs",1e4,a),this.Wa=Di("forwardChannelMaxRetries",2,a),this.wa=Di("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Vp(a&&a.concurrentRequestLimit),this.Da=new w1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=em.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){yt(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=um(this,null,this.W),ga(this)};function cc(a){if(tm(a),a.G==3){var d=a.U++,f=wn(a.I);if(be(f,"SID",a.K),be(f,"RID",d),be(f,"TYPE","terminate"),Vi(a,f),d=new Wn(a,a.j,d),d.L=2,d.v=da(wn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=cm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),la(d)}lm(a)}function ma(a){a.g&&(hc(a),a.g.cancel(),a.g=null)}function tm(a){ma(a),a.u&&(l.clearTimeout(a.u),a.u=null),ya(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ga(a){if(!Op(a.h)&&!a.s){a.s=!0;var d=a.Ga;J||z(),O||(J(),O=!0),Y.add(d,a),a.B=0}}function S1(a,d){return Mp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Si(g(a.Ga,a,d),am(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Wn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=y(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(R.H=D,D=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=rm(this,R,d),f=wn(this.I),be(f,"RID",a),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),Vi(this,f),D&&(this.O?d="headers="+encodeURIComponent(String(Kp(D)))+"&"+d:this.m&&uc(f,this.m,D)),lc(this.h,R),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),R.T=!0,sc(R,f,null)):sc(R,f,d),this.G=2}}else this.G==3&&(a?nm(this,a):this.i.length==0||Op(this.h)||nm(this))};function nm(a,d){var f;d?f=d.l:f=a.U++;const v=wn(a.I);be(v,"SID",a.K),be(v,"RID",f),be(v,"AID",a.T),Vi(a,v),a.m&&a.o&&uc(v,a.m,a.o),f=new Wn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=rm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),lc(a.h,f),sc(f,v,d)}function Vi(a,d){a.H&&U(a.H,function(f,v){be(d,v,f)}),a.l&&Up({},function(f,v){be(d,v,f)})}function rm(a,d,f){f=Math.min(a.i.length,f);var v=a.l?g(a.l.Na,a.l,a):null;e:{var R=a.i;let D=-1;for(;;){const H=["count="+f];D==-1?0<f?(D=R[0].g,H.push("ofs="+D)):D=0:H.push("ofs="+D);let xe=!0;for(let Je=0;Je<f;Je++){let ye=R[Je].g;const ot=R[Je].map;if(ye-=D,0>ye)D=Math.max(0,R[Je].g-100),xe=!1;else try{E1(ot,H,"req"+ye+"_")}catch{v&&v(ot)}}if(xe){v=H.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function sm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;J||z(),O||(J(),O=!0),Y.add(d,a),a.v=0}}function dc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Si(g(a.Fa,a),am(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,im(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Si(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),ma(this),im(this))};function hc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function im(a){a.g=new Wn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=wn(a.qa);be(d,"RID","rpc"),be(d,"SID",a.K),be(d,"AID",a.T),be(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(d,"TO",a.ja),be(d,"TYPE","xmlhttp"),Vi(a,d),a.m&&a.o&&uc(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=da(wn(d)),f.m=null,f.P=!0,Rp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ma(this),dc(this),yt(19))};function ya(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function om(a,d){var f=null;if(a.g==d){ya(a),hc(a),a.g=null;var v=2}else if(ac(a.h,d))f=d.D,Lp(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var R=a.B;v=ia(),gt(v,new Np(v,f)),ga(a)}else sm(a);else if(R=d.s,R==3||R==0&&0<d.X||!(v==1&&S1(a,d)||v==2&&dc(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),R){case 1:Ur(a,5);break;case 4:Ur(a,10);break;case 3:Ur(a,6);break;default:Ur(a,2)}}}function am(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Ur(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),v=a.Xa;const R=!v;v=new Fr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ua(v,"https"),da(v),R?_1(v.toString(),f):x1(v.toString(),f)}else yt(2);a.G=0,a.l&&a.l.sa(d),lm(a),tm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function lm(a){if(a.G=0,a.ka=[],a.l){const d=Fp(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ka,d),N(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function um(a,d,f){var v=f instanceof Fr?wn(f):new Fr(f);if(v.g!="")d&&(v.g=d+"."+v.g),ca(v,v.s);else{var R=l.location;v=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var D=new Fr(null);v&&ua(D,v),d&&(D.g=d),R&&ca(D,R),f&&(D.l=f),v=D}return f=a.D,d=a.ya,f&&d&&be(v,f,d),be(v,"VER",a.la),Vi(a,v),v}function cm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new je(new ha({eb:f})):new je(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dm(){}t=dm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function va(){}va.prototype.g=function(a,d){return new Rt(a,d)};function Rt(a,d){it.call(this),this.g=new em(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new vs(this)}A(Rt,it),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){cc(this.g)},Rt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Ju(a),a=f);d.i.push(new u1(d.Ya++,a)),d.G==3&&ga(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,Rt.aa.N.call(this)};function hm(a){ec.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(hm,ec);function fm(){tc.call(this),this.status=1}A(fm,tc);function vs(a){this.g=a}A(vs,dm),vs.prototype.ua=function(){gt(this.g,"a")},vs.prototype.ta=function(a){gt(this.g,new hm(a))},vs.prototype.sa=function(a){gt(this.g,new fm)},vs.prototype.ra=function(){gt(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,fx=function(){return new va},hx=function(){return ia()},dx=Mr,Zd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,al=oa,Ap.COMPLETE="complete",cx=Ap,bp.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",it.prototype.listen=it.prototype.K,Qi=bp,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,ux=je}).apply(typeof La<"u"?La:typeof self<"u"?self:typeof window<"u"?window:{});const Jg="@firebase/firestore",Zg="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new ff("@firebase/firestore");function ws(){return ls.logLevel}function Q(t,...e){if(ls.logLevel<=de.DEBUG){const n=e.map(kf);ls.debug(`Firestore (${yi}): ${t}`,...n)}}function Un(t,...e){if(ls.logLevel<=de.ERROR){const n=e.map(kf);ls.error(`Firestore (${yi}): ${t}`,...n)}}function Tr(t,...e){if(ls.logLevel<=de.WARN){const n=e.map(kf);ls.warn(`Firestore (${yi}): ${t}`,...n)}}function kf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,px(t,r,n)}function px(t,e,n){let r=`FIRESTORE (${yi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Un(r),new Error(r)}function ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||px(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class US{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zS{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new mx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class $S{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $S(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ey(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=HS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function eh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ue(r,s);{const i=gx(),o=WS(i.encode(ty(t,n)),i.encode(ty(e,n)));return o!==0?o:ue(r,s)}}n+=r>65535?2:1}return ue(t.length,e.length)}function ty(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function WS(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ue(t[n],e[n]);return ue(t.length,e.length)}function ri(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="__name__";class cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ue(e.length,n.length)}static compareSegments(e,n){const r=cn.isNumericId(e),s=cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?cn.extractNumericId(e).compare(cn.extractNumericId(n)):eh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _r.fromString(e.substring(4,e.length-2))}}class Ee extends cn{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const GS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends cn{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return GS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ny}static keyField(){return new tt([ny])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ee.fromString(e))}static fromName(e){return new ee(Ee.fromString(e).popFirst(5))}static empty(){return new ee(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e,n){if(!n)throw new K(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KS(t,e,n,r){if(e===!0&&r===!0)throw new K(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ry(t){if(!ee.isDocumentKey(t))throw new K(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sy(t){if(ee.isDocumentKey(t))throw new K(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Su(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Su(t);throw new K(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zo(t,e){if(!vx(t))throw new K(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-62135596800,oy=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*oy);return new Se(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iy)throw new K(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oy}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zo(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:$e("string",Se._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Se(0,0))}static max(){return new ie(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=-1;function QS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Se(n+1,0):new Se(n,r));return new br(s,ee.empty(),e)}function XS(t){return new br(t.readTime,t.key,Vo)}class br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new br(ie.min(),ee.empty(),Vo)}static max(){return new br(ie.max(),ee.empty(),Vo)}}function YS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==JS)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ek(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _i(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ku.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=-1;function Nu(t){return t==null}function Wl(t){return t===0&&1/t==-1/0}function tk(t){return typeof t=="number"&&Number.isInteger(t)&&!Wl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="";function nk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ay(e)),e=rk(t.get(n),e);return ay(e)}function rk(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case _x:n+="";break;default:n+=i}}return n}function ay(t){return t+_x+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}}class Fa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uy(this.data.getIterator())}getIteratorFrom(e){return new uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new We(this.comparator);return n.data=e,n}}class uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new We(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wx("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=sk.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="server_timestamp",Tx="__type__",bx="__previous_value__",Ix="__local_write_time__";function Cf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tx])===null||n===void 0?void 0:n.stringValue)===Ex}function Au(t){const e=t.mapValue.fields[bx];return Cf(e)?Au(e):e}function Oo(t){const e=Ir(t.mapValue.fields[Ix].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n,r,s,i,o,l,c,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=p}}const Gl="(default)";class Mo{constructor(e,n){this.projectId=e,this.database=n||Gl}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database===Gl}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__type__",ok="__max__",Ua={mapValue:{}},kx="__vector__",Kl="value";function kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cf(t)?4:lk(t)?9007199254740991:ak(t)?10:11:te(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=kr(t);if(n!==kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oo(t).isEqual(Oo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ir(s.timestampValue),l=Ir(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Sr(s.bytesValue).isEqual(Sr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),l=Me(i.doubleValue);return o===l?Wl(o)===Wl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ri(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(ly(o)!==ly(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!xn(o[c],l[c])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Lo(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function si(t,e){if(t===e)return 0;const n=kr(t),r=kr(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Me(i.integerValue||i.doubleValue),c=Me(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return cy(t.timestampValue,e.timestampValue);case 4:return cy(Oo(t),Oo(e));case 5:return eh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Sr(i),c=Sr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=ue(l[h],c[h]);if(p!==0)return p}return ue(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ue(Me(i.latitude),Me(o.latitude));return l!==0?l:ue(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,p;const m=i.fields||{},g=o.fields||{},b=(l=m[Kl])===null||l===void 0?void 0:l.arrayValue,A=(c=g[Kl])===null||c===void 0?void 0:c.arrayValue,k=ue(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:dy(b,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ua.mapValue&&o===Ua.mapValue)return 0;if(i===Ua.mapValue)return 1;if(o===Ua.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const g=eh(c[m],p[m]);if(g!==0)return g;const b=si(l[c[m]],h[p[m]]);if(b!==0)return b}return ue(c.length,p.length)}(t.mapValue,e.mapValue);default:throw te(23264,{le:n})}}function cy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Ir(t),r=Ir(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function dy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=si(n[s],r[s]);if(i)return i}return ue(n.length,r.length)}function ii(t){return th(t)}function th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=th(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${th(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function ll(t){switch(kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Au(t);return e?16+ll(e):16;case 5:return 2*t.stringValue.length;case 6:return Sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ll(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Dr(r.fields,(i,o)=>{s+=i.length+ll(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function hy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nh(t){return!!t&&"integerValue"in t}function Pf(t){return!!t&&"arrayValue"in t}function fy(t){return!!t&&"nullValue"in t}function py(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ul(t){return!!t&&"mapValue"in t}function ak(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Sx])===null||n===void 0?void 0:n.stringValue)===kx}function co(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Dr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=co(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(n)}setAll(e){let n=tt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=co(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ul(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Dr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new St(co(this.value))}}function Nx(t){const e=[];return Dr(t.fields,(n,r)=>{const s=new tt([n]);if(ul(r)){const i=Nx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,ie.min(),ie.min(),ie.min(),St.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ie.min(),ie.min(),St.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ie.min(),ie.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.position=e,this.inclusive=n}}function my(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=si(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n="asc"){this.field=e,this.dir=n}}function uk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{}class ze extends Ax{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dk(e,n,r):n==="array-contains"?new pk(e,r):n==="in"?new mk(e,r):n==="not-in"?new gk(e,r):n==="array-contains-any"?new yk(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hk(e,r):new fk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(si(n,this.value)):n!==null&&kr(this.value)===kr(n)&&this.matchesComparison(si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends Ax{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new an(e,n)}matches(e){return Cx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Cx(t){return t.op==="and"}function Px(t){return ck(t)&&Cx(t)}function ck(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function rh(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+ii(t.value);if(Px(t))return t.filters.map(e=>rh(e)).join(",");{const e=t.filters.map(n=>rh(n)).join(",");return`${t.op}(${e})`}}function Rx(t,e){return t instanceof ze?function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Rx(o,s.filters[l]),!0):!1}(t,e):void te(19439)}function jx(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${ii(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(jx).join(" ,")+"}"}(t):"Filter"}class dk extends ze{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class hk extends ze{constructor(e,n){super(e,"in",n),this.keys=Dx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fk extends ze{constructor(e,n){super(e,"not-in",n),this.keys=Dx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Dx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class pk extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pf(n)&&Lo(n.arrayValue,this.value)}}class mk extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class gk extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lo(this.value.arrayValue,n)}}class yk extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function yy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new vk(t,e,n,r,s,i,o)}function Rf(t){const e=oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Nu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ii(r)).join(",")),e.Pe=n}return e.Pe}function jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Rx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gy(t.startAt,e.startAt)&&gy(t.endAt,e.endAt)}function sh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function _k(t,e,n,r,s,i,o,l){return new xi(t,e,n,r,s,i,o,l)}function Cu(t){return new xi(t)}function vy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vx(t){return t.collectionGroup!==null}function ho(t){const e=oe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new We(tt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Fo(i,r))}),n.has(tt.keyField().canonicalString())||e.Te.push(new Fo(tt.keyField(),r))}return e.Te}function mn(t){const e=oe(t);return e.Ie||(e.Ie=xk(e,ho(t))),e.Ie}function xk(t,e){if(t.limitType==="F")return yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Fo(s.field,i)});const n=t.endAt?new Ql(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ql(t.startAt.position,t.startAt.inclusive):null;return yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ih(t,e){const n=t.filters.concat([e]);return new xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oh(t,e,n){return new xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pu(t,e){return jf(mn(t),mn(e))&&t.limitType===e.limitType}function Ox(t){return`${Rf(mn(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jx(s)).join(", ")}]`),Nu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ii(s)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function Ru(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ho(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=my(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,ho(r),s)||r.endAt&&!function(o,l,c){const h=my(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,ho(r),s))}(t,e)}function wk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Mx(t){return(e,n)=>{let r=!1;for(const s of ho(t)){const i=Ek(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Ek(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?si(c,h):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return xx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new Re(ee.comparator);function zn(){return Tk}const Lx=new Re(ee.comparator);function Xi(...t){let e=Lx;for(const n of t)e=e.insert(n.key,n);return e}function Fx(t){let e=Lx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kr(){return fo()}function Ux(){return fo()}function fo(){return new hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const bk=new Re(ee.comparator),Ik=new We(ee.comparator);function he(...t){let e=Ik;for(const n of t)e=e.add(n);return e}const Sk=new We(ue);function kk(){return Sk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function zx(t){return{integerValue:""+t}}function Nk(t,e){return tk(e)?zx(e):Df(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this._=void 0}}function Ak(t,e,n){return t instanceof Uo?function(s,i){const o={fields:{[Tx]:{stringValue:Ex},[Ix]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cf(i)&&(i=Au(i)),i&&(o.fields[bx]=i),{mapValue:o}}(n,e):t instanceof oi?Bx(t,e):t instanceof ai?qx(t,e):function(s,i){const o=$x(s,i),l=_y(o)+_y(s.Ee);return nh(o)&&nh(s.Ee)?zx(l):Df(s.serializer,l)}(t,e)}function Ck(t,e,n){return t instanceof oi?Bx(t,e):t instanceof ai?qx(t,e):n}function $x(t,e){return t instanceof Xl?function(r){return nh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Uo extends ju{}class oi extends ju{constructor(e){super(),this.elements=e}}function Bx(t,e){const n=Hx(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ai extends ju{constructor(e){super(),this.elements=e}}function qx(t,e){let n=Hx(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Xl extends ju{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function _y(t){return Me(t.integerValue||t.doubleValue)}function Hx(t){return Pf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.field=e,this.transform=n}}function Pk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof oi&&s instanceof oi||r instanceof ai&&s instanceof ai?ri(r.elements,s.elements,xn):r instanceof Xl&&s instanceof Xl?xn(r.Ee,s.Ee):r instanceof Uo&&s instanceof Uo}(t.transform,e.transform)}class Rk{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Du{}function Wx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Of(t.key,Ht.none()):new ea(t.key,t.data,Ht.none());{const n=t.data,r=St.empty();let s=new We(tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Vr(t.key,r,new Vt(s.toArray()),Ht.none())}}function jk(t,e,n){t instanceof ea?function(s,i,o){const l=s.value.clone(),c=wy(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(s,i,o){if(!cl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=wy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Gx(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function po(t,e,n,r){return t instanceof ea?function(i,o,l,c){if(!cl(i.precondition,o))return l;const h=i.value.clone(),p=Ey(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vr?function(i,o,l,c){if(!cl(i.precondition,o))return l;const h=Ey(i.fieldTransforms,c,o),p=o.data;return p.setAll(Gx(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return cl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Dk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=$x(r.transform,s||null);i!=null&&(n===null&&(n=St.empty()),n.set(r.field,i))}return n||null}function xy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ri(r,s,(i,o)=>Pk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ea extends Du{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vr extends Du{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wy(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Ck(o,l,n[s]))}return r}function Ey(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Ak(i,o,e))}return r}class Of extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vk extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=po(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=po(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ux();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=Wx(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&ri(this.mutations,e.mutations,(n,r)=>xy(n,r))&&ri(this.baseMutations,e.baseMutations,(n,r)=>xy(n,r))}}class Mf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return bk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Mf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,pe;function Fk(t){switch(t){case M.OK:return te(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function Kx(t){if(t===void 0)return Un("GRPC error has no .code"),M.UNKNOWN;switch(t){case Fe.OK:return M.OK;case Fe.CANCELLED:return M.CANCELLED;case Fe.UNKNOWN:return M.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return M.INTERNAL;case Fe.UNAVAILABLE:return M.UNAVAILABLE;case Fe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Fe.NOT_FOUND:return M.NOT_FOUND;case Fe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Fe.ABORTED:return M.ABORTED;case Fe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Fe.DATA_LOSS:return M.DATA_LOSS;default:return te(39323,{code:t})}}(pe=Fe||(Fe={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new _r([4294967295,4294967295],0);function Ty(t){const e=gx().encode(t),n=new lx;return n.update(e),new Uint8Array(n.digest())}function by(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _r([n,r],0),new _r([s,i],0)]}class Lf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yi(`Invalid padding: ${n}`);if(r<0)throw new Yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=_r.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(_r.fromNumber(r)));return s.compare(Uk)===1&&(s=new _r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ty(e),[r,s]=by(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=Ty(e),[r,s]=by(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ta.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vu(ie.min(),s,new Re(ue),zn(),he())}}class ta{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ta(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class Qx{constructor(e,n){this.targetId=e,this.De=n}}class Xx{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Iy{constructor(){this.ve=0,this.Ce=Sy(),this.Fe=st.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=he(),n=he(),r=he();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new ta(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Sy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class zk{constructor(e){this.We=e,this.Ge=new Map,this.ze=zn(),this.je=za(),this.Je=za(),this.He=new Re(ue)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(sh(i))if(r===0){const o=new ee(i.path);this.Xe(n,o,ft.newNoDocument(o,ie.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Sr(r).toUint8Array()}catch(c){if(c instanceof wx)return Tr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Lf(o,s,i)}catch(c){return Tr(c instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&sh(l.target)){const c=new ee(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,ft.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=he();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.st(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Vu(e,n,this.He,this.ze,r);return this.ze=zn(),this.je=za(),this.Je=za(),this.He=new Re(ue),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Iy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new We(ue),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new We(ue),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Iy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function za(){return new Re(ee.comparator)}function Sy(){return new Re(ee.comparator)}const $k={asc:"ASCENDING",desc:"DESCENDING"},Bk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qk={and:"AND",or:"OR"};class Hk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ah(t,e){return t.useProto3Json||Nu(e)?e:{value:e}}function Yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wk(t,e){return Yl(t,e.toTimestamp())}function gn(t){return ve(!!t,49232),ie.fromTimestamp(function(n){const r=Ir(n);return new Se(r.seconds,r.nanos)}(t))}function Ff(t,e){return lh(t,e).canonicalString()}function lh(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Jx(t){const e=Ee.fromString(t);return ve(rw(e),10190,{key:e.toString()}),e}function uh(t,e){return Ff(t.databaseId,e.path)}function Gc(t,e){const n=Jx(e);if(n.get(1)!==t.databaseId.projectId)throw new K(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(ew(n))}function Zx(t,e){return Ff(t.databaseId,e)}function Gk(t){const e=Jx(t);return e.length===4?Ee.emptyPath():ew(e)}function ch(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ew(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ky(t,e,n){return{name:uh(t,e),fields:n.value.mapValue.fields}}function Kk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:te(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ve(p===void 0||typeof p=="string",58123),st.fromBase64String(p||"")):(ve(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),st.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?M.UNKNOWN:Kx(h.code);return new K(p,h.message||"")}(o);n=new Xx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gc(t,r.document.name),i=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):ie.min(),l=new St({mapValue:{fields:r.document.fields}}),c=ft.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new dl(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gc(t,r.document),i=r.readTime?gn(r.readTime):ie.min(),o=ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new dl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gc(t,r.document),i=r.removedTargetIds||[];n=new dl([],i,s,null)}else{if(!("filter"in e))return te(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Lk(s,i),l=r.targetId;n=new Qx(l,o)}}return n}function Qk(t,e){let n;if(e instanceof ea)n={update:ky(t,e.key,e.value)};else if(e instanceof Of)n={delete:uh(t,e.key)};else if(e instanceof Vr)n={update:ky(t,e.key,e.data),updateMask:sN(e.fieldMask)};else{if(!(e instanceof Vk))return te(16599,{Rt:e.type});n={verify:uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ai)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xl)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Wk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function Xk(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?gn(s.updateTime):gn(i);return o.isEqual(ie.min())&&(o=gn(i)),new Rk(o,s.transformResults||[])}(n,e))):[]}function Yk(t,e){return{documents:[Zx(t,e.path)]}}function Jk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zx(t,s);const i=function(h){if(h.length!==0)return nw(an.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:Ts(g.field),direction:tN(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ah(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:s}}function Zk(t){let e=Gk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=tw(m);return g instanceof an&&Px(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(A){return new Fo(bs(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Nu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,b=m.values||[];return new Ql(b,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,b=m.values||[];return new Ql(b,g)}(n.endAt)),_k(e,s,o,i,l,"F",c,h)}function eN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bs(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bs(n.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bs(n.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bs(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ze.create(bs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>tw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function tN(t){return $k[t]}function nN(t){return Bk[t]}function rN(t){return qk[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function bs(t){return tt.fromServerFormat(t.fieldPath)}function nw(t){return t instanceof ze?function(n){if(n.op==="=="){if(py(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(fy(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(py(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(fy(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:nN(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>nw(s));return r.length===1?r[0]:{compositeFilter:{op:rN(n.op),filters:r}}}(t):te(54877,{filter:t})}function sN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r,s,i=ie.min(),o=ie.min(),l=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.gt=e}}function oN(t){const e=Zk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.Dn=new lN}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(br.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class lN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new We(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new We(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sw=41943040;class bt{static withCacheSize(e){return new bt(e,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bt.DEFAULT_COLLECTION_PERCENTILE=10,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bt.DEFAULT=new bt(sw,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bt.DISABLED=new bt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new li(0)}static ur(){return new li(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="LruGarbageCollector",uN=1048576;function Cy([t,e],[n,r]){const s=ue(t,n);return s===0?ue(e,r):s}class cN{constructor(e){this.Tr=e,this.buffer=new We(Cy),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Cy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Q(Ay,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_i(n)?Q(Ay,"Ignoring IndexedDB error during garbage collection: ",n):await vi(n)}await this.Rr(3e5)})}}class hN{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(ku.ue);const r=new cN(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Ny)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ny):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,l,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),ws()<=de.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function fN(t,e){return new hN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.changes=new hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&po(r.mutation,s,Vt.empty(),Se.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=Kr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Xi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=zn();const o=fo(),l=function(){return fo()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Vr)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),po(p.mutation,h,p.mutation.getFieldMask(),Se.now())):o.set(h.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new mN(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=fo();let s=new Re((o,l)=>o-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||Vt.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(s.get(l.batchId)||he()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=Ux();p.forEach(g=>{if(!i.has(g)){const b=Wx(n.get(g),r.get(g));b!==null&&m.set(g,b),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Vx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Kr());let l=Vo,c=i;return o.next(h=>L.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{c=c.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,he())).next(p=>({batchId:l,changes:Fx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=Xi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Xi();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,c=>{const h=function(m,g){return new xi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,ft.newInvalidDocument(p)))});let l=Xi();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&po(p.mutation,h,Vt.empty(),Se.now()),Ru(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:gn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:oN(s.bundledQuery),readTime:gn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.overlays=new Re(ee.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Kr(),i=n.length+1,o=new ee(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Kr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Kr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return L.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mk(n,r));let i=this.kr.get(n);i===void 0&&(i=he(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.qr=new We(Ge.Qr),this.$r=new We(Ge.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ge(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ee(new Ee([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ee(new Ee([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=he();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ee.comparator(e.key,n.key)||ue(e.Hr,n.Hr)}static Ur(e,n){return ue(e.Hr,n.Hr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new We(Ge.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ok(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Af:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(ue);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new ee(i),0);let l=new We(ue);return this.Yr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.Hr)),!0)},o),L.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.ni=e,this.docs=function(){return new Re(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zn();const o=n.path,l=new ee(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||YS(XS(p),r)<=0||(s.has(p.key)||Ru(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EN(this)}getSize(e){return L.resolve(this.size)}}class EN extends pN{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.persistence=e,this.ii=new hs(n=>Rf(n),jf),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new Uf,this.targetCount=0,this._i=li.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new li(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n){this.ai={},this.overlays={},this.ui=new ku(0),this.ci=!1,this.ci=!0,this.li=new _N,this.referenceDelegate=e(this),this.hi=new TN(this),this.indexManager=new aN,this.remoteDocumentCache=function(s){return new wN(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new iN(n),this.Ti=new yN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xN(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new bN(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class bN extends ZS{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Ai=new Uf,this.Ri=null}static Vi(e){return new zf(e)}get mi(){if(this.Ri)return this.Ri;throw te(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const s=ee.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Jl{constructor(e,n){this.persistence=e,this.gi=new hs(r=>nk(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fN(this,n)}static Vi(e,n){return new Jl(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ie.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ll(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new $f(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return vb()?8:ek(mt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new IN;return this.ws(e,n,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ws()<=de.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(ws()<=de.DEBUG&&Q("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ws()<=de.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):L.resolve())}ps(e,n){if(vy(n))return L.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=oh(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.bs(n,l);return this.Ds(n,h,o,c.readTime)?this.ps(e,oh(n,null,"F")):this.vs(e,h,n,c)}))})))}ys(e,n,r,s){return vy(n)||s.isEqual(ie.min())?L.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?L.resolve(null):(ws()<=de.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Es(n)),this.vs(e,o,n,QS(s,Vo)).next(l=>l))})}bs(e,n){let r=new We(Mx(e));return n.forEach((s,i)=>{Ru(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return ws()<=de.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Es(n)),this.gs.getDocumentsMatchingQuery(e,n,br.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="LocalStore",kN=3e8;class NN{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Re(ue),this.Ms=new hs(i=>Rf(i),jf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gN(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function AN(t,e,n,r){return new NN(t,e,n,r)}async function ow(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=he();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:l}))})})}function CN(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,g=m.keys();let b=L.resolve();return g.forEach(A=>{b=b.next(()=>p.getEntry(c,A)).next(k=>{const N=h.docVersions.get(A);ve(N!==null,48541),k.version.compareTo(N)<0&&(m.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=he();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function aw(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function PN(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.hi.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,p.addedDocuments,m)));let b=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(st.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),s=s.insert(m,b),function(k,N,x){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=kN?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,b,p)&&l.push(n.hi.updateTargetData(i,b))});let c=zn(),h=he();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(RN(i,o,e.documentUpdates).next(p=>{c=p.Ls,h=p.ks})),!r.isEqual(ie.min())){const p=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Fs=s,i))}function RN(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Q(Bf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function jN(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Af),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DN(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function dh(t,e,n){const r=oe(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!_i(o))throw o;Q(Bf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Py(t,e,n){const r=oe(t);let s=ie.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=oe(c),g=m.Ms.get(p);return g!==void 0?L.resolve(m.Fs.get(g)):m.hi.getTargetData(h,p)}(r,o,mn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:he())).next(l=>(VN(r,wk(e),l),{documents:l,qs:i})))}function VN(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Ry{constructor(){this.activeTargetIds=kk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ON{constructor(){this.Fo=new Ry,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ry,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="ConnectivityMonitor";class Dy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Q(jy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Q(jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a=null;function hh(){return $a===null?$a=function(){return 268435456+Math.round(2147483648*Math.random())}():$a++,"0x"+$a.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="RestConnection",LN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FN{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Gl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=hh(),l=this.Go(e,n.toUriEncodedString());Q(Kc,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:h}=new URL(l),p=pi(h);return this.jo(e,l,c,r,p).then(m=>(Q(Kc,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Tr(Kc,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=LN[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class zN extends FN{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=hh();return new Promise((l,c)=>{const h=new ux;h.setWithCredentials(!0),h.listenOnce(cx.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case al.NO_ERROR:const m=h.getResponseJson();Q(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case al.TIMEOUT:Q(ct,`RPC '${e}' ${o} timed out`),c(new K(M.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:const g=h.getStatus();if(Q(ct,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const A=b==null?void 0:b.error;if(A&&A.status&&A.message){const k=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(_)>=0?_:M.UNKNOWN}(A.status);c(new K(k,A.message))}else c(new K(M.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new K(M.UNAVAILABLE,"Connection failed."));break;default:te(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{Q(ct,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);Q(ct,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",p,r,15)})}P_(e,n,r){const s=hh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fx(),l=hx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Q(ct,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);this.T_(m);let g=!1,b=!1;const A=new UN({Ho:N=>{b?Q(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(Q(ct,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Q(ct,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},Yo:()=>m.close()}),k=(N,x,_)=>{N.listen(x,I=>{try{_(I)}catch(j){setTimeout(()=>{throw j},0)}})};return k(m,Qi.EventType.OPEN,()=>{b||(Q(ct,`RPC '${e}' stream ${s} transport opened.`),A.s_())}),k(m,Qi.EventType.CLOSE,()=>{b||(b=!0,Q(ct,`RPC '${e}' stream ${s} transport closed`),A.__(),this.I_(m))}),k(m,Qi.EventType.ERROR,N=>{b||(b=!0,Tr(ct,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),A.__(new K(M.UNAVAILABLE,"The operation could not be completed")))}),k(m,Qi.EventType.MESSAGE,N=>{var x;if(!b){const _=N.data[0];ve(!!_,16349);const I=_,j=(I==null?void 0:I.error)||((x=I[0])===null||x===void 0?void 0:x.error);if(j){Q(ct,`RPC '${e}' stream ${s} received error:`,j);const F=j.status;let U=function(w){const T=Fe[w];if(T!==void 0)return Kx(T)}(F),E=j.message;U===void 0&&(U=M.INTERNAL,E="Unknown error status: "+F+" with message "+j.message),b=!0,A.__(new K(U,E)),m.close()}else Q(ct,`RPC '${e}' stream ${s} received:`,_),A.a_(_)}}),k(l,dx.STAT_EVENT,N=>{N.stat===Zd.PROXY?Q(ct,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Zd.NOPROXY&&Q(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){return new Hk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="PersistentStream";class uw{constructor(e,n,r,s,i,o,l,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new lw(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new K(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Q(Vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Q(Vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $N extends uw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Kk(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?gn(o.readTime):ie.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ch(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=sh(c)?{documents:Yk(i,c)}:{query:Jk(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Yx(i,o.resumeToken);const h=ah(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=Yl(i,o.snapshotVersion.toTimestamp());const h=ah(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=eN(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ch(this.serializer),n.removeTarget=e,this.k_(n)}}class BN extends uw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=Xk(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ch(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Qk(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{}class HN extends qN{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new K(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,lh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(M.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,lh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(M.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class WN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Un(n),this._a=!1):Q("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="RemoteStore";class GN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{fs(this)&&(Q(us,"Restarting streams for network reachability change."),await async function(c){const h=oe(c);h.Ia.add(4),await na(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Mu(h)}(this))})}),this.Aa=new WN(r,s)}}async function Mu(t){if(fs(t))for(const e of t.da)await e(!0)}async function na(t){for(const e of t.da)await e(!1)}function cw(t,e){const n=oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Gf(n)?Wf(n):wi(n).x_()&&Hf(n,e))}function qf(t,e){const n=oe(t),r=wi(n);n.Ta.delete(e),r.x_()&&dw(n,e),n.Ta.size===0&&(r.x_()?r.B_():fs(n)&&n.Aa.set("Unknown"))}function Hf(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wi(t).H_(e)}function dw(t,e){t.Ra.$e(e),wi(t).Y_(e)}function Wf(t){t.Ra=new zk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),wi(t).start(),t.Aa.aa()}function Gf(t){return fs(t)&&!wi(t).M_()&&t.Ta.size>0}function fs(t){return oe(t).Ia.size===0}function hw(t){t.Ra=void 0}async function KN(t){t.Aa.set("Online")}async function QN(t){t.Ta.forEach((e,n)=>{Hf(t,e)})}async function XN(t,e){hw(t),Gf(t)?(t.Aa.la(e),Wf(t)):t.Aa.set("Unknown")}async function YN(t,e,n){if(t.Aa.set("Online"),e instanceof Xx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){Q(us,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zl(t,r)}else if(e instanceof dl?t.Ra.Ye(e):e instanceof Qx?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{const r=await aw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.Ta.get(h);p&&i.Ta.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=i.Ta.get(c);if(!p)return;i.Ta.set(c,p.withResumeToken(st.EMPTY_BYTE_STRING,p.snapshotVersion)),dw(i,c);const m=new or(p.target,c,h,p.sequenceNumber);Hf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q(us,"Failed to raise snapshot:",r),await Zl(t,r)}}async function Zl(t,e,n){if(!_i(e))throw e;t.Ia.add(1),await na(t),t.Aa.set("Offline"),n||(n=()=>aw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(us,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Mu(t)})}function fw(t,e){return e().catch(n=>Zl(t,n,e))}async function Lu(t){const e=oe(t),n=Nr(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Af;for(;JN(e);)try{const s=await jN(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,ZN(e,s)}catch(s){await Zl(e,s)}pw(e)&&mw(e)}function JN(t){return fs(t)&&t.Pa.length<10}function ZN(t,e){t.Pa.push(e);const n=Nr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function pw(t){return fs(t)&&!Nr(t).M_()&&t.Pa.length>0}function mw(t){Nr(t).start()}async function eA(t){Nr(t).na()}async function tA(t){const e=Nr(t);for(const n of t.Pa)e.X_(n.mutations)}async function nA(t,e,n){const r=t.Pa.shift(),s=Mf.from(r,e,n);await fw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lu(t)}async function rA(t,e){e&&Nr(t).Z_&&await async function(r,s){if(function(o){return Fk(o)&&o!==M.ABORTED}(s.code)){const i=r.Pa.shift();Nr(r).N_(),await fw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lu(r)}}(t,e),pw(t)&&mw(t)}async function Oy(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Q(us,"RemoteStore received new credentials");const r=fs(n);n.Ia.add(3),await na(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Mu(n)}async function sA(t,e){const n=oe(t);e?(n.Ia.delete(2),await Mu(n)):e||(n.Ia.add(2),await na(n),n.Aa.set("Unknown"))}function wi(t){return t.Va||(t.Va=function(n,r,s){const i=oe(n);return i.ia(),new $N(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:KN.bind(null,t),e_:QN.bind(null,t),n_:XN.bind(null,t),J_:YN.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Gf(t)?Wf(t):t.Aa.set("Unknown")):(await t.Va.stop(),hw(t))})),t.Va}function Nr(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.ia(),new BN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:eA.bind(null,t),n_:rA.bind(null,t),ea:tA.bind(null,t),ta:nA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Lu(t)):(await t.ma.stop(),t.Pa.length>0&&(Q(us,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Kf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qf(t,e){if(Un("AsyncQueue",`${e}: ${t}`),_i(t))return new K(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{static emptySet(e){return new Gs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Xi(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.fa=new Re(ee.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):te(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ui{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ui(e,n,Gs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class oA{constructor(){this.queries=Ly(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=Ly(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(r)})})(this,new K(M.ABORTED,"Firestore shutting down"))}}function Ly(){return new hs(t=>Ox(t),Pu)}async function Xf(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new iA,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Qf(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Jf(n)}async function Yf(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aA(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(r=!0);o.ya=s}}r&&Jf(n)}function lA(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Jf(t){t.Da.forEach(e=>{e.next()})}var fh,Fy;(Fy=fh||(fh={})).Fa="default",Fy.Cache="cache";class Zf{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.key=e}}class yw{constructor(e){this.key=e}}class uA{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=he(),this.mutatedKeys=he(),this.Xa=Mx(e),this.eu=new Gs(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new My,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),b=Ru(this.query,m)?m:null,A=!!g&&this.mutatedKeys.has(g.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let N=!1;g&&b?g.data.isEqual(b.data)?A!==k&&(r.track({type:3,doc:b}),N=!0):this.iu(g,b)||(r.track({type:2,doc:b}),N=!0,(c&&this.Xa(b,c)>0||h&&this.Xa(b,h)<0)&&(l=!0)):!g&&b?(r.track({type:0,doc:b}),N=!0):g&&!b&&(r.track({type:1,doc:g}),N=!0,(c||h)&&(l=!0)),N&&(b?(o=o.add(b),i=k?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{eu:o,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((p,m)=>function(b,A){const k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{At:N})}};return k(b)-k(A)}(p.type,m.type)||this.Xa(p.doc,m.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,h=c!==this.Ya;return this.Ya=c,o.length!==0||h?{snapshot:new ui(this.query,e.eu,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new My,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=he(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new yw(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new gw(r))}),n}uu(e){this.Ha=e.qs,this.Za=he();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ui.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ep="SyncEngine";class cA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dA{constructor(e){this.key=e,this.lu=!1}}class hA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new hs(l=>Ox(l),Pu),this.Tu=new Map,this.Iu=new Set,this.du=new Re(ee.comparator),this.Eu=new Map,this.Au=new Uf,this.Ru={},this.Vu=new Map,this.mu=li.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function fA(t,e,n=!0){const r=Tw(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await vw(r,e,n,!0),s}async function pA(t,e){const n=Tw(t);await vw(n,e,!0,!1)}async function vw(t,e,n,r){const s=await DN(t.localStore,mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await mA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&cw(t.remoteStore,s),l}async function mA(t,e,n,r,s){t.gu=(m,g,b)=>async function(k,N,x,_){let I=N.view.nu(x);I.Ds&&(I=await Py(k.localStore,N.query,!1).then(({documents:E})=>N.view.nu(E,I)));const j=_&&_.targetChanges.get(N.targetId),F=_&&_.targetMismatches.get(N.targetId)!=null,U=N.view.applyChanges(I,k.isPrimaryClient,j,F);return zy(k,N.targetId,U._u),U.snapshot}(t,m,g,b);const i=await Py(t.localStore,e,!0),o=new uA(e,i.qs),l=o.nu(i.documents),c=ta.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);zy(t,n,h._u);const p=new cA(e,n,o);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function gA(t,e,n){const r=oe(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Pu(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&qf(r.remoteStore,s.targetId),ph(r,s.targetId)}).catch(vi)):(ph(r,s.targetId),await dh(r.localStore,s.targetId,!0))}async function yA(t,e){const n=oe(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qf(n.remoteStore,r.targetId))}async function vA(t,e,n){const r=IA(t);try{const s=await function(o,l){const c=oe(o),h=Se.now(),p=l.reduce((b,A)=>b.add(A.key),he());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let A=zn(),k=he();return c.Os.getEntries(b,p).next(N=>{A=N,A.forEach((x,_)=>{_.isValidDocument()||(k=k.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,A)).next(N=>{m=N;const x=[];for(const _ of l){const I=Dk(_,m.get(_.key).overlayedDocument);I!=null&&x.push(new Vr(_.key,I,Nx(I.value.mapValue),Ht.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,x,l)}).next(N=>{g=N;const x=N.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(b,N.batchId,x)})}).then(()=>({batchId:g.batchId,changes:Fx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ru[o.currentUser.toKey()];h||(h=new Re(ue)),h=h.insert(l,c),o.Ru[o.currentUser.toKey()]=h}(r,s.batchId,n),await ra(r,s.changes),await Lu(r.remoteStore)}catch(s){const i=Qf(s,"Failed to persist write");n.reject(i)}}async function _w(t,e){const n=oe(t);try{const r=await PN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?ve(o.lu,14607):s.removedDocuments.size>0&&(ve(o.lu,42227),o.lu=!1))}),await ra(n,r,e)}catch(r){await vi(r)}}function Uy(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=oe(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const g of m.wa)g.va(l)&&(h=!0)}),h&&Jf(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _A(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Re(ee.comparator);o=o.insert(i,ft.newNoDocument(i,ie.min()));const l=he().add(i),c=new Vu(ie.min(),new Map,new Re(ue),o,l);await _w(r,c),r.du=r.du.remove(i),r.Eu.delete(e),tp(r)}else await dh(r.localStore,e,!1).then(()=>ph(r,e,n)).catch(vi)}async function xA(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await CN(n.localStore,e);ww(n,r,null),xw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ra(n,s)}catch(s){await vi(s)}}async function wA(t,e,n){const r=oe(t);try{const s=await function(o,l){const c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(ve(m!==null,37113),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);ww(r,e,n),xw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ra(r,s)}catch(s){await vi(s)}}function xw(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function ww(t,e,n){const r=oe(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function ph(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||Ew(t,r)})}function Ew(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qf(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),tp(t))}function zy(t,e,n){for(const r of n)r instanceof gw?(t.Au.addReference(r.key,e),EA(t,r)):r instanceof yw?(Q(ep,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||Ew(t,r.key)):te(19791,{yu:r})}function EA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Q(ep,"New document in limbo: "+n),t.Iu.add(r),tp(t))}function tp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ee(Ee.fromString(e)),r=t.mu.next();t.Eu.set(r,new dA(n)),t.du=t.du.insert(n,r),cw(t.remoteStore,new or(mn(Cu(n.path)),r,"TargetPurposeLimboResolution",ku.ue))}}async function ra(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{o.push(r.gu(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=$f.Es(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,h){const p=oe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,g=>L.forEach(g.Is,b=>p.persistence.referenceDelegate.addReference(m,g.targetId,b)).next(()=>L.forEach(g.ds,b=>p.persistence.referenceDelegate.removeReference(m,g.targetId,b)))))}catch(m){if(!_i(m))throw m;Q(Bf,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const b=p.Fs.get(g),A=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(A);p.Fs=p.Fs.insert(g,k)}}}(r.localStore,i))}async function TA(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Q(ep,"User change. New user:",e.toKey());const r=await ow(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new K(M.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ra(n,r.Bs)}}function bA(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.lu)return he().add(r.key);{let s=he();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const l=n.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function Tw(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_w.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_A.bind(null,e),e.hu.J_=aA.bind(null,e.eventManager),e.hu.pu=lA.bind(null,e.eventManager),e}function IA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wA.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ou(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return AN(this.persistence,new SN,e.initialUser,this.serializer)}Du(e){return new iw(zf.Vi,this.serializer)}bu(e){return new ON}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class SA extends eu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ve(this.persistence.referenceDelegate instanceof Jl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dN(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?bt.withCacheSize(this.cacheSizeBytes):bt.DEFAULT;return new iw(r=>Jl.Vi(r,n),this.serializer)}}class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Uy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TA.bind(null,this.syncEngine),await sA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oA}()}createDatastore(e){const n=Ou(e.databaseInfo.databaseId),r=function(i){return new zN(i)}(e.databaseInfo);return function(i,o,l,c){return new HN(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new GN(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Uy(this.syncEngine,n,0),function(){return Dy.C()?new Dy:new MN}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,p){const m=new hA(s,i,o,l,c,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);Q(us,"RemoteStore shutting down."),i.Ia.add(5),await na(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="FirestoreClient";class kA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=Nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q(Ar,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Ar,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xc(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Ar,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ow(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Tr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Tr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function $y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NA(t);Q(Ar,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Oy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Oy(e.remoteStore,s)),t._onlineComponents=e}async function NA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Ar,"Using user provided OfflineComponentProvider");try{await Xc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Tr("Error using user provided cache. Falling back to memory cache: "+n),await Xc(t,new eu)}}else Q(Ar,"Using default OfflineComponentProvider"),await Xc(t,new SA(void 0));return t._offlineComponents}async function bw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Ar,"Using user provided OnlineComponentProvider"),await $y(t,t._uninitializedComponentsProvider._online)):(Q(Ar,"Using default OnlineComponentProvider"),await $y(t,new mh))),t._onlineComponents}function AA(t){return bw(t).then(e=>e.syncEngine)}async function tu(t){const e=await bw(t),n=e.eventManager;return n.onListen=fA.bind(null,e.syncEngine),n.onUnlisten=gA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yA.bind(null,e.syncEngine),n}function CA(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new np({next:g=>{p.Ou(),o.enqueueAndForget(()=>Yf(i,m));const b=g.docs.has(l);!b&&g.fromCache?h.reject(new K(M.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&g.fromCache&&c&&c.source==="server"?h.reject(new K(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Zf(Cu(l.path),p,{includeMetadataChanges:!0,ka:!0});return Xf(i,m)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}function PA(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new np({next:g=>{p.Ou(),o.enqueueAndForget(()=>Yf(i,m)),g.fromCache&&c.source==="server"?h.reject(new K(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Zf(l,p,{includeMetadataChanges:!0,ka:!0});return Xf(i,m)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="firestore.googleapis.com",qy=!0;class Hy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=qy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:qy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uN)throw new K(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Iw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FS;switch(r.type){case"firstParty":return new BS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=By.get(n);r&&(Q("ComponentProvider","Removing Datastore"),By.delete(n),r.terminate())}(this),Promise.resolve()}}function RA(t,e,n,r={}){var s;t=Pt(t,Fu);const i=pi(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(b_(`https://${c}`),I_("Firestore",!0)),o.host!==Sw&&o.host!==c&&Tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Mn(h,l)&&(t._setSettings(h),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=dt.MOCK_USER;else{p=ub(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new dt(g)}t._authCredentials=new US(new mx(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class Ve{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zo(n,Ve._jsonSchema))return new Ve(e,r||null,new ee(Ee.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:$e("string",Ve._jsonSchemaVersion),referencePath:$e("string")};class xr extends Or{constructor(e,n,r){super(e,n,Cu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new ee(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function Jr(t,e,...n){if(t=Xe(t),yx("collection","path",e),t instanceof Fu){const r=Ee.fromString(e,...n);return sy(r),new xr(t,null,r)}{if(!(t instanceof Ve||t instanceof xr))throw new K(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return sy(r),new xr(t.firestore,null,r)}}function Cn(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Nf.newId()),yx("doc","path",e),t instanceof Fu){const r=Ee.fromString(e,...n);return ry(r),new Ve(t,null,new ee(r))}{if(!(t instanceof Ve||t instanceof xr))throw new K(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return ry(r),new Ve(t.firestore,t instanceof xr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="AsyncQueue";class Gy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new lw(this,"async_queue_retry"),this.oc=()=>{const r=Qc();r&&Q(Wy,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Rn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!_i(e))throw e;Q(Wy,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Un("INTERNAL UNHANDLED ERROR: ",Ky(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Kf.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&te(47125,{hc:Ky(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Ky(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class $n extends Fu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Gy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,await e}}}function jA(t,e){const n=typeof t=="object"?t:A_(),r=typeof t=="string"?t:Gl,s=mf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ab("firestore");i&&RA(s,...i)}return s}function Uu(t){if(t._terminated)throw new K(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DA(t),t._firestoreClient}function DA(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new ik(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Iw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new kA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(st.fromBase64String(e))}catch(n){throw new K(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zo(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:$e("string",$t._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yn._jsonSchemaVersion}}static fromJSON(e){if(Zo(e,yn._jsonSchema))return new yn(e.latitude,e.longitude)}}yn._jsonSchemaVersion="firestore/geoPoint/1.0",yn._jsonSchema={type:$e("string",yn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zo(e,vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vn(e.vectorValues);throw new K(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vn._jsonSchemaVersion="firestore/vectorValue/1.0",vn._jsonSchema={type:$e("string",vn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/^__.*__$/;class OA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ea(e,this.data,n,this.fieldTransforms)}}class kw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ec:t})}}class $u{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new $u(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return nu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Nw(this.Ec)&&VA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class MA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ou(e)}Dc(e,n,r,s=!1){return new $u({Ec:e,methodName:n,bc:r,path:tt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(t){const e=t._freezeSettings(),n=Ou(t._databaseId);return new MA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Aw(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);op("Data must be an object, but it was:",o,r);const l=Pw(r,o);let c,h;if(i.merge)c=new Vt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=gh(e,m,n);if(!o.contains(g))throw new K(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jw(p,g)||p.push(g)}c=new Vt(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new OA(new St(l),c,h)}class qu extends Ei{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qu}}function Cw(t,e,n){return new $u({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rp extends Ei{_toFieldTransform(e){return new Vf(e.path,new Uo)}isEqual(e){return e instanceof rp}}class sp extends Ei{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Cw(this,e,!0),r=this.vc.map(i=>ps(i,n)),s=new oi(r);return new Vf(e.path,s)}isEqual(e){return e instanceof sp&&Mn(this.vc,e.vc)}}class ip extends Ei{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Cw(this,e,!0),r=this.vc.map(i=>ps(i,n)),s=new ai(r);return new Vf(e.path,s)}isEqual(e){return e instanceof ip&&Mn(this.vc,e.vc)}}function LA(t,e,n,r){const s=t.Dc(1,e,n);op("Data must be an object, but it was:",s,r);const i=[],o=St.empty();Dr(r,(c,h)=>{const p=ap(e,c,n);h=Xe(h);const m=s.gc(p);if(h instanceof qu)i.push(p);else{const g=ps(h,m);g!=null&&(i.push(p),o.set(p,g))}});const l=new Vt(i);return new kw(o,l,s.fieldTransforms)}function FA(t,e,n,r,s,i){const o=t.Dc(1,e,n),l=[gh(e,r,n)],c=[s];if(i.length%2!=0)throw new K(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(gh(e,i[g])),c.push(i[g+1]);const h=[],p=St.empty();for(let g=l.length-1;g>=0;--g)if(!jw(h,l[g])){const b=l[g];let A=c[g];A=Xe(A);const k=o.gc(b);if(A instanceof qu)h.push(b);else{const N=ps(A,k);N!=null&&(h.push(b),p.set(b,N))}}const m=new Vt(h);return new kw(p,m,o.fieldTransforms)}function UA(t,e,n,r=!1){return ps(n,t.Dc(r?4:3,e))}function ps(t,e){if(Rw(t=Xe(t)))return op("Unsupported field value:",e,t),Pw(t,e);if(t instanceof Ei)return function(r,s){if(!Nw(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ps(l,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Nk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Se.fromDate(r);return{timestampValue:Yl(s.serializer,i)}}if(r instanceof Se){const i=new Se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yl(s.serializer,i)}}if(r instanceof yn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:Yx(s.serializer,r._byteString)};if(r instanceof Ve){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ff(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vn)return function(o,l){return{mapValue:{fields:{[Sx]:{stringValue:kx},[Kl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.wc("VectorValues must only contain numeric values.");return Df(l.serializer,h)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Su(r)}`)}(t,e)}function Pw(t,e){const n={};return xx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(t,(r,s)=>{const i=ps(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Rw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof yn||t instanceof $t||t instanceof Ve||t instanceof Ei||t instanceof vn)}function op(t,e,n){if(!Rw(n)||!vx(n)){const r=Su(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gh(t,e,n){if((e=Xe(e))instanceof zu)return e._internalPath;if(typeof e=="string")return ap(t,e);throw nu("Field path arguments must be of type string or ",t,!1,void 0,n)}const zA=new RegExp("[~\\*/\\[\\]]");function ap(t,e,n){if(e.search(zA)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zu(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(M.INVALID_ARGUMENT,l+t+c)}function jw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $A extends Dw{data(){return super.data()}}function Hu(t,e){return typeof e=="string"?ap(t,e):e instanceof zu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lp{}class Ow extends lp{}function up(t,e,...n){let r=[];e instanceof lp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof cp).length,l=i.filter(c=>c instanceof Wu).length;if(o>1||o>0&&l>0)throw new K(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wu extends Ow{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wu(e,n,r)}_apply(e){const n=this._parse(e);return Mw(e._query,n),new Or(e.firestore,e.converter,ih(e._query,n))}_parse(e){const n=Bu(e.firestore);return function(i,o,l,c,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new K(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Yy(m,p);const A=[];for(const k of m)A.push(Xy(c,i,k));g={arrayValue:{values:A}}}else g=Xy(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Yy(m,p),g=UA(l,o,m,p==="in"||p==="not-in");return ze.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function BA(t,e,n){const r=e,s=Hu("where",t);return Wu._create(s,r,n)}class cp extends lp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Mw(o,c),o=ih(o,c)}(e._query,n),new Or(e.firestore,e.converter,ih(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dp extends Ow{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fo(i,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new xi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qA(t,e="asc"){const n=e,r=Hu("orderBy",t);return dp._create(r,n)}function Xy(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new K(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vx(e)&&n.indexOf("/")!==-1)throw new K(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!ee.isDocumentKey(r))throw new K(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hy(t,new ee(r))}if(n instanceof Ve)return hy(t,n._key);throw new K(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Su(n)}.`)}function Yy(t,e){if(!Array.isArray(t)||t.length===0)throw new K(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HA{convertValue(e,n="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Dr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Kl].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Me(o.doubleValue));return new vn(i)}convertGeoPoint(e){return new yn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Au(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);ve(rw(r),9688,{name:e});const s=new Mo(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||Un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ji{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zr extends Dw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zr._jsonSchema={type:$e("string",Zr._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class hl extends Zr{data(e={}){return super.data(e)}}class es{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ji(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hl(this._firestore,this._userDataWriter,r.key,r,new Ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new hl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ji(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new hl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ji(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:WA(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=es._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t){t=Pt(t,Ve);const e=Pt(t.firestore,$n);return CA(Uu(e),t._key).then(n=>zw(e,t,n))}es._jsonSchemaVersion="firestore/querySnapshot/1.0",es._jsonSchema={type:$e("string",es._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};class hp extends HA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function GA(t){t=Pt(t,Or);const e=Pt(t.firestore,$n),n=Uu(e),r=new hp(e);return Vw(t._query),PA(n,t._query).then(s=>new es(e,r,t,s))}function Uw(t,e,n){t=Pt(t,Ve);const r=Pt(t.firestore,$n),s=Lw(t.converter,e);return Gu(r,[Aw(Bu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ht.none())])}function mo(t,e,n,...r){t=Pt(t,Ve);const s=Pt(t.firestore,$n),i=Bu(s);let o;return o=typeof(e=Xe(e))=="string"||e instanceof zu?FA(i,"updateDoc",t._key,e,n,r):LA(i,"updateDoc",t._key,e),Gu(s,[o.toMutation(t._key,Ht.exists(!0))])}function KA(t){return Gu(Pt(t.firestore,$n),[new Of(t._key,Ht.none())])}function QA(t,e){const n=Pt(t.firestore,$n),r=Cn(t),s=Lw(t.converter,e);return Gu(n,[Aw(Bu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ht.exists(!1))]).then(()=>r)}function Ms(t,...e){var n,r,s;t=Xe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Qy(e[o])||(i=e[o++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Qy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Ve)h=Pt(t.firestore,$n),p=Cu(t._key.path),c={next:m=>{e[o]&&e[o](zw(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Pt(t,Or);h=Pt(m.firestore,$n),p=m._query;const g=new hp(h);c={next:b=>{e[o]&&e[o](new es(h,g,m,b))},error:e[o+1],complete:e[o+2]},Vw(t._query)}return function(g,b,A,k){const N=new np(k),x=new Zf(b,N,A);return g.asyncQueue.enqueueAndForget(async()=>Xf(await tu(g),x)),()=>{N.Ou(),g.asyncQueue.enqueueAndForget(async()=>Yf(await tu(g),x))}}(Uu(h),p,l,c)}function Gu(t,e){return function(r,s){const i=new Rn;return r.asyncQueue.enqueueAndForget(async()=>vA(await AA(r),s,i)),i.promise}(Uu(t),e)}function zw(t,e,n){const r=n.docs.get(e._key),s=new hp(t);return new Zr(t,s,e._key,r,new Ji(n.hasPendingWrites,n.fromCache),e.converter)}function Jy(){return new rp("serverTimestamp")}function XA(...t){return new sp("arrayUnion",t)}function YA(...t){return new ip("arrayRemove",t)}(function(e,n=!0){(function(s){yi=s})(mi),ti(new os("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new $n(new zS(r.getProvider("auth-internal")),new qS(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),vr(Jg,Zg,e),vr(Jg,Zg,"esm2017")})();const JA={apiKey:"AIzaSyB9wTEF80N6gQC82A2OLuIij4k4TIxCIlc",authDomain:"fengyuan-handbook.firebaseapp.com",projectId:"fengyuan-handbook",storageBucket:"fengyuan-handbook.firebasestorage.app",messagingSenderId:"611897296630",appId:"1:611897296630:web:24958a6cf6cce57633ced7"},$w=N_(JA),Yc=VS($w),_t=jA($w);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bw=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=$.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>$.createElement("svg",{ref:c,...eC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Bw("lucide",s),...l},[...o.map(([h,p])=>$.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(t,e)=>{const n=$.forwardRef(({className:r,...s},i)=>$.createElement(tC,{ref:i,iconNode:e,className:Bw(`lucide-${ZA(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=ae("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ae("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=ae("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ae("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=ae("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=ae("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ae("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=ae("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ae("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ae("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ae("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ae("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=ae("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=ae("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ae("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ae("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),n0=[{id:1,title:"",category:"",link:"#",type:"pdf"},{id:2,title:"(UD)",category:"",link:"#",type:"pdf"},{id:3,title:"",category:"",link:"#",type:"pdf"},{id:4,title:" (High Alert) ",category:"",link:"#",type:"pdf"}],wC=[{id:1,area:" ()",ext:"1151",note:""},{id:2,area:"",ext:"1152",note:""},{id:3,area:" ()",ext:"1153",note:""},{id:4,area:"",ext:"1154",note:""},{id:5,area:"",ext:"1157",note:""},{id:6,area:"TPN",ext:"1158",note:""},{id:7,area:"",ext:"1159",note:""},{id:8,area:"",ext:"1063",note:""},{id:9,area:"",ext:"5151",note:""},{id:10,area:" ()",ext:"3253",note:""},{id:11,area:"",ext:"26XX",note:"26+"},{id:12,area:"",ext:"2646",note:"45"}],EC=["","","","","","",""],TC=()=>{const[t,e]=$.useState(""),[n,r]=$.useState("sop"),[s,i]=$.useState(Array.isArray(n0)?n0.map(k=>({...k,source:"local",id:`local_${k.id}`})):[]),[o,l]=$.useState(EC),[c,h]=$.useState(!0),[p,m]=$.useState(null);$.useEffect(()=>{const k=up(Jr(_t,"sop_articles")),N=Ms(k,x=>{const _=[];x.forEach(I=>{_.push({id:I.id,...I.data()})}),_.length>0&&i(_),h(!1)},x=>{console.error(":",x),h(!1)});return()=>N()},[]),$.useEffect(()=>{(async()=>{try{const N=Cn(_t,"site_settings","sop_config"),x=await Fw(N);if(x.exists()){const _=x.data();_.quickKeywords&&Array.isArray(_.quickKeywords)&&l(_.quickKeywords)}}catch(N){console.error(":",N)}})()},[]);const g=k=>{if(!k)return"bg-gray-100 text-gray-600";const N={:"bg-orange-100 text-orange-800",:"bg-rose-100 text-rose-800",:"bg-red-100 text-red-800",:"bg-stone-100 text-stone-800",:"bg-amber-100 text-amber-800",:"bg-yellow-100 text-yellow-800",:"bg-pink-100 text-pink-800",:"bg-lime-100 text-lime-800",:"bg-emerald-100 text-emerald-800",:"bg-warmGray-100 text-warmGray-800"};if(N[k])return N[k];const x=["bg-orange-200 text-orange-900","bg-amber-200 text-amber-900","bg-yellow-200 text-yellow-900","bg-rose-200 text-rose-900","bg-pink-200 text-pink-900","bg-red-200 text-red-900","bg-stone-200 text-stone-900","bg-lime-200 text-lime-900","bg-fuchsia-100 text-fuchsia-800","bg-violet-100 text-violet-800","bg-indigo-100 text-indigo-800","bg-teal-100 text-teal-800"];let _=0;for(let j=0;j<k.length;j++)_=k.charCodeAt(j)+((_<<5)-_);const I=Math.abs(_)%x.length;return x[I]},b=wC.filter(k=>k.area.includes(t)||k.ext.includes(t)||k.note.includes(t)),A=s.filter(k=>{var N,x;return((N=k.title)==null?void 0:N.toLowerCase().includes(t.toLowerCase()))||((x=k.category)==null?void 0:x.includes(t))}).sort((k,N)=>(k.category||"").localeCompare(N.category||""));return u.jsxs("div",{className:"space-y-0 sm:space-y-6",children:[" ",u.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-xl md:shadow-sm md:border border-gray-100",children:[u.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx(iu,{className:"w-5 h-5 md:w-6 md:h-6 text-orange-500"}),""]}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx(iu,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"SOP ...",value:t,onChange:k=>e(k.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 outline-none text-base md:text-lg shadow-inner bg-gray-50 md:bg-white"})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("span",{className:"text-sm text-gray-500 flex items-center mr-1",children:""}),o.map((k,N)=>u.jsx("button",{onClick:()=>e(k),className:"px-3 py-1 bg-orange-50 hover:bg-orange-100 text-orange-700 hover:text-orange-900 rounded-full text-xs transition-colors border border-orange-100",children:k},`${k}-${N}`)),t&&u.jsx("button",{onClick:()=>e(""),className:"px-3 py-1 bg-gray-100 text-gray-500 hover:bg-gray-200 rounded-full text-xs transition-colors border border-gray-200 ml-auto",children:""})]})]}),u.jsxs("div",{className:"flex border-b border-gray-200 bg-white md:rounded-t-xl px-0 md:px-2 pt-2 sticky top-16 z-40 shadow-sm md:shadow-none",children:[u.jsxs("button",{onClick:()=>r("sop"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 transition-all relative top-[1px] md:rounded-t-lg ${n==="sop"?"text-orange-600 bg-orange-50 border-b-2 border-orange-500 md:border-b-0 md:border-x md:border-t md:border-orange-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(ar,{className:"w-4 h-4"})," SOP  (",A.length,")"]}),u.jsxs("button",{onClick:()=>r("extension"),className:`flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 transition-all relative top-[1px] md:rounded-t-lg ${n==="extension"?"text-green-600 bg-green-50 border-b-2 border-green-500 md:border-b-0 md:border-x md:border-t md:border-green-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[u.jsx(pC,{className:"w-4 h-4"}),"  (",b.length,")"]})]}),u.jsxs("div",{className:"min-h-[300px] bg-gray-50 p-2 md:bg-transparent md:p-0",children:[n==="sop"&&u.jsx("div",{className:"space-y-4 animate-fade-in",children:c?u.jsx("p",{className:"text-gray-500 text-center py-4",children:"..."}):A.length===0?u.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-lg border border-dashed border-gray-200",children:""}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 md:gap-4",children:A.map(k=>u.jsxs("div",{onClick:()=>{k.content&&k.content.trim()!==""?m(k):k.attachmentUrl?window.open(k.attachmentUrl,"_blank"):alert(" SOP ")},className:"group relative bg-white p-4 md:p-5 rounded-lg md:rounded-xl shadow-sm md:border border-gray-100 hover:border-orange-300 hover:shadow-md transition-all cursor-pointer overflow-hidden text-left",children:[u.jsx("div",{className:`absolute top-0 left-0 px-3 py-1 text-xs font-bold rounded-br-lg ${g(k.category)}`,children:k.category||""}),u.jsxs("div",{className:"mt-6 flex items-start justify-between",children:[u.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-orange-600 leading-snug line-clamp-2",children:k.title}),u.jsx("div",{className:"flex-shrink-0 ml-3 text-gray-400 group-hover:text-orange-500",children:k.content?u.jsx(ar,{className:"w-5 h-5"}):u.jsx(su,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"mt-3 flex items-center justify-end text-xs text-gray-400 h-5",children:k.attachmentUrl&&u.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium bg-orange-50 px-2 py-0.5 rounded-full border border-orange-100",children:[u.jsx(Gw,{className:"w-3 h-3"})," "]})})]},k.id))})}),n==="extension"&&u.jsx("div",{className:"space-y-4 animate-fade-in",children:b.length===0?u.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-lg border border-dashed border-gray-200",children:""}):u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 md:gap-3",children:b.map((k,N)=>u.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-100 shadow-sm flex flex-col justify-center text-center hover:border-green-400 transition-colors",children:[u.jsx("span",{className:"text-gray-500 text-xs mb-1 font-medium",children:k.area}),u.jsx("span",{className:"text-xl font-mono font-bold text-green-700 tracking-wider",children:k.ext}),k.note&&u.jsx("span",{className:"text-[10px] text-gray-400 mt-1 bg-gray-50 px-1 rounded inline-block mx-auto",children:k.note})]},N))})})]}),p&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>m(null),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col animate-fade-in text-left",onClick:k=>k.stopPropagation(),children:[u.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.title}),u.jsx("button",{onClick:()=>m(null),className:"p-1 rounded-full hover:bg-gray-200 text-gray-500 transition-colors",children:u.jsx(ci,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto whitespace-pre-wrap leading-relaxed text-gray-700 text-lg",children:p.content||""}),u.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center",children:[u.jsx("span",{className:`text-xs px-2 py-1 rounded ${g(p.category)}`,children:p.category}),u.jsxs("div",{className:"flex gap-2",children:[p.attachmentUrl&&u.jsxs("a",{href:p.attachmentUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-orange-50 border border-orange-200 text-orange-700 rounded-lg text-sm hover:bg-orange-100 transition-colors flex items-center gap-1 font-medium",children:[u.jsx(su,{className:"w-4 h-4"})," /"]}),u.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700 transition-colors",children:""})]})]})]})})]})},bC=()=>{const[t,e]=$.useState("All"),[n,r]=$.useState([]),[s,i]=$.useState(!0);$.useEffect(()=>{const h=up(Jr(_t,"training_videos"),qA("createdAt","desc")),p=Ms(h,m=>{const g=m.docs.map(b=>({id:b.id,...b.data()}));r(g),i(!1)},m=>{console.error("Error fetching videos:",m),i(!1)});return()=>p()},[]);const o=h=>{var m,g,b;if(!h)return null;let p="";try{if(h.includes("youtube.com/watch?v="))p=(m=h.split("v=")[1])==null?void 0:m.split("&")[0];else if(h.includes("youtu.be/"))p=(g=h.split("youtu.be/")[1])==null?void 0:g.split("?")[0];else{if(h.includes("youtube.com/embed/"))return h;h.includes("m.youtube.com/watch?v=")&&(p=(b=h.split("v=")[1])==null?void 0:b.split("&")[0])}}catch{return null}return p?`https://www.youtube.com/embed/${p}`:null},l=["All",...new Set(n.map(h=>h.category).filter(Boolean))],c=t==="All"?n:n.filter(h=>h.category===t);return u.jsxs("div",{className:"bg-transparent md:bg-white md:rounded-lg md:shadow-md p-0 md:p-6",children:[u.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-4 md:mb-6 flex items-center px-4 md:px-0 pt-4 md:pt-0",children:[u.jsx("span",{className:"bg-purple-100 text-purple-600 p-2 rounded-lg mr-3",children:u.jsx(aC,{className:"w-5 h-5 md:w-6 md:h-6"})}),""]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 md:mb-6 scrollbar-hide px-4 md:px-0",children:l.map(h=>u.jsx("button",{onClick:()=>e(h),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${t===h?"bg-purple-600 text-white shadow-md":"bg-white md:bg-gray-100 text-gray-600 border border-gray-200 md:border-transparent hover:bg-gray-200"}`,children:h},h))}),s?u.jsxs("div",{className:"text-center py-12 text-gray-500 flex flex-col items-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mb-2"}),"..."]}):c.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 md:gap-6",children:c.map(h=>{const p=o(h.url);return u.jsxs("div",{className:"group bg-white border-t border-b md:border border-gray-100 md:rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 flex flex-col",children:[u.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:p?u.jsx("iframe",{src:p,title:h.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):u.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-800 text-white flex-col p-4 text-center",children:[u.jsx(xC,{className:"w-12 h-12 mb-3 text-gray-400"}),u.jsx("p",{className:"mb-3 font-medium text-sm",children:""}),u.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm flex items-center gap-2 transition-colors",children:[u.jsx(su,{className:"w-4 h-4"})," "]})]})}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("div",{className:"flex justify-between items-start mb-2",children:u.jsx("h3",{className:"font-bold text-gray-800 line-clamp-2 group-hover:text-purple-600 transition-colors text-lg leading-snug",children:h.title})}),u.jsx("div",{className:"flex items-center gap-2 mb-3",children:u.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-md font-medium",children:h.category||""})}),h.description&&u.jsx("p",{className:"text-sm text-gray-500 line-clamp-3 mb-4 flex-grow",children:h.description}),p&&u.jsx("div",{className:"pt-3 mt-auto border-t border-gray-50 flex justify-end",children:u.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-400 hover:text-purple-600 flex items-center gap-1",children:[u.jsx(su,{className:"w-3 h-3"})," "]})})]})]},h.id)})}):u.jsx("div",{className:"text-center py-16 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 mx-4 md:mx-0",children:u.jsx("p",{className:"text-gray-500 font-medium",children:""})})]})},IC=[{id:"leave",title:"",icon:u.jsx(_C,{className:"w-5 h-5 text-rose-500"}),color:"bg-rose-50 border-rose-100",content:u.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-rose-700",children:""}),"  ",u.jsx("strong",{className:"bg-rose-100 px-1 rounded",children:"D6 "})," "]}),u.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-xs",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"D6"}),"  ()"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"D5"}),"  13:30-16:30 "]}),u.jsxs("li",{children:[u.jsx("strong",{children:"TPN/"})," 16:30-17:30 "]})]})]})},{id:"handover",title:"",icon:u.jsx(mC,{className:"w-5 h-5 text-blue-500"}),color:"bg-blue-50 border-blue-100",content:u.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-blue-700",children:""})," "]}),u.jsxs("div",{className:"bg-white p-2 rounded border border-blue-100 text-xs",children:[u.jsx("p",{className:"font-bold mb-1",children:" / 5 "}),u.jsxs("p",{children:["DP1TP1  ",u.jsx("span",{className:"text-red-500 font-bold",children:"21:25 "})," "]})]})]})},{id:"meeting",title:"",icon:u.jsx(Xw,{className:"w-5 h-5 text-purple-500"}),color:"bg-purple-50 border-purple-100",content:u.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[u.jsxs("div",{className:"bg-white/50 rounded-lg p-2 border border-purple-100",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"text-[10px] font-bold bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:""}),u.jsx("span",{className:"text-[10px] text-slate-400",children:"* D5 08:30 "})]}),u.jsx("div",{className:"grid grid-cols-4 gap-1 text-center",children:["D1","D5","D6","D7","D8","D9","TP1","DP2","DP1","D","","TPN"].map(t=>u.jsx("span",{className:"text-xs font-medium text-slate-700 bg-white rounded border border-purple-50 py-1",children:t},t))})]}),u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"flex items-center gap-2 mb-1",children:u.jsx("span",{className:"text-[10px] font-bold bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full",children:" ()"})}),u.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:"D2, D3, D4, TD, ED, RD, TS1, SP, A, NN"})]})]})}],r0={D1:{title:"D1 ",color:"blue",timeline:[{time:" AM",task:" A  / ",desc:""},{time:" PM",task:" /  / ",desc:""}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:" AM",task:" /  / ",desc:"UD"},{time:"11:30",task:" M2",desc:" M2 "},{time:" PM",task:"",desc:"17W"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:" AM",task:" / M2 ",desc:""},{time:" PM",task:"M2  / ",desc:" (17W)"}]},D4:{title:"D4  ()",color:"sky",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:" / M2 ",desc:""},{time:"17:30",task:" A / ",desc:""}]},RD:{title:"RD  ()",color:"amber",timeline:[{time:" AM",task:"Check",desc:""},{time:"12:00",task:"",desc:""},{time:"13:30",task:"",desc:""}]},D5:{title:"D5 ",color:"teal",timeline:[{time:" AM",task:"M2  /  /  ED",desc:""},{time:" PM",task:" /  ED / 17W ",desc:""}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"Check",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:" AM",task:"M2  / ",desc:""},{time:" PM",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:" / ",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:" AM",task:" / A ",desc:" A "},{time:" PM",task:"",desc:""}]},TD:{title:"TD ",color:"slate",timeline:[{time:" AM",task:" / ",desc:""},{time:" PM",task:"",desc:""}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-16:30",task:"",desc:""}]},D:{title:"D ",color:"purple",timeline:[{time:" AM",task:"",desc:""},{time:" PM",task:"",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:" AM",task:"B  TPN / ",desc:" TPN  B "}]},PSY:{title:"PSY  ()",color:"violet",timeline:[{time:" AM",task:"B  / ",desc:""},{time:" PM",task:" / PSY ",desc:""}]},PRN:{title:"PRN ",color:"gray",timeline:[{time:"",task:" /  / ",desc:""}]}},s0={D1:{title:"D1 ",color:"blue",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"//",desc:"/()"}]},D2:{title:"D2 ",color:"indigo",timeline:[{time:"07:40-08:30",task:"//",desc:""},{time:"08:30-11:30",task:"UD//",desc:""},{time:"11:30-12:00",task:" M2",desc:" M2 "},{time:"12:30-15:00",task:"",desc:""},{time:"15:00-16:10",task:"17W//",desc:"17"}]},D3:{title:"D3 ",color:"cyan",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-11:30",task:"M2 ",desc:" M2 "},{time:"12:00-13:30",task:"M2 ",desc:" M2 "},{time:"13:30-16:30",task:"",desc:""}]},D4:{title:"D4 ",color:"sky",timeline:[{time:"09:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"M2 ",desc:"13:30-14:00  M2 "},{time:"17:30-18:00",task:" A / ",desc:" A "}]},D5:{title:"D5 ",color:"teal",timeline:[{time:"08:00-08:30",task:" A ",desc:""},{time:"08:30-12:00",task:"",desc:""},{time:"12:30-16:30",task:" A ",desc:" A "}]},D6:{title:"D6 ",color:"emerald",timeline:[{time:"08:30-12:30",task:" A / C",desc:" A  C "},{time:"13:30-17:30",task:"",desc:""}]},D7:{title:"D7 ",color:"green",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""}]},D8:{title:"D8 ",color:"lime",timeline:[{time:"08:00-08:30",task:"",desc:""},{time:"08:30-09:30",task:"M1 ",desc:" M1 "},{time:"09:30-11:30",task:"",desc:""},{time:"12:00-13:30",task:"",desc:""},{time:"13:30-16:30",task:"",desc:""}]},D9:{title:"D9 ",color:"amber",timeline:[{time:"08:00-08:30",task:" A ",desc:" A "},{time:"08:30-12:00",task:" A ",desc:" A "},{time:"12:30-13:30",task:"",desc:""},{time:"13:00-16:30",task:"()",desc:""}]},TP1:{title:"TP1 M2//",color:"rose",timeline:[{time:"08:00-08:30",task:"M2 ",desc:" M2 "},{time:"08:30-12:00",task:"",desc:""},{time:"13:30-17:30",task:"",desc:""},{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"W2-W5 ",desc:"16:30-17:30  D1 TP1  A "}]},DP2:{title:"DP2 //M2",color:"violet",timeline:[{time:"08:00-08:30",task:" B ",desc:" B "},{time:"08:30-12:00",task:"+",desc:""},{time:"13:30-16:30",task:"",desc:""},{time:"17:30-20:30",task:"M2 ",desc:" M2 "}]},SP:{title:"SP ",color:"fuchsia",timeline:[{time:"14:00-17:00",task:"/",desc:""},{time:"17:30-21:30",task:"",desc:""},{time:"21:30-",task:"/",desc:""}]},P1:{title:"P1 ",color:"slate",timeline:[{time:"18:30-21:30",task:"()",desc:""},{time:"",task:"",desc:"DP1D5P1D1P1"}]},ED:{title:"ED ",color:"orange",timeline:[{time:"08:00-11:30",task:"",desc:""},{time:"11:30-12:00",task:"",desc:""},{time:"12:00-16:30",task:"",desc:""}]},HD:{title:"HD ",color:"orange",timeline:[{time:"08:00-16:00",task:"",desc:""},{time:"",task:"07:45-08:00 / 16:00-16:15",desc:""}]},A:{title:"A ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:""},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},HA:{title:"HA ",color:"red",timeline:[{time:"16:00-24:00",task:"",desc:" A "},{time:"",task:"15:45-16:00 / 00:00-00:15",desc:""}]},NN:{title:"NN ",color:"slate",timeline:[{time:"00:00-08:00",task:"",desc:""},{time:"",task:"23:45-00:00 / 08:00-08:15",desc:""}]},DTPN:{title:"DTPN ",color:"rose",timeline:[{time:"08:30-12:30",task:"B TPN",desc:" B  TPN () "},{time:"",task:"A ",desc:" A "}]},D:{title:"D ",color:"purple",timeline:[{time:"08:00-12:00",task:"",desc:""},{time:"",task:" / A ",desc:" A "}]},RD:{title:"RD /",color:"orange",timeline:[{time:"08:30-12:00",task:"",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-14:00",task:" (17W)",desc:" 17 "},{time:"14:30-16:00",task:" ER",desc:""},{time:"16:00-16:30",task:"ER ",desc:""},{time:"16:30-17:30",task:"",desc:""}]},PSY:{title:"PSY ",color:"violet",timeline:[{time:"08:00-08:30",task:" D ",desc:" D "},{time:"08:30-12:00",task:"D ",desc:" D  () "},{time:"12:30-13:30",task:"",desc:""},{time:"13:30-16:00",task:"PSY ",desc:""},{time:"16:00-16:30",task:" A ",desc:" A "}]},TS1:{title:"TS1 ",color:"yellow",timeline:[{time:"08:30-12:30",task:"",desc:""},{time:"",task:"",desc:"(A)"}]},TD:{title:"TD ",color:"slate",timeline:[{time:"08:30-12:00",task:"/",desc:""},{time:"12:00-12:30",task:"",desc:""},{time:"13:30-17:30",task:"",desc:"()"}]}};function SC(){const[t,e]=$.useState(new Date),[n,r]=$.useState(null),[s,i]=$.useState(null),[o,l]=$.useState(null),[c,h]=$.useState(!1),[p,m]=$.useState(!1);$.useEffect(()=>{const x=setInterval(()=>e(new Date),6e4);return()=>clearInterval(x)},[]);const g=x=>{if(!x||!x.includes("-"))return!1;const[_,I]=x.split("-"),j=t,F=j.getHours()*60+j.getMinutes(),U=w=>{const[T,C]=w.split(":").map(Number);return T*60+C},E=U(_);let y=U(I);return y<E&&(y+=24*60),F>=E&&F<y},b=s?s0[s]:null,A=o?r0[o]:null,k=x=>{i(_=>_===x?null:x)},N=x=>{l(_=>_===x?null:x)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[u.jsxs("button",{onClick:()=>h(!c),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-600",children:u.jsx(rC,{className:"w-5 h-5"})}),u.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),c?u.jsx(fl,{className:"w-5 h-5 text-slate-400"}):u.jsx(zo,{className:"w-5 h-5 text-slate-400"})]}),c&&u.jsx("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:u.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(s0).map(x=>u.jsx("button",{onClick:()=>k(x),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${s===x?"bg-white border-indigo-200 text-indigo-600 shadow-sm scale-105 ring-2 ring-indigo-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:x},x))})})]}),b&&u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:u.jsx(qw,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Shift Duty"}),u.jsx("h4",{className:"font-bold text-slate-800",children:b.title})]})]}),u.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:b.timeline.map((x,_)=>{const I=g(x.time);return u.jsxs("div",{className:`relative transition-all duration-500 ${I?"scale-105 origin-left":""}`,children:[u.jsx("div",{className:`absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm transition-all duration-300 ${I?"ring-4 ring-red-100 scale-110":""}`,style:{backgroundColor:I?"#ef4444":`var(--color-${b.color}-500, #3b82f6)`},children:I&&u.jsx("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-75"})}),u.jsxs("div",{className:`rounded-xl p-3 border transition-all duration-300 ${I?"bg-red-50/50 border-red-100 shadow-sm":"border-transparent"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsxs("span",{className:`text-[10px] font-black px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${I?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:[I&&u.jsx(Hw,{className:"w-3 h-3"}),x.time]}),u.jsx("h5",{className:`text-sm font-bold transition-colors ${I?"text-red-900":"text-slate-700"}`,children:x.task})]}),u.jsx("p",{className:`text-xs leading-relaxed pl-1 transition-colors ${I?"text-slate-700 font-medium":"text-slate-500"}`,children:x.desc})]})]},_)})})]}),u.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[u.jsxs("button",{onClick:()=>m(!p),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-600",children:u.jsx(Zy,{className:"w-5 h-5"})}),u.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:""})]}),p?u.jsx(fl,{className:"w-5 h-5 text-slate-400"}):u.jsx(zo,{className:"w-5 h-5 text-slate-400"})]}),p&&u.jsxs("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 animate-in slide-in-from-top-2 duration-200",children:[u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.keys(r0).map(x=>u.jsx("button",{onClick:()=>N(x),className:`px-3 py-2 rounded-xl text-[11px] font-black transition-all border ${o===x?"bg-white border-amber-200 text-amber-600 shadow-sm scale-105 ring-2 ring-amber-50":"bg-white border-transparent text-slate-500 hover:border-slate-200 hover:bg-white"}`,children:x},x))}),A&&u.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-amber-50 text-amber-600",children:u.jsx(Zy,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Holiday Shift"}),u.jsx("h4",{className:"font-bold text-slate-800",children:A.title})]})]}),u.jsx("div",{className:"relative pl-6 border-l-2 border-slate-100 space-y-8",children:A.timeline.map((x,_)=>u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute -left-[31px] top-0 w-4 h-4 rounded-full border-4 border-white shadow-sm",style:{backgroundColor:`var(--color-${A.color}-500, #f59e0b)`}}),u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-[10px] font-black text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded",children:x.time}),u.jsx("h5",{className:"text-sm font-bold text-slate-700",children:x.task})]}),u.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-1",children:x.desc})]},_))})]})]})]}),u.jsxs("div",{className:"border-t border-slate-100 pt-6 space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[u.jsx(ru,{className:"w-5 h-5 text-slate-400"}),""]})}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:IC.map(x=>{const _=n===x.id;return u.jsxs("div",{className:`rounded-2xl border transition-all duration-300 overflow-hidden ${_?`bg-white shadow-md ${x.color}`:"bg-white border-slate-100"}`,children:[u.jsxs("button",{onClick:()=>r(_?null:x.id),className:"w-full flex items-center justify-between p-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-xl shadow-sm transition-colors ${_?"bg-white":"bg-slate-50"}`,children:x.icon}),u.jsx("h4",{className:`font-bold text-sm ${_?"text-slate-800":"text-slate-600"}`,children:x.title})]}),_?u.jsx(sC,{className:"w-4 h-4 text-slate-400"}):u.jsx(fl,{className:"w-4 h-4 text-slate-300"})]}),_&&u.jsx("div",{className:"px-4 pb-4 animate-in slide-in-from-top-1",children:u.jsx("div",{className:"pt-2 border-t border-slate-100/50",children:x.content})})]},x.id)})})]})]})}const qa={form_title:" ",version:"1140906",sections:[{id:"section_background",title:"",description:"",fields:[{id:"edu_university",label:"",type:"text",required:!0},{id:"edu_system",label:"",type:"radio",options:["4","5","6"],required:!0},{id:"edu_uni_grad_year",label:"- ()",type:"number",placeholder:": 110",width:"50%",required:!0},{id:"edu_uni_grad_month",label:"-",type:"number",placeholder:"1~12",width:"50%",required:!0},{id:"edu_grad_school",label:"",type:"text",required:!1},{id:"edu_grad_degree",label:"",type:"radio",options:["","",""],required:!1},{id:"edu_grad_year",label:"- ()",type:"number",placeholder:": 112",width:"50%",required:!1},{id:"edu_grad_month",label:"-",type:"number",placeholder:"1~12",width:"50%",required:!1},{id:"lang_english",label:" ()",type:"radio",options:["","","",""],has_other_text:!0,required:!0}]},{id:"section_work_experience",title:"",description:" ()",is_dynamic_list:!0,add_button_text:"",fields:[{id:"work_org",label:"/",type:"text",col_span:4},{id:"start_year",label:"-",type:"number",placeholder:"110",col_span:2},{id:"start_month",label:"-",type:"number",placeholder:"1",col_span:2},{id:"end_year",label:"-",type:"number",placeholder:"112",col_span:2},{id:"end_month",label:"-",type:"number",placeholder:"12",col_span:2}]},{id:"section_learning_history",title:"",description:" ()",fields:[{id:"history_outpatient",label:"1. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","","","","",""],has_other_text:!0}]},{id:"history_inpatient",label:"2. UD",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","","","","",""],has_other_text:!0}]},{id:"history_consult",label:"3. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","EBM","",""],has_other_text:!0}]},{id:"history_management",label:"4. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","","",""],has_other_text:!0}]},{id:"history_special",label:"5. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","TPN",""],has_other_text:!0}]},{id:"history_clinical",label:"6. ",type:"group",sub_fields:[{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""},{id:"skills",label:"",type:"checkbox",options:["","","ADR","",""],has_other_text:!0}]},{id:"history_other",label:"",type:"group",sub_fields:[{id:"content",label:"",type:"text"},{id:"year",label:" ()",type:"number",placeholder:""},{id:"month",label:" ()",type:"number",placeholder:""}]}]},{id:"section_assessment",title:"",description:" ()",access_control:"teacher_admin",sub_sections:[{title:"A. ",fields:[{id:"assess_interview",label:"",type:"score_radio",options:["","",""]},{id:"assess_written_test",label:"",type:"score_radio",options:["","",""]},{id:"assess_ksa",label:"KSA",type:"score_radio",options:["","",""]}]},{title:"B. ",layout:"table",columns:["","",""],rows:[{id:"plan_dispensing",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"7",value:6},{label:"",input_type:"number"}]}},{id:"plan_clinical",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"2",value:6},{label:"",input_type:"number"}]}},{id:"plan_consult",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"2",value:3},{label:"",input_type:"number"}]}},{id:"plan_manage",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"1",value:1},{label:"",input_type:"number"}]}},{id:"plan_tcm",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:1},{label:"",input_type:"number"}]}},{id:"plan_care",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:3},{label:"",input_type:"number"}]}},{id:"plan_special",unit:"",assessment:{type:"radio",options:["","",""]},planning:{type:"radio_with_input",options:[{label:"4",value:3},{label:"",input_type:"number"}]}}]}]}]},kC=({studentEmail:t,studentName:e,userRole:n,currentUserEmail:r,currentUserName:s,gasApiUrl:i})=>{const[o,l]=$.useState("menu"),[c,h]=$.useState({}),[p,m]=$.useState("draft"),[g,b]=$.useState(!1),[A,k]=$.useState(!1),[N,x]=$.useState(null),[_,I]=$.useState({teacherName:"",teacherDate:"",adminName:"",adminDate:""}),j=n==="admin",F=n==="teacher",U=n==="student",E=p==="approved"||p==="assessed"&&!j||p==="submitted"&&U;$.useEffect(()=>{t&&y()},[o,t]),$.useEffect(()=>{const V=new Date().toISOString().split("T")[0];F&&p==="submitted"&&!_.teacherName&&I(G=>({...G,teacherName:s||"",teacherDate:V})),j&&p==="assessed"&&!_.adminName&&I(G=>({...G,adminName:s||"",adminDate:V}))},[n,F,j,p,s]);const y=async()=>{b(!0);try{const G=await(await fetch(`${i}?type=getAssessment&studentEmail=${t}&formType=pre_training`)).json(),J=G.formData||{};h(J),m(G.status||"draft"),x(G.updatedAt?new Date(G.updatedAt):null),I({teacherName:J.sign_teacher_name||"",teacherDate:J.sign_teacher_date||"",adminName:J.sign_admin_name||"",adminDate:J.sign_admin_date||""})}catch(V){console.error("",V)}b(!1)},w=async V=>{k(!0);const G=V||p,J=new Date().toISOString().split("T")[0];let O={...c};if(V==="submitted"&&(O.sign_student_date=J),V==="assessed"){if(!_.teacherDate){alert(""),k(!1);return}O.sign_teacher_name=s,O.sign_teacher_date=_.teacherDate}if(V==="approved"){if(!_.adminDate){alert(""),k(!1);return}O.sign_admin_name=s,O.sign_admin_date=_.adminDate}const Y={type:"saveAssessment",formType:"pre_training",studentEmail:t,studentName:e,formData:O,status:G,updatedBy:r};try{await fetch(i,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(Y)}),m(G),h(O),x(new Date);let z="";V==="submitted"&&(z=""),V==="assessed"&&(z=""),V==="approved"&&(z=""),alert(z),(V==="approved"||V==="submitted"||V==="assessed")&&l("menu")}catch(z){console.error("",z),alert("")}k(!1)},T=(V,G,J)=>{E||h(O=>({...O,[V]:{...O[V],[G]:J}}))},C=(V,G,J,O)=>{var Z;if(E)return;const z=[...((Z=c[V])==null?void 0:Z.list)||[]];z[G]||(z[G]={}),z[G][J]=O,h(re=>({...re,[V]:{...re[V],list:z}}))},P=V=>{var J;if(E)return;const G=((J=c[V])==null?void 0:J.list)||[];h(O=>({...O,[V]:{...O[V],list:[...G,{}]}}))},S=(V,G)=>{var Y;if(E)return;const O=(((Y=c[V])==null?void 0:Y.list)||[]).filter((z,Z)=>Z!==G);h(z=>({...z,[V]:{...z[V],list:O}}))},q=(V,G,J,O,Y)=>{var re,fe;const z=E||Y,Z=V.width?{width:V.width}:{width:"100%"};switch(V.type){case"text":case"number":return u.jsx("input",{type:V.type,style:Z,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",value:J||"",onChange:le=>O(V.id,le.target.value),disabled:z,placeholder:V.placeholder});case"textarea":return u.jsx("textarea",{style:Z,className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",rows:3,value:J||"",onChange:le=>O(V.id,le.target.value),disabled:z});case"radio":return u.jsxs("div",{className:"flex flex-wrap gap-4",children:[V.options.map(le=>u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:`${G}_${V.id}`,value:le,checked:J===le,onChange:Oe=>O(V.id,Oe.target.value),disabled:z,className:"w-4 h-4 text-indigo-600"}),u.jsx("span",{className:"text-gray-700",children:le})]},le)),V.has_other_text&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:`${G}_${V.id}`,value:"",checked:J==="",onChange:le=>O(V.id,""),disabled:z}),u.jsx("span",{className:"text-gray-700",children:":"}),u.jsx("input",{type:"text",className:"border-b border-gray-300 focus:border-indigo-500 outline-none px-1 disabled:bg-transparent",disabled:z||J!=="",value:((re=c[G])==null?void 0:re[`${V.id}_other`])||"",onChange:le=>O(`${V.id}_other`,le.target.value)})]})]});case"score_radio":return u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-sm font-bold text-gray-600",children:":"}),u.jsx("input",{type:"number",placeholder:"0-100",className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100 text-center",value:((fe=c[G])==null?void 0:fe[`${V.id}_score`])||"",onChange:le=>O(`${V.id}_score`,le.target.value),disabled:z})]}),u.jsx("div",{className:"flex flex-wrap gap-4",children:V.options.map(le=>u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:`${G}_${V.id}`,value:le,checked:J===le,onChange:Oe=>O(V.id,Oe.target.value),disabled:z,className:"w-4 h-4 text-indigo-600"}),u.jsx("span",{className:"text-gray-700",children:le})]},le))})]});case"checkbox":const Be=Array.isArray(J)?J:[];return u.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:V.options.map(le=>u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",value:le,checked:Be.includes(le),disabled:z,onChange:Oe=>{const W=Oe.target.checked?[...Be,le]:Be.filter(se=>se!==le);O(V.id,W)},className:"w-4 h-4 text-indigo-600 rounded"}),u.jsx("span",{className:"text-gray-700",children:le})]},le))});default:return null}};if(o==="menu"){const V=["submitted","assessed","approved"].includes(p),G=["assessed","approved"].includes(p),J=p==="approved";return u.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in",children:[u.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-4 flex items-center gap-2",children:[u.jsx(Ww,{className:"w-5 h-5 text-indigo-600"}),""]}),u.jsxs("div",{onClick:()=>l("form"),className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md hover:border-indigo-300 transition-all cursor-pointer overflow-hidden group",children:[u.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 group-hover:bg-indigo-50 transition-colors",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-indigo-600",children:""}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["",qa.version]})]}),u.jsx(zo,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600"})]}),u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${V?"bg-green-500":"bg-gray-300"}`}),u.jsx("span",{children:""}),c.sign_student_date&&u.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:c.sign_student_date})]}),u.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${V?"bg-green-100 text-green-700":p==="draft"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-400"}`,children:V?"":""})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-gray-50 pt-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${G?"bg-green-500":"bg-gray-300"}`}),u.jsx("span",{children:""}),c.sign_teacher_name&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"font-bold text-xs",children:["[",c.sign_teacher_name,"]"]}),u.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:c.sign_teacher_date})]})]}),u.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${G?"bg-green-100 text-green-700":V&&!G?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-400"}`,children:G?"":V?"":"--"})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-gray-50 pt-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${J?"bg-green-500":"bg-gray-300"}`}),u.jsx("span",{children:""}),c.sign_admin_name&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"font-bold text-xs",children:["[",c.sign_admin_name,"]"]}),u.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600",children:c.sign_admin_date})]})]}),u.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${J?"bg-green-100 text-green-700":G&&!J?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-400"}`,children:J?"":G?"":"--"})]})]})]})]})}return g?u.jsxs("div",{className:"p-8 text-center text-gray-500 flex justify-center",children:[u.jsx($o,{className:"animate-spin mr-2"})," ..."]}):u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-12 animate-in slide-in-from-right-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsxs("button",{onClick:()=>l("menu"),className:"flex items-center gap-1 text-gray-500 hover:text-indigo-600 font-bold text-sm bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[u.jsx(nC,{className:"w-4 h-4"})," "]}),u.jsx("span",{className:"text-gray-300",children:"|"}),u.jsxs("span",{className:"text-gray-700 font-medium",children:[e," "]})]}),u.jsxs("div",{className:`p-4 rounded-lg flex justify-between items-center ${p==="approved"?"bg-green-50 border border-green-200 text-green-800":p==="assessed"?"bg-purple-50 border border-purple-200 text-purple-800":p==="submitted"?"bg-blue-50 border border-blue-200 text-blue-800":"bg-gray-50 border border-gray-200 text-gray-700"}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[p==="approved"?u.jsx(t0,{className:"w-5 h-5"}):u.jsx(cC,{className:"w-5 h-5"}),u.jsxs("span",{className:"font-bold",children:["",p==="draft"&&" ()",p==="submitted"&&" ()",p==="assessed"&&" ()",p==="approved"&&" ()"]})]}),N&&u.jsxs("span",{className:"text-xs opacity-70",children:["",N.toLocaleString()]})]}),u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[u.jsxs("div",{className:"bg-indigo-600 px-6 py-4",children:[u.jsx("h2",{className:"text-xl font-bold text-white",children:qa.form_title}),u.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["",qa.version]})]}),u.jsx("div",{className:"p-6 md:p-8 space-y-10",children:qa.sections.map(V=>{var J;const G=V.access_control==="teacher_admin"&&U;return u.jsxs("div",{className:"border-b border-gray-100 pb-8 last:border-0 last:pb-0",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:V.title}),V.description&&u.jsx("p",{className:"text-sm text-gray-500 mb-6",children:V.description}),G&&u.jsxs("div",{className:"bg-gray-100 text-gray-500 p-3 rounded mb-4 text-sm flex items-center gap-2",children:[u.jsx(t0,{className:"w-4 h-4"})," "]}),V.fields&&!V.is_dynamic_list&&u.jsx("div",{className:"grid grid-cols-1 gap-6",children:V.fields.map(O=>{var Y;return O.type==="group"?u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsx("label",{className:"font-bold text-gray-700 block mb-3",children:O.label}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.sub_fields.map(z=>{var Z;return u.jsxs("div",{className:z.type==="checkbox"?"md:col-span-2":"",children:[u.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:z.label}),q(z,V.id,(Z=c[V.id])==null?void 0:Z[`${O.id}_${z.id}`],(re,fe)=>T(V.id,`${O.id}_${re}`,fe),G)]},z.id)})})]},O.id):u.jsxs("div",{style:{display:O.width?"inline-block":"block",width:O.width?O.width:"100%",paddingRight:"1rem"},children:[u.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[O.label," ",O.required&&u.jsx("span",{className:"text-red-500",children:"*"})]}),q(O,V.id,(Y=c[V.id])==null?void 0:Y[O.id],(z,Z)=>T(V.id,z,Z),G)]},O.id)})}),V.is_dynamic_list&&u.jsxs("div",{className:"space-y-4",children:[(((J=c[V.id])==null?void 0:J.list)||[]).map((O,Y)=>u.jsxs("div",{className:"relative p-4 border border-gray-200 rounded-lg bg-gray-50 grid grid-cols-1 md:grid-cols-12 gap-4",children:[V.fields.map(z=>u.jsxs("div",{className:`md:col-span-${z.col_span||12} col-span-12`,children:[u.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:z.label}),q(z,V.id,O[z.id],(Z,re)=>C(V.id,Y,Z,re),G)]},z.id)),!E&&!G&&u.jsx("button",{onClick:()=>S(V.id,Y),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500",children:u.jsx(yC,{className:"w-4 h-4"})})]},Y)),!E&&!G&&u.jsxs("button",{onClick:()=>P(V.id),className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-500 hover:text-indigo-600 font-bold flex items-center justify-center gap-2 transition-colors",children:[u.jsx(Kw,{className:"w-5 h-5"})," ",V.add_button_text]})]}),V.sub_sections&&u.jsx("div",{className:"space-y-8",children:V.sub_sections.map((O,Y)=>u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[u.jsx("h4",{className:"font-bold text-indigo-700 mb-4 pb-2 border-b border-gray-100",children:O.title}),O.fields&&u.jsx("div",{className:"space-y-4",children:O.fields.map(z=>{var Z;return u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[u.jsxs("label",{className:"text-sm font-bold text-gray-700 min-w-[80px]",children:[z.label,":"]}),u.jsx("div",{className:"flex-1",children:q(z,V.id,(Z=c[V.id])==null?void 0:Z[z.id],(re,fe)=>T(V.id,re,fe),G)})]},z.id)})}),O.layout==="table"&&u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{className:"bg-gray-50 text-gray-700 font-bold border-b border-gray-200",children:u.jsx("tr",{children:O.columns.map(z=>u.jsx("th",{className:"p-3",children:z},z))})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:O.rows.map(z=>u.jsxs("tr",{children:[u.jsx("td",{className:"p-3 font-medium text-gray-800",children:z.unit}),u.jsx("td",{className:"p-3",children:u.jsx("div",{className:"flex flex-wrap gap-2",children:z.assessment.options.map(Z=>{var re;return u.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[u.jsx("input",{type:"radio",name:`${z.id}_assess`,value:Z,checked:((re=c[V.id])==null?void 0:re[`${z.id}_assess`])===Z,onChange:fe=>T(V.id,`${z.id}_assess`,fe.target.value),disabled:E||G,className:"text-indigo-600"}),u.jsx("span",{children:Z})]},Z)})})}),u.jsx("td",{className:"p-3",children:u.jsx("div",{className:"flex flex-col gap-2",children:z.planning.options.map((Z,re)=>{var fe,Be,le;return u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:`${z.id}_plan`,value:Z.label,checked:((fe=c[V.id])==null?void 0:fe[`${z.id}_plan`])===Z.label,onChange:Oe=>T(V.id,`${z.id}_plan`,Oe.target.value),disabled:E||G,className:"text-indigo-600"}),u.jsx("span",{children:Z.label}),Z.input_type==="number"&&u.jsx("input",{type:"number",className:"w-16 border-b border-gray-300 text-center focus:border-indigo-500 outline-none p-0 disabled:bg-transparent",disabled:E||G||((Be=c[V.id])==null?void 0:Be[`${z.id}_plan`])!==Z.label,value:((le=c[V.id])==null?void 0:le[`${z.id}_plan_custom`])||"",onChange:Oe=>T(V.id,`${z.id}_plan_custom`,Oe.target.value)})]},re)})})})]},z.id))})]})})]},Y))})]},V.id)})}),u.jsxs("div",{className:"bg-gray-50 border-t border-gray-200",children:[p==="submitted"&&(F||j)&&u.jsxs("div",{className:"px-6 py-4 bg-blue-50 border-b border-blue-100",children:[u.jsxs("h4",{className:"font-bold text-blue-800 mb-3 flex items-center gap-2",children:[u.jsx(Cr,{className:"w-4 h-4"})," "]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1",children:""}),u.jsx("input",{type:"text",value:_.teacherName,disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100 cursor-not-allowed"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1",children:""}),u.jsx("input",{type:"date",value:_.teacherDate,onChange:V=>I({..._,teacherDate:V.target.value}),className:"w-full px-3 py-2 border rounded-md"})]})]})]}),p==="assessed"&&j&&u.jsxs("div",{className:"px-6 py-4 bg-purple-50 border-b border-purple-100",children:[u.jsxs("h4",{className:"font-bold text-purple-800 mb-3 flex items-center gap-2",children:[u.jsx(pp,{className:"w-4 h-4"})," "]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs font-bold text-purple-600 mb-1",children:""}),u.jsx("input",{type:"text",value:_.adminName,disabled:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100 cursor-not-allowed"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs font-bold text-purple-600 mb-1",children:""}),u.jsx("input",{type:"date",value:_.adminDate,onChange:V=>I({..._,adminDate:V.target.value}),className:"w-full px-3 py-2 border rounded-md"})]})]})]}),u.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3",children:[!E&&u.jsxs("button",{onClick:()=>w(p),disabled:A,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium flex items-center gap-2",children:[A?u.jsx($o,{className:"w-4 h-4 animate-spin"}):u.jsx(Ku,{className:"w-4 h-4"})," "]}),p==="draft"&&U&&u.jsxs("button",{onClick:()=>{window.confirm("")&&w("submitted")},disabled:A,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium flex items-center gap-2",children:[u.jsx(Ba,{className:"w-4 h-4"})," "]}),p==="submitted"&&(F||j)&&u.jsxs("button",{onClick:()=>{window.confirm("")&&w("assessed")},disabled:A,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2",children:[u.jsx(Ba,{className:"w-4 h-4"})," "]}),p==="assessed"&&j&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>w("submitted"),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium",children:""}),u.jsxs("button",{onClick:()=>{window.confirm("")&&w("approved")},disabled:A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium flex items-center gap-2",children:[u.jsx(Ba,{className:"w-4 h-4"})," "]})]}),p==="approved"&&u.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-2",children:[u.jsx(Ba,{className:"w-5 h-5"})," "]})]})]})]})]})},Yw=[{value:"2a",label:"Level 2a: "},{value:"2b",label:"Level 2b: "},{value:"3a",label:"Level 3a: "},{value:"3b",label:"Level 3b: "},{value:"3c",label:"Level 3c: "},{value:"4",label:"Level 4: "},{value:"5",label:"Level 5: "}],yh=[{value:"unobserved",label:""},{value:"below_expectation",label:""},{value:"meet_expectation",label:""},{value:"exceed_expectation",label:""}],NC=[{id:"EPA_01",title:"EPA 1. ",description:"",check_items:["","","",""]},{id:"EPA_02",title:"EPA 2. ",description:"",check_items:["","","",""]},{id:"EPA_03",title:"EPA 3. ",description:"",check_items:["","","",""]},{id:"EPA_04",title:"EPA 4. ",description:"",check_items:["","","",""]},{id:"EPA_05",title:"EPA 5. ",description:"",check_items:["","","","",""]},{id:"EPA_06",title:"EPA 6. (TDM)",description:"(TDM)",check_items:["","","",""]},{id:"EPA_07",title:"EPA 7. ",description:"",check_items:["","","",""]},{id:"EPA_08",title:"EPA 8. ",description:"",check_items:["","","","",""]}],AC=({epa:t,studentName:e,teacherName:n,onClose:r,onSubmit:s,isSubmitting:i})=>{const[o,l]=$.useState(new Date().toISOString().split("T")[0]),[c,h]=$.useState(""),[p,m]=$.useState({}),[g,b]=$.useState(""),A=(N,x)=>{m(_=>({..._,[N]:x}))},k=()=>{if(!c)return alert("");if(!t.check_items.every(_=>p[_]))return alert("");const x={epa_id:t.id,epa_title:t.title,date:o,level:c,checklist:p,feedback_content:g,teacher_name:n||"Unknown Teacher"};s(x)};return u.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4 animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"px-6 py-4 border-b bg-gray-50 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[u.jsx("span",{className:"bg-indigo-600 text-white text-xs px-2 py-1 rounded",children:""}),t.title]}),u.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Cr,{className:"w-4 h-4"})," ",e]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Cr,{className:"w-4 h-4"})," ",n]})]})]}),u.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:u.jsx(ci,{className:"w-6 h-6 text-gray-500"})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[u.jsx("section",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[u.jsx(fp,{className:"w-4 h-4 text-indigo-600"})," ()"]}),u.jsx("input",{type:"date",value:o,onChange:N=>l(N.target.value),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none font-medium text-gray-700"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),u.jsx("p",{className:"text-sm text-gray-600 bg-white p-3 rounded-lg border border-blue-200",children:t.description})]})]})}),u.jsxs("section",{children:[u.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:Yw.map(N=>u.jsxs("label",{className:`relative flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all ${c===N.value?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[u.jsx("input",{type:"radio",name:"trust_level",value:N.value,checked:c===N.value,onChange:()=>h(N.value),className:"w-5 h-5 text-indigo-600 border-gray-300 focus:ring-indigo-500"}),u.jsx("span",{className:"ml-3 font-medium text-gray-800",children:N.label.split(":")[0]}),u.jsxs("span",{className:"ml-2 text-gray-600 text-sm",children:[" - ",N.label.split(":")[1]]})]},N.value))})]}),u.jsxs("section",{children:[u.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),u.jsx("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{className:"bg-gray-100 text-gray-700 font-bold border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-4 w-1/3",children:""}),yh.map(N=>u.jsx("th",{className:"p-4 text-center text-xs w-[16%]",children:N.label},N.value))]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:t.check_items.map((N,x)=>u.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[u.jsx("td",{className:"p-4 font-medium text-gray-800",children:N}),yh.map(_=>u.jsx("td",{className:"p-4 text-center",children:u.jsx("input",{type:"radio",name:`check_${x}`,checked:p[N]===_.value,onChange:()=>A(N,_.value),className:"w-4 h-4 text-indigo-600 cursor-pointer"})},_.value))]},x))})]})})]}),u.jsxs("section",{children:[u.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[u.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),""]}),u.jsx("textarea",{className:"w-full h-32 p-4 border rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none resize-none text-gray-700 bg-gray-50",placeholder:"...",value:g,onChange:N=>b(N.target.value)})]})]}),u.jsxs("div",{className:"p-4 border-t bg-white flex justify-end gap-3 flex-shrink-0",children:[u.jsx("button",{onClick:r,className:"px-6 py-2.5 rounded-lg border text-gray-600 font-bold hover:bg-gray-50 transition-colors",children:""}),u.jsx("button",{onClick:k,disabled:i,className:"px-8 py-2.5 rounded-lg bg-indigo-600 text-white font-bold hover:bg-indigo-700 shadow-lg disabled:opacity-50 flex items-center gap-2",children:i?"...":u.jsxs(u.Fragment,{children:[u.jsx(Ku,{className:"w-5 h-5"})," "]})})]})]})})},CC=({studentEmail:t,studentName:e,isTeacher:n,userProfile:r,apiUrl:s})=>{const[i,o]=$.useState(null),[l,c]=$.useState(!1),[h,p]=$.useState(!1),[m,g]=$.useState([]),[b,A]=$.useState(!1),[k,N]=$.useState(!1),x=async()=>{if(t){A(!0);try{const F=await(await fetch(`${s}?action=get_epa_records&student_email=${t}`)).json();Array.isArray(F)?g(F):g([])}catch(j){console.error("Failed to fetch EPA records:",j),g([])}finally{A(!1)}}};$.useEffect(()=>{x()},[t]);const _=async j=>{N(!0);try{await fetch(s,{method:"POST",body:JSON.stringify({action:"save_epa_record",student_email:t,...j})}),alert(""),p(!1),c(!0),x()}catch{alert("")}finally{N(!1)}},I=async(j,F)=>{N(!0);try{const E=await(await fetch(s,{method:"POST",body:JSON.stringify({action:"save_trainee_feedback",record_id:j,reflection:F.reflection,satisfaction:F.satisfaction})})).json();if(E.status==="success")alert(""),c(!1),x();else throw new Error(E.message||"")}catch(U){console.error(U),alert("")}finally{N(!1)}};return u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[u.jsxs("div",{className:"flex justify-between items-center border-b pb-4",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[u.jsx(ar,{className:"w-6 h-6 text-indigo-600"}),"EPA "]}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["",u.jsx("span",{className:"font-medium text-gray-700",children:e||""})]})]}),b&&u.jsxs("span",{className:"text-indigo-600 flex items-center gap-2 text-sm",children:[u.jsx($o,{className:"w-4 h-4 animate-spin"})," ..."]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:NC.map(j=>{const F=Array.isArray(m)?m.filter(y=>y.epa_id===j.id):[],U=F.length>0?F[0]:null;F.length;const E=U&&!U.evaluation.satisfaction_score&&!n;return u.jsxs("div",{onClick:()=>{o(j),c(!0)},className:"bg-white border rounded-xl p-5 hover:shadow-lg transition-all cursor-pointer group relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold rounded",children:j.id}),E&&u.jsx("span",{className:"animate-pulse bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded-full border border-red-200",children:" "})]}),u.jsx("h3",{className:"font-bold text-gray-800 mb-2 group-hover:text-indigo-600",children:j.title.replace(`${j.id}. `,"")}),u.jsxs("div",{className:"pt-3 border-t flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs text-gray-400",children:""}),u.jsx("span",{className:`text-sm font-bold ${U?"text-green-600":"text-gray-300"}`,children:U?U.evaluation.level:""})]}),u.jsx(zo,{className:"w-5 h-5 text-gray-300 group-hover:text-indigo-500 transition-all"})]})]},j.id)})}),l&&i&&u.jsx(PC,{epa:i,records:Array.isArray(m)?m.filter(j=>j.epa_id===i.id):[],onClose:()=>c(!1),onOpenForm:()=>{c(!1),p(!0)},onSaveFeedback:I,isTeacher:n,studentName:e}),h&&i&&u.jsx(AC,{epa:i,studentName:e,teacherName:(r==null?void 0:r.displayName)||"Teacher",onClose:()=>p(!1),onSubmit:_,isSubmitting:k})]})},PC=({epa:t,records:e,onClose:n,onOpenForm:r,onSaveFeedback:s,isTeacher:i,studentName:o})=>{var k;const[l,c]=$.useState(null),[h,p]=$.useState(""),[m,g]=$.useState(0);$.useEffect(()=>{e.length>0&&c(e[0].record_id)},[e]);const b=e.find(N=>N.record_id===l),A=N=>{const x=yh.find(_=>_.value===N);return x?x.label:""};return u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[u.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-gray-50",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:t.title}),u.jsxs("p",{className:"text-sm text-gray-500",children:["",o]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[i&&u.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm font-medium",children:[u.jsx(Kw,{className:"w-4 h-4"})," "]}),u.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-200 rounded-full text-gray-500",children:""})]})]}),u.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[u.jsxs("div",{className:"w-1/3 border-r bg-gray-50 overflow-y-auto p-4",children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-3",children:[" (",e.length,")"]}),u.jsx("div",{className:"space-y-3",children:e.length===0?u.jsx("div",{className:"text-center py-10 text-gray-400 text-sm",children:""}):e.map(N=>u.jsxs("button",{onClick:()=>c(N.record_id),className:`w-full text-left p-3 rounded-lg border transition-all ${l===N.record_id?"bg-white border-indigo-500 ring-1 ring-indigo-500":"bg-white border-gray-200 hover:border-indigo-300"}`,children:[u.jsxs("div",{className:"flex justify-between font-bold text-gray-800 text-sm",children:[N.evaluation.date,u.jsxs("span",{className:"text-indigo-600",children:["Level ",N.evaluation.level]})]}),u.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[u.jsx(Cr,{className:"w-3 h-3"})," ",N.teacher_name]})]},N.record_id))})]}),u.jsx("div",{className:"w-2/3 overflow-y-auto p-8 bg-white",children:b?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),u.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-100",children:[u.jsxs("span",{className:"text-2xl font-bold text-indigo-700",children:["Level ",b.evaluation.level]}),u.jsx("p",{className:"text-sm text-indigo-600 mt-1",children:(k=Yw.find(N=>N.value===b.evaluation.level))==null?void 0:k.label})]})]}),u.jsxs("section",{children:[u.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),u.jsx("div",{className:"space-y-2 border rounded-lg overflow-hidden",children:Object.entries(b.evaluation.checklist).map(([N,x],_)=>u.jsxs("div",{className:"flex items-center justify-between text-sm p-3 bg-white border-b last:border-0 hover:bg-gray-50",children:[u.jsx("span",{className:"text-gray-700 font-medium",children:N}),u.jsxs("div",{className:"flex items-center gap-2",children:[x==="meet_expectation"||x==="exceed_expectation"?u.jsx(pp,{className:"w-4 h-4 text-green-500"}):u.jsx(ru,{className:"w-4 h-4 text-orange-500"}),u.jsx("span",{className:`text-xs ${x.includes("meet")?"text-green-700":"text-gray-500"}`,children:A(x)})]})]},_))})]}),u.jsxs("section",{children:[u.jsx("h4",{className:"text-sm font-bold text-gray-900 border-l-4 border-indigo-500 pl-3 mb-4",children:""}),u.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded border whitespace-pre-line",children:b.evaluation.feedback_content||""})]}),u.jsxs("section",{className:"pt-6 border-t mt-6",children:[u.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-4 flex items-center justify-between",children:u.jsx("span",{children:""})}),b.feedback_satisfaction>0?u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 space-y-2",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("span",{className:"text-green-700 font-bold",children:["",b.feedback_satisfaction," / 9"]})}),u.jsxs("div",{className:"text-sm text-gray-700",children:[u.jsx("span",{className:"font-bold block mb-1",children:""}),b.feedback_reflection||""]})]}):i?u.jsx("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-300 text-gray-400 text-sm italic",children:""}):u.jsxs("div",{className:"bg-orange-50 p-5 rounded-xl border border-orange-100 space-y-4",children:[u.jsx("h5",{className:"text-sm font-bold text-orange-800",children:" "}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:" (1-9)"}),u.jsx("div",{className:"flex gap-1 flex-wrap",children:[1,2,3,4,5,6,7,8,9].map(N=>u.jsx("button",{onClick:()=>g(N),className:`w-8 h-8 rounded-full text-sm font-bold border ${m===N?"bg-orange-500 text-white border-orange-600":"bg-white text-gray-500 border-gray-300"}`,children:N},N))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2",children:""}),u.jsx("textarea",{className:"w-full h-20 p-3 text-sm border rounded-lg focus:ring-2 focus:ring-orange-300 outline-none",placeholder:"...",value:h,onChange:N=>p(N.target.value)})]}),u.jsx("button",{onClick:()=>s(b.record_id,{satisfaction:m,reflection:h}),disabled:m===0,className:"w-full py-2 bg-orange-600 text-white rounded-lg font-bold text-sm hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m===0?"":""})]})]})]}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[u.jsx(iu,{className:"w-12 h-12 mb-3 opacity-20"}),u.jsx("p",{children:""})]})})]})]})})},qi="https://script.google.com/macros/s/AKfycbw3-nakNBi0t3W3_-XtQmztYqq9qAj0ZOaGpXKZG41eZfhYjNfIM5xuVXwzSLa1_X3hfA/exec",RC=({user:t,userRole:e,userProfile:n})=>{const[r,s]=$.useState([]),i=["teacher","admin"].includes(e),[o,l]=$.useState(i?"":t==null?void 0:t.email),[c,h]=$.useState(t==null?void 0:t.displayName),[p,m]=$.useState(""),[g,b]=$.useState("records"),[A,k]=$.useState("pre_training"),[N,x]=$.useState({items:[],records:{},periods:{}}),[_,I]=$.useState({}),[j,F]=$.useState(!1),[U,E]=$.useState({}),[y,w]=$.useState(null),[T,C]=$.useState(!1),[P,S]=$.useState({itemId:"",itemName:"",status:"pass",date:"",note:""}),[q,V]=$.useState(!1),[G,J]=$.useState(null);$.useEffect(()=>{i&&(async()=>{try{const se=up(Jr(_t,"users"),BA("role","==","student")),me=(await GA(se)).docs.map(Ye=>Ye.data());if(s(me),me.length>0){const Ye=me.some(Tt=>Tt.email===o);(!o||!Ye)&&l(me[0].email)}}catch(se){console.error(":",se)}})()},[e]),$.useEffect(()=>{if(i){if(r.length>0&&o){const W=r.find(se=>se.email===o);W&&(h(W.displayName||W.email),m(W.arrivalDate||""))}}else h((n==null?void 0:n.displayName)||t.displayName),m((n==null?void 0:n.arrivalDate)||"")},[o,r,e,n,t]),$.useEffect(()=>{o&&g==="records"&&O(o)},[o,g]);const O=async W=>{if(w(null),!!W){F(!0);try{const we=await(await fetch(`${qi}?type=getData&studentEmail=${W}`)).json();if(we.status==="error")throw new Error(we.message);if(x(we),I(we.periods||{}),we.items&&we.items.length>0){const me=we.items[0].category_id;Object.keys(U).length===0&&E(Ye=>({...Ye,[me]:!0}))}}catch(se){console.error(":",se),w("")}F(!1)}},Y=W=>{if(!i)return;const se=new Date().toISOString().split("T")[0];S({itemId:W.id,itemName:W.sub_item||W.title,status:"pass",date:se,note:""}),C(!0)},z=async()=>{V(!0);const W=(n==null?void 0:n.displayName)||t.displayName||t.email.split("@")[0];try{await fetch(qi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({type:"saveEval",studentEmail:o,itemId:P.itemId,status:P.status,assessDate:P.date,teacherName:W,note:P.note})}),await O(o),C(!1),alert("")}catch{alert("")}V(!1)},Z=(W,se,we)=>{I(me=>({...me,[W]:{...me[W],[se]:we}}))},re=async W=>{J(W);const se=_[W];try{await fetch(qi,{method:"POST",body:JSON.stringify({type:"savePeriod",studentEmail:o,categoryId:W,startDate:(se==null?void 0:se.startDate)||"",endDate:(se==null?void 0:se.endDate)||"",updatedBy:(n==null?void 0:n.displayName)||t.displayName})}),await O(o)}catch{alert("")}J(null)},fe=W=>{E(se=>({...se,[W]:!se[W]}))},Be=(N.items||[]).reduce((W,se)=>(W[se.category_id]||(W[se.category_id]={id:se.category_id,title:se.category_name,items:[]}),W[se.category_id].items.push(se),W),{}),le=(W,se=!1)=>{const we=N.records[W.id]||{},me=we.status;return u.jsxs("div",{className:`p-3 pl-4 flex flex-col sm:flex-row sm:items-center justify-between gap-2 hover:bg-gray-50 border-b border-gray-50 last:border-0 ${se?"bg-white":""}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:`text-sm flex items-start gap-2 ${se?"font-bold text-gray-700":"font-medium text-gray-800"}`,children:[u.jsx("span",{className:"mt-1",children:se?u.jsx(Ww,{className:"w-4 h-4 text-gray-500"}):u.jsx(iC,{className:"w-2 h-2 text-gray-300 fill-gray-300 mt-1"})}),W.sub_item||W.title]}),we.teacher&&u.jsxs("p",{className:"text-xs text-green-600 mt-1 ml-6 flex items-center gap-1",children:[u.jsx(vC,{className:"w-3 h-3"})," ",we.teacher," (",new Date(we.date).toLocaleDateString(),")",we.note&&u.jsxs("span",{className:"text-gray-400",children:[" - ",we.note]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-6 sm:ml-0",children:[me==="pass"&&u.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold flex items-center gap-1",children:[u.jsx(pp,{className:"w-3 h-3"})," "]}),me==="improve"&&u.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold flex items-center gap-1",children:[u.jsx(ru,{className:"w-3 h-3"})," "]}),i&&u.jsx("button",{onClick:()=>Y(W),className:"px-3 py-1 border border-indigo-200 text-indigo-600 hover:bg-indigo-50 rounded-md text-xs font-bold transition-colors",children:me?"":""})]})]},W.id)},Oe=W=>{const se={},we=[];return W.forEach(me=>{se[me.title]||(se[me.title]=[],we.push(me.title)),se[me.title].push(me)}),we.map((me,Ye)=>{const Tt=se[me],Hn=Tt.length>1||Tt[0]&&Tt[0].sub_item;return u.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-100 rounded-lg overflow-hidden shadow-sm",children:[Hn&&u.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-bold text-gray-700 text-sm flex items-center gap-2",children:[u.jsx(uC,{className:"w-4 h-4 text-gray-500"}),me]}),u.jsx("div",{className:"bg-white",children:Tt.map(Kt=>le(Kt,!Hn))})]},Ye)})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-xl shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:u.jsx(ar,{className:"w-6 h-6 text-indigo-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:""}),u.jsx("p",{className:"text-xs text-gray-500",children:i?"":""})]})]}),u.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[i?u.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200",children:[u.jsx(Cr,{className:"w-4 h-4 text-gray-400"}),u.jsx("select",{value:o,onChange:W=>l(W.target.value),className:"bg-transparent text-sm font-bold text-gray-700 outline-none min-w-[150px]",children:r.length>0?r.map(W=>u.jsx("option",{value:W.email,children:W.displayName||W.email},W.email)):u.jsx("option",{disabled:!0,children:"..."})})]}):u.jsxs("div",{className:"px-4 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-bold flex items-center gap-2",children:[u.jsx(Cr,{className:"w-4 h-4"})," ",c]}),p&&u.jsxs("div",{className:"px-4 py-1.5 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium flex items-center gap-2",children:[u.jsx(fp,{className:"w-3.5 h-3.5"})," ",p]})]})]}),u.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[u.jsxs("button",{onClick:()=>b("records"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold transition-all border-b-2 ${g==="records"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[u.jsx(oC,{className:"w-4 h-4"}),""]}),u.jsxs("button",{onClick:()=>b("assessment"),className:`flex items-center gap-2 px-6 py-3 text-sm font-bold transition-all border-b-2 ${g==="assessment"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[u.jsx(lC,{className:"w-4 h-4"}),""]})]}),y&&u.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4 rounded text-red-700 text-sm font-bold flex items-center gap-2",children:[u.jsx(ru,{className:"w-5 h-5"})," ",y]}),g==="records"?u.jsx("div",{className:"space-y-4",children:j?u.jsxs("div",{className:"text-center py-12 text-gray-400 flex flex-col items-center",children:[u.jsx($o,{className:"w-8 h-8 animate-spin mb-2"}),u.jsx("p",{children:"..."})]}):Object.values(Be).length>0?Object.values(Be).map(W=>{const se=U[W.id],we=W.items.length>0?Math.round(W.items.filter(Kt=>{var ms;return((ms=N.records[Kt.id])==null?void 0:ms.status)==="pass"}).length/W.items.length*100):0,me=N.periods[W.id]||{},Ye=_[W.id]||me,Tt=G===W.id,Hn=Ye.startDate!==me.startDate||Ye.endDate!==me.endDate;return u.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white",children:[u.jsxs("div",{className:"p-4 bg-gray-50 flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[u.jsxs("button",{onClick:()=>fe(W.id),className:"flex items-center gap-3 hover:text-indigo-600 transition-colors text-left flex-1",children:[se?u.jsx(fl,{className:"w-5 h-5 text-gray-400"}):u.jsx(zo,{className:"w-5 h-5 text-gray-400"}),u.jsx("div",{children:u.jsx("span",{className:"font-bold text-gray-700 block sm:inline",children:W.title})}),u.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${we===100?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:[we,"%"]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm bg-white p-1.5 rounded-lg border border-gray-200 shadow-sm self-start sm:self-auto",children:[u.jsx(Hw,{className:"w-3.5 h-3.5 text-gray-400"}),i?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"date",className:"bg-transparent w-24 sm:w-auto outline-none",value:Ye.startDate||"",onChange:Kt=>Z(W.id,"startDate",Kt.target.value)}),u.jsx("span",{className:"text-gray-300",children:""}),u.jsx("input",{type:"date",className:"bg-transparent w-24 sm:w-auto outline-none",value:Ye.endDate||"",onChange:Kt=>Z(W.id,"endDate",Kt.target.value)}),(Hn||Tt)&&u.jsx("button",{onClick:()=>re(W.id),disabled:Tt,className:"ml-1 p-1 rounded-full bg-indigo-100 text-indigo-600",children:Tt?u.jsx($o,{className:"w-3 h-3 animate-spin"}):u.jsx(Ku,{className:"w-3 h-3"})})]}):u.jsxs("span",{children:[me.startDate||"--","  ",me.endDate||"--"]})]})]}),se&&u.jsx("div",{className:"bg-white p-3 border-t border-gray-100",children:Oe(W.items)})]},W.id)}):u.jsx("div",{className:"text-center py-8 text-gray-400 border border-dashed rounded-lg bg-gray-50",children:" "})}):u.jsxs("div",{className:"animate-in fade-in duration-300",children:[u.jsx("div",{className:"mb-6 overflow-x-auto pb-2 scrollbar-hide",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>k("pre_training"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${A==="pre_training"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[u.jsx(fC,{className:"w-4 h-4"}),""]}),u.jsxs("button",{onClick:()=>k("epa"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${A==="epa"?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[u.jsx(qw,{className:"w-4 h-4"}),"EPA "]})]})}),A==="pre_training"?u.jsx(kC,{studentEmail:o,studentName:c,userRole:e,currentUserEmail:t==null?void 0:t.email,currentUserName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName),gasApiUrl:qi}):u.jsx(CC,{studentEmail:o,studentName:c,isTeacher:i,userProfile:n,apiUrl:qi})]})]}),T&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>C(!1),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden",onClick:W=>W.stopPropagation(),children:[u.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[u.jsx("h3",{className:"font-bold text-gray-800",children:""}),u.jsx("button",{onClick:()=>C(!1),children:u.jsx(ci,{className:"w-5 h-5 text-gray-400"})})]}),u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),u.jsx("p",{className:"font-bold",children:P.itemName})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),u.jsx("input",{type:"date",value:P.date,onChange:W=>S({...P,date:W.target.value}),className:"w-full border rounded p-2"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>S({...P,status:"pass"}),className:`flex-1 py-2 rounded border font-bold ${P.status==="pass"?"bg-green-100 text-green-700":"bg-white"}`,children:""}),u.jsx("button",{onClick:()=>S({...P,status:"improve"}),className:`flex-1 py-2 rounded border font-bold ${P.status==="improve"?"bg-orange-100 text-orange-700":"bg-white"}`,children:""})]}),u.jsx("button",{onClick:z,disabled:q,className:"w-full py-2 bg-indigo-600 text-white rounded font-bold",children:q?"...":""})]})]})})]})},jC=({editData:t=null,onCancelEdit:e,onSuccess:n,settings:r={quickKeywords:[],categories:[]}})=>{const[s,i]=$.useState(!1),[o,l]=$.useState("sop"),[c,h]=$.useState({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""}),p=r.quickKeywords||[],m=r.categories||[];$.useEffect(()=>{t?(l(t.type||"sop"),h({title:t.title||"",category:t.category||"",content:t.content||"",url:t.url||"",attachmentUrl:t.attachmentUrl||"",keywords:t.keywords||[],description:t.description||""})):h({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""})},[t]);const g=k=>{h({...c,[k.target.name]:k.target.value})},b=k=>{h(N=>{const x=N.keywords||[];return x.includes(k)?{...N,keywords:x.filter(_=>_!==k)}:{...N,keywords:[...x,k]}})},A=async k=>{k.preventDefault(),i(!0);try{if(!c.title||!c.category){alert(""),i(!1);return}if(o==="video"&&!c.url){alert(""),i(!1);return}const N={title:c.title,category:c.category,keywords:c.keywords,description:c.description,updatedAt:Jy()};o==="sop"?(N.content=c.content,N.attachmentUrl=c.attachmentUrl):N.url=c.url;const x=o==="sop"?"sop_articles":"training_videos";t?(await mo(Cn(_t,x,t.id),N),alert(`${o==="sop"?"SOP":""} `)):(N.createdAt=Jy(),await QA(Jr(_t,x),N),alert(`${o==="sop"?"SOP":""} `)),h({title:"",category:"",content:"",url:"",attachmentUrl:"",keywords:[],description:""}),n&&n()}catch(N){console.error("Error saving document: ",N),alert("")}finally{i(!1)}};return u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:t?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-indigo-600 mr-2",children:""})," ",o==="sop"?"SOP ":""]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-green-600 mr-2",children:""}),""]})}),t&&u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 font-medium text-sm px-3 py-1 bg-gray-100 rounded-md",children:""})]}),u.jsxs("form",{onSubmit:A,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsxs("label",{className:`flex-1 flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${o==="sop"?"border-blue-500 bg-blue-50 text-blue-700 font-bold":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[u.jsx("input",{type:"radio",name:"resourceType",value:"sop",checked:o==="sop",onChange:()=>l("sop"),disabled:!!t,className:"hidden"})," SOP "]}),u.jsxs("label",{className:`flex-1 flex items-center justify-center p-3 rounded-lg border-2 cursor-pointer transition-all ${o==="video"?"border-purple-500 bg-purple-50 text-purple-700 font-bold":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[u.jsx("input",{type:"radio",name:"resourceType",value:"video",checked:o==="video",onChange:()=>l("video"),disabled:!!t,className:"hidden"})," "]})]})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),u.jsx("input",{type:"text",name:"title",value:c.title,onChange:g,placeholder:o==="sop"?"":"",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),u.jsx("div",{className:"relative",children:u.jsxs("select",{name:"category",value:c.category,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none bg-white",required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:""}),m.length>0?m.map((k,N)=>u.jsx("option",{value:k,children:k},N)):u.jsx("option",{value:"",children:" ()"})]})})]})]}),o==="sop"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"SOP "}),u.jsx("textarea",{name:"content",value:c.content,onChange:g,rows:"5",placeholder:"SOP...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-gray-700 font-bold mb-2",children:["SOP  ",u.jsx("span",{className:"text-gray-400 font-normal text-sm",children:"()"})]}),u.jsx("input",{type:"url",name:"attachmentUrl",value:c.attachmentUrl,onChange:g,placeholder:"Google Drive PDF ...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-600"})]})]}),o==="video"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),u.jsx("input",{type:"url",name:"url",value:c.url,onChange:g,placeholder:"https://...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:" ()"}),u.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg border border-gray-100",children:p.length>0?p.map((k,N)=>u.jsx("button",{type:"button",onClick:()=>b(k),className:`px-3 py-1 rounded-full text-sm transition-colors border ${c.keywords.includes(k)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:border-blue-400"}`,children:k},N)):u.jsx("span",{className:"text-gray-400 text-sm",children:""})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:""}),u.jsx("input",{type:"text",name:"description",value:c.description,onChange:g,placeholder:"...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),u.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 rounded-lg font-bold text-lg text-white shadow-lg ${o==="sop"?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"}`,children:s?"...":t?"":""})]})]})},Jc=["amanhung0419@gmail.com","admin@example.com"],DC=({user:t})=>{var P,S;const[e,n]=$.useState("resources"),[r,s]=$.useState([]),[i,o]=$.useState([]),[l,c]=$.useState([]),[h,p]=$.useState({quickKeywords:[],categories:[]}),[m,g]=$.useState(null),[b,A]=$.useState(null),[k,N]=$.useState(null),[x,_]=$.useState({displayName:"",arrivalDate:"",role:"student"}),[I,j]=$.useState(""),[F,U]=$.useState("");$.useEffect(()=>{const q=Ms(Jr(_t,"sop_articles"),V=>{const G=V.docs.map(J=>({id:J.id,...J.data()}));s(G)});return()=>q()},[]),$.useEffect(()=>{const q=Ms(Jr(_t,"training_videos"),V=>{const G=V.docs.map(J=>({id:J.id,...J.data()}));o(G)});return()=>q()},[]),$.useEffect(()=>{const q=Cn(_t,"site_settings","sop_config"),V=Ms(q,G=>{G.exists()?p(G.data()):Uw(q,{quickKeywords:[],categories:[]})});return()=>V()},[]),$.useEffect(()=>{const q=Ms(Jr(_t,"users"),V=>{const G=V.docs.map(J=>({id:J.id,...J.data()}));c(G)});return()=>q()},[]);const E=async(q,V)=>{if(window.confirm(""))try{await KA(Cn(_t,q,V)),b&&b.id===V&&A(null)}catch{alert("")}},y=(q,V)=>{A({...q,type:V}),window.scrollTo({top:0,behavior:"smooth"})},w=async(q,V,G)=>{var O;if(!G.trim())return;const J=Cn(_t,"site_settings","sop_config");try{if(V==="add"){if((O=h[q])!=null&&O.includes(G))return alert("");await mo(J,{[q]:XA(G)})}else V==="remove"&&window.confirm(` "${G}"?`)&&await mo(J,{[q]:YA(G)})}catch{alert("")}},T=q=>{N(q),_({displayName:q.displayName||"",arrivalDate:q.arrivalDate||"",role:q.role||"student"})},C=async q=>{if(q.preventDefault(),!!k){if(Jc.includes(k.email)&&x.role!=="teacher"){alert("()");return}try{await mo(Cn(_t,"users",k.id),{displayName:x.displayName,arrivalDate:x.arrivalDate,role:x.role}),N(null),alert("")}catch(V){console.error(V),alert("")}}};return u.jsxs("div",{className:"bg-gray-50 min-h-screen p-0 md:p-6",children:[u.jsxs("div",{className:"max-w-6xl mx-auto space-y-4 md:space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center bg-white p-4 md:p-6 md:rounded-lg shadow-sm border-b md:border-0 border-gray-100",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800",children:""}),u.jsxs("p",{className:"text-gray-500 text-xs md:text-sm mt-1",children:["",r.length," SOP, ",i.length," , ",l.length," "]})]}),u.jsxs("div",{className:"space-x-2",children:[u.jsx("button",{onClick:()=>n("resources"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-sm font-medium transition-colors ${e==="resources"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:""}),u.jsx("button",{onClick:()=>n("settings"),className:`px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-sm font-medium transition-colors ${e==="settings"?"bg-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600"}`,children:""})]})]}),m&&u.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded text-red-700 font-bold mx-4 md:mx-0",children:m}),e==="resources"&&u.jsxs("div",{className:"space-y-4 md:space-y-8",children:[u.jsx(jC,{editData:b,onCancelEdit:()=>A(null),onSuccess:()=>A(null),settings:h}),u.jsxs("div",{className:"bg-white md:rounded-lg shadow-sm overflow-hidden border-t md:border-t-0 border-gray-100",children:[u.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-gray-100 bg-blue-50 flex justify-between items-center",children:u.jsxs("h3",{className:"font-bold text-blue-800 text-sm md:text-base",children:["SOP  (",r.length,")"]})}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:r.map(q=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 md:px-6 py-4",children:q.title}),u.jsx("td",{className:"px-4 md:px-6 py-4",children:u.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:q.category})}),u.jsx("td",{className:"px-4 md:px-6 py-4",children:q.attachmentUrl?u.jsxs("a",{href:q.attachmentUrl,target:"_blank",rel:"noreferrer",className:"text-blue-500 flex items-center gap-1",children:[u.jsx(Gw,{className:"w-3 h-3"}),""]}):"-"}),u.jsxs("td",{className:"px-4 md:px-6 py-4 text-right space-x-2",children:[u.jsx("button",{onClick:()=>y(q,"sop"),className:"text-indigo-600 font-medium text-xs md:text-sm",children:""}),u.jsx("button",{onClick:()=>E("sop_articles",q.id),className:"text-red-600 font-medium text-xs md:text-sm",children:""})]})]},q.id))})]})})]}),u.jsxs("div",{className:"bg-white md:rounded-lg shadow-sm overflow-hidden border-t md:border-t-0 border-gray-100",children:[u.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-gray-100 bg-purple-50 flex justify-between items-center",children:u.jsxs("h3",{className:"font-bold text-purple-800 text-sm md:text-base",children:[" (",i.length,")"]})}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map(q=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 md:px-6 py-4",children:q.title}),u.jsx("td",{className:"px-4 md:px-6 py-4",children:u.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:q.category})}),u.jsxs("td",{className:"px-4 md:px-6 py-4 text-right space-x-2",children:[u.jsx("button",{onClick:()=>y(q,"video"),className:"text-indigo-600 font-medium text-xs md:text-sm",children:""}),u.jsx("button",{onClick:()=>E("training_videos",q.id),className:"text-red-600 font-medium text-xs md:text-sm",children:""})]})]},q.id))})]})})]})]}),e==="settings"&&u.jsxs("div",{className:"space-y-4 md:space-y-8",children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-8",children:[u.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm",children:[u.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4",children:" "}),u.jsxs("div",{className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",value:I,onChange:q=>j(q.target.value),placeholder:"...",className:"flex-1 px-4 py-2 border rounded-lg text-sm"}),u.jsx("button",{onClick:()=>{w("quickKeywords","add",I),j("")},className:"bg-teal-600 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:(P=h.quickKeywords)==null?void 0:P.map((q,V)=>u.jsxs("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs md:text-sm flex items-center",children:[q,u.jsx("button",{onClick:()=>w("quickKeywords","remove",q),className:"ml-2 text-gray-400 hover:text-red-500",children:""})]},V))})]}),u.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm",children:[u.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4",children:" "}),u.jsxs("div",{className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",value:F,onChange:q=>U(q.target.value),placeholder:"...",className:"flex-1 px-4 py-2 border rounded-lg text-sm"}),u.jsx("button",{onClick:()=>{w("categories","add",F),U("")},className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:""})]}),u.jsx("div",{className:"flex flex-col gap-2",children:(S=h.categories)==null?void 0:S.map((q,V)=>u.jsxs("div",{className:"flex justify-between bg-blue-50 px-3 py-2 rounded-lg text-sm",children:[u.jsx("span",{className:"text-blue-800",children:q}),u.jsx("button",{onClick:()=>w("categories","remove",q),className:"text-red-400 hover:text-red-600",children:""})]},V))})]})]}),u.jsxs("div",{className:"bg-white p-4 md:p-6 md:rounded-lg shadow-sm border-t md:border border-gray-200",children:[u.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx(Xw,{className:"w-5 h-5 text-indigo-600"})," "]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap md:whitespace-normal",children:[u.jsx("thead",{className:"bg-gray-50 text-gray-600 uppercase border-b border-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3",children:""}),u.jsx("th",{className:"px-4 md:px-6 py-3 text-right",children:""})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:l.map(q=>{const V=q.role==="teacher",G=Jc.includes(q.email);return u.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${G?"bg-indigo-50/50":""}`,children:[u.jsxs("td",{className:"px-4 md:px-6 py-4",children:[u.jsxs("div",{className:"flex items-center gap-2 font-medium text-gray-900",children:[u.jsx("img",{src:q.photoURL||"https://via.placeholder.com/32",alt:"",className:"w-6 h-6 rounded-full"}),q.displayName||"",G&&u.jsx(e0,{className:"w-3 h-3 text-amber-500"})]}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:q.email})]}),u.jsx("td",{className:"px-4 md:px-6 py-4 text-gray-600 font-mono",children:q.arrivalDate||"-"}),u.jsx("td",{className:"px-4 md:px-6 py-4",children:G?u.jsx("span",{className:"inline-flex items-center gap-1 bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-bold border border-purple-200",children:""}):V?u.jsx("span",{className:"inline-flex items-center gap-1 bg-emerald-100 text-emerald-800 px-2 py-1 rounded-full text-xs font-bold",children:""}):u.jsx("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:"PGY "})}),u.jsx("td",{className:"px-4 md:px-6 py-4 text-right",children:u.jsxs("button",{onClick:()=>T(q),className:"px-3 py-1 bg-gray-100 hover:bg-indigo-50 text-indigo-600 rounded-md text-xs font-medium border border-gray-200 flex items-center gap-1 ml-auto",children:[u.jsx(Qw,{className:"w-3 h-3"})," ",u.jsx("span",{className:"hidden sm:inline",children:""})]})})]},q.id)})})]})})]})]})]}),k&&u.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>N(null),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:q=>q.stopPropagation(),children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:""}),u.jsx("button",{onClick:()=>N(null),children:u.jsx(ci,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]}),u.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Email ()"}),u.jsx("input",{type:"text",value:k.email,disabled:!0,className:"w-full px-4 py-2 border bg-gray-100 rounded-lg text-gray-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),u.jsx("input",{type:"text",value:x.displayName,onChange:q=>_({...x,displayName:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),u.jsx("input",{type:"date",value:x.arrivalDate,onChange:q=>_({...x,arrivalDate:q.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>_({...x,role:"student"}),className:`flex-1 py-2 rounded-lg border text-sm font-bold ${x.role==="student"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200"}`,children:"PGY "}),u.jsx("button",{type:"button",onClick:()=>_({...x,role:"teacher"}),className:`flex-1 py-2 rounded-lg border text-sm font-bold ${x.role==="teacher"?"bg-emerald-600 text-white border-emerald-600":"bg-white text-gray-600 border-gray-200"}`,children:""})]}),Jc.includes(k.email)&&u.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium flex items-center gap-1",children:[u.jsx(e0,{className:"w-3 h-3"})," "]})]}),u.jsx("div",{className:"pt-4",children:u.jsx("button",{type:"submit",className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700",children:""})})]})]})})]})};function VC(){const[t,e]=$.useState(null),[n,r]=$.useState(null),[s,i]=$.useState("student"),[o,l]=$.useState("lookup"),[c,h]=$.useState(!1),[p,m]=$.useState(!0),[g,b]=$.useState(!1),[A,k]=$.useState({displayName:"",arrivalDate:""}),N=["teacher","admin"].includes(s),x=async()=>{try{const y=new In;y.setCustomParameters({prompt:"select_account"});const w=await q2(Yc,y);console.log(":",w.user.email)}catch(y){console.error(":",y),alert(`: ${y.message}`)}},_=async()=>{try{await b2(Yc),e(null),r(null),i("student"),l("lookup")}catch(y){console.error("Logout failed:",y)}};$.useEffect(()=>{const y=T2(Yc,async w=>{if(m(!0),w){e(w);const T=Cn(_t,"users",w.uid);try{const C=await Fw(T);if(C.exists()){const P=C.data();r(P),i(P.role||"student")}else{const P={email:w.email,displayName:w.displayName,photoURL:w.photoURL,role:"student",arrivalDate:"",createdAt:new Date().toISOString()};await Uw(T,P),r(P),i("student")}}catch(C){console.error("Error fetching user data:",C)}}else e(null),r(null),i("student");m(!1)});return()=>y()},[]);const I=()=>{k({displayName:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||"",arrivalDate:(n==null?void 0:n.arrivalDate)||""}),b(!0),h(!1)},j=async y=>{if(y.preventDefault(),!!t)try{const w=Cn(_t,"users",t.uid);await mo(w,{displayName:A.displayName,arrivalDate:A.arrivalDate}),r(T=>({...T,displayName:A.displayName,arrivalDate:A.arrivalDate})),b(!1),alert("")}catch(w){console.error(":",w),alert("")}},F=()=>s==="admin"?"":s==="teacher"?"":"PGY ",U=()=>s==="admin"?"text-purple-600 font-bold":s==="teacher"?"text-emerald-600 font-bold":"text-gray-500";if(p)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"..."})]})});if(!t)return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 p-4",children:[u.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-indigo-50",children:[u.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx(ar,{className:"w-10 h-10 text-indigo-600"})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:""}),u.jsxs("p",{className:"text-gray-500 mb-8",children:["",u.jsx("br",{})," SOP"]}),u.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md",children:[u.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-6 h-6",alt:"Google"})," Google "]})]}),u.jsxs("p",{className:"mt-8 text-sm text-gray-400",children:[" ",new Date().getFullYear()," Pharmacy Department Training System"]})]});const E=(n==null?void 0:n.displayName)||t.displayName;return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsxs("nav",{className:"bg-white shadow-sm sticky top-0 z-50 border-b border-indigo-100",children:[u.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between h-16",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:u.jsx(ar,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-800 hidden sm:block",children:""}),u.jsx("h1",{className:"text-xl font-bold text-gray-800 sm:hidden",children:"P.T.S"})]})]}),u.jsx("div",{className:"hidden md:flex items-center gap-1",children:[{id:"lookup",label:"SOP ",icon:iu},{id:"video",label:"",icon:ar},{id:"shift",label:"",icon:ar},{id:"passport",label:"",icon:Cr},...N?[{id:"admin",label:"",icon:gC}]:[]].map(y=>u.jsxs("button",{onClick:()=>l(y.id),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${o===y.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[y.icon&&u.jsx(y.icon,{className:"w-4 h-4"}),y.label]},y.id))}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"hidden sm:flex items-center gap-3 pl-4 border-l border-gray-200",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:E}),u.jsx("p",{className:`text-xs ${U()}`,children:F()})]}),u.jsx("div",{className:"relative group cursor-pointer",children:u.jsx("img",{src:t.photoURL,alt:E,className:`w-9 h-9 rounded-full border-2 ${N?"border-emerald-400":"border-gray-200"}`,onClick:()=>h(!c)})})]}),u.jsx("button",{onClick:()=>h(!c),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md",children:c?u.jsx(ci,{className:"w-6 h-6"}):u.jsx(hC,{className:"w-6 h-6"})})]})]})}),c&&u.jsxs("div",{className:"absolute right-0 top-16 w-full md:w-64 bg-white shadow-lg border-b border-gray-100 md:rounded-bl-xl z-50 animate-in slide-in-from-top-2",children:[u.jsx("div",{className:"px-4 py-3 border-b border-gray-100 md:hidden",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:t.photoURL,alt:"Avatar",className:"w-10 h-10 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800",children:E}),u.jsx("p",{className:`text-xs ${U()}`,children:F()})]})]})}),u.jsxs("div",{className:"p-2 space-y-1",children:[u.jsx("div",{className:"md:hidden space-y-1 pb-2 mb-2 border-b border-gray-100",children:[{id:"lookup",label:"SOP "},{id:"video",label:""},{id:"shift",label:""},{id:"passport",label:""},...N?[{id:"admin",label:""}]:[]].map(y=>u.jsx("button",{onClick:()=>{l(y.id),h(!1)},className:`block w-full text-left px-3 py-2 rounded-md text-base font-medium ${o===y.id?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:y.label},y.id))}),u.jsxs("button",{onClick:I,className:"w-full text-left px-3 py-2 text-gray-700 font-medium flex items-center gap-2 hover:bg-indigo-50 hover:text-indigo-600 rounded-md transition-colors",children:[u.jsx(Cr,{className:"w-4 h-4"})," "]}),u.jsx("div",{className:"border-t border-gray-100 my-1"}),u.jsxs("button",{onClick:_,className:"w-full text-left px-3 py-2 text-red-600 font-medium flex items-center gap-2 hover:bg-red-50 rounded-md transition-colors",children:[u.jsx(dC,{className:"w-4 h-4"})," "]})]})]})]}),g&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>b(!1),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",onClick:y=>y.stopPropagation(),children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[u.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[u.jsx(Qw,{className:"w-5 h-5 text-indigo-600"})," "]}),u.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:u.jsx(ci,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" ()"}),u.jsx("input",{type:"text",value:A.displayName,onChange:y=>k({...A,displayName:y.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:""})]}),s==="student"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(fp,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"date",value:A.arrivalDate,onChange:y=>k({...A,arrivalDate:y.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),u.jsxs("div",{className:"pt-4 flex gap-3",children:[u.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:""}),u.jsxs("button",{type:"submit",className:"flex-1 py-2 text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg font-medium flex justify-center items-center gap-2",children:[u.jsx(Ku,{className:"w-4 h-4"})," "]})]})]})]})}),u.jsxs("main",{className:"max-w-7xl mx-auto px-0 sm:px-6 lg:px-8 py-0 sm:py-8",children:[o==="lookup"&&u.jsx(TC,{}),o==="video"&&u.jsx(bC,{}),o==="shift"&&u.jsx(SC,{}),o==="passport"&&u.jsx(RC,{user:t,userRole:s,userProfile:n}),o==="admin"&&N&&u.jsx(DC,{user:t})]})]})}y_(document.getElementById("root")).render(u.jsx($.StrictMode,{children:u.jsx(VC,{})}));
